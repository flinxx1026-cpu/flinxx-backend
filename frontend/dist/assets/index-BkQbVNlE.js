function lE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function cE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oy={exports:{}},vc={},Dy={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qo=Symbol.for("react.element"),uE=Symbol.for("react.portal"),dE=Symbol.for("react.fragment"),hE=Symbol.for("react.strict_mode"),fE=Symbol.for("react.profiler"),pE=Symbol.for("react.provider"),mE=Symbol.for("react.context"),gE=Symbol.for("react.forward_ref"),yE=Symbol.for("react.suspense"),vE=Symbol.for("react.memo"),wE=Symbol.for("react.lazy"),Jp=Symbol.iterator;function _E(t){return t===null||typeof t!="object"?null:(t=Jp&&t[Jp]||t["@@iterator"],typeof t=="function"?t:null)}var Ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},My=Object.assign,Fy={};function ms(t,e,n){this.props=t,this.context=e,this.refs=Fy,this.updater=n||Ly}ms.prototype.isReactComponent={};ms.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ms.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vy(){}Vy.prototype=ms.prototype;function kh(t,e,n){this.props=t,this.context=e,this.refs=Fy,this.updater=n||Ly}var Ah=kh.prototype=new Vy;Ah.constructor=kh;My(Ah,ms.prototype);Ah.isPureReactComponent=!0;var Xp=Array.isArray,Uy=Object.prototype.hasOwnProperty,bh={current:null},By={key:!0,ref:!0,__self:!0,__source:!0};function zy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Uy.call(e,r)&&!By.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Qo,type:t,key:s,ref:o,props:i,_owner:bh.current}}function xE(t,e){return{$$typeof:Qo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qo}function EE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zp=/\/+/g;function gu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?EE(""+t.key):e.toString(36)}function il(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qo:case uE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+gu(o,0):r,Xp(i)?(n="",t!=null&&(n=t.replace(Zp,"$&/")+"/"),il(i,e,n,"",function(h){return h})):i!=null&&(Rh(i)&&(i=xE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Zp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Xp(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+gu(s,l);o+=il(s,e,n,c,i)}else if(c=_E(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+gu(s,l++),o+=il(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ja(t,e,n){if(t==null)return t;var r=[],i=0;return il(t,r,"","",function(s){return e.call(n,s,i++)}),r}function IE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},sl={transition:null},SE={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:sl,ReactCurrentOwner:bh};function $y(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:ja,forEach:function(t,e,n){ja(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ja(t,function(){e++}),e},toArray:function(t){return ja(t,function(e){return e})||[]},only:function(t){if(!Rh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=ms;ce.Fragment=dE;ce.Profiler=fE;ce.PureComponent=kh;ce.StrictMode=hE;ce.Suspense=yE;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SE;ce.act=$y;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=My({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Uy.call(e,c)&&!By.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Qo,type:t.type,key:i,ref:s,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:mE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pE,_context:t},t.Consumer=t};ce.createElement=zy;ce.createFactory=function(t){var e=zy.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:gE,render:t}};ce.isValidElement=Rh;ce.lazy=function(t){return{$$typeof:wE,_payload:{_status:-1,_result:t},_init:IE}};ce.memo=function(t,e){return{$$typeof:vE,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=sl.transition;sl.transition={};try{t()}finally{sl.transition=e}};ce.unstable_act=$y;ce.useCallback=function(t,e){return jt.current.useCallback(t,e)};ce.useContext=function(t){return jt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return jt.current.useEffect(t,e)};ce.useId=function(){return jt.current.useId()};ce.useImperativeHandle=function(t,e,n){return jt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return jt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return jt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return jt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return jt.current.useReducer(t,e,n)};ce.useRef=function(t){return jt.current.useRef(t)};ce.useState=function(t){return jt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return jt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return jt.current.useTransition()};ce.version="18.3.1";Dy.exports=ce;var R=Dy.exports;const Yo=cE(R),CE=lE({__proto__:null,default:Yo},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE=R,kE=Symbol.for("react.element"),AE=Symbol.for("react.fragment"),bE=Object.prototype.hasOwnProperty,RE=TE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NE={key:!0,ref:!0,__self:!0,__source:!0};function Wy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bE.call(e,r)&&!NE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:kE,type:t,key:s,ref:o,props:i,_owner:RE.current}}vc.Fragment=AE;vc.jsx=Wy;vc.jsxs=Wy;Oy.exports=vc;var u=Oy.exports,sd={},Hy={exports:{}},Xt={},Gy={exports:{}},qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,X){var te=H.length;H.push(X);e:for(;0<te;){var we=te-1>>>1,F=H[we];if(0<i(F,X))H[we]=X,H[te]=F,te=we;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var X=H[0],te=H.pop();if(te!==X){H[0]=te;e:for(var we=0,F=H.length,Q=F>>>1;we<Q;){var ae=2*(we+1)-1,Ue=H[ae],Ie=ae+1,Qe=H[Ie];if(0>i(Ue,te))Ie<F&&0>i(Qe,Ue)?(H[we]=Qe,H[Ie]=te,we=Ie):(H[we]=Ue,H[ae]=te,we=ae);else if(Ie<F&&0>i(Qe,te))H[we]=Qe,H[Ie]=te,we=Ie;else break e}}return X}function i(H,X){var te=H.sortIndex-X.sortIndex;return te!==0?te:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,y=3,T=!1,b=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(H){for(var X=n(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=H)r(h),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(h)}}function O(H){if(k=!1,x(H),!b)if(n(c)!==null)b=!0,Dt(V);else{var X=n(h);X!==null&&bt(O,X.startTime-H)}}function V(H,X){b=!1,k&&(k=!1,I(g),g=-1),T=!0;var te=y;try{for(x(X),m=n(c);m!==null&&(!(m.expirationTime>X)||H&&!A());){var we=m.callback;if(typeof we=="function"){m.callback=null,y=m.priorityLevel;var F=we(m.expirationTime<=X);X=t.unstable_now(),typeof F=="function"?m.callback=F:m===n(c)&&r(c),x(X)}else r(c);m=n(c)}if(m!==null)var Q=!0;else{var ae=n(h);ae!==null&&bt(O,ae.startTime-X),Q=!1}return Q}finally{m=null,y=te,T=!1}}var D=!1,S=null,g=-1,w=5,E=-1;function A(){return!(t.unstable_now()-E<w)}function N(){if(S!==null){var H=t.unstable_now();E=H;var X=!0;try{X=S(!0,H)}finally{X?C():(D=!1,S=null)}}else D=!1}var C;if(typeof _=="function")C=function(){_(N)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Ke=oe.port2;oe.port1.onmessage=N,C=function(){Ke.postMessage(null)}}else C=function(){P(N,0)};function Dt(H){S=H,D||(D=!0,C())}function bt(H,X){g=P(function(){H(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){b||T||(b=!0,Dt(V))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var te=y;y=X;try{return H()}finally{y=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=y;y=H;try{return X()}finally{y=te}},t.unstable_scheduleCallback=function(H,X,te){var we=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?we+te:we):te=we,H){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=te+F,H={id:p++,callback:X,priorityLevel:H,startTime:te,expirationTime:F,sortIndex:-1},te>we?(H.sortIndex=te,e(h,H),n(c)===null&&H===n(h)&&(k?(I(g),g=-1):k=!0,bt(O,te-we))):(H.sortIndex=F,e(c,H),b||T||(b=!0,Dt(V))),H},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(H){var X=y;return function(){var te=y;y=X;try{return H.apply(this,arguments)}finally{y=te}}}})(qy);Gy.exports=qy;var PE=Gy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE=R,Jt=PE;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ky=new Set,vo={};function _i(t,e){ns(t,e),ns(t+"Capture",e)}function ns(t,e){for(vo[t]=e,t=0;t<e.length;t++)Ky.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),od=Object.prototype.hasOwnProperty,OE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,em={},tm={};function DE(t){return od.call(tm,t)?!0:od.call(em,t)?!1:OE.test(t)?tm[t]=!0:(em[t]=!0,!1)}function LE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ME(t,e,n,r){if(e===null||typeof e>"u"||LE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ot(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new Ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new Ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new Ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new Ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new Ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new Ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new Ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new Ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new Ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nh=/[\-:]([a-z])/g;function Ph(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nh,Ph);yt[e]=new Ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nh,Ph);yt[e]=new Ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nh,Ph);yt[e]=new Ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function jh(t,e,n,r){var i=yt.hasOwnProperty(e)?yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ME(e,n,i,r)&&(n=null),r||i===null?DE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lr=jE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oa=Symbol.for("react.element"),ji=Symbol.for("react.portal"),Oi=Symbol.for("react.fragment"),Oh=Symbol.for("react.strict_mode"),ad=Symbol.for("react.profiler"),Qy=Symbol.for("react.provider"),Yy=Symbol.for("react.context"),Dh=Symbol.for("react.forward_ref"),ld=Symbol.for("react.suspense"),cd=Symbol.for("react.suspense_list"),Lh=Symbol.for("react.memo"),mr=Symbol.for("react.lazy"),Jy=Symbol.for("react.offscreen"),nm=Symbol.iterator;function Vs(t){return t===null||typeof t!="object"?null:(t=nm&&t[nm]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,yu;function Ys(t){if(yu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yu=e&&e[1]||""}return`
`+yu+t}var vu=!1;function wu(t,e){if(!t||vu)return"";vu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{vu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ys(t):""}function FE(t){switch(t.tag){case 5:return Ys(t.type);case 16:return Ys("Lazy");case 13:return Ys("Suspense");case 19:return Ys("SuspenseList");case 0:case 2:case 15:return t=wu(t.type,!1),t;case 11:return t=wu(t.type.render,!1),t;case 1:return t=wu(t.type,!0),t;default:return""}}function ud(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oi:return"Fragment";case ji:return"Portal";case ad:return"Profiler";case Oh:return"StrictMode";case ld:return"Suspense";case cd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yy:return(t.displayName||"Context")+".Consumer";case Qy:return(t._context.displayName||"Context")+".Provider";case Dh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lh:return e=t.displayName||null,e!==null?e:ud(t.type)||"Memo";case mr:e=t._payload,t=t._init;try{return ud(t(e))}catch{}}return null}function VE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ud(e);case 8:return e===Oh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UE(t){var e=Xy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Da(t){t._valueTracker||(t._valueTracker=UE(t))}function Zy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Xy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dd(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ev(t,e){e=e.checked,e!=null&&jh(t,"checked",e,!1)}function hd(t,e){ev(t,e);var n=Lr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fd(t,e.type,n):e.hasOwnProperty("defaultValue")&&fd(t,e.type,Lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function im(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fd(t,e,n){(e!=="number"||Al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Js=Array.isArray;function Hi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Js(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lr(n)}}function tv(t,e){var n=Lr(e.value),r=Lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function om(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function md(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var La,rv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(La=La||document.createElement("div"),La.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=La.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var no={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BE=["Webkit","ms","Moz","O"];Object.keys(no).forEach(function(t){BE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),no[e]=no[t]})});function iv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||no.hasOwnProperty(t)&&no[t]?(""+e).trim():e+"px"}function sv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=iv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var zE=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gd(t,e){if(e){if(zE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function yd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vd=null;function Mh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wd=null,Gi=null,qi=null;function am(t){if(t=Zo(t)){if(typeof wd!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Ic(e),wd(t.stateNode,t.type,e))}}function ov(t){Gi?qi?qi.push(t):qi=[t]:Gi=t}function av(){if(Gi){var t=Gi,e=qi;if(qi=Gi=null,am(t),e)for(t=0;t<e.length;t++)am(e[t])}}function lv(t,e){return t(e)}function cv(){}var _u=!1;function uv(t,e,n){if(_u)return t(e,n);_u=!0;try{return lv(t,e,n)}finally{_u=!1,(Gi!==null||qi!==null)&&(cv(),av())}}function _o(t,e){var n=t.stateNode;if(n===null)return null;var r=Ic(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var _d=!1;if(nr)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){_d=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{_d=!1}function $E(t,e,n,r,i,s,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var ro=!1,bl=null,Rl=!1,xd=null,WE={onError:function(t){ro=!0,bl=t}};function HE(t,e,n,r,i,s,o,l,c){ro=!1,bl=null,$E.apply(WE,arguments)}function GE(t,e,n,r,i,s,o,l,c){if(HE.apply(this,arguments),ro){if(ro){var h=bl;ro=!1,bl=null}else throw Error(B(198));Rl||(Rl=!0,xd=h)}}function xi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lm(t){if(xi(t)!==t)throw Error(B(188))}function qE(t){var e=t.alternate;if(!e){if(e=xi(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return lm(i),t;if(s===r)return lm(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function hv(t){return t=qE(t),t!==null?fv(t):null}function fv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fv(t);if(e!==null)return e;t=t.sibling}return null}var pv=Jt.unstable_scheduleCallback,cm=Jt.unstable_cancelCallback,KE=Jt.unstable_shouldYield,QE=Jt.unstable_requestPaint,Be=Jt.unstable_now,YE=Jt.unstable_getCurrentPriorityLevel,Fh=Jt.unstable_ImmediatePriority,mv=Jt.unstable_UserBlockingPriority,Nl=Jt.unstable_NormalPriority,JE=Jt.unstable_LowPriority,gv=Jt.unstable_IdlePriority,wc=null,On=null;function XE(t){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(wc,t,void 0,(t.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:tI,ZE=Math.log,eI=Math.LN2;function tI(t){return t>>>=0,t===0?32:31-(ZE(t)/eI|0)|0}var Ma=64,Fa=4194304;function Xs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Xs(l):(s&=o,s!==0&&(r=Xs(s)))}else o=n&~i,o!==0?r=Xs(o):s!==0&&(r=Xs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-En(e),i=1<<n,r|=t[n],e&=~i;return r}function nI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-En(s),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=nI(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Ed(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yv(){var t=Ma;return Ma<<=1,!(Ma&4194240)&&(Ma=64),t}function xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-En(e),t[e]=n}function iI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-En(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Vh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-En(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function vv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wv,Uh,_v,xv,Ev,Id=!1,Va=[],Sr=null,Cr=null,Tr=null,xo=new Map,Eo=new Map,yr=[],sI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function um(t,e){switch(t){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eo.delete(e.pointerId)}}function Bs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zo(e),e!==null&&Uh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function oI(t,e,n,r,i){switch(e){case"focusin":return Sr=Bs(Sr,t,e,n,r,i),!0;case"dragenter":return Cr=Bs(Cr,t,e,n,r,i),!0;case"mouseover":return Tr=Bs(Tr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xo.set(s,Bs(xo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Eo.set(s,Bs(Eo.get(s)||null,t,e,n,r,i)),!0}return!1}function Iv(t){var e=Xr(t.target);if(e!==null){var n=xi(e);if(n!==null){if(e=n.tag,e===13){if(e=dv(n),e!==null){t.blockedOn=e,Ev(t.priority,function(){_v(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vd=r,n.target.dispatchEvent(r),vd=null}else return e=Zo(n),e!==null&&Uh(e),t.blockedOn=n,!1;e.shift()}return!0}function dm(t,e,n){ol(t)&&n.delete(e)}function aI(){Id=!1,Sr!==null&&ol(Sr)&&(Sr=null),Cr!==null&&ol(Cr)&&(Cr=null),Tr!==null&&ol(Tr)&&(Tr=null),xo.forEach(dm),Eo.forEach(dm)}function zs(t,e){t.blockedOn===e&&(t.blockedOn=null,Id||(Id=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,aI)))}function Io(t){function e(i){return zs(i,t)}if(0<Va.length){zs(Va[0],t);for(var n=1;n<Va.length;n++){var r=Va[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Sr!==null&&zs(Sr,t),Cr!==null&&zs(Cr,t),Tr!==null&&zs(Tr,t),xo.forEach(e),Eo.forEach(e),n=0;n<yr.length;n++)r=yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)Iv(n),n.blockedOn===null&&yr.shift()}var Ki=lr.ReactCurrentBatchConfig,jl=!0;function lI(t,e,n,r){var i=_e,s=Ki.transition;Ki.transition=null;try{_e=1,Bh(t,e,n,r)}finally{_e=i,Ki.transition=s}}function cI(t,e,n,r){var i=_e,s=Ki.transition;Ki.transition=null;try{_e=4,Bh(t,e,n,r)}finally{_e=i,Ki.transition=s}}function Bh(t,e,n,r){if(jl){var i=Sd(t,e,n,r);if(i===null)Nu(t,e,r,Ol,n),um(t,r);else if(oI(i,t,e,n,r))r.stopPropagation();else if(um(t,r),e&4&&-1<sI.indexOf(t)){for(;i!==null;){var s=Zo(i);if(s!==null&&wv(s),s=Sd(t,e,n,r),s===null&&Nu(t,e,r,Ol,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Nu(t,e,r,null,n)}}var Ol=null;function Sd(t,e,n,r){if(Ol=null,t=Mh(r),t=Xr(t),t!==null)if(e=xi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ol=t,null}function Sv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YE()){case Fh:return 1;case mv:return 4;case Nl:case JE:return 16;case gv:return 536870912;default:return 16}default:return 16}}var xr=null,zh=null,al=null;function Cv(){if(al)return al;var t,e=zh,n=e.length,r,i="value"in xr?xr.value:xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return al=i.slice(t,1<r?1-r:void 0)}function ll(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ua(){return!0}function hm(){return!1}function Zt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ua:hm,this.isPropagationStopped=hm,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),e}var gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$h=Zt(gs),Xo=Me({},gs,{view:0,detail:0}),uI=Zt(Xo),Eu,Iu,$s,_c=Me({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$s&&($s&&t.type==="mousemove"?(Eu=t.screenX-$s.screenX,Iu=t.screenY-$s.screenY):Iu=Eu=0,$s=t),Eu)},movementY:function(t){return"movementY"in t?t.movementY:Iu}}),fm=Zt(_c),dI=Me({},_c,{dataTransfer:0}),hI=Zt(dI),fI=Me({},Xo,{relatedTarget:0}),Su=Zt(fI),pI=Me({},gs,{animationName:0,elapsedTime:0,pseudoElement:0}),mI=Zt(pI),gI=Me({},gs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yI=Zt(gI),vI=Me({},gs,{data:0}),pm=Zt(vI),wI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_I={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xI[t])?!!e[t]:!1}function Wh(){return EI}var II=Me({},Xo,{key:function(t){if(t.key){var e=wI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ll(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_I[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wh,charCode:function(t){return t.type==="keypress"?ll(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ll(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SI=Zt(II),CI=Me({},_c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mm=Zt(CI),TI=Me({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wh}),kI=Zt(TI),AI=Me({},gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),bI=Zt(AI),RI=Me({},_c,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NI=Zt(RI),PI=[9,13,27,32],Hh=nr&&"CompositionEvent"in window,io=null;nr&&"documentMode"in document&&(io=document.documentMode);var jI=nr&&"TextEvent"in window&&!io,Tv=nr&&(!Hh||io&&8<io&&11>=io),gm=" ",ym=!1;function kv(t,e){switch(t){case"keyup":return PI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Av(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Di=!1;function OI(t,e){switch(t){case"compositionend":return Av(e);case"keypress":return e.which!==32?null:(ym=!0,gm);case"textInput":return t=e.data,t===gm&&ym?null:t;default:return null}}function DI(t,e){if(Di)return t==="compositionend"||!Hh&&kv(t,e)?(t=Cv(),al=zh=xr=null,Di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tv&&e.locale!=="ko"?null:e.data;default:return null}}var LI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LI[t.type]:e==="textarea"}function bv(t,e,n,r){ov(r),e=Dl(e,"onChange"),0<e.length&&(n=new $h("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var so=null,So=null;function MI(t){Uv(t,0)}function xc(t){var e=Fi(t);if(Zy(e))return t}function FI(t,e){if(t==="change")return e}var Rv=!1;if(nr){var Cu;if(nr){var Tu="oninput"in document;if(!Tu){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),Tu=typeof wm.oninput=="function"}Cu=Tu}else Cu=!1;Rv=Cu&&(!document.documentMode||9<document.documentMode)}function _m(){so&&(so.detachEvent("onpropertychange",Nv),So=so=null)}function Nv(t){if(t.propertyName==="value"&&xc(So)){var e=[];bv(e,So,t,Mh(t)),uv(MI,e)}}function VI(t,e,n){t==="focusin"?(_m(),so=e,So=n,so.attachEvent("onpropertychange",Nv)):t==="focusout"&&_m()}function UI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xc(So)}function BI(t,e){if(t==="click")return xc(e)}function zI(t,e){if(t==="input"||t==="change")return xc(e)}function $I(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:$I;function Co(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!od.call(e,i)||!Cn(t[i],e[i]))return!1}return!0}function xm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Em(t,e){var n=xm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xm(n)}}function Pv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Pv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jv(){for(var t=window,e=Al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Al(t.document)}return e}function Gh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WI(t){var e=jv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Pv(n.ownerDocument.documentElement,n)){if(r!==null&&Gh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Em(n,s);var o=Em(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HI=nr&&"documentMode"in document&&11>=document.documentMode,Li=null,Cd=null,oo=null,Td=!1;function Im(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Td||Li==null||Li!==Al(r)||(r=Li,"selectionStart"in r&&Gh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oo&&Co(oo,r)||(oo=r,r=Dl(Cd,"onSelect"),0<r.length&&(e=new $h("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Li)))}function Ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mi={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionend:Ba("Transition","TransitionEnd")},ku={},Ov={};nr&&(Ov=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function Ec(t){if(ku[t])return ku[t];if(!Mi[t])return t;var e=Mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ov)return ku[t]=e[n];return t}var Dv=Ec("animationend"),Lv=Ec("animationiteration"),Mv=Ec("animationstart"),Fv=Ec("transitionend"),Vv=new Map,Sm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){Vv.set(t,e),_i(e,[t])}for(var Au=0;Au<Sm.length;Au++){var bu=Sm[Au],GI=bu.toLowerCase(),qI=bu[0].toUpperCase()+bu.slice(1);Br(GI,"on"+qI)}Br(Dv,"onAnimationEnd");Br(Lv,"onAnimationIteration");Br(Mv,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(Fv,"onTransitionEnd");ns("onMouseEnter",["mouseout","mouseover"]);ns("onMouseLeave",["mouseout","mouseover"]);ns("onPointerEnter",["pointerout","pointerover"]);ns("onPointerLeave",["pointerout","pointerover"]);_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_i("onBeforeInput",["compositionend","keypress","textInput","paste"]);_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zs));function Cm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GE(r,e,void 0,t),t.currentTarget=null}function Uv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Cm(i,l,h),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Cm(i,l,h),s=c}}}if(Rl)throw t=xd,Rl=!1,xd=null,t}function Ae(t,e){var n=e[Nd];n===void 0&&(n=e[Nd]=new Set);var r=t+"__bubble";n.has(r)||(Bv(e,t,2,!1),n.add(r))}function Ru(t,e,n){var r=0;e&&(r|=4),Bv(n,t,r,e)}var za="_reactListening"+Math.random().toString(36).slice(2);function To(t){if(!t[za]){t[za]=!0,Ky.forEach(function(n){n!=="selectionchange"&&(KI.has(n)||Ru(n,!1,t),Ru(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[za]||(e[za]=!0,Ru("selectionchange",!1,e))}}function Bv(t,e,n,r){switch(Sv(e)){case 1:var i=lI;break;case 4:i=cI;break;default:i=Bh}n=i.bind(null,e,n,t),i=void 0,!_d||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Xr(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}uv(function(){var h=s,p=Mh(n),m=[];e:{var y=Vv.get(t);if(y!==void 0){var T=$h,b=t;switch(t){case"keypress":if(ll(n)===0)break e;case"keydown":case"keyup":T=SI;break;case"focusin":b="focus",T=Su;break;case"focusout":b="blur",T=Su;break;case"beforeblur":case"afterblur":T=Su;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=fm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=hI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=kI;break;case Dv:case Lv:case Mv:T=mI;break;case Fv:T=bI;break;case"scroll":T=uI;break;case"wheel":T=NI;break;case"copy":case"cut":case"paste":T=yI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=mm}var k=(e&4)!==0,P=!k&&t==="scroll",I=k?y!==null?y+"Capture":null:y;k=[];for(var _=h,x;_!==null;){x=_;var O=x.stateNode;if(x.tag===5&&O!==null&&(x=O,I!==null&&(O=_o(_,I),O!=null&&k.push(ko(_,O,x)))),P)break;_=_.return}0<k.length&&(y=new T(y,b,null,n,p),m.push({event:y,listeners:k}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",y&&n!==vd&&(b=n.relatedTarget||n.fromElement)&&(Xr(b)||b[rr]))break e;if((T||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,T?(b=n.relatedTarget||n.toElement,T=h,b=b?Xr(b):null,b!==null&&(P=xi(b),b!==P||b.tag!==5&&b.tag!==6)&&(b=null)):(T=null,b=h),T!==b)){if(k=fm,O="onMouseLeave",I="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=mm,O="onPointerLeave",I="onPointerEnter",_="pointer"),P=T==null?y:Fi(T),x=b==null?y:Fi(b),y=new k(O,_+"leave",T,n,p),y.target=P,y.relatedTarget=x,O=null,Xr(p)===h&&(k=new k(I,_+"enter",b,n,p),k.target=x,k.relatedTarget=P,O=k),P=O,T&&b)t:{for(k=T,I=b,_=0,x=k;x;x=Ni(x))_++;for(x=0,O=I;O;O=Ni(O))x++;for(;0<_-x;)k=Ni(k),_--;for(;0<x-_;)I=Ni(I),x--;for(;_--;){if(k===I||I!==null&&k===I.alternate)break t;k=Ni(k),I=Ni(I)}k=null}else k=null;T!==null&&Tm(m,y,T,k,!1),b!==null&&P!==null&&Tm(m,P,b,k,!0)}}e:{if(y=h?Fi(h):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var V=FI;else if(vm(y))if(Rv)V=zI;else{V=UI;var D=VI}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(V=BI);if(V&&(V=V(t,h))){bv(m,V,n,p);break e}D&&D(t,y,h),t==="focusout"&&(D=y._wrapperState)&&D.controlled&&y.type==="number"&&fd(y,"number",y.value)}switch(D=h?Fi(h):window,t){case"focusin":(vm(D)||D.contentEditable==="true")&&(Li=D,Cd=h,oo=null);break;case"focusout":oo=Cd=Li=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Im(m,n,p);break;case"selectionchange":if(HI)break;case"keydown":case"keyup":Im(m,n,p)}var S;if(Hh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Di?kv(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Tv&&n.locale!=="ko"&&(Di||g!=="onCompositionStart"?g==="onCompositionEnd"&&Di&&(S=Cv()):(xr=p,zh="value"in xr?xr.value:xr.textContent,Di=!0)),D=Dl(h,g),0<D.length&&(g=new pm(g,t,null,n,p),m.push({event:g,listeners:D}),S?g.data=S:(S=Av(n),S!==null&&(g.data=S)))),(S=jI?OI(t,n):DI(t,n))&&(h=Dl(h,"onBeforeInput"),0<h.length&&(p=new pm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=S))}Uv(m,e)})}function ko(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_o(t,n),s!=null&&r.unshift(ko(t,s,i)),s=_o(t,e),s!=null&&r.push(ko(t,s,i))),t=t.return}return r}function Ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tm(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,i?(c=_o(n,s),c!=null&&o.unshift(ko(n,c,l))):i||(c=_o(n,s),c!=null&&o.push(ko(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var QI=/\r\n?/g,YI=/\u0000|\uFFFD/g;function km(t){return(typeof t=="string"?t:""+t).replace(QI,`
`).replace(YI,"")}function $a(t,e,n){if(e=km(e),km(t)!==e&&n)throw Error(B(425))}function Ll(){}var kd=null,Ad=null;function bd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rd=typeof setTimeout=="function"?setTimeout:void 0,JI=typeof clearTimeout=="function"?clearTimeout:void 0,Am=typeof Promise=="function"?Promise:void 0,XI=typeof queueMicrotask=="function"?queueMicrotask:typeof Am<"u"?function(t){return Am.resolve(null).then(t).catch(ZI)}:Rd;function ZI(t){setTimeout(function(){throw t})}function Pu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Io(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Io(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ys=Math.random().toString(36).slice(2),Pn="__reactFiber$"+ys,Ao="__reactProps$"+ys,rr="__reactContainer$"+ys,Nd="__reactEvents$"+ys,eS="__reactListeners$"+ys,tS="__reactHandles$"+ys;function Xr(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bm(t);t!==null;){if(n=t[Pn])return n;t=bm(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[Pn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Ic(t){return t[Ao]||null}var Pd=[],Vi=-1;function zr(t){return{current:t}}function be(t){0>Vi||(t.current=Pd[Vi],Pd[Vi]=null,Vi--)}function Se(t,e){Vi++,Pd[Vi]=t.current,t.current=e}var Mr={},kt=zr(Mr),Vt=zr(!1),ci=Mr;function rs(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ut(t){return t=t.childContextTypes,t!=null}function Ml(){be(Vt),be(kt)}function Rm(t,e,n){if(kt.current!==Mr)throw Error(B(168));Se(kt,e),Se(Vt,n)}function zv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,VE(t)||"Unknown",i));return Me({},n,r)}function Fl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,ci=kt.current,Se(kt,t),Se(Vt,Vt.current),!0}function Nm(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=zv(t,e,ci),r.__reactInternalMemoizedMergedChildContext=t,be(Vt),be(kt),Se(kt,t)):be(Vt),Se(Vt,n)}var Hn=null,Sc=!1,ju=!1;function $v(t){Hn===null?Hn=[t]:Hn.push(t)}function nS(t){Sc=!0,$v(t)}function $r(){if(!ju&&Hn!==null){ju=!0;var t=0,e=_e;try{var n=Hn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hn=null,Sc=!1}catch(i){throw Hn!==null&&(Hn=Hn.slice(t+1)),pv(Fh,$r),i}finally{_e=e,ju=!1}}return null}var Ui=[],Bi=0,Vl=null,Ul=0,rn=[],sn=0,ui=null,Kn=1,Qn="";function Qr(t,e){Ui[Bi++]=Ul,Ui[Bi++]=Vl,Vl=t,Ul=e}function Wv(t,e,n){rn[sn++]=Kn,rn[sn++]=Qn,rn[sn++]=ui,ui=t;var r=Kn;t=Qn;var i=32-En(r)-1;r&=~(1<<i),n+=1;var s=32-En(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Kn=1<<32-En(e)+i|n<<i|r,Qn=s+t}else Kn=1<<s|n<<i|r,Qn=t}function qh(t){t.return!==null&&(Qr(t,1),Wv(t,1,0))}function Kh(t){for(;t===Vl;)Vl=Ui[--Bi],Ui[Bi]=null,Ul=Ui[--Bi],Ui[Bi]=null;for(;t===ui;)ui=rn[--sn],rn[sn]=null,Qn=rn[--sn],rn[sn]=null,Kn=rn[--sn],rn[sn]=null}var Qt=null,Kt=null,Pe=!1,vn=null;function Hv(t,e){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ui!==null?{id:Kn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Kt=null,!0):!1;default:return!1}}function jd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Od(t){if(Pe){var e=Kt;if(e){var n=e;if(!Pm(t,e)){if(jd(t))throw Error(B(418));e=kr(n.nextSibling);var r=Qt;e&&Pm(t,e)?Hv(r,n):(t.flags=t.flags&-4097|2,Pe=!1,Qt=t)}}else{if(jd(t))throw Error(B(418));t.flags=t.flags&-4097|2,Pe=!1,Qt=t}}}function jm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function Wa(t){if(t!==Qt)return!1;if(!Pe)return jm(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bd(t.type,t.memoizedProps)),e&&(e=Kt)){if(jd(t))throw Gv(),Error(B(418));for(;e;)Hv(t,e),e=kr(e.nextSibling)}if(jm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Qt?kr(t.stateNode.nextSibling):null;return!0}function Gv(){for(var t=Kt;t;)t=kr(t.nextSibling)}function is(){Kt=Qt=null,Pe=!1}function Qh(t){vn===null?vn=[t]:vn.push(t)}var rS=lr.ReactCurrentBatchConfig;function Ws(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Ha(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Om(t){var e=t._init;return e(t._payload)}function qv(t){function e(I,_){if(t){var x=I.deletions;x===null?(I.deletions=[_],I.flags|=16):x.push(_)}}function n(I,_){if(!t)return null;for(;_!==null;)e(I,_),_=_.sibling;return null}function r(I,_){for(I=new Map;_!==null;)_.key!==null?I.set(_.key,_):I.set(_.index,_),_=_.sibling;return I}function i(I,_){return I=Nr(I,_),I.index=0,I.sibling=null,I}function s(I,_,x){return I.index=x,t?(x=I.alternate,x!==null?(x=x.index,x<_?(I.flags|=2,_):x):(I.flags|=2,_)):(I.flags|=1048576,_)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,_,x,O){return _===null||_.tag!==6?(_=Uu(x,I.mode,O),_.return=I,_):(_=i(_,x),_.return=I,_)}function c(I,_,x,O){var V=x.type;return V===Oi?p(I,_,x.props.children,O,x.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===mr&&Om(V)===_.type)?(O=i(_,x.props),O.ref=Ws(I,_,x),O.return=I,O):(O=ml(x.type,x.key,x.props,null,I.mode,O),O.ref=Ws(I,_,x),O.return=I,O)}function h(I,_,x,O){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=Bu(x,I.mode,O),_.return=I,_):(_=i(_,x.children||[]),_.return=I,_)}function p(I,_,x,O,V){return _===null||_.tag!==7?(_=si(x,I.mode,O,V),_.return=I,_):(_=i(_,x),_.return=I,_)}function m(I,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Uu(""+_,I.mode,x),_.return=I,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Oa:return x=ml(_.type,_.key,_.props,null,I.mode,x),x.ref=Ws(I,null,_),x.return=I,x;case ji:return _=Bu(_,I.mode,x),_.return=I,_;case mr:var O=_._init;return m(I,O(_._payload),x)}if(Js(_)||Vs(_))return _=si(_,I.mode,x,null),_.return=I,_;Ha(I,_)}return null}function y(I,_,x,O){var V=_!==null?_.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return V!==null?null:l(I,_,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Oa:return x.key===V?c(I,_,x,O):null;case ji:return x.key===V?h(I,_,x,O):null;case mr:return V=x._init,y(I,_,V(x._payload),O)}if(Js(x)||Vs(x))return V!==null?null:p(I,_,x,O,null);Ha(I,x)}return null}function T(I,_,x,O,V){if(typeof O=="string"&&O!==""||typeof O=="number")return I=I.get(x)||null,l(_,I,""+O,V);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Oa:return I=I.get(O.key===null?x:O.key)||null,c(_,I,O,V);case ji:return I=I.get(O.key===null?x:O.key)||null,h(_,I,O,V);case mr:var D=O._init;return T(I,_,x,D(O._payload),V)}if(Js(O)||Vs(O))return I=I.get(x)||null,p(_,I,O,V,null);Ha(_,O)}return null}function b(I,_,x,O){for(var V=null,D=null,S=_,g=_=0,w=null;S!==null&&g<x.length;g++){S.index>g?(w=S,S=null):w=S.sibling;var E=y(I,S,x[g],O);if(E===null){S===null&&(S=w);break}t&&S&&E.alternate===null&&e(I,S),_=s(E,_,g),D===null?V=E:D.sibling=E,D=E,S=w}if(g===x.length)return n(I,S),Pe&&Qr(I,g),V;if(S===null){for(;g<x.length;g++)S=m(I,x[g],O),S!==null&&(_=s(S,_,g),D===null?V=S:D.sibling=S,D=S);return Pe&&Qr(I,g),V}for(S=r(I,S);g<x.length;g++)w=T(S,I,g,x[g],O),w!==null&&(t&&w.alternate!==null&&S.delete(w.key===null?g:w.key),_=s(w,_,g),D===null?V=w:D.sibling=w,D=w);return t&&S.forEach(function(A){return e(I,A)}),Pe&&Qr(I,g),V}function k(I,_,x,O){var V=Vs(x);if(typeof V!="function")throw Error(B(150));if(x=V.call(x),x==null)throw Error(B(151));for(var D=V=null,S=_,g=_=0,w=null,E=x.next();S!==null&&!E.done;g++,E=x.next()){S.index>g?(w=S,S=null):w=S.sibling;var A=y(I,S,E.value,O);if(A===null){S===null&&(S=w);break}t&&S&&A.alternate===null&&e(I,S),_=s(A,_,g),D===null?V=A:D.sibling=A,D=A,S=w}if(E.done)return n(I,S),Pe&&Qr(I,g),V;if(S===null){for(;!E.done;g++,E=x.next())E=m(I,E.value,O),E!==null&&(_=s(E,_,g),D===null?V=E:D.sibling=E,D=E);return Pe&&Qr(I,g),V}for(S=r(I,S);!E.done;g++,E=x.next())E=T(S,I,g,E.value,O),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?g:E.key),_=s(E,_,g),D===null?V=E:D.sibling=E,D=E);return t&&S.forEach(function(N){return e(I,N)}),Pe&&Qr(I,g),V}function P(I,_,x,O){if(typeof x=="object"&&x!==null&&x.type===Oi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Oa:e:{for(var V=x.key,D=_;D!==null;){if(D.key===V){if(V=x.type,V===Oi){if(D.tag===7){n(I,D.sibling),_=i(D,x.props.children),_.return=I,I=_;break e}}else if(D.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===mr&&Om(V)===D.type){n(I,D.sibling),_=i(D,x.props),_.ref=Ws(I,D,x),_.return=I,I=_;break e}n(I,D);break}else e(I,D);D=D.sibling}x.type===Oi?(_=si(x.props.children,I.mode,O,x.key),_.return=I,I=_):(O=ml(x.type,x.key,x.props,null,I.mode,O),O.ref=Ws(I,_,x),O.return=I,I=O)}return o(I);case ji:e:{for(D=x.key;_!==null;){if(_.key===D)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){n(I,_.sibling),_=i(_,x.children||[]),_.return=I,I=_;break e}else{n(I,_);break}else e(I,_);_=_.sibling}_=Bu(x,I.mode,O),_.return=I,I=_}return o(I);case mr:return D=x._init,P(I,_,D(x._payload),O)}if(Js(x))return b(I,_,x,O);if(Vs(x))return k(I,_,x,O);Ha(I,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,_!==null&&_.tag===6?(n(I,_.sibling),_=i(_,x),_.return=I,I=_):(n(I,_),_=Uu(x,I.mode,O),_.return=I,I=_),o(I)):n(I,_)}return P}var ss=qv(!0),Kv=qv(!1),Bl=zr(null),zl=null,zi=null,Yh=null;function Jh(){Yh=zi=zl=null}function Xh(t){var e=Bl.current;be(Bl),t._currentValue=e}function Dd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qi(t,e){zl=t,Yh=zi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(Yh!==t)if(t={context:t,memoizedValue:e,next:null},zi===null){if(zl===null)throw Error(B(308));zi=t,zl.dependencies={lanes:0,firstContext:t}}else zi=zi.next=t;return e}var Zr=null;function Zh(t){Zr===null?Zr=[t]:Zr.push(t)}function Qv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Zh(e)):(n.next=i.next,i.next=n),e.interleaved=n,ir(t,r)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gr=!1;function ef(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ir(t,n)}return i=r.interleaved,i===null?(e.next=e,Zh(r)):(e.next=i.next,i.next=e),r.interleaved=e,ir(t,n)}function cl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vh(t,n)}}function Dm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $l(t,e,n,r){var i=t.updateQueue;gr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;o=0,p=h=c=null,l=s;do{var y=l.lane,T=l.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,k=l;switch(y=e,T=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){m=b.call(T,m,y);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,y=typeof b=="function"?b.call(T,m,y):b,y==null)break e;m=Me({},m,y);break e;case 2:gr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else T={eventTime:T,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=T,c=m):p=p.next=T,o|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);hi|=o,t.lanes=o,t.memoizedState=m}}function Lm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var ea={},Dn=zr(ea),bo=zr(ea),Ro=zr(ea);function ei(t){if(t===ea)throw Error(B(174));return t}function tf(t,e){switch(Se(Ro,e),Se(bo,t),Se(Dn,ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:md(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=md(e,t)}be(Dn),Se(Dn,e)}function os(){be(Dn),be(bo),be(Ro)}function Jv(t){ei(Ro.current);var e=ei(Dn.current),n=md(e,t.type);e!==n&&(Se(bo,t),Se(Dn,n))}function nf(t){bo.current===t&&(be(Dn),be(bo))}var De=zr(0);function Wl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ou=[];function rf(){for(var t=0;t<Ou.length;t++)Ou[t]._workInProgressVersionPrimary=null;Ou.length=0}var ul=lr.ReactCurrentDispatcher,Du=lr.ReactCurrentBatchConfig,di=0,Le=null,Ze=null,st=null,Hl=!1,ao=!1,No=0,iS=0;function _t(){throw Error(B(321))}function sf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function of(t,e,n,r,i,s){if(di=s,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ul.current=t===null||t.memoizedState===null?lS:cS,t=n(r,i),ao){s=0;do{if(ao=!1,No=0,25<=s)throw Error(B(301));s+=1,st=Ze=null,e.updateQueue=null,ul.current=uS,t=n(r,i)}while(ao)}if(ul.current=Gl,e=Ze!==null&&Ze.next!==null,di=0,st=Ze=Le=null,Hl=!1,e)throw Error(B(300));return t}function af(){var t=No!==0;return No=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Le.memoizedState=st=t:st=st.next=t,st}function dn(){if(Ze===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=st===null?Le.memoizedState:st.next;if(e!==null)st=e,Ze=t;else{if(t===null)throw Error(B(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},st===null?Le.memoizedState=st=t:st=st.next=t}return st}function Po(t,e){return typeof e=="function"?e(t):e}function Lu(t){var e=dn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,c=null,h=s;do{var p=h.lane;if((di&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Le.lanes|=p,hi|=p}h=h.next}while(h!==null&&h!==s);c===null?o=r:c.next=l,Cn(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Le.lanes|=s,hi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mu(t){var e=dn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Cn(s,e.memoizedState)||(Ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Xv(){}function Zv(t,e){var n=Le,r=dn(),i=e(),s=!Cn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ft=!0),r=r.queue,lf(n0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,jo(9,t0.bind(null,n,r,i,e),void 0,null),at===null)throw Error(B(349));di&30||e0(n,e,i)}return i}function e0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function t0(t,e,n,r){e.value=n,e.getSnapshot=r,r0(e)&&i0(t)}function n0(t,e,n){return n(function(){r0(e)&&i0(t)})}function r0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function i0(t){var e=ir(t,1);e!==null&&In(e,t,1,-1)}function Mm(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:t},e.queue=t,t=t.dispatch=aS.bind(null,Le,t),[e.memoizedState,t]}function jo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function s0(){return dn().memoizedState}function dl(t,e,n,r){var i=Nn();Le.flags|=t,i.memoizedState=jo(1|e,n,void 0,r===void 0?null:r)}function Cc(t,e,n,r){var i=dn();r=r===void 0?null:r;var s=void 0;if(Ze!==null){var o=Ze.memoizedState;if(s=o.destroy,r!==null&&sf(r,o.deps)){i.memoizedState=jo(e,n,s,r);return}}Le.flags|=t,i.memoizedState=jo(1|e,n,s,r)}function Fm(t,e){return dl(8390656,8,t,e)}function lf(t,e){return Cc(2048,8,t,e)}function o0(t,e){return Cc(4,2,t,e)}function a0(t,e){return Cc(4,4,t,e)}function l0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function c0(t,e,n){return n=n!=null?n.concat([t]):null,Cc(4,4,l0.bind(null,e,t),n)}function cf(){}function u0(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function d0(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function h0(t,e,n){return di&21?(Cn(n,e)||(n=yv(),Le.lanes|=n,hi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function sS(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Du.transition;Du.transition={};try{t(!1),e()}finally{_e=n,Du.transition=r}}function f0(){return dn().memoizedState}function oS(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},p0(t))m0(e,n);else if(n=Qv(t,e,n,r),n!==null){var i=Pt();In(n,t,r,i),g0(n,e,r)}}function aS(t,e,n){var r=Rr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(p0(t))m0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Cn(l,o)){var c=e.interleaved;c===null?(i.next=i,Zh(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Qv(t,e,i,r),n!==null&&(i=Pt(),In(n,t,r,i),g0(n,e,r))}}function p0(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function m0(t,e){ao=Hl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function g0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vh(t,n)}}var Gl={readContext:un,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},lS={readContext:un,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:Fm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,dl(4194308,4,l0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return dl(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=oS.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:Mm,useDebugValue:cf,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=Mm(!1),e=t[0];return t=sS.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,i=Nn();if(Pe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),at===null)throw Error(B(349));di&30||e0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Fm(n0.bind(null,r,s,t),[t]),r.flags|=2048,jo(9,t0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Nn(),e=at.identifierPrefix;if(Pe){var n=Qn,r=Kn;n=(r&~(1<<32-En(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=No++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cS={readContext:un,useCallback:u0,useContext:un,useEffect:lf,useImperativeHandle:c0,useInsertionEffect:o0,useLayoutEffect:a0,useMemo:d0,useReducer:Lu,useRef:s0,useState:function(){return Lu(Po)},useDebugValue:cf,useDeferredValue:function(t){var e=dn();return h0(e,Ze.memoizedState,t)},useTransition:function(){var t=Lu(Po)[0],e=dn().memoizedState;return[t,e]},useMutableSource:Xv,useSyncExternalStore:Zv,useId:f0,unstable_isNewReconciler:!1},uS={readContext:un,useCallback:u0,useContext:un,useEffect:lf,useImperativeHandle:c0,useInsertionEffect:o0,useLayoutEffect:a0,useMemo:d0,useReducer:Mu,useRef:s0,useState:function(){return Mu(Po)},useDebugValue:cf,useDeferredValue:function(t){var e=dn();return Ze===null?e.memoizedState=t:h0(e,Ze.memoizedState,t)},useTransition:function(){var t=Mu(Po)[0],e=dn().memoizedState;return[t,e]},useMutableSource:Xv,useSyncExternalStore:Zv,useId:f0,unstable_isNewReconciler:!1};function mn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ld(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tc={isMounted:function(t){return(t=t._reactInternals)?xi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=Rr(t),s=Zn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ar(t,s,i),e!==null&&(In(e,t,i,r),cl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=Rr(t),s=Zn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ar(t,s,i),e!==null&&(In(e,t,i,r),cl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=Rr(t),i=Zn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ar(t,i,r),e!==null&&(In(e,t,r,n),cl(e,t,r))}};function Vm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Co(n,r)||!Co(i,s):!0}function y0(t,e,n){var r=!1,i=Mr,s=e.contextType;return typeof s=="object"&&s!==null?s=un(s):(i=Ut(e)?ci:kt.current,r=e.contextTypes,s=(r=r!=null)?rs(t,i):Mr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Um(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tc.enqueueReplaceState(e,e.state,null)}function Md(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ef(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=un(s):(s=Ut(e)?ci:kt.current,i.context=rs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ld(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tc.enqueueReplaceState(i,i.state,null),$l(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function as(t,e){try{var n="",r=e;do n+=FE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Fu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dS=typeof WeakMap=="function"?WeakMap:Map;function v0(t,e,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kl||(Kl=!0,Kd=r),Fd(t,e)},n}function w0(t,e,n){n=Zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Fd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Fd(t,e),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Bm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=CS.bind(null,t,e,n),e.then(t,t))}function zm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $m(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zn(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var hS=lr.ReactCurrentOwner,Ft=!1;function Nt(t,e,n,r){e.child=t===null?Kv(e,null,n,r):ss(e,t.child,n,r)}function Wm(t,e,n,r,i){n=n.render;var s=e.ref;return Qi(e,i),r=of(t,e,n,r,s,i),n=af(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Pe&&n&&qh(e),e.flags|=1,Nt(t,e,r,i),e.child)}function Hm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!yf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,_0(t,e,s,r,i)):(t=ml(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Co,n(o,r)&&t.ref===e.ref)return sr(t,e,i)}return e.flags|=1,t=Nr(s,r),t.ref=e.ref,t.return=e,e.child=t}function _0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Co(s,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,sr(t,e,i)}return Vd(t,e,n,r,i)}function x0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Wi,qt),qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(Wi,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(Wi,qt),qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(Wi,qt),qt|=r;return Nt(t,e,i,n),e.child}function E0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vd(t,e,n,r,i){var s=Ut(n)?ci:kt.current;return s=rs(e,s),Qi(e,i),n=of(t,e,n,r,s,i),r=af(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Pe&&r&&qh(e),e.flags|=1,Nt(t,e,n,i),e.child)}function Gm(t,e,n,r,i){if(Ut(n)){var s=!0;Fl(e)}else s=!1;if(Qi(e,i),e.stateNode===null)hl(t,e),y0(e,n,r),Md(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=un(h):(h=Ut(n)?ci:kt.current,h=rs(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&Um(e,o,r,h),gr=!1;var y=e.memoizedState;o.state=y,$l(e,r,o,i),c=e.memoizedState,l!==r||y!==c||Vt.current||gr?(typeof p=="function"&&(Ld(e,n,p,r),c=e.memoizedState),(l=gr||Vm(e,n,l,r,y,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Yv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:mn(e.type,l),o.props=h,m=e.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=un(c):(c=Ut(n)?ci:kt.current,c=rs(e,c));var T=n.getDerivedStateFromProps;(p=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||y!==c)&&Um(e,o,r,c),gr=!1,y=e.memoizedState,o.state=y,$l(e,r,o,i);var b=e.memoizedState;l!==m||y!==b||Vt.current||gr?(typeof T=="function"&&(Ld(e,n,T,r),b=e.memoizedState),(h=gr||Vm(e,n,h,r,y,b,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Ud(t,e,n,r,s,i)}function Ud(t,e,n,r,i,s){E0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Nm(e,n,!1),sr(t,e,s);r=e.stateNode,hS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ss(e,t.child,null,s),e.child=ss(e,null,l,s)):Nt(t,e,l,s),e.memoizedState=r.state,i&&Nm(e,n,!0),e.child}function I0(t){var e=t.stateNode;e.pendingContext?Rm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rm(t,e.context,!1),tf(t,e.containerInfo)}function qm(t,e,n,r,i){return is(),Qh(i),e.flags|=256,Nt(t,e,n,r),e.child}var Bd={dehydrated:null,treeContext:null,retryLane:0};function zd(t){return{baseLanes:t,cachePool:null,transitions:null}}function S0(t,e,n){var r=e.pendingProps,i=De.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(De,i&1),t===null)return Od(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=bc(o,r,0,null),t=si(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=zd(n),e.memoizedState=Bd,t):uf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return fS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Nr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Nr(l,s):(s=si(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?zd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Bd,r}return s=t.child,t=s.sibling,r=Nr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function uf(t,e){return e=bc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ga(t,e,n,r){return r!==null&&Qh(r),ss(e,t.child,null,n),t=uf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Fu(Error(B(422))),Ga(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=bc({mode:"visible",children:r.children},i,0,null),s=si(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ss(e,t.child,null,o),e.child.memoizedState=zd(o),e.memoizedState=Bd,s);if(!(e.mode&1))return Ga(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(B(419)),r=Fu(s,r,void 0),Ga(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ft||l){if(r=at,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ir(t,i),In(r,t,i,-1))}return gf(),r=Fu(Error(B(421))),Ga(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kt=kr(i.nextSibling),Qt=e,Pe=!0,vn=null,t!==null&&(rn[sn++]=Kn,rn[sn++]=Qn,rn[sn++]=ui,Kn=t.id,Qn=t.overflow,ui=e),e=uf(e,r.children),e.flags|=4096,e)}function Km(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dd(t.return,e,n)}function Vu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function C0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Nt(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Km(t,n,e);else if(t.tag===19)Km(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(De,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vu(e,!0,n,null,s);break;case"together":Vu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pS(t,e,n){switch(e.tag){case 3:I0(e),is();break;case 5:Jv(e);break;case 1:Ut(e.type)&&Fl(e);break;case 4:tf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(Bl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?S0(t,e,n):(Se(De,De.current&1),t=sr(t,e,n),t!==null?t.sibling:null);Se(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return C0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,x0(t,e,n)}return sr(t,e,n)}var T0,$d,k0,A0;T0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$d=function(){};k0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ei(Dn.current);var s=null;switch(n){case"input":i=dd(t,i),r=dd(t,r),s=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),s=[];break;case"textarea":i=pd(t,i),r=pd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ll)}gd(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(vo.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(vo.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ae("scroll",t),s||l===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};A0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hs(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mS(t,e,n){var r=e.pendingProps;switch(Kh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return Ut(e.type)&&Ml(),xt(e),null;case 3:return r=e.stateNode,os(),be(Vt),be(kt),rf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vn!==null&&(Jd(vn),vn=null))),$d(t,e),xt(e),null;case 5:nf(e);var i=ei(Ro.current);if(n=e.type,t!==null&&e.stateNode!=null)k0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return xt(e),null}if(t=ei(Dn.current),Wa(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Pn]=e,r[Ao]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<Zs.length;i++)Ae(Zs[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":rm(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":sm(r,s),Ae("invalid",r)}gd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&$a(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&$a(r.textContent,l,t),i=["children",""+l]):vo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Da(r),im(r,s,!0);break;case"textarea":Da(r),om(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ll)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pn]=e,t[Ao]=r,T0(t,e,!1,!1),e.stateNode=t;e:{switch(o=yd(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),i=r;break;case"iframe":case"object":case"embed":Ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zs.length;i++)Ae(Zs[i],t);i=r;break;case"source":Ae("error",t),i=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),i=r;break;case"details":Ae("toggle",t),i=r;break;case"input":rm(t,r),i=dd(t,r),Ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":sm(t,r),i=pd(t,r),Ae("invalid",t);break;default:i=r}gd(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?sv(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&rv(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wo(t,c):typeof c=="number"&&wo(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(vo.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ae("scroll",t):c!=null&&jh(t,s,c,o))}switch(n){case"input":Da(t),im(t,r,!1);break;case"textarea":Da(t),om(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Hi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Hi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ll)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)A0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ei(Ro.current),ei(Dn.current),Wa(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(s=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:$a(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$a(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return xt(e),null;case 13:if(be(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Kt!==null&&e.mode&1&&!(e.flags&128))Gv(),is(),e.flags|=98560,s=!1;else if(s=Wa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Pn]=e}else is(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),s=!1}else vn!==null&&(Jd(vn),vn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?et===0&&(et=3):gf())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return os(),$d(t,e),t===null&&To(e.stateNode.containerInfo),xt(e),null;case 10:return Xh(e.type._context),xt(e),null;case 17:return Ut(e.type)&&Ml(),xt(e),null;case 19:if(be(De),s=e.memoizedState,s===null)return xt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Hs(s,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wl(t),o!==null){for(e.flags|=128,Hs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(De,De.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>ls&&(e.flags|=128,r=!0,Hs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Wl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pe)return xt(e),null}else 2*Be()-s.renderingStartTime>ls&&n!==1073741824&&(e.flags|=128,r=!0,Hs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=De.current,Se(De,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return mf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function gS(t,e){switch(Kh(e),e.tag){case 1:return Ut(e.type)&&Ml(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return os(),be(Vt),be(kt),rf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nf(e),null;case 13:if(be(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));is()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(De),null;case 4:return os(),null;case 10:return Xh(e.type._context),null;case 22:case 23:return mf(),null;case 24:return null;default:return null}}var qa=!1,St=!1,yS=typeof WeakSet=="function"?WeakSet:Set,K=null;function $i(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function Wd(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var Qm=!1;function vS(t,e){if(kd=jl,t=jv(),Gh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,y=null;t:for(;;){for(var T;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(T=m.firstChild)!==null;)y=m,m=T;for(;;){if(m===t)break t;if(y===n&&++h===i&&(l=o),y===s&&++p===r&&(c=o),(T=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=T}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ad={focusedElem:t,selectionRange:n},jl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,P=b.memoizedState,I=e.stateNode,_=I.getSnapshotBeforeUpdate(e.elementType===e.type?k:mn(e.type,k),P);I.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(O){Ve(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return b=Qm,Qm=!1,b}function lo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Wd(e,n,s)}i=i.next}while(i!==r)}}function kc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function b0(t){var e=t.alternate;e!==null&&(t.alternate=null,b0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[Ao],delete e[Nd],delete e[eS],delete e[tS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function R0(t){return t.tag===5||t.tag===3||t.tag===4}function Ym(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ll));else if(r!==4&&(t=t.child,t!==null))for(Gd(t,e,n),t=t.sibling;t!==null;)Gd(t,e,n),t=t.sibling}function qd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qd(t,e,n),t=t.sibling;t!==null;)qd(t,e,n),t=t.sibling}var ht=null,gn=!1;function fr(t,e,n){for(n=n.child;n!==null;)N0(t,e,n),n=n.sibling}function N0(t,e,n){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(wc,n)}catch{}switch(n.tag){case 5:St||$i(n,e);case 6:var r=ht,i=gn;ht=null,fr(t,e,n),ht=r,gn=i,ht!==null&&(gn?(t=ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(gn?(t=ht,n=n.stateNode,t.nodeType===8?Pu(t.parentNode,n):t.nodeType===1&&Pu(t,n),Io(t)):Pu(ht,n.stateNode));break;case 4:r=ht,i=gn,ht=n.stateNode.containerInfo,gn=!0,fr(t,e,n),ht=r,gn=i;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Wd(n,e,o),i=i.next}while(i!==r)}fr(t,e,n);break;case 1:if(!St&&($i(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ve(n,e,l)}fr(t,e,n);break;case 21:fr(t,e,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,fr(t,e,n),St=r):fr(t,e,n);break;default:fr(t,e,n)}}function Jm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yS),e.forEach(function(r){var i=kS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ht=l.stateNode,gn=!1;break e;case 3:ht=l.stateNode.containerInfo,gn=!0;break e;case 4:ht=l.stateNode.containerInfo,gn=!0;break e}l=l.return}if(ht===null)throw Error(B(160));N0(s,o,i),ht=null,gn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Ve(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)P0(e,t),e=e.sibling}function P0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pn(e,t),Rn(t),r&4){try{lo(3,t,t.return),kc(3,t)}catch(k){Ve(t,t.return,k)}try{lo(5,t,t.return)}catch(k){Ve(t,t.return,k)}}break;case 1:pn(e,t),Rn(t),r&512&&n!==null&&$i(n,n.return);break;case 5:if(pn(e,t),Rn(t),r&512&&n!==null&&$i(n,n.return),t.flags&32){var i=t.stateNode;try{wo(i,"")}catch(k){Ve(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&ev(i,s),yd(l,o);var h=yd(l,s);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?sv(i,m):p==="dangerouslySetInnerHTML"?rv(i,m):p==="children"?wo(i,m):jh(i,p,m,h)}switch(l){case"input":hd(i,s);break;case"textarea":tv(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?Hi(i,!!s.multiple,T,!1):y!==!!s.multiple&&(s.defaultValue!=null?Hi(i,!!s.multiple,s.defaultValue,!0):Hi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ao]=s}catch(k){Ve(t,t.return,k)}}break;case 6:if(pn(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){Ve(t,t.return,k)}}break;case 3:if(pn(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Io(e.containerInfo)}catch(k){Ve(t,t.return,k)}break;case 4:pn(e,t),Rn(t);break;case 13:pn(e,t),Rn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ff=Be())),r&4&&Jm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(St=(h=St)||p,pn(e,t),St=h):pn(e,t),Rn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(K=t,p=t.child;p!==null;){for(m=K=p;K!==null;){switch(y=K,T=y.child,y.tag){case 0:case 11:case 14:case 15:lo(4,y,y.return);break;case 1:$i(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(k){Ve(r,n,k)}}break;case 5:$i(y,y.return);break;case 22:if(y.memoizedState!==null){Zm(m);continue}}T!==null?(T.return=y,K=T):Zm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=iv("display",o))}catch(k){Ve(t,t.return,k)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(k){Ve(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:pn(e,t),Rn(t),r&4&&Jm(t);break;case 21:break;default:pn(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(R0(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wo(i,""),r.flags&=-33);var s=Ym(t);qd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ym(t);Gd(t,l,o);break;default:throw Error(B(161))}}catch(c){Ve(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wS(t,e,n){K=t,j0(t)}function j0(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qa;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||St;l=qa;var h=St;if(qa=o,(St=c)&&!h)for(K=i;K!==null;)o=K,c=o.child,o.tag===22&&o.memoizedState!==null?eg(i):c!==null?(c.return=o,K=c):eg(i);for(;s!==null;)K=s,j0(s),s=s.sibling;K=i,qa=l,St=h}Xm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):Xm(t)}}function Xm(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:St||kc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!St)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Lm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Io(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}St||e.flags&512&&Hd(e)}catch(y){Ve(e,e.return,y)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Zm(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function eg(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kc(4,e)}catch(c){Ve(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ve(e,i,c)}}var s=e.return;try{Hd(e)}catch(c){Ve(e,s,c)}break;case 5:var o=e.return;try{Hd(e)}catch(c){Ve(e,o,c)}}}catch(c){Ve(e,e.return,c)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var _S=Math.ceil,ql=lr.ReactCurrentDispatcher,df=lr.ReactCurrentOwner,ln=lr.ReactCurrentBatchConfig,pe=0,at=null,Ge=null,gt=0,qt=0,Wi=zr(0),et=0,Oo=null,hi=0,Ac=0,hf=0,co=null,Mt=null,ff=0,ls=1/0,Wn=null,Kl=!1,Kd=null,br=null,Ka=!1,Er=null,Ql=0,uo=0,Qd=null,fl=-1,pl=0;function Pt(){return pe&6?Be():fl!==-1?fl:fl=Be()}function Rr(t){return t.mode&1?pe&2&&gt!==0?gt&-gt:rS.transition!==null?(pl===0&&(pl=yv()),pl):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Sv(t.type)),t):1}function In(t,e,n,r){if(50<uo)throw uo=0,Qd=null,Error(B(185));Jo(t,n,r),(!(pe&2)||t!==at)&&(t===at&&(!(pe&2)&&(Ac|=n),et===4&&vr(t,gt)),Bt(t,r),n===1&&pe===0&&!(e.mode&1)&&(ls=Be()+500,Sc&&$r()))}function Bt(t,e){var n=t.callbackNode;rI(t,e);var r=Pl(t,t===at?gt:0);if(r===0)n!==null&&cm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cm(n),e===1)t.tag===0?nS(tg.bind(null,t)):$v(tg.bind(null,t)),XI(function(){!(pe&6)&&$r()}),n=null;else{switch(vv(r)){case 1:n=Fh;break;case 4:n=mv;break;case 16:n=Nl;break;case 536870912:n=gv;break;default:n=Nl}n=B0(n,O0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function O0(t,e){if(fl=-1,pl=0,pe&6)throw Error(B(327));var n=t.callbackNode;if(Yi()&&t.callbackNode!==n)return null;var r=Pl(t,t===at?gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yl(t,r);else{e=r;var i=pe;pe|=2;var s=L0();(at!==t||gt!==e)&&(Wn=null,ls=Be()+500,ii(t,e));do try{IS();break}catch(l){D0(t,l)}while(!0);Jh(),ql.current=s,pe=i,Ge!==null?e=0:(at=null,gt=0,e=et)}if(e!==0){if(e===2&&(i=Ed(t),i!==0&&(r=i,e=Yd(t,i))),e===1)throw n=Oo,ii(t,0),vr(t,r),Bt(t,Be()),n;if(e===6)vr(t,r);else{if(i=t.current.alternate,!(r&30)&&!xS(i)&&(e=Yl(t,r),e===2&&(s=Ed(t),s!==0&&(r=s,e=Yd(t,s))),e===1))throw n=Oo,ii(t,0),vr(t,r),Bt(t,Be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Yr(t,Mt,Wn);break;case 3:if(vr(t,r),(r&130023424)===r&&(e=ff+500-Be(),10<e)){if(Pl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rd(Yr.bind(null,t,Mt,Wn),e);break}Yr(t,Mt,Wn);break;case 4:if(vr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-En(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_S(r/1960))-r,10<r){t.timeoutHandle=Rd(Yr.bind(null,t,Mt,Wn),r);break}Yr(t,Mt,Wn);break;case 5:Yr(t,Mt,Wn);break;default:throw Error(B(329))}}}return Bt(t,Be()),t.callbackNode===n?O0.bind(null,t):null}function Yd(t,e){var n=co;return t.current.memoizedState.isDehydrated&&(ii(t,e).flags|=256),t=Yl(t,e),t!==2&&(e=Mt,Mt=n,e!==null&&Jd(e)),t}function Jd(t){Mt===null?Mt=t:Mt.push.apply(Mt,t)}function xS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vr(t,e){for(e&=~hf,e&=~Ac,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-En(e),r=1<<n;t[n]=-1,e&=~r}}function tg(t){if(pe&6)throw Error(B(327));Yi();var e=Pl(t,0);if(!(e&1))return Bt(t,Be()),null;var n=Yl(t,e);if(t.tag!==0&&n===2){var r=Ed(t);r!==0&&(e=r,n=Yd(t,r))}if(n===1)throw n=Oo,ii(t,0),vr(t,e),Bt(t,Be()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,Mt,Wn),Bt(t,Be()),null}function pf(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(ls=Be()+500,Sc&&$r())}}function fi(t){Er!==null&&Er.tag===0&&!(pe&6)&&Yi();var e=pe;pe|=1;var n=ln.transition,r=_e;try{if(ln.transition=null,_e=1,t)return t()}finally{_e=r,ln.transition=n,pe=e,!(pe&6)&&$r()}}function mf(){qt=Wi.current,be(Wi)}function ii(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JI(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(Kh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ml();break;case 3:os(),be(Vt),be(kt),rf();break;case 5:nf(r);break;case 4:os();break;case 13:be(De);break;case 19:be(De);break;case 10:Xh(r.type._context);break;case 22:case 23:mf()}n=n.return}if(at=t,Ge=t=Nr(t.current,null),gt=qt=e,et=0,Oo=null,hf=Ac=hi=0,Mt=co=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Zr=null}return t}function D0(t,e){do{var n=Ge;try{if(Jh(),ul.current=Gl,Hl){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Hl=!1}if(di=0,st=Ze=Le=null,ao=!1,No=0,df.current=null,n===null||n.return===null){et=1,Oo=e,Ge=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=gt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=zm(o);if(T!==null){T.flags&=-257,$m(T,o,l,s,e),T.mode&1&&Bm(s,h,e),e=T,c=h;var b=e.updateQueue;if(b===null){var k=new Set;k.add(c),e.updateQueue=k}else b.add(c);break e}else{if(!(e&1)){Bm(s,h,e),gf();break e}c=Error(B(426))}}else if(Pe&&l.mode&1){var P=zm(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),$m(P,o,l,s,e),Qh(as(c,l));break e}}s=c=as(c,l),et!==4&&(et=2),co===null?co=[s]:co.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=v0(s,c,e);Dm(s,I);break e;case 1:l=c;var _=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(br===null||!br.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=w0(s,l,e);Dm(s,O);break e}}s=s.return}while(s!==null)}F0(n)}catch(V){e=V,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function L0(){var t=ql.current;return ql.current=Gl,t===null?Gl:t}function gf(){(et===0||et===3||et===2)&&(et=4),at===null||!(hi&268435455)&&!(Ac&268435455)||vr(at,gt)}function Yl(t,e){var n=pe;pe|=2;var r=L0();(at!==t||gt!==e)&&(Wn=null,ii(t,e));do try{ES();break}catch(i){D0(t,i)}while(!0);if(Jh(),pe=n,ql.current=r,Ge!==null)throw Error(B(261));return at=null,gt=0,et}function ES(){for(;Ge!==null;)M0(Ge)}function IS(){for(;Ge!==null&&!KE();)M0(Ge)}function M0(t){var e=U0(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?F0(t):Ge=e,df.current=null}function F0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gS(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Ge=null;return}}else if(n=mS(n,e,qt),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);et===0&&(et=5)}function Yr(t,e,n){var r=_e,i=ln.transition;try{ln.transition=null,_e=1,SS(t,e,n,r)}finally{ln.transition=i,_e=r}return null}function SS(t,e,n,r){do Yi();while(Er!==null);if(pe&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(iI(t,s),t===at&&(Ge=at=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ka||(Ka=!0,B0(Nl,function(){return Yi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ln.transition,ln.transition=null;var o=_e;_e=1;var l=pe;pe|=4,df.current=null,vS(t,n),P0(n,t),WI(Ad),jl=!!kd,Ad=kd=null,t.current=n,wS(n),QE(),pe=l,_e=o,ln.transition=s}else t.current=n;if(Ka&&(Ka=!1,Er=t,Ql=i),s=t.pendingLanes,s===0&&(br=null),XE(n.stateNode),Bt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,t=Kd,Kd=null,t;return Ql&1&&t.tag!==0&&Yi(),s=t.pendingLanes,s&1?t===Qd?uo++:(uo=0,Qd=t):uo=0,$r(),null}function Yi(){if(Er!==null){var t=vv(Ql),e=ln.transition,n=_e;try{if(ln.transition=null,_e=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,Ql=0,pe&6)throw Error(B(331));var i=pe;for(pe|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(K=h;K!==null;){var p=K;switch(p.tag){case 0:case 11:case 15:lo(8,p,s)}var m=p.child;if(m!==null)m.return=p,K=m;else for(;K!==null;){p=K;var y=p.sibling,T=p.return;if(b0(p),p===h){K=null;break}if(y!==null){y.return=T,K=y;break}K=T}}}var b=s.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lo(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,K=I;break e}K=s.return}}var _=t.current;for(K=_;K!==null;){o=K;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,K=x;else e:for(o=_;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kc(9,l)}}catch(V){Ve(l,l.return,V)}if(l===o){K=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,K=O;break e}K=l.return}}if(pe=i,$r(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(wc,t)}catch{}r=!0}return r}finally{_e=n,ln.transition=e}}return!1}function ng(t,e,n){e=as(n,e),e=v0(t,e,1),t=Ar(t,e,1),e=Pt(),t!==null&&(Jo(t,1,e),Bt(t,e))}function Ve(t,e,n){if(t.tag===3)ng(t,t,n);else for(;e!==null;){if(e.tag===3){ng(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){t=as(n,t),t=w0(e,t,1),e=Ar(e,t,1),t=Pt(),e!==null&&(Jo(e,1,t),Bt(e,t));break}}e=e.return}}function CS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(gt&n)===n&&(et===4||et===3&&(gt&130023424)===gt&&500>Be()-ff?ii(t,0):hf|=n),Bt(t,e)}function V0(t,e){e===0&&(t.mode&1?(e=Fa,Fa<<=1,!(Fa&130023424)&&(Fa=4194304)):e=1);var n=Pt();t=ir(t,e),t!==null&&(Jo(t,e,n),Bt(t,n))}function TS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),V0(t,n)}function kS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),V0(t,n)}var U0;U0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,pS(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,Pe&&e.flags&1048576&&Wv(e,Ul,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hl(t,e),t=e.pendingProps;var i=rs(e,kt.current);Qi(e,n),i=of(null,e,r,t,i,n);var s=af();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)?(s=!0,Fl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ef(e),i.updater=Tc,e.stateNode=i,i._reactInternals=e,Md(e,r,t,n),e=Ud(null,e,r,!0,s,n)):(e.tag=0,Pe&&s&&qh(e),Nt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=bS(r),t=mn(r,t),i){case 0:e=Vd(null,e,r,t,n);break e;case 1:e=Gm(null,e,r,t,n);break e;case 11:e=Wm(null,e,r,t,n);break e;case 14:e=Hm(null,e,r,mn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),Vd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),Gm(t,e,r,i,n);case 3:e:{if(I0(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Yv(t,e),$l(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=as(Error(B(423)),e),e=qm(t,e,r,n,i);break e}else if(r!==i){i=as(Error(B(424)),e),e=qm(t,e,r,n,i);break e}else for(Kt=kr(e.stateNode.containerInfo.firstChild),Qt=e,Pe=!0,vn=null,n=Kv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(is(),r===i){e=sr(t,e,n);break e}Nt(t,e,r,n)}e=e.child}return e;case 5:return Jv(e),t===null&&Od(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,bd(r,i)?o=null:s!==null&&bd(r,s)&&(e.flags|=32),E0(t,e),Nt(t,e,o,n),e.child;case 6:return t===null&&Od(e),null;case 13:return S0(t,e,n);case 4:return tf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ss(e,null,r,n):Nt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),Wm(t,e,r,i,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(Bl,r._currentValue),r._currentValue=o,s!==null)if(Cn(s.value,o)){if(s.children===i.children&&!Vt.current){e=sr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Zn(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Dd(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Dd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Nt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qi(e,n),i=un(i),r=r(i),e.flags|=1,Nt(t,e,r,n),e.child;case 14:return r=e.type,i=mn(r,e.pendingProps),i=mn(r.type,i),Hm(t,e,r,i,n);case 15:return _0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),hl(t,e),e.tag=1,Ut(r)?(t=!0,Fl(e)):t=!1,Qi(e,n),y0(e,r,i),Md(e,r,i,n),Ud(null,e,r,!0,t,n);case 19:return C0(t,e,n);case 22:return x0(t,e,n)}throw Error(B(156,e.tag))};function B0(t,e){return pv(t,e)}function AS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,e,n,r){return new AS(t,e,n,r)}function yf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bS(t){if(typeof t=="function")return yf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dh)return 11;if(t===Lh)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=an(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ml(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")yf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oi:return si(n.children,i,s,e);case Oh:o=8,i|=8;break;case ad:return t=an(12,n,e,i|2),t.elementType=ad,t.lanes=s,t;case ld:return t=an(13,n,e,i),t.elementType=ld,t.lanes=s,t;case cd:return t=an(19,n,e,i),t.elementType=cd,t.lanes=s,t;case Jy:return bc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qy:o=10;break e;case Yy:o=9;break e;case Dh:o=11;break e;case Lh:o=14;break e;case mr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=an(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function si(t,e,n,r){return t=an(7,t,r,e),t.lanes=n,t}function bc(t,e,n,r){return t=an(22,t,r,e),t.elementType=Jy,t.lanes=n,t.stateNode={isHidden:!1},t}function Uu(t,e,n){return t=an(6,t,null,e),t.lanes=n,t}function Bu(t,e,n){return e=an(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xu(0),this.expirationTimes=xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vf(t,e,n,r,i,s,o,l,c){return t=new RS(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=an(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ef(s),t}function NS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function z0(t){if(!t)return Mr;t=t._reactInternals;e:{if(xi(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Ut(n))return zv(t,n,e)}return e}function $0(t,e,n,r,i,s,o,l,c){return t=vf(n,r,!0,t,i,s,o,l,c),t.context=z0(null),n=t.current,r=Pt(),i=Rr(n),s=Zn(r,i),s.callback=e??null,Ar(n,s,i),t.current.lanes=i,Jo(t,i,r),Bt(t,r),t}function Rc(t,e,n,r){var i=e.current,s=Pt(),o=Rr(i);return n=z0(n),e.context===null?e.context=n:e.pendingContext=n,e=Zn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ar(i,e,o),t!==null&&(In(t,i,o,s),cl(t,i,o)),o}function Jl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wf(t,e){rg(t,e),(t=t.alternate)&&rg(t,e)}function PS(){return null}var W0=typeof reportError=="function"?reportError:function(t){console.error(t)};function _f(t){this._internalRoot=t}Nc.prototype.render=_f.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Rc(t,e,null,null)};Nc.prototype.unmount=_f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fi(function(){Rc(null,t,null,null)}),e[rr]=null}};function Nc(t){this._internalRoot=t}Nc.prototype.unstable_scheduleHydration=function(t){if(t){var e=xv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yr.length&&e!==0&&e<yr[n].priority;n++);yr.splice(n,0,t),n===0&&Iv(t)}};function xf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ig(){}function jS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Jl(o);s.call(h)}}var o=$0(e,r,t,0,null,!1,!1,"",ig);return t._reactRootContainer=o,t[rr]=o.current,To(t.nodeType===8?t.parentNode:t),fi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Jl(c);l.call(h)}}var c=vf(t,0,!1,null,null,!1,!1,"",ig);return t._reactRootContainer=c,t[rr]=c.current,To(t.nodeType===8?t.parentNode:t),fi(function(){Rc(e,c,n,r)}),c}function jc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=Jl(o);l.call(c)}}Rc(e,o,t,i)}else o=jS(n,e,t,i,r);return Jl(o)}wv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xs(e.pendingLanes);n!==0&&(Vh(e,n|1),Bt(e,Be()),!(pe&6)&&(ls=Be()+500,$r()))}break;case 13:fi(function(){var r=ir(t,1);if(r!==null){var i=Pt();In(r,t,1,i)}}),wf(t,1)}};Uh=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=Pt();In(e,t,134217728,n)}wf(t,134217728)}};_v=function(t){if(t.tag===13){var e=Rr(t),n=ir(t,e);if(n!==null){var r=Pt();In(n,t,e,r)}wf(t,e)}};xv=function(){return _e};Ev=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};wd=function(t,e,n){switch(e){case"input":if(hd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ic(r);if(!i)throw Error(B(90));Zy(r),hd(r,i)}}}break;case"textarea":tv(t,n);break;case"select":e=n.value,e!=null&&Hi(t,!!n.multiple,e,!1)}};lv=pf;cv=fi;var OS={usingClientEntryPoint:!1,Events:[Zo,Fi,Ic,ov,av,pf]},Gs={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DS={bundleType:Gs.bundleType,version:Gs.version,rendererPackageName:Gs.rendererPackageName,rendererConfig:Gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hv(t),t===null?null:t.stateNode},findFiberByHostInstance:Gs.findFiberByHostInstance||PS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{wc=Qa.inject(DS),On=Qa}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OS;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xf(e))throw Error(B(200));return NS(t,e,null,n)};Xt.createRoot=function(t,e){if(!xf(t))throw Error(B(299));var n=!1,r="",i=W0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vf(t,1,!1,null,null,n,!1,r,i),t[rr]=e.current,To(t.nodeType===8?t.parentNode:t),new _f(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=hv(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return fi(t)};Xt.hydrate=function(t,e,n){if(!Pc(e))throw Error(B(200));return jc(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!xf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=W0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$0(e,null,t,1,n??null,i,!1,s,o),t[rr]=e.current,To(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nc(e)};Xt.render=function(t,e,n){if(!Pc(e))throw Error(B(200));return jc(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!Pc(t))throw Error(B(40));return t._reactRootContainer?(fi(function(){jc(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Xt.unstable_batchedUpdates=pf;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pc(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return jc(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function H0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H0)}catch(t){console.error(t)}}H0(),Hy.exports=Xt;var LS=Hy.exports,sg=LS;sd.createRoot=sg.createRoot,sd.hydrateRoot=sg.hydrateRoot;function MS(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[i,s]=R.useState(!1),o=R.useRef(n);o.current=n;const l=R.useRef(r);return l.current=r,R.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var h;s(!0),(h=o.current)===null||h===void 0||h.call(o)},c.onerror=()=>{var h;s(!1),(h=l.current)===null||h===void 0||h.call(l)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),i}const FS=R.createContext(null);function VS({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:i}){const s=MS({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),o=R.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return Yo.createElement(FS.Provider,{value:o},i)}var og={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},US=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,T=h&63;c||(T=64,o||(y=64)),r.push(n[p],n[m],n[y],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(G0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):US(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new BS;const y=s<<2|l>>4;if(r.push(y),h!==64){const T=l<<4&240|h>>2;if(r.push(T),m!==64){const b=h<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zS=function(t){const e=G0(t);return q0.encodeByteArray(e,!0)},Xl=function(t){return zS(t).replace(/\./g,"")},K0=function(t){try{return q0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=()=>$S().__FIREBASE_DEFAULTS__,HS=()=>{if(typeof process>"u"||typeof og>"u")return;const t=og.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&K0(t[1]);return e&&JSON.parse(e)},Oc=()=>{try{return WS()||HS()||GS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Q0=t=>{var e,n;return(n=(e=Oc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qS=t=>{const e=Q0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Y0=()=>{var t;return(t=Oc())===null||t===void 0?void 0:t.config},J0=t=>{var e;return(e=Oc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xl(JSON.stringify(n)),Xl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function JS(){var t;const e=(t=Oc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function X0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ZS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eC(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tC(){return!JS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z0(){try{return typeof indexedDB=="object"}catch{return!1}}function ew(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function nC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="FirebaseError";class kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rC,Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ei.prototype.create)}}class Ei{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?iC(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new kn(i,l,r)}}function iC(t,e){return t.replace(sC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const sC=/\{\$([^}]+)}/g;function oC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Do(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ag(s)&&ag(o)){if(!Do(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ag(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aC(t,e){const n=new lC(t,e);return n.subscribe.bind(n)}class lC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=zu),i.error===void 0&&(i.error=zu),i.complete===void 0&&(i.complete=zu);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zu(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=1e3,dC=2,hC=4*60*60*1e3,fC=.5;function lg(t,e=uC,n=dC){const r=e*Math.pow(n,t),i=Math.round(fC*r*(Math.random()-.5)*2);return Math.min(hC,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){return t&&t._delegate?t._delegate:t}class Tn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new KS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gC(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mC(t){return t===Jr?void 0:t}function gC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const vC={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},wC=de.INFO,_C={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},xC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_C[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dc{constructor(e){this.name=e,this._logLevel=wC,this._logHandler=xC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const EC=(t,e)=>e.some(n=>t instanceof n);let cg,ug;function IC(){return cg||(cg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SC(){return ug||(ug=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tw=new WeakMap,Xd=new WeakMap,nw=new WeakMap,$u=new WeakMap,Ef=new WeakMap;function CC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Pr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&tw.set(n,t)}).catch(()=>{}),Ef.set(e,t),e}function TC(t){if(Xd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Xd.set(t,e)}let Zd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kC(t){Zd=t(Zd)}function AC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wu(this),e,...n);return nw.set(r,e.sort?e.sort():[e]),Pr(r)}:SC().includes(t)?function(...e){return t.apply(Wu(this),e),Pr(tw.get(this))}:function(...e){return Pr(t.apply(Wu(this),e))}}function bC(t){return typeof t=="function"?AC(t):(t instanceof IDBTransaction&&TC(t),EC(t,IC())?new Proxy(t,Zd):t)}function Pr(t){if(t instanceof IDBRequest)return CC(t);if($u.has(t))return $u.get(t);const e=bC(t);return e!==t&&($u.set(t,e),Ef.set(e,t)),e}const Wu=t=>Ef.get(t);function rw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Pr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Pr(o.result),c.oldVersion,c.newVersion,Pr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const RC=["get","getKey","getAll","getAllKeys","count"],NC=["put","add","delete","clear"],Hu=new Map;function dg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hu.get(e))return Hu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=NC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RC.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&c.done]))[0]};return Hu.set(e,s),s}kC(t=>({...t,get:(e,n,r)=>dg(e,n)||t.get(e,n,r),has:(e,n)=>!!dg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eh="@firebase/app",hg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Dc("@firebase/app"),OC="@firebase/app-compat",DC="@firebase/analytics-compat",LC="@firebase/analytics",MC="@firebase/app-check-compat",FC="@firebase/app-check",VC="@firebase/auth",UC="@firebase/auth-compat",BC="@firebase/database",zC="@firebase/data-connect",$C="@firebase/database-compat",WC="@firebase/functions",HC="@firebase/functions-compat",GC="@firebase/installations",qC="@firebase/installations-compat",KC="@firebase/messaging",QC="@firebase/messaging-compat",YC="@firebase/performance",JC="@firebase/performance-compat",XC="@firebase/remote-config",ZC="@firebase/remote-config-compat",eT="@firebase/storage",tT="@firebase/storage-compat",nT="@firebase/firestore",rT="@firebase/vertexai-preview",iT="@firebase/firestore-compat",sT="firebase",oT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="[DEFAULT]",aT={[eh]:"fire-core",[OC]:"fire-core-compat",[LC]:"fire-analytics",[DC]:"fire-analytics-compat",[FC]:"fire-app-check",[MC]:"fire-app-check-compat",[VC]:"fire-auth",[UC]:"fire-auth-compat",[BC]:"fire-rtdb",[zC]:"fire-data-connect",[$C]:"fire-rtdb-compat",[WC]:"fire-fn",[HC]:"fire-fn-compat",[GC]:"fire-iid",[qC]:"fire-iid-compat",[KC]:"fire-fcm",[QC]:"fire-fcm-compat",[YC]:"fire-perf",[JC]:"fire-perf-compat",[XC]:"fire-rc",[ZC]:"fire-rc-compat",[eT]:"fire-gcs",[tT]:"fire-gcs-compat",[nT]:"fire-fst",[iT]:"fire-fst-compat",[rT]:"fire-vertex","fire-js":"fire-js",[sT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=new Map,lT=new Map,nh=new Map;function fg(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mn(t){const e=t.name;if(nh.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;nh.set(e,t);for(const n of Zl.values())fg(n,t);for(const n of lT.values())fg(n,t);return!0}function Ii(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new Ei("app","Firebase",cT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=oT;function iw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:th,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jr.create("bad-app-name",{appName:String(i)});if(n||(n=Y0()),!n)throw jr.create("no-options");const s=Zl.get(i);if(s){if(Do(n,s.options)&&Do(r,s.config))return s;throw jr.create("duplicate-app",{appName:i})}const o=new yC(i);for(const c of nh.values())o.addComponent(c);const l=new uT(n,r,o);return Zl.set(i,l),l}function If(t=th){const e=Zl.get(t);if(!e&&t===th&&Y0())return iw();if(!e)throw jr.create("no-app",{appName:t});return e}function cn(t,e,n){var r;let i=(r=aT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(l.join(" "));return}Mn(new Tn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firebase-heartbeat-database",hT=1,Lo="firebase-heartbeat-store";let Gu=null;function sw(){return Gu||(Gu=rw(dT,hT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lo)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),Gu}async function fT(t){try{const n=(await sw()).transaction(Lo),r=await n.objectStore(Lo).get(ow(t));return await n.done,r}catch(e){if(e instanceof kn)or.warn(e.message);else{const n=jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function pg(t,e){try{const r=(await sw()).transaction(Lo,"readwrite");await r.objectStore(Lo).put(e,ow(t)),await r.done}catch(n){if(n instanceof kn)or.warn(n.message);else{const r=jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function ow(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=1024,mT=30*24*60*60*1e3;class gT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=mg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=mT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mg(),{heartbeatsToSend:r,unsentEntries:i}=yT(this._heartbeatsCache.heartbeats),s=Xl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return or.warn(n),""}}}function mg(){return new Date().toISOString().substring(0,10)}function yT(t,e=pT){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z0()?ew().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function gg(t){return Xl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t){Mn(new Tn("platform-logger",e=>new PC(e),"PRIVATE")),Mn(new Tn("heartbeat",e=>new gT(e),"PRIVATE")),cn(eh,hg,t),cn(eh,hg,"esm2017"),cn("fire-js","")}wT("");function Sf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function aw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _T=aw,lw=new Ei("auth","Firebase",aw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Dc("@firebase/auth");function xT(t,...e){ec.logLevel<=de.WARN&&ec.warn(`Auth (${vs}): ${t}`,...e)}function gl(t,...e){ec.logLevel<=de.ERROR&&ec.error(`Auth (${vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw Tf(t,...e)}function Sn(t,...e){return Tf(t,...e)}function Cf(t,e,n){const r=Object.assign(Object.assign({},_T()),{[e]:n});return new Ei("auth","Firebase",r).create(e,{appName:t.name})}function Or(t){return Cf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cw(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fn(t,"argument-error"),Cf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lw.create(t,...e)}function ne(t,e,...n){if(!t)throw Tf(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gl(e),new Error(e)}function ar(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ET(){return yg()==="http:"||yg()==="https:"}function yg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ET()||X0()||"connection"in navigator)?navigator.onLine:!0}function ST(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=YS()||ZS()}get(){return IT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=new na(3e4,6e4);function Af(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ws(t,e,n,r,i={}){return dw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=ta(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},s);return XS()||(h.referrerPolicy="no-referrer"),uw.fetch()(hw(t,t.config.apiHost,n,l),h)})}async function dw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},CT),e);try{const i=new AT(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ya(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ya(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ya(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ya(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Cf(t,p,h);Fn(t,p)}}catch(i){if(i instanceof kn)throw i;Fn(t,"network-request-failed",{message:String(i)})}}async function kT(t,e,n,r,i={}){const s=await ws(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function hw(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?kf(t.config,i):`${t.config.apiScheme}://${i}`}class AT{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),TT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ya(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bT(t,e){return ws(t,"POST","/v1/accounts:delete",e)}async function fw(t,e){return ws(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RT(t,e=!1){const n=$t(t),r=await n.getIdToken(e),i=bf(r);ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ho(qu(i.auth_time)),issuedAtTime:ho(qu(i.iat)),expirationTime:ho(qu(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qu(t){return Number(t)*1e3}function bf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gl("JWT malformed, contained fewer than 3 sections"),null;try{const i=K0(n);return i?JSON.parse(i):(gl("Failed to decode base64 JWT payload"),null)}catch(i){return gl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function vg(t){const e=bf(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kn&&NT(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function NT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ho(this.lastLoginAt),this.creationTime=ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Mo(t,fw(n,{idToken:r}));ne(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pw(s.providerUserInfo):[],l=OT(t.providerData,o),c=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ih(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function jT(t){const e=$t(t);await tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OT(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pw(t){return t.map(e=>{var{providerId:n}=e,r=Sf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT(t,e){const n=await dw(t,{},async()=>{const r=ta({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=hw(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",uw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LT(t,e){return ws(t,"POST","/v2/accounts:revokeToken",Af(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=vg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await DT(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ji;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ji,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Sf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ih(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Mo(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RT(this,e)}reload(){return jT(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Or(this.auth));const e=await this.getIdToken();return await Mo(this,bT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,T=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(l=n.tenantId)!==null&&l!==void 0?l:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,I=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:x,emailVerified:O,isAnonymous:V,providerData:D,stsTokenManager:S}=n;ne(x&&S,e,"internal-error");const g=Ji.fromJSON(this.name,S);ne(typeof x=="string",e,"internal-error"),pr(m,e.name),pr(y,e.name),ne(typeof O=="boolean",e,"internal-error"),ne(typeof V=="boolean",e,"internal-error"),pr(T,e.name),pr(b,e.name),pr(k,e.name),pr(P,e.name),pr(I,e.name),pr(_,e.name);const w=new Jn({uid:x,auth:e,email:y,emailVerified:O,displayName:m,isAnonymous:V,photoURL:b,phoneNumber:T,tenantId:k,stsTokenManager:g,createdAt:I,lastLoginAt:_});return D&&Array.isArray(D)&&(w.providerData=D.map(E=>Object.assign({},E))),P&&(w._redirectEventId=P),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ji;i.updateFromServerResponse(n);const s=new Jn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await tc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?pw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Ji;l.updateFromIdToken(r);const c=new Jn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ih(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=new Map;function Xn(t){ar(t instanceof Function,"Expected a class definition");let e=wg.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mw.type="NONE";const _g=mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t,e,n){return`firebase:${t}:${e}:${n}`}class Xi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=yl(this.userKey,i.apiKey,s),this.fullPersistenceKey=yl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xi(Xn(_g),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Xn(_g);const o=yl(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Jn._fromJSON(e,p);h!==s&&(l=m),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Xi(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Xi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ww(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xw(e))return"Blackberry";if(Ew(e))return"Webos";if(yw(e))return"Safari";if((e.includes("chrome/")||vw(e))&&!e.includes("edge/"))return"Chrome";if(_w(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gw(t=At()){return/firefox\//i.test(t)}function yw(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vw(t=At()){return/crios\//i.test(t)}function ww(t=At()){return/iemobile/i.test(t)}function _w(t=At()){return/android/i.test(t)}function xw(t=At()){return/blackberry/i.test(t)}function Ew(t=At()){return/webos/i.test(t)}function Rf(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MT(t=At()){var e;return Rf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FT(){return eC()&&document.documentMode===10}function Iw(t=At()){return Rf(t)||_w(t)||Ew(t)||xw(t)||/windows phone/i.test(t)||ww(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e=[]){let n;switch(t){case"Browser":n=xg(At());break;case"Worker":n=`${xg(At())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UT(t,e={}){return ws(t,"GET","/v2/passwordPolicy",Af(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=6;class zT{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:BT,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Eg(this),this.idTokenSubscription=new Eg(this),this.beforeStateQueue=new VT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Xi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fw(this,{idToken:e}),r=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(jn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ST()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(Or(this));const n=e?$t(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(Or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UT(this),n=new zT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ei("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await LT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Xi.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _s(t){return $t(t)}class Eg{constructor(e){this.auth=e,this.observer=null,this.addObserver=aC(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WT(t){Nf=t}function HT(t){return Nf.loadJS(t)}function GT(){return Nf.gapiScript}function qT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e){const n=Ii(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Do(s,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function QT(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function YT(t,e,n){const r=_s(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Cw(e),{host:o,port:l}=JT(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),XT()}function Cw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JT(t){const e=Cw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ig(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ig(o)}}}function Ig(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zi(t,e){return kT(t,"POST","/v1/accounts:signInWithIdp",Af(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="http://localhost";class pi extends Tw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Sf(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new pi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zi(e,n)}buildRequest(){const e={requestUri:ZT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ta(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Lc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends ra{constructor(){super("facebook.com")}static credential(e){return pi._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gn.credential(e.oauthAccessToken)}catch{return null}}}Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends ra{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pi._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qn.credential(n,r)}catch{return null}}}qn.GOOGLE_SIGN_IN_METHOD="google.com";qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends ra{constructor(){super("github.com")}static credential(e){return pi._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.GITHUB_SIGN_IN_METHOD="github.com";wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends ra{constructor(){super("twitter.com")}static credential(e,n){return pi._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Jn._fromIdTokenResponse(e,r,i),o=Sg(r);return new cs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Sg(r);return new cs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Sg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends kn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,nc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new nc(e,n,r,i)}}function kw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nc._fromErrorAndOperation(t,s,e,r):s})}async function ek(t,e,n=!1){const r=await Mo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t,e,n=!1){const{auth:r}=t;if(jn(r.app))return Promise.reject(Or(r));const i="reauthenticate";try{const s=await Mo(t,kw(r,i,e,t),n);ne(s.idToken,r,"internal-error");const o=bf(s.idToken);ne(o,r,"internal-error");const{sub:l}=o;return ne(t.uid===l,r,"user-mismatch"),cs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(t,e,n=!1){if(jn(t.app))return Promise.reject(Or(t));const r="signIn",i=await kw(t,r,e),s=await cs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function rk(t,e,n,r){return $t(t).onIdTokenChanged(e,n,r)}function ik(t,e,n){return $t(t).beforeAuthStateChanged(e,n)}function sk(t,e,n,r){return $t(t).onAuthStateChanged(e,n,r)}function ok(t){return $t(t).signOut()}const rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rc,"1"),this.storage.removeItem(rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=1e3,lk=10;class bw extends Aw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Iw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);FT()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,lk):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ak)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bw.type="LOCAL";const ck=bw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends Aw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Rw.type="SESSION";const Nw=Rw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Mc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(n.origin,s)),c=await uk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const h=Pf("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(y.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function hk(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function fk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mk(){return Pw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="firebaseLocalStorageDb",gk=1,ic="firebaseLocalStorage",Ow="fbase_key";class ia{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fc(t,e){return t.transaction([ic],e?"readwrite":"readonly").objectStore(ic)}function yk(){const t=indexedDB.deleteDatabase(jw);return new ia(t).toPromise()}function sh(){const t=indexedDB.open(jw,gk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ic,{keyPath:Ow})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ic)?e(r):(r.close(),await yk(),e(await sh()))})})}async function Cg(t,e,n){const r=Fc(t,!0).put({[Ow]:e,value:n});return new ia(r).toPromise()}async function vk(t,e){const n=Fc(t,!1).get(e),r=await new ia(n).toPromise();return r===void 0?null:r.value}function Tg(t,e){const n=Fc(t,!0).delete(e);return new ia(n).toPromise()}const wk=800,_k=3;class Dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_k)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mc._getInstance(mk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fk(),!this.activeServiceWorker)return;this.sender=new dk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sh();return await Cg(e,rc,"1"),await Tg(e,rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Cg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Fc(i,!1).getAll();return new ia(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dw.type="LOCAL";const xk=Dw;new na(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t,e){return e?Xn(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends Tw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ek(t){return nk(t.auth,new Of(t),t.bypassAuthState)}function Ik(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),tk(n,new Of(t),t.bypassAuthState)}async function Sk(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),ek(n,new Of(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ek;case"linkViaPopup":case"linkViaRedirect":return Sk;case"reauthViaPopup":case"reauthViaRedirect":return Ik;default:Fn(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new na(2e3,1e4);async function Tk(t,e,n){if(jn(t.app))return Promise.reject(Sn(t,"operation-not-supported-in-this-environment"));const r=_s(t);cw(t,e,Lc);const i=jf(r,n);return new ti(r,"signInViaPopup",e,i).executeNotNull()}class ti extends Lw{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ti.currentPopupAction&&ti.currentPopupAction.cancel(),ti.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=Pf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ti.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ck.get())};e()}}ti.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="pendingRedirect",vl=new Map;class Ak extends Lw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vl.get(this.auth._key());if(!e){try{const r=await bk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vl.set(this.auth._key(),e)}return this.bypassAuthState||vl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bk(t,e){const n=Fw(e),r=Mw(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Rk(t,e){return Mw(t)._set(Fw(e),"true")}function Nk(t,e){vl.set(t._key(),e)}function Mw(t){return Xn(t._redirectPersistence)}function Fw(t){return yl(kk,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t,e,n){return jk(t,e,n)}async function jk(t,e,n){if(jn(t.app))return Promise.reject(Or(t));const r=_s(t);cw(t,e,Lc),await r._initializationPromise;const i=jf(r,n);return await Rk(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Ok(t,e){return await _s(t)._initializationPromise,Vw(t,e,!1)}async function Vw(t,e,n=!1){if(jn(t.app))return Promise.reject(Or(t));const r=_s(t),i=jf(r,e),o=await new Ak(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=10*60*1e3;class Lk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Uw(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dk&&this.cachedEventUids.clear(),this.cachedEventUids.has(kg(e))}saveEventToCache(e){this.cachedEventUids.add(kg(e)),this.lastProcessedEventTime=Date.now()}}function kg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Uw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Mk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t,e={}){return ws(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uk=/^https?/;async function Bk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Fk(t);for(const n of e)try{if(zk(n))return}catch{}Fn(t,"unauthorized-domain")}function zk(t){const e=rh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Uk.test(n))return!1;if(Vk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new na(3e4,6e4);function Ag(){const t=Ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Wk(t){return new Promise((e,n)=>{var r,i,s;function o(){Ag(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ag(),n(Sn(t,"network-request-failed"))},timeout:$k.get()})}if(!((i=(r=Ln().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ln().gapi)===null||s===void 0)&&s.load)o();else{const l=qT("iframefcb");return Ln()[l]=()=>{gapi.load?o():n(Sn(t,"network-request-failed"))},HT(`${GT()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw wl=null,e})}let wl=null;function Hk(t){return wl=wl||Wk(t),wl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new na(5e3,15e3),qk="__/auth/iframe",Kk="emulator/auth/iframe",Qk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jk(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kf(e,Kk):`https://${t.config.authDomain}/${qk}`,r={apiKey:e.apiKey,appName:t.name,v:vs},i=Yk.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ta(r).slice(1)}`}async function Xk(t){const e=await Hk(t),n=Ln().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:Jk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qk,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Sn(t,"network-request-failed"),l=Ln().setTimeout(()=>{s(o)},Gk.get());function c(){Ln().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eA=500,tA=600,nA="_blank",rA="http://localhost";class bg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iA(t,e,n,r=eA,i=tA){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Zk),{width:r.toString(),height:i.toString(),top:s,left:o}),h=At().toLowerCase();n&&(l=vw(h)?nA:n),gw(h)&&(e=e||rA,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[T,b])=>`${y}${T}=${b},`,"");if(MT(h)&&l!=="_self")return sA(e||"",l),new bg(null);const m=window.open(e||"",l,p);ne(m,t,"popup-blocked");try{m.focus()}catch{}return new bg(m)}function sA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="__/auth/handler",aA="emulator/auth/handler",lA=encodeURIComponent("fac");async function Rg(t,e,n,r,i,s){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vs,eventId:i};if(e instanceof Lc){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",oC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof ra){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${lA}=${encodeURIComponent(c)}`:"";return`${cA(t)}?${ta(l).slice(1)}${h}`}function cA({config:t}){return t.emulator?kf(t,aA):`https://${t.authDomain}/${oA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku="webStorageSupport";class uA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nw,this._completeRedirectFn=Vw,this._overrideRedirectResult=Nk}async _openPopup(e,n,r,i){var s;ar((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Rg(e,n,r,rh(),i);return iA(e,o,Pf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Rg(e,n,r,rh(),i);return hk(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ar(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Xk(e),r=new Lk(e);return n.register("authEvent",i=>(ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ku,{type:Ku},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ku];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Bk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Iw()||yw()||Rf()}}const dA=uA;var Ng="@firebase/auth",Pg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pA(t){Mn(new Tn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sw(t)},h=new $T(r,i,s,c);return QT(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mn(new Tn("auth-internal",e=>{const n=_s(e.getProvider("auth").getImmediate());return(r=>new hA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cn(Ng,Pg,fA(t)),cn(Ng,Pg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=5*60,gA=J0("authIdTokenMaxAge")||mA;let jg=null;const yA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gA)return;const i=n==null?void 0:n.token;jg!==i&&(jg=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function vA(t=If()){const e=Ii(t,"auth");if(e.isInitialized())return e.getImmediate();const n=KT(t,{popupRedirectResolver:dA,persistence:[xk,ck,Nw]}),r=J0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=yA(s.toString());ik(n,o,()=>o(n.currentUser)),rk(n,l=>o(l))}}const i=Q0("auth");return i&&YT(n,`http://${i}`),n}function wA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WT({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Sn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",wA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pA("Browser");var _A="firebase",xA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn(_A,xA,"app");var Og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,g){function w(){}w.prototype=g.prototype,S.D=g.prototype,S.prototype=new w,S.prototype.constructor=S,S.C=function(E,A,N){for(var C=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)C[oe-2]=arguments[oe];return g.prototype[A].apply(E,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,g,w){w||(w=0);var E=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)E[A]=g.charCodeAt(w++)|g.charCodeAt(w++)<<8|g.charCodeAt(w++)<<16|g.charCodeAt(w++)<<24;else for(A=0;16>A;++A)E[A]=g[w++]|g[w++]<<8|g[w++]<<16|g[w++]<<24;g=S.g[0],w=S.g[1],A=S.g[2];var N=S.g[3],C=g+(N^w&(A^N))+E[0]+3614090360&4294967295;g=w+(C<<7&4294967295|C>>>25),C=N+(A^g&(w^A))+E[1]+3905402710&4294967295,N=g+(C<<12&4294967295|C>>>20),C=A+(w^N&(g^w))+E[2]+606105819&4294967295,A=N+(C<<17&4294967295|C>>>15),C=w+(g^A&(N^g))+E[3]+3250441966&4294967295,w=A+(C<<22&4294967295|C>>>10),C=g+(N^w&(A^N))+E[4]+4118548399&4294967295,g=w+(C<<7&4294967295|C>>>25),C=N+(A^g&(w^A))+E[5]+1200080426&4294967295,N=g+(C<<12&4294967295|C>>>20),C=A+(w^N&(g^w))+E[6]+2821735955&4294967295,A=N+(C<<17&4294967295|C>>>15),C=w+(g^A&(N^g))+E[7]+4249261313&4294967295,w=A+(C<<22&4294967295|C>>>10),C=g+(N^w&(A^N))+E[8]+1770035416&4294967295,g=w+(C<<7&4294967295|C>>>25),C=N+(A^g&(w^A))+E[9]+2336552879&4294967295,N=g+(C<<12&4294967295|C>>>20),C=A+(w^N&(g^w))+E[10]+4294925233&4294967295,A=N+(C<<17&4294967295|C>>>15),C=w+(g^A&(N^g))+E[11]+2304563134&4294967295,w=A+(C<<22&4294967295|C>>>10),C=g+(N^w&(A^N))+E[12]+1804603682&4294967295,g=w+(C<<7&4294967295|C>>>25),C=N+(A^g&(w^A))+E[13]+4254626195&4294967295,N=g+(C<<12&4294967295|C>>>20),C=A+(w^N&(g^w))+E[14]+2792965006&4294967295,A=N+(C<<17&4294967295|C>>>15),C=w+(g^A&(N^g))+E[15]+1236535329&4294967295,w=A+(C<<22&4294967295|C>>>10),C=g+(A^N&(w^A))+E[1]+4129170786&4294967295,g=w+(C<<5&4294967295|C>>>27),C=N+(w^A&(g^w))+E[6]+3225465664&4294967295,N=g+(C<<9&4294967295|C>>>23),C=A+(g^w&(N^g))+E[11]+643717713&4294967295,A=N+(C<<14&4294967295|C>>>18),C=w+(N^g&(A^N))+E[0]+3921069994&4294967295,w=A+(C<<20&4294967295|C>>>12),C=g+(A^N&(w^A))+E[5]+3593408605&4294967295,g=w+(C<<5&4294967295|C>>>27),C=N+(w^A&(g^w))+E[10]+38016083&4294967295,N=g+(C<<9&4294967295|C>>>23),C=A+(g^w&(N^g))+E[15]+3634488961&4294967295,A=N+(C<<14&4294967295|C>>>18),C=w+(N^g&(A^N))+E[4]+3889429448&4294967295,w=A+(C<<20&4294967295|C>>>12),C=g+(A^N&(w^A))+E[9]+568446438&4294967295,g=w+(C<<5&4294967295|C>>>27),C=N+(w^A&(g^w))+E[14]+3275163606&4294967295,N=g+(C<<9&4294967295|C>>>23),C=A+(g^w&(N^g))+E[3]+4107603335&4294967295,A=N+(C<<14&4294967295|C>>>18),C=w+(N^g&(A^N))+E[8]+1163531501&4294967295,w=A+(C<<20&4294967295|C>>>12),C=g+(A^N&(w^A))+E[13]+2850285829&4294967295,g=w+(C<<5&4294967295|C>>>27),C=N+(w^A&(g^w))+E[2]+4243563512&4294967295,N=g+(C<<9&4294967295|C>>>23),C=A+(g^w&(N^g))+E[7]+1735328473&4294967295,A=N+(C<<14&4294967295|C>>>18),C=w+(N^g&(A^N))+E[12]+2368359562&4294967295,w=A+(C<<20&4294967295|C>>>12),C=g+(w^A^N)+E[5]+4294588738&4294967295,g=w+(C<<4&4294967295|C>>>28),C=N+(g^w^A)+E[8]+2272392833&4294967295,N=g+(C<<11&4294967295|C>>>21),C=A+(N^g^w)+E[11]+1839030562&4294967295,A=N+(C<<16&4294967295|C>>>16),C=w+(A^N^g)+E[14]+4259657740&4294967295,w=A+(C<<23&4294967295|C>>>9),C=g+(w^A^N)+E[1]+2763975236&4294967295,g=w+(C<<4&4294967295|C>>>28),C=N+(g^w^A)+E[4]+1272893353&4294967295,N=g+(C<<11&4294967295|C>>>21),C=A+(N^g^w)+E[7]+4139469664&4294967295,A=N+(C<<16&4294967295|C>>>16),C=w+(A^N^g)+E[10]+3200236656&4294967295,w=A+(C<<23&4294967295|C>>>9),C=g+(w^A^N)+E[13]+681279174&4294967295,g=w+(C<<4&4294967295|C>>>28),C=N+(g^w^A)+E[0]+3936430074&4294967295,N=g+(C<<11&4294967295|C>>>21),C=A+(N^g^w)+E[3]+3572445317&4294967295,A=N+(C<<16&4294967295|C>>>16),C=w+(A^N^g)+E[6]+76029189&4294967295,w=A+(C<<23&4294967295|C>>>9),C=g+(w^A^N)+E[9]+3654602809&4294967295,g=w+(C<<4&4294967295|C>>>28),C=N+(g^w^A)+E[12]+3873151461&4294967295,N=g+(C<<11&4294967295|C>>>21),C=A+(N^g^w)+E[15]+530742520&4294967295,A=N+(C<<16&4294967295|C>>>16),C=w+(A^N^g)+E[2]+3299628645&4294967295,w=A+(C<<23&4294967295|C>>>9),C=g+(A^(w|~N))+E[0]+4096336452&4294967295,g=w+(C<<6&4294967295|C>>>26),C=N+(w^(g|~A))+E[7]+1126891415&4294967295,N=g+(C<<10&4294967295|C>>>22),C=A+(g^(N|~w))+E[14]+2878612391&4294967295,A=N+(C<<15&4294967295|C>>>17),C=w+(N^(A|~g))+E[5]+4237533241&4294967295,w=A+(C<<21&4294967295|C>>>11),C=g+(A^(w|~N))+E[12]+1700485571&4294967295,g=w+(C<<6&4294967295|C>>>26),C=N+(w^(g|~A))+E[3]+2399980690&4294967295,N=g+(C<<10&4294967295|C>>>22),C=A+(g^(N|~w))+E[10]+4293915773&4294967295,A=N+(C<<15&4294967295|C>>>17),C=w+(N^(A|~g))+E[1]+2240044497&4294967295,w=A+(C<<21&4294967295|C>>>11),C=g+(A^(w|~N))+E[8]+1873313359&4294967295,g=w+(C<<6&4294967295|C>>>26),C=N+(w^(g|~A))+E[15]+4264355552&4294967295,N=g+(C<<10&4294967295|C>>>22),C=A+(g^(N|~w))+E[6]+2734768916&4294967295,A=N+(C<<15&4294967295|C>>>17),C=w+(N^(A|~g))+E[13]+1309151649&4294967295,w=A+(C<<21&4294967295|C>>>11),C=g+(A^(w|~N))+E[4]+4149444226&4294967295,g=w+(C<<6&4294967295|C>>>26),C=N+(w^(g|~A))+E[11]+3174756917&4294967295,N=g+(C<<10&4294967295|C>>>22),C=A+(g^(N|~w))+E[2]+718787259&4294967295,A=N+(C<<15&4294967295|C>>>17),C=w+(N^(A|~g))+E[9]+3951481745&4294967295,S.g[0]=S.g[0]+g&4294967295,S.g[1]=S.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,g){g===void 0&&(g=S.length);for(var w=g-this.blockSize,E=this.B,A=this.h,N=0;N<g;){if(A==0)for(;N<=w;)i(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<g;)if(E[A++]=S.charCodeAt(N++),A==this.blockSize){i(this,E),A=0;break}}else for(;N<g;)if(E[A++]=S[N++],A==this.blockSize){i(this,E),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var g=1;g<S.length-8;++g)S[g]=0;var w=8*this.o;for(g=S.length-8;g<S.length;++g)S[g]=w&255,w/=256;for(this.u(S),S=Array(16),g=w=0;4>g;++g)for(var E=0;32>E;E+=8)S[w++]=this.g[g]>>>E&255;return S};function s(S,g){var w=l;return Object.prototype.hasOwnProperty.call(w,S)?w[S]:w[S]=g(S)}function o(S,g){this.h=g;for(var w=[],E=!0,A=S.length-1;0<=A;A--){var N=S[A]|0;E&&N==g||(w[A]=N,E=!1)}this.g=w}var l={};function c(S){return-128<=S&&128>S?s(S,function(g){return new o([g|0],0>g?-1:0)}):new o([S|0],0>S?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return P(h(-S));for(var g=[],w=1,E=0;S>=w;E++)g[E]=S/w|0,w*=4294967296;return new o(g,0)}function p(S,g){if(S.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(S.charAt(0)=="-")return P(p(S.substring(1),g));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(g,8)),E=m,A=0;A<S.length;A+=8){var N=Math.min(8,S.length-A),C=parseInt(S.substring(A,A+N),g);8>N?(N=h(Math.pow(g,N)),E=E.j(N).add(h(C))):(E=E.j(w),E=E.add(h(C)))}return E}var m=c(0),y=c(1),T=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var S=0,g=1,w=0;w<this.g.length;w++){var E=this.i(w);S+=(0<=E?E:4294967296+E)*g,g*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b(this))return"0";if(k(this))return"-"+P(this).toString(S);for(var g=h(Math.pow(S,6)),w=this,E="";;){var A=O(w,g).g;w=I(w,A.j(g));var N=((0<w.g.length?w.g[0]:w.h)>>>0).toString(S);if(w=A,b(w))return N+E;for(;6>N.length;)N="0"+N;E=N+E}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function b(S){if(S.h!=0)return!1;for(var g=0;g<S.g.length;g++)if(S.g[g]!=0)return!1;return!0}function k(S){return S.h==-1}t.l=function(S){return S=I(this,S),k(S)?-1:b(S)?0:1};function P(S){for(var g=S.g.length,w=[],E=0;E<g;E++)w[E]=~S.g[E];return new o(w,~S.h).add(y)}t.abs=function(){return k(this)?P(this):this},t.add=function(S){for(var g=Math.max(this.g.length,S.g.length),w=[],E=0,A=0;A<=g;A++){var N=E+(this.i(A)&65535)+(S.i(A)&65535),C=(N>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);E=C>>>16,N&=65535,C&=65535,w[A]=C<<16|N}return new o(w,w[w.length-1]&-2147483648?-1:0)};function I(S,g){return S.add(P(g))}t.j=function(S){if(b(this)||b(S))return m;if(k(this))return k(S)?P(this).j(P(S)):P(P(this).j(S));if(k(S))return P(this.j(P(S)));if(0>this.l(T)&&0>S.l(T))return h(this.m()*S.m());for(var g=this.g.length+S.g.length,w=[],E=0;E<2*g;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var A=0;A<S.g.length;A++){var N=this.i(E)>>>16,C=this.i(E)&65535,oe=S.i(A)>>>16,Ke=S.i(A)&65535;w[2*E+2*A]+=C*Ke,_(w,2*E+2*A),w[2*E+2*A+1]+=N*Ke,_(w,2*E+2*A+1),w[2*E+2*A+1]+=C*oe,_(w,2*E+2*A+1),w[2*E+2*A+2]+=N*oe,_(w,2*E+2*A+2)}for(E=0;E<g;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=g;E<2*g;E++)w[E]=0;return new o(w,0)};function _(S,g){for(;(S[g]&65535)!=S[g];)S[g+1]+=S[g]>>>16,S[g]&=65535,g++}function x(S,g){this.g=S,this.h=g}function O(S,g){if(b(g))throw Error("division by zero");if(b(S))return new x(m,m);if(k(S))return g=O(P(S),g),new x(P(g.g),P(g.h));if(k(g))return g=O(S,P(g)),new x(P(g.g),g.h);if(30<S.g.length){if(k(S)||k(g))throw Error("slowDivide_ only works with positive integers.");for(var w=y,E=g;0>=E.l(S);)w=V(w),E=V(E);var A=D(w,1),N=D(E,1);for(E=D(E,2),w=D(w,2);!b(E);){var C=N.add(E);0>=C.l(S)&&(A=A.add(w),N=C),E=D(E,1),w=D(w,1)}return g=I(S,A.j(g)),new x(A,g)}for(A=m;0<=S.l(g);){for(w=Math.max(1,Math.floor(S.m()/g.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),N=h(w),C=N.j(g);k(C)||0<C.l(S);)w-=E,N=h(w),C=N.j(g);b(N)&&(N=y),A=A.add(N),S=I(S,C)}return new x(A,S)}t.A=function(S){return O(this,S).h},t.and=function(S){for(var g=Math.max(this.g.length,S.g.length),w=[],E=0;E<g;E++)w[E]=this.i(E)&S.i(E);return new o(w,this.h&S.h)},t.or=function(S){for(var g=Math.max(this.g.length,S.g.length),w=[],E=0;E<g;E++)w[E]=this.i(E)|S.i(E);return new o(w,this.h|S.h)},t.xor=function(S){for(var g=Math.max(this.g.length,S.g.length),w=[],E=0;E<g;E++)w[E]=this.i(E)^S.i(E);return new o(w,this.h^S.h)};function V(S){for(var g=S.g.length+1,w=[],E=0;E<g;E++)w[E]=S.i(E)<<1|S.i(E-1)>>>31;return new o(w,S.h)}function D(S,g){var w=g>>5;g%=32;for(var E=S.g.length-w,A=[],N=0;N<E;N++)A[N]=0<g?S.i(N+w)>>>g|S.i(N+w+1)<<32-g:S.i(N+w);return new o(A,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Bw=o}).apply(typeof Og<"u"?Og:typeof self<"u"?self:typeof window<"u"?window:{});var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zw,eo,$w,_l,oh,Ww,Hw,Gw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ja=="object"&&Ja];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in f))break e;f=f[j]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,v=!1,j={next:function(){if(!v&&f<a.length){var L=f++;return{value:d(L,a[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,v),a.apply(d,j)}}return function(){return a.apply(d,arguments)}}function y(a,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function T(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function b(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,j,L){for(var W=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)W[xe-2]=arguments[xe];return d.prototype[j].apply(v,W)}}function k(a){const d=a.length;if(0<d){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function P(a,d){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(c(v)){const j=a.length||0,L=v.length||0;a.length=j+L;for(let W=0;W<L;W++)a[j+W]=v[W]}else a.push(v)}}class I{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function O(a){return O[" "](a),a}O[" "]=function(){};var V=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function D(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function S(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function g(a){const d={};for(const f in a)d[f]=a[f];return d}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(f in v)a[f]=v[f];for(let L=0;L<w.length;L++)f=w[L],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function A(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function N(a){l.setTimeout(()=>{throw a},0)}function C(){var a=X;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class oe{constructor(){this.h=this.g=null}add(d,f){const v=Ke.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var Ke=new I(()=>new Dt,a=>a.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let bt,H=!1,X=new oe,te=()=>{const a=l.Promise.resolve(void 0);bt=()=>{a.then(we)}};var we=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){N(f)}var d=Ke;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}H=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function Ue(a,d){if(Q.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(V){e:{try{O(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ie[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ue.aa.h.call(this)}}b(Ue,Q);var Ie={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),Ci=0;function Ts(a,d,f,v,j){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=j,this.key=++Ci,this.da=this.fa=!1}function hn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Wr(a){this.src=a,this.g={},this.h=0}Wr.prototype.add=function(a,d,f,v,j){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var W=Ti(a,d,v,j);return-1<W?(d=a[W],f||(d.fa=!1)):(d=new Ts(d,this.src,L,!!v,j),d.fa=f,a.push(d)),d};function Z(a,d){var f=d.type;if(f in a.g){var v=a.g[f],j=Array.prototype.indexOf.call(v,d,void 0),L;(L=0<=j)&&Array.prototype.splice.call(v,j,1),L&&(hn(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Ti(a,d,f,v){for(var j=0;j<a.length;++j){var L=a[j];if(!L.da&&L.listener==d&&L.capture==!!f&&L.ha==v)return j}return-1}var nt="closure_lm_"+(1e6*Math.random()|0),ye={};function ua(a,d,f,v,j){if(Array.isArray(d)){for(var L=0;L<d.length;L++)ua(a,d[L],f,v,j);return null}return f=ha(f),a&&a[Qe]?a.K(d,f,h(v)?!!v.capture:!1,j):ie(a,d,f,!1,v,j)}function ie(a,d,f,v,j,L){if(!d)throw Error("Invalid event type");var W=h(j)?!!j.capture:!!j,xe=da(a);if(xe||(a[nt]=xe=new Wr(a)),f=xe.add(d,f,v,W,L),f.proxy)return f;if(v=Lt(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)ae||(j=W),j===void 0&&(j=!1),a.addEventListener(d.toString(),v,j);else if(a.attachEvent)a.attachEvent(ks(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Lt(){function a(f){return d.call(a.src,a.listener,f)}const d=nu;return a}function se(a,d,f,v,j){if(Array.isArray(d))for(var L=0;L<d.length;L++)se(a,d[L],f,v,j);else v=h(v)?!!v.capture:!!v,f=ha(f),a&&a[Qe]?(a=a.i,d=String(d).toString(),d in a.g&&(L=a.g[d],f=Ti(L,f,v,j),-1<f&&(hn(L[f]),Array.prototype.splice.call(L,f,1),L.length==0&&(delete a.g[d],a.h--)))):a&&(a=da(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Ti(d,f,v,j)),(f=-1<a?d[a]:null)&&Rt(f))}function Rt(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Qe])Z(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(ks(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=da(d))?(Z(f,a),f.h==0&&(f.src=null,d[nt]=null)):hn(a)}}}function ks(a){return a in ye?ye[a]:ye[a]="on"+a}function nu(a,d){if(a.da)a=!0;else{d=new Ue(d,this);var f=a.listener,v=a.ha||a.src;a.fa&&Rt(a),a=f.call(v,d)}return a}function da(a){return a=a[nt],a instanceof Wr?a:null}var As="__closure_events_fn_"+(1e9*Math.random()>>>0);function ha(a){return typeof a=="function"?a:(a[As]||(a[As]=function(d){return a.handleEvent(d)}),a[As])}function Ye(){F.call(this),this.i=new Wr(this),this.M=this,this.F=null}b(Ye,F),Ye.prototype[Qe]=!0,Ye.prototype.removeEventListener=function(a,d,f,v){se(this,a,d,f,v)};function rt(a,d){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new Q(d,a);else if(d instanceof Q)d.target=d.target||a;else{var j=d;d=new Q(v,a),E(d,j)}if(j=!0,f)for(var L=f.length-1;0<=L;L--){var W=d.g=f[L];j=ki(W,v,!0,d)&&j}if(W=d.g=a,j=ki(W,v,!0,d)&&j,j=ki(W,v,!1,d)&&j,f)for(L=0;L<f.length;L++)W=d.g=f[L],j=ki(W,v,!1,d)&&j}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],v=0;v<f.length;v++)hn(f[v]);delete a.g[d],a.h--}}this.F=null},Ye.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},Ye.prototype.L=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function ki(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,L=0;L<d.length;++L){var W=d[L];if(W&&!W.da&&W.capture==f){var xe=W.listener,dt=W.ha||W.src;W.fa&&Z(a.i,W),j=xe.call(dt,v)!==!1&&j}}return j&&!v.defaultPrevented}function fa(a,d,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function bs(a){a.g=fa(()=>{a.g=null,a.i&&(a.i=!1,bs(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class ru extends F{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:bs(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hr(a){F.call(this),this.h=a,this.g={}}b(Hr,F);var pa=[];function ma(a){D(a.g,function(d,f){this.g.hasOwnProperty(f)&&Rt(d)},a),a.g={}}Hr.prototype.N=function(){Hr.aa.N.call(this),ma(this)},Hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rs=l.JSON.stringify,ga=l.JSON.parse,M=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function G(){}G.prototype.h=null;function $(a){return a.h||(a.h=a.i())}function J(){}var q={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){Q.call(this,"d")}b(ve,Q);function Re(){Q.call(this,"c")}b(Re,Q);var Te={},ct=null;function je(){return ct=ct||new Ye}Te.La="serverreachability";function Je(a){Q.call(this,Te.La,a)}b(Je,Q);function me(a){const d=je();rt(d,new Je(d))}Te.STAT_EVENT="statevent";function An(a,d){Q.call(this,Te.STAT_EVENT,a),this.stat=d}b(An,Q);function $e(a){const d=je();rt(d,new An(d,a))}Te.Ma="timingevent";function Ne(a,d){Q.call(this,Te.Ma,a),this.size=d}b(Ne,Q);function tn(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Xe(){this.g=!0}Xe.prototype.xa=function(){this.g=!1};function ut(a,d,f,v,j,L){a.info(function(){if(a.g)if(L)for(var W="",xe=L.split("&"),dt=0;dt<xe.length;dt++){var ge=xe[dt].split("=");if(1<ge.length){var vt=ge[0];ge=ge[1];var wt=vt.split("_");W=2<=wt.length&&wt[1]=="type"?W+(vt+"="+ge+"&"):W+(vt+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+d+`
`+f+`
`+W})}function bn(a,d,f,v,j,L,W){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+d+`
`+f+`
`+L+" "+W})}function Ht(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+va(a,f)+(v?" "+v:"")})}function ya(a,d){a.info(function(){return"TIMEOUT: "+d})}Xe.prototype.info=function(){};function va(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var j=v[1];if(Array.isArray(j)&&!(1>j.length)){var L=j[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<j.length;W++)j[W]=""}}}}return Rs(f)}catch{return d}}var wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},iu;function _a(){}b(_a,G),_a.prototype.g=function(){return new XMLHttpRequest},_a.prototype.i=function(){return{}},iu=new _a;function ur(a,d,f,v){this.j=a,this.i=d,this.l=f,this.R=v||1,this.U=new Hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fp}function fp(){this.i=null,this.g="",this.h=!1}var pp={},su={};function ou(a,d,f){a.L=1,a.v=Sa(zn(d)),a.m=f,a.P=!0,mp(a,null)}function mp(a,d){a.F=Date.now(),xa(a),a.A=zn(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),bp(f.i,"t",v),a.C=0,f=a.j.J,a.h=new fp,a.g=qp(a.j,f?d:null,!a.m),0<a.O&&(a.M=new ru(y(a.Y,a,a.g),a.O)),d=a.U,f=a.g,v=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(pa[0]=j.toString()),j=pa);for(var L=0;L<j.length;L++){var W=ua(f,j[L],v||d.handleEvent,!1,d.h||d);if(!W)break;d.g[W.key]=W}d=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),me(),ut(a.i,a.u,a.A,a.l,a.R,a.m)}ur.prototype.ca=function(a){a=a.target;const d=this.M;d&&$n(a)==3?d.j():this.Y(a)},ur.prototype.Y=function(a){try{if(a==this.g)e:{const wt=$n(this.g);var d=this.g.Ba();const Ri=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Lp(this.g)))){this.J||wt!=4||d==7||(d==8||0>=Ri?me(3):me(2)),au(this);var f=this.g.Z();this.X=f;t:if(gp(this)){var v=Lp(this.g);a="";var j=v.length,L=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),Ns(this);var W="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(L&&d==j-1)});v.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=f==200,bn(this.i,this.u,this.A,this.l,this.R,wt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,dt=this.g;if((xe=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(xe)){var ge=xe;break t}}ge=null}if(f=ge)Ht(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lu(this,f);else{this.o=!1,this.s=3,$e(12),Gr(this),Ns(this);break e}}if(this.P){f=!0;let fn;for(;!this.J&&this.C<W.length;)if(fn=$x(this,W),fn==su){wt==4&&(this.s=4,$e(14),f=!1),Ht(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==pp){this.s=4,$e(15),Ht(this.i,this.l,W,"[Invalid Chunk]"),f=!1;break}else Ht(this.i,this.l,fn,null),lu(this,fn);if(gp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||W.length!=0||this.h.h||(this.s=1,$e(16),f=!1),this.o=this.o&&f,!f)Ht(this.i,this.l,W,"[Invalid Chunked Response]"),Gr(this),Ns(this);else if(0<W.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),pu(vt),vt.M=!0,$e(11))}}else Ht(this.i,this.l,W,null),lu(this,W);wt==4&&Gr(this),this.o&&!this.J&&(wt==4?$p(this.j,this):(this.o=!1,xa(this)))}else oE(this.g),f==400&&0<W.indexOf("Unknown SID")?(this.s=3,$e(12)):(this.s=0,$e(13)),Gr(this),Ns(this)}}}catch{}finally{}};function gp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function $x(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?su:(f=Number(d.substring(f,v)),isNaN(f)?pp:(v+=1,v+f>d.length?su:(d=d.slice(v,v+f),a.C=v+f,d)))}ur.prototype.cancel=function(){this.J=!0,Gr(this)};function xa(a){a.S=Date.now()+a.I,yp(a,a.I)}function yp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=tn(y(a.ba,a),d)}function au(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ur.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ya(this.i,this.A),this.L!=2&&(me(),$e(17)),Gr(this),this.s=2,Ns(this)):yp(this,this.S-a)};function Ns(a){a.j.G==0||a.J||$p(a.j,a)}function Gr(a){au(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,ma(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function lu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||cu(f.h,a))){if(!a.K&&cu(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Ra(f),Aa(f);else break e;fu(f),$e(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=tn(y(f.Za,f),6e3));if(1>=_p(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Kr(f,11)}else if((a.K||f.g==a)&&Ra(f),!_(d))for(j=f.Da.g.parse(d),d=0;d<j.length;d++){let ge=j[d];if(f.T=ge[0],ge=ge[1],f.G==2)if(ge[0]=="c"){f.K=ge[1],f.ia=ge[2];const vt=ge[3];vt!=null&&(f.la=vt,f.j.info("VER="+f.la));const wt=ge[4];wt!=null&&(f.Aa=wt,f.j.info("SVER="+f.Aa));const Ri=ge[5];Ri!=null&&typeof Ri=="number"&&0<Ri&&(v=1.5*Ri,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const fn=a.g;if(fn){const Pa=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var L=v.h;L.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(uu(L,L.h),L.h=null))}if(v.D){const mu=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;mu&&(v.ya=mu,ke(v.I,v.D,mu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var W=a;if(v.qa=Gp(v,v.J?v.ia:null,v.W),W.K){xp(v.h,W);var xe=W,dt=v.L;dt&&(xe.I=dt),xe.B&&(au(xe),xa(xe)),v.g=W}else Bp(v);0<f.i.length&&ba(f)}else ge[0]!="stop"&&ge[0]!="close"||Kr(f,7);else f.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?Kr(f,7):hu(f):ge[0]!="noop"&&f.l&&f.l.ta(ge),f.v=0)}}me(4)}catch{}}var Wx=class{constructor(a,d){this.g=a,this.map=d}};function vp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function _p(a){return a.h?1:a.g?a.g.size:0}function cu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function uu(a,d){a.g?a.g.add(d):a.h=d}function xp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}vp.prototype.cancel=function(){if(this.i=Ep(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ep(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return k(a.i)}function Hx(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,v=0;v<f;v++)d.push(a[v]);return d}d=[],f=0;for(v in a)d[f++]=a[v];return d}function Gx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const v in a)d[f++]=v;return d}}}function Ip(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Gx(a),v=Hx(a),j=v.length,L=0;L<j;L++)d.call(void 0,v[L],f&&f[L],a)}var Sp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qx(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),j=null;if(0<=v){var L=a[f].substring(0,v);j=a[f].substring(v+1)}else L=a[f];d(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function qr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof qr){this.h=a.h,Ea(this,a.j),this.o=a.o,this.g=a.g,Ia(this,a.s),this.l=a.l;var d=a.i,f=new Os;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Cp(this,f),this.m=a.m}else a&&(d=String(a).match(Sp))?(this.h=!1,Ea(this,d[1]||"",!0),this.o=Ps(d[2]||""),this.g=Ps(d[3]||"",!0),Ia(this,d[4]),this.l=Ps(d[5]||"",!0),Cp(this,d[6]||"",!0),this.m=Ps(d[7]||"")):(this.h=!1,this.i=new Os(null,this.h))}qr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(js(d,Tp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(js(d,Tp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(js(f,f.charAt(0)=="/"?Yx:Qx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",js(f,Xx)),a.join("")};function zn(a){return new qr(a)}function Ea(a,d,f){a.j=f?Ps(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Ia(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Cp(a,d,f){d instanceof Os?(a.i=d,Zx(a.i,a.h)):(f||(d=js(d,Jx)),a.i=new Os(d,a.h))}function ke(a,d,f){a.i.set(d,f)}function Sa(a){return ke(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ps(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function js(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Kx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Kx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Tp=/[#\/\?@]/g,Qx=/[#\?:]/g,Yx=/[#\?]/g,Jx=/[#\?@]/g,Xx=/#/g;function Os(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function dr(a){a.g||(a.g=new Map,a.h=0,a.i&&qx(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Os.prototype,t.add=function(a,d){dr(this),this.i=null,a=Ai(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function kp(a,d){dr(a),d=Ai(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Ap(a,d){return dr(a),d=Ai(a,d),a.g.has(d)}t.forEach=function(a,d){dr(this),this.g.forEach(function(f,v){f.forEach(function(j){a.call(d,j,v,this)},this)},this)},t.na=function(){dr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){const j=a[v];for(let L=0;L<j.length;L++)f.push(d[v])}return f},t.V=function(a){dr(this);let d=[];if(typeof a=="string")Ap(this,a)&&(d=d.concat(this.g.get(Ai(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return dr(this),this.i=null,a=Ai(this,a),Ap(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function bp(a,d,f){kp(a,d),0<f.length&&(a.i=null,a.g.set(Ai(a,d),k(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];const L=encodeURIComponent(String(v)),W=this.V(v);for(v=0;v<W.length;v++){var j=L;W[v]!==""&&(j+="="+encodeURIComponent(String(W[v]))),a.push(j)}}return this.i=a.join("&")};function Ai(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Zx(a,d){d&&!a.j&&(dr(a),a.i=null,a.g.forEach(function(f,v){var j=v.toLowerCase();v!=j&&(kp(this,v),bp(this,j,f))},a)),a.j=d}function eE(a,d){const f=new Xe;if(l.Image){const v=new Image;v.onload=T(hr,f,"TestLoadImage: loaded",!0,d,v),v.onerror=T(hr,f,"TestLoadImage: error",!1,d,v),v.onabort=T(hr,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=T(hr,f,"TestLoadImage: timeout",!1,d,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function tE(a,d){const f=new Xe,v=new AbortController,j=setTimeout(()=>{v.abort(),hr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(L=>{clearTimeout(j),L.ok?hr(f,"TestPingServer: ok",!0,d):hr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),hr(f,"TestPingServer: error",!1,d)})}function hr(a,d,f,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(f)}catch{}}function nE(){this.g=new M}function rE(a,d,f){const v=f||"";try{Ip(a,function(j,L){let W=j;h(j)&&(W=Rs(j)),d.push(v+L+"="+encodeURIComponent(W))})}catch(j){throw d.push(v+"type="+encodeURIComponent("_badmap")),j}}function Ca(a){this.l=a.Ub||null,this.j=a.eb||!1}b(Ca,G),Ca.prototype.g=function(){return new Ta(this.l,this.j)},Ca.prototype.i=function(a){return function(){return a}}({});function Ta(a,d){Ye.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ta,Ye),t=Ta.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ls(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ds(this):Ls(this),this.readyState==3&&Rp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ds(this))},t.Qa=function(a){this.g&&(this.response=a,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ls(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ls(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Np(a){let d="";return D(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function du(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Np(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):ke(a,d,f))}function Fe(a){Ye.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Fe,Ye);var iE=/^https?$/i,sE=["POST","PUT"];t=Fe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():iu.g(),this.v=this.o?$(this.o):$(iu),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(L){Pp(this,L);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)f.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())f.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(L=>L.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(sE,d,void 0))||v||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of f)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dp(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Pp(this,L)}};function Pp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,jp(a),ka(a)}function jp(a){a.A||(a.A=!0,rt(a,"complete"),rt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,rt(this,"complete"),rt(this,"abort"),ka(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ka(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Op(this):this.bb())},t.bb=function(){Op(this)};function Op(a){if(a.h&&typeof o<"u"&&(!a.v[1]||$n(a)!=4||a.Z()!=2)){if(a.u&&$n(a)==4)fa(a.Ea,0,a);else if(rt(a,"readystatechange"),$n(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=W===0){var j=String(a.D).match(Sp)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),v=!iE.test(j?j.toLowerCase():"")}f=v}if(f)rt(a,"complete"),rt(a,"success");else{a.m=6;try{var L=2<$n(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",jp(a)}}finally{ka(a)}}}}function ka(a,d){if(a.g){Dp(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||rt(a,"ready");try{f.onreadystatechange=v}catch{}}}function Dp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function $n(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),ga(d)}};function Lp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function oE(a){const d={};a=(a.g&&2<=$n(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var f=A(a[v]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const L=d[j]||[];d[j]=L,L.push(f)}S(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Mp(a){this.Aa=0,this.i=[],this.j=new Xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,a),this.cb=Ms("retryDelaySeedMs",1e4,a),this.Wa=Ms("forwardChannelMaxRetries",2,a),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new vp(a&&a.concurrentRequestLimit),this.Da=new nE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,v){$e(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=Gp(this,null,this.W),ba(this)};function hu(a){if(Fp(a),a.G==3){var d=a.U++,f=zn(a.I);if(ke(f,"SID",a.K),ke(f,"RID",d),ke(f,"TYPE","terminate"),Fs(a,f),d=new ur(a,a.j,d),d.L=2,d.v=Sa(zn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=qp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),xa(d)}Hp(a)}function Aa(a){a.g&&(pu(a),a.g.cancel(),a.g=null)}function Fp(a){Aa(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ra(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ba(a){if(!wp(a.h)&&!a.s){a.s=!0;var d=a.Ga;bt||te(),H||(bt(),H=!0),X.add(d,a),a.B=0}}function aE(a,d){return _p(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=tn(y(a.Ga,a,d),Wp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new ur(this,this.j,a);let L=this.o;if(this.S&&(L?(L=g(L),E(L,this.S)):L=this.S),this.m!==null||this.O||(j.H=L,L=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Up(this,j,d),f=zn(this.I),ke(f,"RID",a),ke(f,"CVER",22),this.D&&ke(f,"X-HTTP-Session-Id",this.D),Fs(this,f),L&&(this.O?d="headers="+encodeURIComponent(String(Np(L)))+"&"+d:this.m&&du(f,this.m,L)),uu(this.h,j),this.Ua&&ke(f,"TYPE","init"),this.P?(ke(f,"$req",d),ke(f,"SID","null"),j.T=!0,ou(j,f,null)):ou(j,f,d),this.G=2}}else this.G==3&&(a?Vp(this,a):this.i.length==0||wp(this.h)||Vp(this))};function Vp(a,d){var f;d?f=d.l:f=a.U++;const v=zn(a.I);ke(v,"SID",a.K),ke(v,"RID",f),ke(v,"AID",a.T),Fs(a,v),a.m&&a.o&&du(v,a.m,a.o),f=new ur(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Up(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),uu(a.h,f),ou(f,v,d)}function Fs(a,d){a.H&&D(a.H,function(f,v){ke(d,v,f)}),a.l&&Ip({},function(f,v){ke(d,v,f)})}function Up(a,d,f){f=Math.min(a.i.length,f);var v=a.l?y(a.l.Na,a.l,a):null;e:{var j=a.i;let L=-1;for(;;){const W=["count="+f];L==-1?0<f?(L=j[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let xe=!0;for(let dt=0;dt<f;dt++){let ge=j[dt].g;const vt=j[dt].map;if(ge-=L,0>ge)L=Math.max(0,j[dt].g-100),xe=!1;else try{rE(vt,W,"req"+ge+"_")}catch{v&&v(vt)}}if(xe){v=W.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,v}function Bp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;bt||te(),H||(bt(),H=!0),X.add(d,a),a.v=0}}function fu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=tn(y(a.Fa,a),Wp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,zp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=tn(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$e(10),Aa(this),zp(this))};function pu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function zp(a){a.g=new ur(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=zn(a.qa);ke(d,"RID","rpc"),ke(d,"SID",a.K),ke(d,"AID",a.T),ke(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&ke(d,"TO",a.ja),ke(d,"TYPE","xmlhttp"),Fs(a,d),a.m&&a.o&&du(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Sa(zn(d)),f.m=null,f.P=!0,mp(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Aa(this),fu(this),$e(19))};function Ra(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function $p(a,d){var f=null;if(a.g==d){Ra(a),pu(a),a.g=null;var v=2}else if(cu(a.h,d))f=d.D,xp(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var j=a.B;v=je(),rt(v,new Ne(v,f)),ba(a)}else Bp(a);else if(j=d.s,j==3||j==0&&0<d.X||!(v==1&&aE(a,d)||v==2&&fu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),j){case 1:Kr(a,5);break;case 4:Kr(a,10);break;case 3:Kr(a,6);break;default:Kr(a,2)}}}function Wp(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Kr(a,d){if(a.j.info("Error code "+d),d==2){var f=y(a.fb,a),v=a.Xa;const j=!v;v=new qr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ea(v,"https"),Sa(v),j?eE(v.toString(),f):tE(v.toString(),f)}else $e(2);a.G=0,a.l&&a.l.sa(d),Hp(a),Fp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function Hp(a){if(a.G=0,a.ka=[],a.l){const d=Ep(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ka,d),P(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function Gp(a,d,f){var v=f instanceof qr?zn(f):new qr(f);if(v.g!="")d&&(v.g=d+"."+v.g),Ia(v,v.s);else{var j=l.location;v=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var L=new qr(null);v&&Ea(L,v),d&&(L.g=d),j&&Ia(L,j),f&&(L.l=f),v=L}return f=a.D,d=a.ya,f&&d&&ke(v,f,d),ke(v,"VER",a.la),Fs(a,v),v}function qp(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Fe(new Ca({eb:f})):new Fe(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kp(){}t=Kp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Na(){}Na.prototype.g=function(a,d){return new Gt(a,d)};function Gt(a,d){Ye.call(this),this.g=new Mp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new bi(this)}b(Gt,Ye),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){hu(this.g)},Gt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Rs(a),a=f);d.i.push(new Wx(d.Ya++,a)),d.G==3&&ba(d)},Gt.prototype.N=function(){this.g.l=null,delete this.j,hu(this.g),delete this.g,Gt.aa.N.call(this)};function Qp(a){ve.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}b(Qp,ve);function Yp(){Re.call(this),this.status=1}b(Yp,Re);function bi(a){this.g=a}b(bi,Kp),bi.prototype.ua=function(){rt(this.g,"a")},bi.prototype.ta=function(a){rt(this.g,new Qp(a))},bi.prototype.sa=function(a){rt(this.g,new Yp)},bi.prototype.ra=function(){rt(this.g,"b")},Na.prototype.createWebChannel=Na.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,Gw=function(){return new Na},Hw=function(){return je()},Ww=Te,oh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,_l=wa,hp.COMPLETE="complete",$w=hp,J.EventType=q,q.OPEN="a",q.CLOSE="b",q.ERROR="c",q.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,eo=J,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,zw=Fe}).apply(typeof Ja<"u"?Ja:typeof self<"u"?self:typeof window<"u"?window:{});const Dg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new Dc("@firebase/firestore");function qs(){return mi.logLevel}function Y(t,...e){if(mi.logLevel<=de.DEBUG){const n=e.map(Df);mi.debug(`Firestore (${xs}): ${t}`,...n)}}function gi(t,...e){if(mi.logLevel<=de.ERROR){const n=e.map(Df);mi.error(`Firestore (${xs}): ${t}`,...n)}}function sc(t,...e){if(mi.logLevel<=de.WARN){const n=e.map(Df);mi.warn(`Firestore (${xs}): ${t}`,...n)}}function Df(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t="Unexpected state"){const e=`FIRESTORE (${xs}) INTERNAL ASSERTION FAILED: `+t;throw gi(e),new Error(e)}function ze(t,e){t||he()}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class IA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SA{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new oi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new oi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string"),new qw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new It(e)}}class CA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class TA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new CA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ze(this.o===void 0);const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string"),this.R=n.token,new kA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function us(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new lt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new lt(0,0))}static max(){return new Oe(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(),r===void 0?r=e.length-n:r>e.length-n&&he(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class He extends Fo{construct(e,n,r){return new He(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new He(n)}static emptyPath(){return new He([])}}const RA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends Fo{construct(e,n,r){return new mt(e,n,r)}static isValidIdentifier(e){return RA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new re(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new re(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(He.fromString(e))}static fromName(e){return new le(He.fromString(e).popFirst(5))}static empty(){return new le(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new He(e.slice()))}}function NA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Oe.fromTimestamp(r===1e9?new lt(n+1,0):new lt(n,r));return new Fr(i,le.empty(),e)}function PA(t){return new Fr(t.readTime,t.key,-1)}class Fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fr(Oe.min(),le.empty(),-1)}static max(){return new Fr(Oe.max(),le.empty(),-1)}}function jA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==OA)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function LA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yw.oe=-1;function Lf(t){return t==null}function oc(t){return t===0&&1/t==-1/0}function MA(t){return typeof t=="number"&&Number.isInteger(t)&&!oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new Wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xa(this.root,e,this.comparator,!0)}}class Xa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ft.RED,this.left=i??ft.EMPTY,this.right=s??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ft(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ft.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mg(this.data.getIterator())}getIteratorFrom(e){return new Mg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class Mg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Tt(mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return us(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new FA("Invalid base64 string: "+s):s}}(e);return new Vn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const VA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(t){if(ze(!!t),typeof t=="string"){let e=0;const n=VA.exec(t);if(ze(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vo(t){return typeof t=="string"?Vn.fromBase64String(t):Vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xw(t){const e=t.mapValue.fields.__previous_value__;return Mf(e)?Xw(e):e}function ac(t){const e=yi(t.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,r,i,s,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class lc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new lc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za={mapValue:{}};function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mf(t)?4:zA(t)?9007199254740991:BA(t)?10:11:he()}function Un(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ac(t).isEqual(ac(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=yi(i.timestampValue),l=yi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Vo(i.bytesValue).isEqual(Vo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return pt(i.geoPointValue.latitude)===pt(s.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pt(i.integerValue)===pt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=pt(i.doubleValue),l=pt(s.doubleValue);return o===l?oc(o)===oc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return us(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Lg(o)!==Lg(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Un(o[c],l[c])))return!1;return!0}(t,e);default:return he()}}function Uo(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function hs(t,e){if(t===e)return 0;const n=ds(t),r=ds(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=pt(s.integerValue||s.doubleValue),c=pt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Fg(t.timestampValue,e.timestampValue);case 4:return Fg(ac(t),ac(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Vo(s),c=Vo(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=Ee(l[h],c[h]);if(p!==0)return p}return Ee(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Ee(pt(s.latitude),pt(o.latitude));return l!==0?l:Ee(pt(s.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Vg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,h,p;const m=s.fields||{},y=o.fields||{},T=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=(c=y.value)===null||c===void 0?void 0:c.arrayValue,k=Ee(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:Vg(T,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Za.mapValue&&o===Za.mapValue)return 0;if(s===Za.mapValue)return 1;if(o===Za.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const y=Ee(c[m],p[m]);if(y!==0)return y;const T=hs(l[c[m]],h[p[m]]);if(T!==0)return T}return Ee(c.length,p.length)}(t.mapValue,e.mapValue);default:throw he()}}function Fg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=yi(t),r=yi(e),i=Ee(n.seconds,r.seconds);return i!==0?i:Ee(n.nanos,r.nanos)}function Vg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=hs(n[i],r[i]);if(s)return s}return Ee(n.length,r.length)}function fs(t){return ah(t)}function ah(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ah(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ah(n.fields[o])}`;return i+"}"}(t.mapValue):he()}function lh(t){return!!t&&"integerValue"in t}function Ff(t){return!!t&&"arrayValue"in t}function xl(t){return!!t&&"mapValue"in t}function BA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function zA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fo(n)}setAll(e){let n=mt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=fo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());xl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){sa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new _n(fo(this.value))}}function Zw(t){const e=[];return sa(t.fields,(n,r)=>{const i=new mt([n]);if(xl(r)){const s=Zw(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wn(e,0,Oe.min(),Oe.min(),Oe.min(),_n.empty(),0)}static newFoundDocument(e,n,r,i){return new wn(e,1,n,Oe.min(),r,i,0)}static newNoDocument(e,n){return new wn(e,2,n,Oe.min(),Oe.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,Oe.min(),Oe.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n){this.position=e,this.inclusive=n}}function Ug(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=hs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n="asc"){this.field=e,this.dir=n}}function $A(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{}class ot extends e_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HA(e,n,r):n==="array-contains"?new KA(e,r):n==="in"?new QA(e,r):n==="not-in"?new YA(e,r):n==="array-contains-any"?new JA(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new GA(e,r):new qA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hs(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vr extends e_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Vr(e,n)}matches(e){return t_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function t_(t){return t.op==="and"}function n_(t){return WA(t)&&t_(t)}function WA(t){for(const e of t.filters)if(e instanceof Vr)return!1;return!0}function ch(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+fs(t.value);if(n_(t))return t.filters.map(e=>ch(e)).join(",");{const e=t.filters.map(n=>ch(n)).join(",");return`${t.op}(${e})`}}function r_(t,e){return t instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&Un(r.value,i.value)}(t,e):t instanceof Vr?function(r,i){return i instanceof Vr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&r_(o,i.filters[l]),!0):!1}(t,e):void he()}function i_(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${fs(n.value)}`}(t):t instanceof Vr?function(n){return n.op.toString()+" {"+n.getFilters().map(i_).join(" ,")+"}"}(t):"Filter"}class HA extends ot{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class GA extends ot{constructor(e,n){super(e,"in",n),this.keys=s_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qA extends ot{constructor(e,n){super(e,"not-in",n),this.keys=s_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function s_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class KA extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ff(n)&&Uo(n.arrayValue,this.value)}}class QA extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uo(this.value.arrayValue,n)}}class YA extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uo(this.value.arrayValue,n)}}class JA extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ff(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function zg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new XA(t,e,n,r,i,s,o)}function Vf(t){const e=Ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ch(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fs(r)).join(",")),e.ue=n}return e.ue}function Uf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$A(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!r_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bg(t.startAt,e.startAt)&&Bg(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ZA(t,e,n,r,i,s,o,l){return new Uc(t,e,n,r,i,s,o,l)}function eb(t){return new Uc(t)}function $g(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tb(t){return t.collectionGroup!==null}function po(t){const e=Ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Tt(mt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new uc(s,r))}),n.has(mt.keyField().canonicalString())||e.ce.push(new uc(mt.keyField(),r))}return e.ce}function ai(t){const e=Ce(t);return e.le||(e.le=nb(e,po(t))),e.le}function nb(t,e){if(t.limitType==="F")return zg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new uc(i.field,s)});const n=t.endAt?new cc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cc(t.startAt.position,t.startAt.inclusive):null;return zg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uh(t,e,n){return new Uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function o_(t,e){return Uf(ai(t),ai(e))&&t.limitType===e.limitType}function a_(t){return`${Vf(ai(t))}|lt:${t.limitType}`}function Ks(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>i_(i)).join(", ")}]`),Lf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fs(i)).join(",")),`Target(${r})`}(ai(t))}; limitType=${t.limitType})`}function Bf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of po(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const h=Ug(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,po(r),i)||r.endAt&&!function(o,l,c){const h=Ug(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,po(r),i))}(t,e)}function rb(t){return(e,n)=>{let r=!1;for(const i of po(t)){const s=ib(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ib(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,l){const c=o.data.field(s),h=l.data.field(s);return c!==null&&h!==null?hs(c,h):he()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Jw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new Wt(le.comparator);function dc(){return sb}const l_=new Wt(le.comparator);function el(...t){let e=l_;for(const n of t)e=e.insert(n.key,n);return e}function c_(t){let e=l_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ni(){return mo()}function u_(){return mo()}function mo(){return new Es(t=>t.toString(),(t,e)=>t.isEqual(e))}const ob=new Wt(le.comparator),ab=new Tt(le.comparator);function Ct(...t){let e=ab;for(const n of t)e=e.add(n);return e}const lb=new Tt(Ee);function cb(){return lb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oc(e)?"-0":e}}function d_(t){return{integerValue:""+t}}function ub(t,e){return MA(e)?d_(e):zf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this._=void 0}}function db(t,e,n){return t instanceof hc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Mf(s)&&(s=Xw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Bo?f_(t,e):t instanceof zo?p_(t,e):function(i,s){const o=h_(i,s),l=Wg(o)+Wg(i.Pe);return lh(o)&&lh(i.Pe)?d_(l):zf(i.serializer,l)}(t,e)}function hb(t,e,n){return t instanceof Bo?f_(t,e):t instanceof zo?p_(t,e):n}function h_(t,e){return t instanceof fc?function(r){return lh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class hc extends Bc{}class Bo extends Bc{constructor(e){super(),this.elements=e}}function f_(t,e){const n=m_(e);for(const r of t.elements)n.some(i=>Un(i,r))||n.push(r);return{arrayValue:{values:n}}}class zo extends Bc{constructor(e){super(),this.elements=e}}function p_(t,e){let n=m_(e);for(const r of t.elements)n=n.filter(i=>!Un(i,r));return{arrayValue:{values:n}}}class fc extends Bc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Wg(t){return pt(t.integerValue||t.doubleValue)}function m_(t){return Ff(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fb(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bo&&i instanceof Bo||r instanceof zo&&i instanceof zo?us(r.elements,i.elements,Un):r instanceof fc&&i instanceof fc?Un(r.Pe,i.Pe):r instanceof hc&&i instanceof hc}(t.transform,e.transform)}class pb{constructor(e,n){this.version=e,this.transformResults=n}}class er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function El(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zc{}function g_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new v_(t.key,er.none()):new oa(t.key,t.data,er.none());{const n=t.data,r=_n.empty();let i=new Tt(mt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Si(t.key,r,new xn(i.toArray()),er.none())}}function mb(t,e,n){t instanceof oa?function(i,s,o){const l=i.value.clone(),c=Gg(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Si?function(i,s,o){if(!El(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Gg(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(y_(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function go(t,e,n,r){return t instanceof oa?function(s,o,l,c){if(!El(s.precondition,o))return l;const h=s.value.clone(),p=qg(s.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Si?function(s,o,l,c){if(!El(s.precondition,o))return l;const h=qg(s.fieldTransforms,c,o),p=o.data;return p.setAll(y_(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return El(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function gb(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=h_(r.transform,i||null);s!=null&&(n===null&&(n=_n.empty()),n.set(r.field,s))}return n||null}function Hg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&us(r,i,(s,o)=>fb(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oa extends zc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Si extends zc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function y_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Gg(t,e,n){const r=new Map;ze(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,hb(o,l,n[i]))}return r}function qg(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,db(s,o,e))}return r}class v_ extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yb extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&mb(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=go(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=go(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const c=g_(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ct())}isEqual(e){return this.batchId===e.batchId&&us(this.mutations,e.mutations,(n,r)=>Hg(n,r))&&us(this.baseMutations,e.baseMutations,(n,r)=>Hg(n,r))}}class $f{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ze(e.mutations.length===r.length);let i=function(){return ob}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new $f(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,fe;function _b(t){switch(t){default:return he();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function xb(t){if(t===void 0)return gi("GRPC error has no .code"),z.UNKNOWN;switch(t){case We.OK:return z.OK;case We.CANCELLED:return z.CANCELLED;case We.UNKNOWN:return z.UNKNOWN;case We.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case We.INTERNAL:return z.INTERNAL;case We.UNAVAILABLE:return z.UNAVAILABLE;case We.UNAUTHENTICATED:return z.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case We.NOT_FOUND:return z.NOT_FOUND;case We.ALREADY_EXISTS:return z.ALREADY_EXISTS;case We.PERMISSION_DENIED:return z.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case We.ABORTED:return z.ABORTED;case We.OUT_OF_RANGE:return z.OUT_OF_RANGE;case We.UNIMPLEMENTED:return z.UNIMPLEMENTED;case We.DATA_LOSS:return z.DATA_LOSS;default:return he()}}(fe=We||(We={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Bw([4294967295,4294967295],0);class Eb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ib(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Sb(t,e){return dh(t,e.toTimestamp())}function es(t){return ze(!!t),Oe.fromTimestamp(function(n){const r=yi(n);return new lt(r.seconds,r.nanos)}(t))}function w_(t,e){return hh(t,e).canonicalString()}function hh(t,e){const n=function(i){return new He(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Cb(t){const e=He.fromString(t);return ze(jb(e)),e}function fh(t,e){return w_(t.databaseId,e.path)}function Tb(t){const e=Cb(t);return e.length===4?He.emptyPath():Ab(e)}function kb(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ab(t){return ze(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Kg(t,e,n){return{name:fh(t,e),fields:n.value.mapValue.fields}}function bb(t,e){let n;if(e instanceof oa)n={update:Kg(t,e.key,e.value)};else if(e instanceof v_)n={delete:fh(t,e.key)};else if(e instanceof Si)n={update:Kg(t,e.key,e.data),updateMask:Pb(e.fieldMask)};else{if(!(e instanceof yb))return he();n={verify:fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof hc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw he()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Sb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:he()}(t,e.precondition)),n}function Rb(t,e){return t&&t.length>0?(ze(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?es(i.updateTime):es(s);return o.isEqual(Oe.min())&&(o=es(s)),new pb(o,i.transformResults||[])}(n,e))):[]}function Nb(t){let e=Tb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ze(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const y=__(m);return y instanceof Vr&&n_(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(b){return new uc(Pi(b.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,Lf(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(m){const y=!!m.before,T=m.values||[];return new cc(T,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,T=m.values||[];return new cc(T,y)}(n.endAt)),ZA(e,i,o,s,l,"F",c,h)}function __(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Pi(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Pi(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pi(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pi(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):t.fieldFilter!==void 0?function(n){return ot.create(Pi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vr.create(n.compositeFilter.filters.map(r=>__(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he()}}(n.compositeFilter.op))}(t):he()}function Pi(t){return mt.fromServerFormat(t.fieldPath)}function Pb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.ct=e}}function Db(t){const e=Nb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.un=new Mb}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Fr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Mb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Tt(He.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ps(0)}static kn(){return new ps(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.changes=new Es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&go(r.mutation,i,xn.empty(),lt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ct()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ct()){const i=ni();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=el();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ni();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ct()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=dc();const o=mo(),l=function(){return mo()}();return n.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Si)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),go(p.mutation,h,p.mutation.getFieldMask(),lt.now())):o.set(h.key,xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new Vb(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=mo();let i=new Wt((o,l)=>o-l),s=Ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||xn.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(i.get(l.batchId)||Ct()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=u_();p.forEach(y=>{if(!s.has(y)){const T=g_(n.get(y),r.get(y));T!==null&&m.set(y,T),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(ni());let l=-1,c=s;return o.next(h=>U.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{c=c.insert(p,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,Ct())).next(p=>({batchId:l,changes:c_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=el();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=el();return this.indexManager.getCollectionParents(e,s).next(l=>U.forEach(l,c=>{const h=function(m,y){return new Uc(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,wn.newInvalidDocument(p)))});let l=el();return o.forEach((c,h)=>{const p=s.get(c);p!==void 0&&go(p.mutation,h,xn.empty(),lt.now()),Bf(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:es(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Db(i.bundledQuery),readTime:es(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.overlays=new Wt(le.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ni();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=ni(),s=n.length+1,o=new le(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Wt((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=ni(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=ni(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return U.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new wb(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ct(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this.Tr=new Tt(it.Er),this.dr=new Tt(it.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new it(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new it(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new He([])),r=new it(n,e),i=new it(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new He([])),r=new it(n,e),i=new it(n,e+1);let s=Ct();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new it(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Tt(it.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new vb(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new it(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new it(n,0),i=new it(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(Ee);return n.forEach(i=>{const s=new it(i,0),o=new it(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new it(new le(s),0);let l=new Tt(Ee);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ze(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new it(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new it(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.Mr=e,this.docs=function(){return new Wt(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let r=dc();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wn.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=dc();const o=n.path,l=new le(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||jA(PA(p),r)<=0||(i.has(p.key)||Bf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){he()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Gb(this)}getSize(e){return U.resolve(this.size)}}class Gb extends Fb{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.persistence=e,this.Nr=new Es(n=>Vf(n),Uf),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wf,this.targetCount=0,this.kr=ps.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ps(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Yw(0),this.Kr=!1,this.Kr=!0,this.$r=new $b,this.referenceDelegate=e(this),this.Ur=new qb(this),this.indexManager=new Lb,this.remoteDocumentCache=function(i){return new Hb(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ob(n),this.Gr=new Bb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Wb(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const i=new Qb(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Qb extends DA{constructor(e){super(),this.currentSequenceNumber=e}}class Hf{constructor(e){this.persistence=e,this.Jr=new Wf,this.Yr=null}static Zr(e){return new Hf(e)}get Xr(){if(this.Yr)return this.Yr;throw he()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=le.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ct(),i=Ct();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Gf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tC()?8:LA(At())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Yb;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(qs()<=de.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(qs()<=de.DEBUG&&Y("QueryEngine","Query:",Ks(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(qs()<=de.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):U.resolve())}Yi(e,n){if($g(n))return U.resolve(null);let r=ai(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=uh(n,null,"F"),r=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ct(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,uh(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,i){return $g(n)||i.isEqual(Oe.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(qs()<=de.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ks(n)),this.rs(e,o,n,NA(i,-1)).next(l=>l))})}ts(e,n){let r=new Tt(rb(e));return n.forEach((i,s)=>{Bf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return qs()<=de.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Ks(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Wt(Ee),this._s=new Es(s=>Vf(s),Uf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ub(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Zb(t,e,n,r){return new Xb(t,e,n,r)}async function x_(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=Ct();for(const h of i){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function eR(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,y=m.keys();let T=U.resolve();return y.forEach(b=>{T=T.next(()=>p.getEntry(c,b)).next(k=>{const P=h.docVersions.get(b);ze(P!==null),k.version.compareTo(P)<0&&(m.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),p.addEntry(k)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ct();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tR(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function nR(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class Qg{constructor(){this.activeTargetIds=cb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rR{constructor(){this.so=new Qg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Qg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl=null;function Qu(){return tl===null?tl=function(){return 268435456+Math.round(2147483648*Math.random())}():tl++,"0x"+tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class aR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Qu(),c=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,c,h,i).then(p=>(Y("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw sc("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",i),p})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=sR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Qu();return new Promise((o,l)=>{const c=new zw;c.setWithCredentials(!0),c.listenOnce($w.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case _l.NO_ERROR:const p=c.getResponseJson();Y(Et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case _l.TIMEOUT:Y(Et,`RPC '${e}' ${s} timed out`),l(new re(z.DEADLINE_EXCEEDED,"Request time out"));break;case _l.HTTP_ERROR:const m=c.getStatus();if(Y(Et,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const b=function(P){const I=P.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(I)>=0?I:z.UNKNOWN}(T.status);l(new re(b,T.message))}else l(new re(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new re(z.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{Y(Et,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Y(Et,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Qu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Gw(),l=Hw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");Y(Et,`Creating RPC '${e}' stream ${i}: ${p}`,c);const m=o.createWebChannel(p,c);let y=!1,T=!1;const b=new oR({Io:P=>{T?Y(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(y||(Y(Et,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),Y(Et,`RPC '${e}' stream ${i} sending:`,P),m.send(P))},To:()=>m.close()}),k=(P,I,_)=>{P.listen(I,x=>{try{_(x)}catch(O){setTimeout(()=>{throw O},0)}})};return k(m,eo.EventType.OPEN,()=>{T||(Y(Et,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),k(m,eo.EventType.CLOSE,()=>{T||(T=!0,Y(Et,`RPC '${e}' stream ${i} transport closed`),b.So())}),k(m,eo.EventType.ERROR,P=>{T||(T=!0,sc(Et,`RPC '${e}' stream ${i} transport errored:`,P),b.So(new re(z.UNAVAILABLE,"The operation could not be completed")))}),k(m,eo.EventType.MESSAGE,P=>{var I;if(!T){const _=P.data[0];ze(!!_);const x=_,O=x.error||((I=x[0])===null||I===void 0?void 0:I.error);if(O){Y(Et,`RPC '${e}' stream ${i} received error:`,O);const V=O.status;let D=function(w){const E=We[w];if(E!==void 0)return xb(E)}(V),S=O.message;D===void 0&&(D=z.INTERNAL,S="Unknown error status: "+V+" with message "+O.message),T=!0,b.So(new re(D,S)),m.close()}else Y(Et,`RPC '${e}' stream ${i} received:`,_),b.bo(_)}}),k(l,Ww.STAT_EVENT,P=>{P.stat===oh.PROXY?Y(Et,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===oh.NOPROXY&&Y(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Yu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){return new Eb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,i,s,o,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new E_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(gi(n.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new re(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cR extends lR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ze(!!e.streamToken),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Rb(e.writeResults,e.commitTime),r=es(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=kb(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bb(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new re(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,hh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,hh(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class dR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gi(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{la(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=Ce(c);h.L_.add(4),await aa(h),h.q_.set("Unknown"),h.L_.delete(4),await Wc(h)}(this))})}),this.q_=new dR(r,i)}}async function Wc(t){if(la(t))for(const e of t.B_)await e(!0)}async function aa(t){for(const e of t.B_)await e(!1)}function la(t){return Ce(t).L_.size===0}async function I_(t,e,n){if(!Vc(e))throw e;t.L_.add(1),await aa(t),t.q_.set("Offline"),n||(n=()=>tR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Wc(t)})}function S_(t,e){return e().catch(n=>I_(t,n,e))}async function Hc(t){const e=Ce(t),n=Ur(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fR(e);)try{const i=await nR(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,pR(e,i)}catch(i){await I_(e,i)}C_(e)&&T_(e)}function fR(t){return la(t)&&t.O_.length<10}function pR(t,e){t.O_.push(e);const n=Ur(t);n.r_()&&n.V_&&n.m_(e.mutations)}function C_(t){return la(t)&&!Ur(t).n_()&&t.O_.length>0}function T_(t){Ur(t).start()}async function mR(t){Ur(t).p_()}async function gR(t){const e=Ur(t);for(const n of t.O_)e.m_(n.mutations)}async function yR(t,e,n){const r=t.O_.shift(),i=$f.from(r,e,n);await S_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Hc(t)}async function vR(t,e){e&&Ur(t).V_&&await async function(r,i){if(function(o){return _b(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();Ur(r).s_(),await S_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Hc(r)}}(t,e),C_(t)&&T_(t)}async function Jg(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=la(n);n.L_.add(3),await aa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Wc(n)}async function wR(t,e){const n=Ce(t);e?(n.L_.delete(2),await Wc(n)):e||(n.L_.add(2),await aa(n),n.q_.set("Unknown"))}function Ur(t){return t.U_||(t.U_=function(n,r,i){const s=Ce(n);return s.w_(),new cR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mR.bind(null,t),mo:vR.bind(null,t),f_:gR.bind(null,t),g_:yR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Hc(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new qf(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function k_(t,e){if(gi("AsyncQueue",`${e}: ${t}`),Vc(t))return new re(z.UNAVAILABLE,`${e}: ${t}`);throw t}class _R{constructor(){this.queries=Xg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ce(n),s=i.queries;i.queries=Xg(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new re(z.ABORTED,"Firestore shutting down"))}}function Xg(){return new Es(t=>a_(t),o_)}function xR(t){t.Y_.forEach(e=>{e.next()})}var Zg,ey;(ey=Zg||(Zg={})).ea="default",ey.Cache="cache";class ER{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Es(l=>a_(l),o_),this.Ma=new Map,this.xa=new Set,this.Oa=new Wt(le.comparator),this.Na=new Map,this.La=new Wf,this.Ba={},this.ka=new Map,this.qa=ps.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function IR(t,e,n){const r=kR(t);try{const i=await function(o,l){const c=Ce(o),h=lt.now(),p=l.reduce((T,b)=>T.add(b.key),Ct());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let b=dc(),k=Ct();return c.cs.getEntries(T,p).next(P=>{b=P,b.forEach((I,_)=>{_.isValidDocument()||(k=k.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,b)).next(P=>{m=P;const I=[];for(const _ of l){const x=gb(_,m.get(_.key).overlayedDocument);x!=null&&I.push(new Si(_.key,x,Zw(x.value.mapValue),er.exists(!0)))}return c.mutationQueue.addMutationBatch(T,h,I,l)}).next(P=>{y=P;const I=P.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(T,P.batchId,I)})}).then(()=>({batchId:y.batchId,changes:c_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Wt(Ee)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Gc(r,i.changes),await Hc(r.remoteStore)}catch(i){const s=k_(i,"Failed to persist write");n.reject(s)}}function ty(t,e,n){const r=Ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=Ce(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(l)&&(h=!0)}),h&&xR(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SR(t,e){const n=Ce(t),r=e.batch.batchId;try{const i=await eR(n.localStore,e);b_(n,r,null),A_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gc(n,i)}catch(i){await Qw(i)}}async function CR(t,e,n){const r=Ce(t);try{const i=await function(o,l){const c=Ce(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(ze(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);b_(r,e,n),A_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gc(r,i)}catch(i){await Qw(i)}}function A_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function b_(t,e,n){const r=Ce(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}async function Gc(t,e,n){const r=Ce(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=void 0)===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=Gf.Wi(c.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,h){const p=Ce(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(h,y=>U.forEach(y.$i,T=>p.persistence.referenceDelegate.addReference(m,y.targetId,T)).next(()=>U.forEach(y.Ui,T=>p.persistence.referenceDelegate.removeReference(m,y.targetId,T)))))}catch(m){if(!Vc(m))throw m;Y("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const T=p.os.get(y),b=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(y,k)}}}(r.localStore,s))}async function TR(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await x_(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new re(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gc(n,r.hs)}}function kR(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CR.bind(null,e),e}class pc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$c(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Zb(this.persistence,new Jb,e.initialUser,this.serializer)}Ga(e){return new Kb(Hf.Zr,this.serializer)}Wa(e){return new rR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pc.provider={build:()=>new pc};class ph{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ty(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TR.bind(null,this.syncEngine),await wR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _R}()}createDatastore(e){const n=$c(e.databaseInfo.databaseId),r=function(s){return new aR(s)}(e.databaseInfo);return function(s,o,l,c){return new uR(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new hR(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ty(this.syncEngine,n,0),function(){return Yg.D()?new Yg:new iR}())}createSyncEngine(e,n){return function(i,s,o,l,c,h,p){const m=new ER(i,s,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ce(i);Y("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await aa(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ph.provider={build:()=>new ph};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=Kw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Y("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=k_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ju(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await x_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ny(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bR(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Jg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Jg(e.remoteStore,i)),t._onlineComponents=e}async function bR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ju(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;sc("Error using user provided cache. Falling back to memory cache: "+n),await Ju(t,new pc)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Ju(t,new pc);return t._offlineComponents}async function RR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await ny(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await ny(t,new ph))),t._onlineComponents}function NR(t){return RR(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t,e,n){if(!n)throw new re(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jR(t,e,n,r){if(e===!0&&r===!0)throw new re(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iy(t){if(!le.isDocumentKey(t))throw new re(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Kf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he()}function mh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kf(t);throw new re(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new EA;switch(r.type){case"firstParty":return new TA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ry.get(n);r&&(Y("ComponentProvider","Removing Datastore"),ry.delete(n),r.terminate())}(this),Promise.resolve()}}function OR(t,e,n,r={}){var i;const s=(t=mh(t,Qf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&sc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=It.MOCK_USER;else{l=QS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new re(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new It(h)}t._authCredentials=new IA(new qw(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yf(this.firestore,e,this._query)}}class tr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class $o extends Yf{constructor(e,n,r){super(e,n,eb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new le(e))}withConverter(e){return new $o(this.firestore,e,this._path)}}function DR(t,e,...n){if(t=$t(t),arguments.length===1&&(e=Kw.newId()),PR("doc","path",e),t instanceof Qf){const r=He.fromString(e,...n);return iy(r),new tr(t,null,new le(r))}{if(!(t instanceof tr||t instanceof $o))throw new re(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return iy(r),new tr(t.firestore,t instanceof $o?t.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new E_(this,"async_queue_retry"),this.Vu=()=>{const r=Yu();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Yu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Yu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new oi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vc(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw gi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=qf.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&he()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class N_ extends Qf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new oy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oy(e),this._firestoreClient=void 0,await e}}}function LR(t,e){const n=typeof t=="object"?t:If(),r=typeof t=="string"?t:"(default)",i=Ii(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=qS("firestore");s&&OR(i,...s)}return i}function MR(t){if(t._terminated)throw new re(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FR(t),t._firestoreClient}function FR(t){var e,n,r;const i=t._freezeSettings(),s=function(l,c,h,p){return new UA(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,R_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new AR(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wo(Vn.fromBase64String(e))}catch(n){throw new re(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wo(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=/^__.*__$/;class UR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Si(e,this.data,this.fieldMask,n,this.fieldTransforms):new oa(e,this.data,n,this.fieldTransforms)}}function L_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class Jf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return mc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(L_(this.Cu)&&VR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class BR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$c(e)}Qu(e,n,r,i=!1){return new Jf({Cu:e,methodName:n,qu:r,path:mt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zR(t){const e=t._freezeSettings(),n=$c(t._databaseId);return new BR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $R(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);U_("Data must be an object, but it was:",o,r);const l=F_(r,o);let c,h;if(s.merge)c=new xn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const y=WR(e,m,n);if(!o.contains(y))throw new re(z.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);qR(p,y)||p.push(y)}c=new xn(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new UR(new _n(l),c,h)}function M_(t,e){if(V_(t=$t(t)))return U_("Unsupported field value:",e,t),F_(t,e);if(t instanceof j_)return function(r,i){if(!L_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=M_(l,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=$t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ub(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=lt.fromDate(r);return{timestampValue:dh(i.serializer,s)}}if(r instanceof lt){const s=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dh(i.serializer,s)}}if(r instanceof O_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wo)return{bytesValue:Ib(i.serializer,r._byteString)};if(r instanceof tr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:w_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof D_)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return zf(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Kf(r)}`)}(t,e)}function F_(t,e){const n={};return Jw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,(r,i)=>{const s=M_(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function V_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof O_||t instanceof Wo||t instanceof tr||t instanceof j_||t instanceof D_)}function U_(t,e,n){if(!V_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Kf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function WR(t,e,n){if((e=$t(e))instanceof P_)return e._internalPath;if(typeof e=="string")return GR(t,e);throw mc("Field path arguments must be of type string or ",t,!1,void 0,n)}const HR=new RegExp("[~\\*/\\[\\]]");function GR(t,e,n){if(e.search(HR)>=0)throw mc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new P_(...e.split("."))._internalPath}catch{throw mc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new re(z.INVALID_ARGUMENT,l+t+c)}function qR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function QR(t,e,n){t=mh(t,tr);const r=mh(t.firestore,N_),i=KR(t.converter,e,n);return YR(r,[$R(zR(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,er.none())])}function YR(t,e){return function(r,i){const s=new oi;return r.asyncQueue.enqueueAndForget(async()=>IR(await NR(r),i,s)),s.promise}(MR(t),e)}(function(e,n=!0){(function(i){xs=i})(vs),Mn(new Tn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new N_(new SA(r.getProvider("auth-internal")),new AA(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new re(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),cn(Dg,"4.7.3",e),cn(Dg,"4.7.3","esm2017")})();const B_="@firebase/installations",Xf="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=1e4,$_=`w:${Xf}`,W_="FIS_v2",JR="https://firebaseinstallations.googleapis.com/v1",XR=60*60*1e3,ZR="installations",eN="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vi=new Ei(ZR,eN,tN);function H_(t){return t instanceof kn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_({projectId:t}){return`${JR}/projects/${t}/installations`}function q_(t){return{token:t.token,requestStatus:2,expiresIn:rN(t.expiresIn),creationTime:Date.now()}}async function K_(t,e){const r=(await e.json()).error;return vi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Q_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nN(t,{refreshToken:e}){const n=Q_(t);return n.append("Authorization",iN(e)),n}async function Y_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rN(t){return Number(t.replace("s","000"))}function iN(t){return`${W_} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=G_(t),i=Q_(t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:n,authVersion:W_,appId:t.appId,sdkVersion:$_},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await Y_(()=>fetch(r,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:q_(h.authToken)}}else throw await K_("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=/^[cdef][\w-]{21}$/,gh="";function lN(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=cN(t);return aN.test(n)?n:gh}catch{return gh}}function cN(t){return oN(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;function Z_(t,e){const n=qc(t);ex(n,e),uN(n,e)}function ex(t,e){const n=X_.get(t);if(n)for(const r of n)r(e)}function uN(t,e){const n=dN();n&&n.postMessage({key:t,fid:e}),hN()}let ri=null;function dN(){return!ri&&"BroadcastChannel"in self&&(ri=new BroadcastChannel("[Firebase] FID Change"),ri.onmessage=t=>{ex(t.data.key,t.data.fid)}),ri}function hN(){X_.size===0&&ri&&(ri.close(),ri=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="firebase-installations-database",pN=1,wi="firebase-installations-store";let Xu=null;function Zf(){return Xu||(Xu=rw(fN,pN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wi)}}})),Xu}async function gc(t,e){const n=qc(t),i=(await Zf()).transaction(wi,"readwrite"),s=i.objectStore(wi),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&Z_(t,e.fid),e}async function tx(t){const e=qc(t),r=(await Zf()).transaction(wi,"readwrite");await r.objectStore(wi).delete(e),await r.done}async function Kc(t,e){const n=qc(t),i=(await Zf()).transaction(wi,"readwrite"),s=i.objectStore(wi),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&Z_(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ep(t){let e;const n=await Kc(t.appConfig,r=>{const i=mN(r),s=gN(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===gh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mN(t){const e=t||{fid:lN(),registrationStatus:0};return nx(e)}function gN(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(vi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=yN(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vN(t)}:{installationEntry:e}}async function yN(t,e){try{const n=await sN(t,e);return gc(t.appConfig,n)}catch(n){throw H_(n)&&n.customData.serverCode===409?await tx(t.appConfig):await gc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function vN(t){let e=await ay(t.appConfig);for(;e.registrationStatus===1;)await J_(100),e=await ay(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ep(t);return r||n}return e}function ay(t){return Kc(t,e=>{if(!e)throw vi.create("installation-not-found");return nx(e)})}function nx(t){return wN(t)?{fid:t.fid,registrationStatus:0}:t}function wN(t){return t.registrationStatus===1&&t.registrationTime+z_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N({appConfig:t,heartbeatServiceProvider:e},n){const r=xN(t,n),i=nN(t,n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:$_,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await Y_(()=>fetch(r,l));if(c.ok){const h=await c.json();return q_(h)}else throw await K_("Generate Auth Token",c)}function xN(t,{fid:e}){return`${G_(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tp(t,e=!1){let n;const r=await Kc(t.appConfig,s=>{if(!rx(s))throw vi.create("not-registered");const o=s.authToken;if(!e&&SN(o))return s;if(o.requestStatus===1)return n=EN(t,e),s;{if(!navigator.onLine)throw vi.create("app-offline");const l=TN(s);return n=IN(t,l),l}});return n?await n:r.authToken}async function EN(t,e){let n=await ly(t.appConfig);for(;n.authToken.requestStatus===1;)await J_(100),n=await ly(t.appConfig);const r=n.authToken;return r.requestStatus===0?tp(t,e):r}function ly(t){return Kc(t,e=>{if(!rx(e))throw vi.create("not-registered");const n=e.authToken;return kN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function IN(t,e){try{const n=await _N(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await gc(t.appConfig,r),n}catch(n){if(H_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await tx(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await gc(t.appConfig,r)}throw n}}function rx(t){return t!==void 0&&t.registrationStatus===2}function SN(t){return t.requestStatus===2&&!CN(t)}function CN(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+XR}function TN(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function kN(t){return t.requestStatus===1&&t.requestTime+z_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t){const e=t,{installationEntry:n,registrationPromise:r}=await ep(e);return r?r.catch(console.error):tp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e=!1){const n=t;return await RN(n),(await tp(n,e)).token}async function RN(t){const{registrationPromise:e}=await ep(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){if(!t||!t.options)throw Zu("App Configuration");if(!t.name)throw Zu("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Zu(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Zu(t){return vi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="installations",PN="installations-internal",jN=t=>{const e=t.getProvider("app").getImmediate(),n=NN(e),r=Ii(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ON=t=>{const e=t.getProvider("app").getImmediate(),n=Ii(e,ix).getImmediate();return{getId:()=>AN(n),getToken:i=>bN(n,i)}};function DN(){Mn(new Tn(ix,jN,"PUBLIC")),Mn(new Tn(PN,ON,"PRIVATE"))}DN();cn(B_,Xf);cn(B_,Xf,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="analytics",LN="firebase_id",MN="origin",FN=60*1e3,VN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",np="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt=new Dc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Yt=new Ei("analytics","Analytics",UN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){if(!t.startsWith(np)){const e=Yt.create("invalid-gtag-resource",{gtagURL:t});return zt.warn(e.message),""}return t}function sx(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function zN(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function $N(t,e){const n=zN("firebase-js-sdk-policy",{createScriptURL:BN}),r=document.createElement("script"),i=`${np}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function WN(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function HN(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await sx(n)).find(h=>h.measurementId===i);c&&await e[c.appId]}}catch(l){zt.error(l)}t("config",i,s)}async function GN(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await sx(n);for(const c of o){const h=l.find(m=>m.measurementId===c),p=h&&e[h.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){zt.error(s)}}function qN(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,c]=o;await GN(t,e,n,l,c)}else if(s==="config"){const[l,c]=o;await HN(t,e,n,r,l,c)}else if(s==="consent"){const[l,c]=o;t("consent",l,c)}else if(s==="get"){const[l,c,h]=o;t("get",l,c,h)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){zt.error(l)}}return i}function KN(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=qN(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function QN(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(np)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=30,JN=1e3;class XN{constructor(e={},n=JN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ox=new XN;function ZN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function eP(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:ZN(r)},s=VN.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw Yt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function tP(t,e=ox,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Yt.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Yt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new iP;return setTimeout(async()=>{l.abort()},FN),ax({appId:r,apiKey:i,measurementId:s},o,l,e)}async function ax(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ox){var s;const{appId:o,measurementId:l}=t;try{await nP(r,e)}catch(c){if(l)return zt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await eP(t);return i.deleteThrottleMetadata(o),c}catch(c){const h=c;if(!rP(h)){if(i.deleteThrottleMetadata(o),l)return zt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:l};throw c}const p=Number((s=h==null?void 0:h.customData)===null||s===void 0?void 0:s.httpStatus)===503?lg(n,i.intervalMillis,YN):lg(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return i.setThrottleMetadata(o,m),zt.debug(`Calling attemptFetch again in ${p} millis`),ax(t,m,r,i)}}function nP(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Yt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rP(t){if(!(t instanceof kn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class iP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function sP(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(){if(Z0())try{await ew()}catch(t){return zt.warn(Yt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return zt.warn(Yt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function aP(t,e,n,r,i,s,o){var l;const c=tP(t);c.then(T=>{n[T.measurementId]=T.appId,t.options.measurementId&&T.measurementId!==t.options.measurementId&&zt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>zt.error(T)),e.push(c);const h=oP().then(T=>{if(T)return r.getId()}),[p,m]=await Promise.all([c,h]);QN(s)||$N(s,p.measurementId),i("js",new Date);const y=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return y[MN]="firebase",y.update=!0,m!=null&&(y[LN]=m),i("config",p.measurementId,y),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.app=e}_delete(){return delete yo[this.app.options.appId],Promise.resolve()}}let yo={},cy=[];const uy={};let ed="dataLayer",cP="gtag",dy,lx,hy=!1;function uP(){const t=[];if(X0()&&t.push("This is a browser extension environment."),nC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Yt.create("invalid-analytics-context",{errorInfo:e});zt.warn(n.message)}}function dP(t,e,n){uP();const r=t.options.appId;if(!r)throw Yt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)zt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Yt.create("no-api-key");if(yo[r]!=null)throw Yt.create("already-exists",{id:r});if(!hy){WN(ed);const{wrappedGtag:s,gtagCore:o}=KN(yo,cy,uy,ed,cP);lx=s,dy=o,hy=!0}return yo[r]=aP(t,cy,uy,e,dy,ed,n),new lP(t)}function hP(t=If()){t=$t(t);const e=Ii(t,yc);return e.isInitialized()?e.getImmediate():fP(t)}function fP(t,e={}){const n=Ii(t,yc);if(n.isInitialized()){const i=n.getImmediate();if(Do(e,n.getOptions()))return i;throw Yt.create("already-initialized")}return n.initialize({options:e})}function pP(t,e,n,r){t=$t(t),sP(lx,yo[t.app.options.appId],e,n,r).catch(i=>zt.error(i))}const fy="@firebase/analytics",py="0.10.8";function mP(){Mn(new Tn(yc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return dP(r,i,n)},"PUBLIC")),Mn(new Tn("analytics-internal",t,"PRIVATE")),cn(fy,py),cn(fy,py,"esm2017");function t(e){try{const n=e.getProvider(yc).getImmediate();return{logEvent:(r,i,s)=>pP(n,r,i,s)}}catch(n){throw Yt.create("interop-component-reg-failed",{reason:n})}}}mP();const gP={apiKey:"AIzaSyCIqpOl5nT3VH149xISPqyLgkjyIiMWPb8",authDomain:"flinx-8a05e.firebaseapp.com",projectId:"flinx-8a05e",storageBucket:"flinx-8a05e.firebasestorage.app",messagingSenderId:"977393893446",appId:"1:977393893446:web:308db5f232f7c5558cca47",measurementId:"G-N0LW13KMNJ"},rp=iw(gP);let yP;if(typeof window<"u")try{yP=hP(rp)}catch{console.log("Analytics initialization skipped (local development)")}const Ho=vA(rp),vP=LR(rp),ip=new qn;ip.addScope("profile");ip.addScope("email");ip.addScope("openid");const Go=new Gn,cx="863917229498555";console.log(" Configuring Facebook Auth Provider:");console.log("   - App ID:",cx);console.log("   - Redirect URL:","https://flinx-8a05e.firebaseapp.com/__/auth/handler");Go.setCustomParameters({app_id:cx,display:"popup",auth_type:"rerequest",scope:"public_profile,email"});Go.addScope("public_profile");Go.addScope("email");console.log(" Facebook Auth Provider initialized with:");console.log("   - Public Profile scope: ");console.log("   - Email scope: ");console.log("   - Web OAuth redirect enabled: ");const ux=async(t,e)=>{var o,l,c;console.log(` Processing ${e} login for user:`,t.email);let n=null;e==="facebook"&&((o=t.providerData[0])!=null&&o.uid)&&(n=t.providerData[0].uid);const r={uid:t.uid,email:t.email,name:t.displayName||"User",picture:t.photoURL||null,authProvider:e,googleId:e==="google"?(l=t.providerData[0])==null?void 0:l.uid:null,facebookId:e==="facebook"?n:null,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};console.log(" User info extracted:",{email:r.email,name:r.name,authProvider:r.authProvider});try{const h=await t.getIdToken();localStorage.setItem("idToken",h),console.log(" Firebase ID token stored for Socket.IO")}catch(h){console.error(" Failed to get Firebase ID token:",h)}try{const p=await fetch("https://flinxx-backend.onrender.com/api/users/save",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({uid:t.uid,email:t.email,displayName:t.displayName||"User",photoURL:t.photoURL||null,authProvider:e})});if(!p.ok)throw new Error(`Failed to save user: ${p.status}`);const m=await p.json();console.log(" User saved to Neon PostgreSQL:",m.user),m.user&&(r.profileCompleted=m.user.profileCompleted,r.isProfileCompleted=m.user.profileCompleted,r.id=m.user.id,r.uuid=m.user.uuid,console.log("[FIREBASE]  Updated userInfo with profileCompleted:",m.user.profileCompleted)),localStorage.setItem("dbUserId",m.user.id)}catch(h){console.error(" Error saving user to backend database:",h)}try{await QR(DR(vP,"users",t.uid),{email:t.email,displayName:t.displayName,photoURL:t.photoURL,authProvider:e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()},{merge:!0}),console.log(" User saved to Firestore")}catch(h){console.error(" Error saving user to Firestore:",h)}console.log(`
 [firebase] handleLoginSuccess storing to localStorage`),console.log(" [firebase]   - userInfo.profileCompleted =",r.profileCompleted),console.log(" [firebase]   - userInfo.isProfileCompleted =",r.isProfileCompleted);const i={id:r.id,uuid:r.uuid,uid:r.uid,name:t.displayName,email:t.email,picture:t.photoURL,googleId:e==="google"?(c=t.providerData[0])==null?void 0:c.uid:null,facebookId:e==="facebook"?n:null,profileCompleted:r.profileCompleted||!1,isProfileCompleted:r.profileCompleted||!1,authProvider:e};console.log(" [firebase] userToStore object:",i),localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("authProvider",e),localStorage.setItem("userInfo",JSON.stringify(r)),console.log(" [firebase]  Stored to localStorage, verifying...");const s=JSON.parse(localStorage.getItem("user"));return console.log(" [firebase]   - Verified profileCompleted:",s.profileCompleted),console.log(" [firebase]  User data stored in localStorage with profileCompleted:",r.profileCompleted||!1),r},my=async()=>{var t;try{console.log(" Starting Facebook login via popup...");const e=await Tk(Ho,Go);console.log(" Facebook popup login successful:",e.user.email);const n=(t=e.user.providerData[0])==null?void 0:t.providerId;let r="facebook";return n==="facebook.com"&&(r="facebook"),ux(e.user,r)}catch(e){console.warn(" Facebook popup login failed, trying redirect method:",e.code);try{return console.log(" Starting Facebook login via redirect..."),await Pk(Ho,Go),null}catch(n){throw console.error(" Facebook login failed:",n),n}}},wP=async()=>{var t;try{const e=await Ok(Ho);if(e!=null&&e.user){console.log(" Redirect login successful:",e.user.email);const n=(t=e.user.providerData[0])==null?void 0:t.providerId;console.log("Provider:",n);let r="unknown";return n==="google.com"?r="google":n==="facebook.com"&&(r="facebook"),ux(e.user,r)}}catch(e){console.error("Redirect result error:",e),e.code==="auth/account-exists-with-different-credential"?console.error("Account exists with different credential"):e.code==="auth/auth-domain-config-required"&&console.error("Auth domain config required")}return null},Qc="https://flinxx-backend.onrender.com",dx=()=>localStorage.getItem("token"),_P=async t=>{try{if(!t||typeof t!="string"||t.length!==36)return console.warn(" getFriends blocked  invalid UUID:",t),[];const e=await fetch(`${Qc}/api/friends?userId=${t}`,{method:"GET",headers:{Authorization:`Bearer ${dx()}`,"Content-Type":"application/json"}});return e.ok?await e.json():[]}catch(e){return console.error("Error fetching friends:",e),[]}},xP=async t=>{try{if(!t||typeof t!="string"||t.length!==36)return console.warn(" getNotifications blocked  invalid UUID:",t),[];console.log(" Fetching notifications for user");const e=await fetch(`${Qc}/api/notifications?userId=${t}`,{method:"GET",headers:{Authorization:`Bearer ${dx()}`,"Content-Type":"application/json"}});if(!e.ok)return[];const n=await e.json();return console.log(" Notifications loaded:",n.length,"items"),n}catch(e){return console.error(" Error fetching notifications:",e),[]}},gy=async t=>{if(!t||typeof t!="string"||t.length!==36)return console.warn(" getUnreadCount blocked  invalid UUID:",t),0;try{const e=await fetch(`${Qc}/api/messages/unread-count/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});return e.ok?(await e.json()).unreadCount??0:0}catch(e){return console.error(" Unread count fetch failed:",e),0}},yh=async(t,e,n)=>{try{const r=localStorage.getItem("token");if(!r)return console.warn("No auth token in markMessagesAsRead"),{success:!1};let i=null;if(typeof e=="string"&&e.includes("_"))i=e;else{const l=e,c=t;if(!c||c.length!==36)return console.error(" Invalid UUID in markMessagesAsRead:",c),{success:!1};if(!l||l.length!==36)return console.error(" Invalid other user UUID in markMessagesAsRead:",l),{success:!1};i=c<l?`${c}_${l}`:`${l}_${c}`}const s=await fetch(`${Qc}/api/messages/mark-read/${encodeURIComponent(i)}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!s.ok)return console.error(" Mark read API error:",s.status,s.statusText),{success:!1};const o=await s.json();return console.log(" Messages marked as read",o),o}catch(r){return console.error("Error marking messages as read:",r),{success:!1}}},cr=R.createContext(),EP=()=>{const t=R.useContext(cr);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},IP=({children:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState(!0),[s,o]=R.useState(!1),[l,c]=R.useState(!1),[h,p]=R.useState([]),m=async()=>{if(!(e!=null&&e.uuid)||e.uuid.length!==36){console.warn(" refreshNotifications skipped: user UUID not ready");return}const b=await xP(e.uuid);p(Array.isArray(b)?b:[])};R.useEffect(()=>{if(r===!0){console.log(" Skipping notifications fetch  authLoading is true");return}if(!(e!=null&&e.uuid)||e.uuid.length!==36){console.log(" Skipping notifications fetch  user UUID not ready");return}console.log(" User ready, fetching notifications:",e.uuid.substring(0,8)+"..."),m();const b=setInterval(m,5e3);return()=>{clearInterval(b)}},[r,e==null?void 0:e.uuid]),R.useEffect(()=>{(async()=>{var k,P,I;try{console.log(`

 [AuthContext] `),console.log(" [AuthContext] INITIALIZATION STARTED"),console.log(" [AuthContext] ");const _=localStorage.getItem("user");if(_)try{const D=JSON.parse(_);(!D.uuid||typeof D.uuid=="string"&&D.uuid.length!==36)&&(console.warn(" [AuthContext] Removing invalid user from localStorage:",{uuid:D.uuid,id:D.id,email:D.email}),localStorage.removeItem("user"),localStorage.removeItem("token"))}catch{console.warn(" [AuthContext] Invalid JSON in localStorage user, removing"),localStorage.removeItem("user")}const x=localStorage.getItem("token"),O=localStorage.getItem("user");if(console.log(" [AuthContext] STEP 1: Check localStorage"),console.log(" [AuthContext]   - token:",x?" Found":" Not found"),console.log(" [AuthContext]   - user:",O?" Found":" Not found"),x&&O)try{console.log(`
 [AuthContext] STEP 2: Parse localStorage user`);const D=JSON.parse(O);console.log(" [AuthContext]   - Parsed user email:",D.email),console.log(" [AuthContext]   - profileCompleted from localStorage:",D.profileCompleted,"(type:",typeof D.profileCompleted+")"),console.log(" [AuthContext]  Attempting to restore Google OAuth user from localStorage:",D.email),console.log(" [AuthContext] User data from localStorage:",{id:D.id,email:D.email,profileCompleted:D.profileCompleted,isProfileCompleted:D.isProfileCompleted});const S="https://flinxx-backend.onrender.com";console.log(`
 [AuthContext] STEP 3: Validate token with backend`),console.log(" [AuthContext]   - Backend URL:",S),console.log(" [AuthContext]   - Making request to /api/profile...");const g=await fetch(`${S}/api/profile`,{method:"GET",headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(console.log(" [AuthContext]   - Response status:",g.status),g.ok){const w=await g.json();if(console.log(" [AuthContext]   - Response OK, parsing data..."),console.log(" [AuthContext]   - data.success:",w.success),console.log(" [AuthContext]   - data.user available:",!!w.user),w.success&&w.user){console.log(" [AuthContext]  Token validated, user restored from backend"),console.log(" [AuthContext] Backend user data:",{id:w.user.id,email:w.user.email,profileCompleted:w.user.profileCompleted,birthday:w.user.birthday,gender:w.user.gender});const E={uuid:w.user.uuid,name:w.user.name||"User",email:w.user.email,picture:w.user.picture,profileCompleted:w.user.profileCompleted||!1};if(!E.uuid||typeof E.uuid!="string"||E.uuid.length!==36){console.error(" INVALID UUID FROM BACKEND:",E.uuid),console.error("   Expected 36-char UUID, got:",((k=E.uuid)==null?void 0:k.length)||"undefined"),i(!1);return}console.log(" [AuthContext] Setting user state with UUID-only:",{uuid:E.uuid.substring(0,8)+"...",email:E.email}),n(E),localStorage.setItem("user",JSON.stringify(E)),o(!0),i(!1),console.log(" [AuthContext]  COMPLETE - UUID-only user set");return}else console.log(" [AuthContext]   Response OK but data.success or data.user missing")}else{console.log(" [AuthContext]  Token validation response not OK:",g.status);const w=await g.text();console.log(" [AuthContext] Error response:",w)}}catch(D){console.error(" [AuthContext]  Error validating token:",D)}else console.log(`
 [AuthContext] STEP 2: Skip token validation (missing token or user)`),console.log(" [AuthContext]   - Skipping /api/profile call");if(O)try{console.log(`
 [AuthContext] STEP 3: Restore from localStorage (no token validation)`),console.log(" [AuthContext] Raw stored user string:",O);const D=JSON.parse(O);if(console.log(" [AuthContext] Parsed user object:",D),console.log(" [AuthContext] User keys:",Object.keys(D)),console.log(" [AuthContext] user.uuid value:",D.uuid),console.log(" [AuthContext] user.uuid type:",typeof D.uuid),console.log(" [AuthContext] user.uuid length:",(P=D.uuid)==null?void 0:P.length),!D.uuid||typeof D.uuid!="string"||D.uuid.length!==36){console.warn(" [AuthContext] Invalid UUID in localStorage, removing:",(I=D.uuid)==null?void 0:I.length),localStorage.removeItem("user"),localStorage.removeItem("token"),i(!1);return}console.log(" [AuthContext]   - Email:",D.email),console.log(" [AuthContext]   - UUID:",D.uuid.substring(0,8)+"..."),console.log(" [AuthContext]  User loaded from localStorage (UUID valid):",D.email),n(D),o(!0),i(!1),console.log(" [AuthContext]  COMPLETE - Returning from localStorage fallback path");return}catch(D){console.error("[AuthContext] Error parsing saved user:",D)}return console.log(`
 [AuthContext] STEP 3: No stored token or user, checking Firebase...`),sk(Ho,async D=>{var S,g;if(console.log(`
 [AuthContext] Firebase onAuthStateChanged fired`),console.log(" [AuthContext]   - firebaseUser:",D?D.email:"null"),D){const w=((S=D.providerData[0])==null?void 0:S.providerId)||"unknown";console.log(" [AuthContext] User authenticated via Firebase"),console.log(" [AuthContext]   - Email:",D.email),console.log(" [AuthContext]   - Provider:",w);try{console.log(" [AuthContext] Getting Firebase ID token...");const A=await D.getIdToken();console.log(" [AuthContext]  ID token obtained"),localStorage.setItem("idToken",A),console.log(" Firebase ID token stored for Socket.IO");const N="https://flinxx-backend.onrender.com";console.log(" [AuthContext] Calling /api/profile with ID token...");const C=await fetch(`${N}/api/profile`,{method:"GET",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"}});if(console.log(" [AuthContext] /api/profile response status:",C.status),C.ok){const oe=await C.json();if(console.log(" [AuthContext] /api/profile response OK"),console.log(" [AuthContext]   - success:",oe.success),console.log(" [AuthContext]   - user.profileCompleted:",(g=oe.user)==null?void 0:g.profileCompleted),oe.success&&oe.user){console.log(" [AuthContext]  Fetched full user profile from database:",{email:oe.user.email,profileCompleted:oe.user.profileCompleted}),console.log(" [AuthContext] Setting user state with profileCompleted:",oe.user.profileCompleted);const Ke={...oe.user,publicId:oe.user.public_id||oe.user.publicId,uuid:oe.user.uuid};Ke.uuid||console.error(" UUID missing from backend user object"),n(Ke),o(!0),i(!1);return}}else console.log(" [AuthContext]  /api/profile response not OK:",C.status)}catch(A){console.warn("[AuthContext]  Failed to fetch profile from database:",A)}const E={uid:D.uid,email:D.email,displayName:D.displayName,photoURL:D.photoURL,publicId:D.uid,authProvider:w,profileCompleted:!1};console.log("[AuthContext] Using fallback userInfo (database fetch failed):",E.email),console.log("[AuthContext]  WARNING: profileCompleted not loaded from database, defaulting to false"),n(E),o(!0),localStorage.setItem("userInfo",JSON.stringify(E)),localStorage.setItem("authProvider",w)}else{console.log(" [AuthContext] Firebase user is null/logged out");const w=localStorage.getItem("authToken"),E=localStorage.getItem("authProvider");if(console.log(" [AuthContext]   - authToken:",w?"Found":"Not found"),console.log(" [AuthContext]   - authProvider:",E),w&&E==="guest"){const A=JSON.parse(localStorage.getItem("userInfo")||"{}");!A.publicId&&A.public_id&&(A.publicId=A.public_id),console.log(" [AuthContext] Restoring guest login"),n(A),o(!0)}else console.log(" [AuthContext]  No authentication found, user will be redirected to login"),n(null),o(!1)}console.log(" [AuthContext] "),console.log(" [AuthContext] INITIALIZATION COMPLETE - Setting isLoading=false"),console.log(` [AuthContext] 
`),i(!1)})}catch(_){console.error("[AuthContext] Error initializing auth:",_),i(!1)}})()},[]);const y=()=>{n(null),o(!1),localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),localStorage.removeItem("authProvider"),localStorage.removeItem("token"),localStorage.removeItem("user")},T=(b,k)=>{var I,_;console.log("[AuthContext]  setAuthToken called with userData:",{email:k==null?void 0:k.email,has_uuid:!!(k!=null&&k.uuid),uuid:k==null?void 0:k.uuid,uuid_length:(I=k==null?void 0:k.uuid)==null?void 0:I.length,all_keys:Object.keys(k||{})});const P={uuid:k==null?void 0:k.uuid,name:(k==null?void 0:k.name)||"User",email:k==null?void 0:k.email,picture:k==null?void 0:k.picture,profileCompleted:(k==null?void 0:k.profileCompleted)||!1};if(!P.uuid||typeof P.uuid!="string"||P.uuid.length!==36){console.error(" Invalid or missing UUID in setAuthToken:",{uuid_received:k==null?void 0:k.uuid,uuid_type:typeof(k==null?void 0:k.uuid),uuid_length:(_=k==null?void 0:k.uuid)==null?void 0:_.length});return}console.log("[AuthContext]  setAuthToken storing user with UUID:",P.uuid.substring(0,8)+"..."),localStorage.setItem("token",b),localStorage.setItem("user",JSON.stringify(P)),localStorage.setItem("authProvider","google"),n(P),o(!0)};return u.jsx(cr.Provider,{value:{user:e,isAuthenticated:s,isLoading:r,logout:y,authPending:l,setAuthPending:c,setAuthToken:T,notifications:h,refreshNotifications:m},children:t})},hx=R.createContext(),SP=({children:t})=>{const[e,n]=R.useState({}),r=l=>{n(c=>({...c,[l]:!0}))},i=l=>{n(c=>{const h={...c};return delete h[l],h})},s=Object.keys(e).length,o={unreadMessages:e,setUnreadMessages:n,markAsUnread:r,markAsRead:i,unreadCount:s};return u.jsx(hx.Provider,{value:o,children:t})},Bn=Object.create(null);Bn.open="0";Bn.close="1";Bn.ping="2";Bn.pong="3";Bn.message="4";Bn.upgrade="5";Bn.noop="6";const Il=Object.create(null);Object.keys(Bn).forEach(t=>{Il[Bn[t]]=t});const vh={type:"error",data:"parser error"},fx=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",px=typeof ArrayBuffer=="function",mx=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,sp=({type:t,data:e},n,r)=>fx&&e instanceof Blob?n?r(e):yy(e,r):px&&(e instanceof ArrayBuffer||mx(e))?n?r(e):yy(new Blob([e]),r):r(Bn[t]+(e||"")),yy=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function vy(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let td;function CP(t,e){if(fx&&t.data instanceof Blob)return t.data.arrayBuffer().then(vy).then(e);if(px&&(t.data instanceof ArrayBuffer||mx(t.data)))return e(vy(t.data));sp(t,!1,n=>{td||(td=new TextEncoder),e(td.encode(n))})}const wy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",to=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<wy.length;t++)to[wy.charCodeAt(t)]=t;const TP=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),p=new Uint8Array(h);for(r=0;r<n;r+=4)s=to[t.charCodeAt(r)],o=to[t.charCodeAt(r+1)],l=to[t.charCodeAt(r+2)],c=to[t.charCodeAt(r+3)],p[i++]=s<<2|o>>4,p[i++]=(o&15)<<4|l>>2,p[i++]=(l&3)<<6|c&63;return h},kP=typeof ArrayBuffer=="function",op=(t,e)=>{if(typeof t!="string")return{type:"message",data:gx(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:AP(t.substring(1),e)}:Il[n]?t.length>1?{type:Il[n],data:t.substring(1)}:{type:Il[n]}:vh},AP=(t,e)=>{if(kP){const n=TP(t);return gx(n,e)}else return{base64:!0,data:t}},gx=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},yx="",bP=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{sp(s,!1,l=>{r[o]=l,++i===n&&e(r.join(yx))})})},RP=(t,e)=>{const n=t.split(yx),r=[];for(let i=0;i<n.length;i++){const s=op(n[i],e);if(r.push(s),s.type==="error")break}return r};function NP(){return new TransformStream({transform(t,e){CP(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let nd;function nl(t){return t.reduce((e,n)=>e+n.length,0)}function rl(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function PP(t,e){nd||(nd=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(nl(n)<1)break;const c=rl(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(nl(n)<2)break;const c=rl(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(nl(n)<8)break;const c=rl(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),p=h.getUint32(0);if(p>Math.pow(2,21)-1){l.enqueue(vh);break}i=p*Math.pow(2,32)+h.getUint32(4),r=3}else{if(nl(n)<i)break;const c=rl(n,i);l.enqueue(op(s?c:nd.decode(c),e)),r=0}if(i===0||i>t){l.enqueue(vh);break}}}})}const vx=4;function qe(t){if(t)return jP(t)}function jP(t){for(var e in qe.prototype)t[e]=qe.prototype[e];return t}qe.prototype.on=qe.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};qe.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};qe.prototype.off=qe.prototype.removeListener=qe.prototype.removeAllListeners=qe.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};qe.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};qe.prototype.emitReserved=qe.prototype.emit;qe.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};qe.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Yc=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),on=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),OP="arraybuffer";function wx(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const DP=on.setTimeout,LP=on.clearTimeout;function Jc(t,e){e.useNativeTimers?(t.setTimeoutFn=DP.bind(on),t.clearTimeoutFn=LP.bind(on)):(t.setTimeoutFn=on.setTimeout.bind(on),t.clearTimeoutFn=on.clearTimeout.bind(on))}const MP=1.33;function FP(t){return typeof t=="string"?VP(t):Math.ceil((t.byteLength||t.size)*MP)}function VP(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function _x(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function UP(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function BP(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class zP extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class ap extends qe{constructor(e){super(),this.writable=!1,Jc(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new zP(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=op(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=UP(e);return n.length?"?"+n:""}}class $P extends ap{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};RP(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,bP(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=_x()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let xx=!1;try{xx=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const WP=xx;function HP(){}class GP extends $P{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let ts=class Sl extends qe{constructor(e,n,r){super(),this.createRequest=e,Jc(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=wx(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Sl.requestsCount++,Sl.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=HP,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Sl.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};ts.requestsCount=0;ts.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_y);else if(typeof addEventListener=="function"){const t="onpagehide"in on?"pagehide":"unload";addEventListener(t,_y,!1)}}function _y(){for(let t in ts.requests)ts.requests.hasOwnProperty(t)&&ts.requests[t].abort()}const qP=function(){const t=Ex({xdomain:!1});return t&&t.responseType!==null}();class KP extends GP{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=qP&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ts(Ex,this.uri(),e)}}function Ex(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||WP))return new XMLHttpRequest}catch{}if(!e)try{return new on[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ix=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class QP extends ap{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Ix?{}:wx(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;sp(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Yc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=_x()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const rd=on.WebSocket||on.MozWebSocket;class YP extends QP{createSocket(e,n,r){return Ix?new rd(e,n,r):n?new rd(e,n):new rd(e)}doWrite(e,n){this.ws.send(n)}}class JP extends ap{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=PP(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=NP();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Yc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const XP={websocket:YP,webtransport:JP,polling:KP},ZP=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function wh(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=ZP.exec(t||""),s={},o=14;for(;o--;)s[e1[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=t1(s,s.path),s.queryKey=n1(s,s.query),s}function t1(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function n1(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const _h=typeof addEventListener=="function"&&typeof removeEventListener=="function",Cl=[];_h&&addEventListener("offline",()=>{Cl.forEach(t=>t())},!1);class Dr extends qe{constructor(e,n){if(super(),this.binaryType=OP,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=wh(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=wh(n.host).host);Jc(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=BP(this.opts.query)),_h&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=vx,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Dr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Dr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=FP(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Yc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Dr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),_h&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Cl.indexOf(this._offlineEventListener);r!==-1&&Cl.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Dr.protocol=vx;class r1 extends Dr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Dr.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",m=>{if(!r)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Dr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function s(){r||(r=!0,p(),n.close(),n=null)}const o=m=>{const y=new Error("probe error: "+m);y.transport=n.name,s(),this.emitReserved("upgradeError",y)};function l(){o("transport closed")}function c(){o("socket closed")}function h(m){n&&m.name!==n.name&&s()}const p=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",h)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let i1=class extends r1{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>XP[i]).filter(i=>!!i)),super(e,r)}};function s1(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=wh(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const o1=typeof ArrayBuffer=="function",a1=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Sx=Object.prototype.toString,l1=typeof Blob=="function"||typeof Blob<"u"&&Sx.call(Blob)==="[object BlobConstructor]",c1=typeof File=="function"||typeof File<"u"&&Sx.call(File)==="[object FileConstructor]";function lp(t){return o1&&(t instanceof ArrayBuffer||a1(t))||l1&&t instanceof Blob||c1&&t instanceof File}function Tl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Tl(t[n]))return!0;return!1}if(lp(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Tl(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Tl(t[n]))return!0;return!1}function u1(t){const e=[],n=t.data,r=t;return r.data=xh(n,e),r.attachments=e.length,{packet:r,buffers:e}}function xh(t,e){if(!t)return t;if(lp(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=xh(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=xh(t[r],e));return n}return t}function d1(t,e){return t.data=Eh(t.data,e),delete t.attachments,t}function Eh(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Eh(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Eh(t[n],e));return t}const h1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],f1=5;var ue;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ue||(ue={}));class p1{constructor(e){this.replacer=e}encode(e){return(e.type===ue.EVENT||e.type===ue.ACK)&&Tl(e)?this.encodeAsBinary({type:e.type===ue.EVENT?ue.BINARY_EVENT:ue.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ue.BINARY_EVENT||e.type===ue.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=u1(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function xy(t){return Object.prototype.toString.call(t)==="[object Object]"}class cp extends qe{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===ue.BINARY_EVENT;r||n.type===ue.BINARY_ACK?(n.type=r?ue.EVENT:ue.ACK,this.reconstructor=new m1(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(lp(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(ue[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ue.BINARY_EVENT||r.type===ue.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(cp.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ue.CONNECT:return xy(n);case ue.DISCONNECT:return n===void 0;case ue.CONNECT_ERROR:return typeof n=="string"||xy(n);case ue.EVENT:case ue.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&h1.indexOf(n[0])===-1);case ue.ACK:case ue.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class m1{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=d1(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const g1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:cp,Encoder:p1,get PacketType(){return ue},protocol:f1},Symbol.toStringTag,{value:"Module"}));function yn(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const y1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Cx extends qe{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[yn(e,"open",this.onopen.bind(this)),yn(e,"packet",this.onpacket.bind(this)),yn(e,"error",this.onerror.bind(this)),yn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(y1.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:ue.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const p=this.ids++,m=n.pop();this._registerAckCallback(p,m),o.id=p}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ue.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ue.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ue.EVENT:case ue.BINARY_EVENT:this.onevent(e);break;case ue.ACK:case ue.BINARY_ACK:this.onack(e);break;case ue.DISCONNECT:this.ondisconnect();break;case ue.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:ue.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ue.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Is(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Is.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Is.prototype.reset=function(){this.attempts=0};Is.prototype.setMin=function(t){this.ms=t};Is.prototype.setMax=function(t){this.max=t};Is.prototype.setJitter=function(t){this.jitter=t};class Ih extends qe{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Jc(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Is({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||g1;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new i1(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=yn(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=yn(n,"error",s);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(yn(e,"ping",this.onping.bind(this)),yn(e,"data",this.ondata.bind(this)),yn(e,"error",this.onerror.bind(this)),yn(e,"close",this.onclose.bind(this)),yn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Yc(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Cx(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Qs={};function kl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=s1(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Qs[i]&&s in Qs[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return l?c=new Ih(r,e):(Qs[i]||(Qs[i]=new Ih(r,e)),c=Qs[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(kl,{Manager:Ih,Socket:Cx,io:kl,connect:kl});const Tx="https://flinxx-backend.onrender.com";console.log(" Socket.IO connecting to:",Tx);const ee=kl(Tx,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:10,transports:["websocket","polling"],secure:!1,rejectUnauthorized:!1,forceNew:!1,withCredentials:!0,upgrade:!0,rememberUpgrade:!1,multiplex:!0,timeout:6e4,extraHeaders:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}});ee.on("connect",()=>{console.log(" Socket connected successfully! ID:",ee.id),console.log(" Transport method:",ee.io.engine.transport.name)});ee.on("connect_error",t=>{console.error(" Socket connection error:",t.message||t),console.error(" Error details:",t),ee.io.engine.transport.name==="polling"&&console.log(" Retrying with websocket...")});ee.on("error",t=>{console.error(" Socket error:",t)});ee.on("disconnect",t=>{console.log(" Socket disconnected. Reason:",t),console.log(" Attempting to reconnect...")});ee.on("connect_timeout",()=>{console.error(" Socket connection timeout")});const kx=R.createContext(),v1=({children:t})=>{const{user:e,isLoading:n}=EP(),[r,i]=R.useState(0);return R.useEffect(()=>{var l;if(n===!0){console.log(" UnreadContext: Waiting for AuthContext to load...");return}if(!e){console.log(" UnreadContext: Skipping fetch  user is null");return}if(!(e!=null&&e.uuid)||typeof e.uuid!="string"||e.uuid.length!==36){console.log(" UnreadContext: Skipping fetch  user UUID not valid:",(l=e==null?void 0:e.uuid)==null?void 0:l.length);return}const s=async()=>{console.log(" UnreadContext: Auth ready, user valid, fetching unread count");try{const c=await gy(e.uuid),h=typeof c=="number"?c:(c==null?void 0:c.unreadCount)||0;i(h)}catch(c){console.error(" UnreadContext: Error fetching unread count:",c),i(0)}};s();const o=setInterval(s,5e3);return()=>clearInterval(o)},[n,e==null?void 0:e.uuid]),R.useEffect(()=>{if(n===!0||!e||!(e!=null&&e.uuid)||e.uuid.length!==36)return;const s=async()=>{console.log(" UnreadContext: New message received, refreshing count");try{const o=await gy(e.uuid),l=typeof o=="number"?o:(o==null?void 0:o.unreadCount)||0;i(l)}catch(o){console.error(" UnreadContext: Error updating unread count:",o)}};return ee.on("receive_message",s),()=>{ee.off("receive_message",s)}},[n,e==null?void 0:e.uuid]),u.jsx(kx.Provider,{value:{unreadCount:r,setUnreadCount:i},children:t})},Ax=()=>{const t=R.useContext(kx);if(!t)throw new Error("useUnread must be used within UnreadProvider");return t};class w1 extends Yo.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){var e;return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-bold text-red-500 mb-4",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-300 mb-8",children:(e=this.state.error)==null?void 0:e.message}),u.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg font-semibold text-white",children:"Reload Page"})]})}):this.props.children}}/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qo(){return qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qo.apply(this,arguments)}var Ir;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ir||(Ir={}));const Ey="popstate";function _1(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Sh("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bx(i)}return E1(e,n,null,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function up(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function x1(){return Math.random().toString(36).substr(2,8)}function Iy(t,e){return{usr:t.state,key:t.key,idx:e}}function Sh(t,e,n,r){return n===void 0&&(n=null),qo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ss(e):e,{state:n,key:e&&e.key||r||x1()})}function bx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ss(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function E1(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Ir.Pop,c=null,h=p();h==null&&(h=0,o.replaceState(qo({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=Ir.Pop;let P=p(),I=P==null?null:P-h;h=P,c&&c({action:l,location:k.location,delta:I})}function y(P,I){l=Ir.Push;let _=Sh(k.location,P,I);h=p()+1;let x=Iy(_,h),O=k.createHref(_);try{o.pushState(x,"",O)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(O)}s&&c&&c({action:l,location:k.location,delta:1})}function T(P,I){l=Ir.Replace;let _=Sh(k.location,P,I);h=p();let x=Iy(_,h),O=k.createHref(_);o.replaceState(x,"",O),s&&c&&c({action:l,location:k.location,delta:0})}function b(P){let I=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof P=="string"?P:bx(P);return _=_.replace(/ $/,"%20"),tt(I,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,I)}let k={get action(){return l},get location(){return t(i,o)},listen(P){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Ey,m),c=P,()=>{i.removeEventListener(Ey,m),c=null}},createHref(P){return e(i,P)},createURL:b,encodeLocation(P){let I=b(P);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:y,replace:T,go(P){return o.go(P)}};return k}var Sy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sy||(Sy={}));function I1(t,e,n){return n===void 0&&(n="/"),S1(t,e,n)}function S1(t,e,n,r){let i=typeof e=="string"?Ss(e):e,s=Px(i.pathname||"/",n);if(s==null)return null;let o=Rx(t);C1(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let h=M1(s);l=O1(o[c],h)}return l}function Rx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(tt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=li([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(tt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Rx(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:P1(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of Nx(s.path))i(s,o,c)}),e}function Nx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Nx(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function C1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:j1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const T1=/^:[\w-]+$/,k1=3,A1=2,b1=1,R1=10,N1=-2,Cy=t=>t==="*";function P1(t,e){let n=t.split("/"),r=n.length;return n.some(Cy)&&(r+=N1),e&&(r+=A1),n.filter(i=>!Cy(i)).reduce((i,s)=>i+(T1.test(s)?k1:s===""?b1:R1),r)}function j1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function O1(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=D1({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),y=c.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:li([s,m.pathname]),pathnameBase:W1(li([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=li([s,m.pathnameBase]))}return o}function D1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=L1(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:y,isOptional:T}=p;if(y==="*"){let k=l[m]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const b=l[m];return T&&!b?h[y]=void 0:h[y]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function L1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),up(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function M1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return up(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Px(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const F1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V1=t=>F1.test(t);function U1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ss(t):t,s;if(n)if(V1(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),up(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Ty(n.substring(1),"/"):s=Ty(n,e)}else s=e;return{pathname:s,search:H1(r),hash:G1(i)}}function Ty(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function id(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function B1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function z1(t,e){let n=B1(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ss(t):(i=qo({},t),tt(!i.pathname||!i.pathname.includes("?"),id("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),id("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),id("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}l=m>=0?e[m]:"/"}let c=U1(i,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const li=t=>t.join("/").replace(/\/\/+/g,"/"),W1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),H1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,G1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function q1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const jx=["post","put","patch","delete"];new Set(jx);const K1=["get",...jx];new Set(K1);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ko.apply(this,arguments)}const dp=R.createContext(null),Q1=R.createContext(null),Xc=R.createContext(null),Zc=R.createContext(null),Cs=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Ox=R.createContext(null);function eu(){return R.useContext(Zc)!=null}function tu(){return eu()||tt(!1),R.useContext(Zc).location}function Dx(t){R.useContext(Xc).static||R.useLayoutEffect(t)}function en(){let{isDataRoute:t}=R.useContext(Cs);return t?l2():Y1()}function Y1(){eu()||tt(!1);let t=R.useContext(dp),{basename:e,future:n,navigator:r}=R.useContext(Xc),{matches:i}=R.useContext(Cs),{pathname:s}=tu(),o=JSON.stringify(z1(i,n.v7_relativeSplatPath)),l=R.useRef(!1);return Dx(()=>{l.current=!0}),R.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=$1(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:li([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,s,t])}function J1(t,e){return X1(t,e)}function X1(t,e,n,r){eu()||tt(!1);let{navigator:i}=R.useContext(Xc),{matches:s}=R.useContext(Cs),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=tu(),p;if(e){var m;let P=typeof e=="string"?Ss(e):e;c==="/"||(m=P.pathname)!=null&&m.startsWith(c)||tt(!1),p=P}else p=h;let y=p.pathname||"/",T=y;if(c!=="/"){let P=c.replace(/^\//,"").split("/");T="/"+y.replace(/^\//,"").split("/").slice(P.length).join("/")}let b=I1(t,{pathname:T}),k=r2(b&&b.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:li([c,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?c:li([c,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r);return e&&k?R.createElement(Zc.Provider,{value:{location:Ko({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ir.Pop}},k):k}function Z1(){let t=a2(),e=q1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,null)}const e2=R.createElement(Z1,null);class t2 extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Cs.Provider,{value:this.props.routeContext},R.createElement(Ox.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n2(t){let{routeContext:e,match:n,children:r}=t,i=R.useContext(dp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Cs.Provider,{value:e},r)}function r2(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||tt(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:y,errors:T}=n,b=m.route.loader&&y[m.route.id]===void 0&&(!T||T[m.route.id]===void 0);if(m.route.lazy||b){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,y)=>{let T,b=!1,k=null,P=null;n&&(T=l&&m.route.id?l[m.route.id]:void 0,k=m.route.errorElement||e2,c&&(h<0&&y===0?(c2("route-fallback"),b=!0,P=null):h===y&&(b=!0,P=m.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,y+1)),_=()=>{let x;return T?x=k:b?x=P:m.route.Component?x=R.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=p,R.createElement(n2,{match:m,routeContext:{outlet:p,matches:I,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?R.createElement(t2,{location:n.location,revalidation:n.revalidation,component:k,error:T,children:_(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):_()},null)}var Lx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Lx||{}),Mx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Mx||{});function i2(t){let e=R.useContext(dp);return e||tt(!1),e}function s2(t){let e=R.useContext(Q1);return e||tt(!1),e}function o2(t){let e=R.useContext(Cs);return e||tt(!1),e}function Fx(t){let e=o2(),n=e.matches[e.matches.length-1];return n.route.id||tt(!1),n.route.id}function a2(){var t;let e=R.useContext(Ox),n=s2(),r=Fx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function l2(){let{router:t}=i2(Lx.UseNavigateStable),e=Fx(Mx.UseNavigateStable),n=R.useRef(!1);return Dx(()=>{n.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ko({fromRouteId:e},s)))},[t,e])}const ky={};function c2(t,e,n){ky[t]||(ky[t]=!0)}function u2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function nn(t){tt(!1)}function d2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ir.Pop,navigator:s,static:o=!1,future:l}=t;eu()&&tt(!1);let c=e.replace(/^\/*/,"/"),h=R.useMemo(()=>({basename:c,navigator:s,static:o,future:Ko({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=Ss(r));let{pathname:p="/",search:m="",hash:y="",state:T=null,key:b="default"}=r,k=R.useMemo(()=>{let P=Px(p,c);return P==null?null:{location:{pathname:P,search:m,hash:y,state:T,key:b},navigationType:i}},[c,p,m,y,T,b,i]);return k==null?null:R.createElement(Xc.Provider,{value:h},R.createElement(Zc.Provider,{children:n,value:k}))}function h2(t){let{children:e,location:n}=t;return J1(Ch(e),n)}new Promise(()=>{});function Ch(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){n.push.apply(n,Ch(r.props.children,s));return}r.type!==nn&&tt(!1),!r.props.index||!r.props.children||tt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ch(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Th(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function f2(t,e){let n=Th(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const p2="6";try{window.__reactRouterVersion=p2}catch{}const m2="startTransition",Ay=CE[m2];function g2(t){let{basename:e,children:n,future:r,window:i}=t,s=R.useRef();s.current==null&&(s.current=_1({window:i,v5Compat:!0}));let o=s.current,[l,c]=R.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},p=R.useCallback(m=>{h&&Ay?Ay(()=>c(m)):c(m)},[c,h]);return R.useLayoutEffect(()=>o.listen(p),[o,p]),R.useEffect(()=>u2(r),[r]),R.createElement(d2,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var by;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(by||(by={}));var Ry;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ry||(Ry={}));function Vx(t){let e=R.useRef(Th(t)),n=R.useRef(!1),r=tu(),i=R.useMemo(()=>f2(r.search,n.current?null:e.current),[r.search]),s=en(),o=R.useCallback((l,c)=>{const h=Th(typeof l=="function"?l(i):l);n.current=!0,s("?"+h,c)},[s,i]);return[i,o]}const y2="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMjgwIDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8IS0tIFB1cnBsZSBSb3VuZGVkLVNxdWFyZSBJY29uIChleGFjdCBmcm9tIGJyYW5kaW5nKSAtLT4NCiAgPGc+DQogICAgPCEtLSBHcmFkaWVudCBkZWZpbml0aW9ucyAtLT4NCiAgICA8ZGVmcz4NCiAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icHVycGxlR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPg0KICAgICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojOUQ0RUREO3N0b3Atb3BhY2l0eToxIiAvPg0KICAgICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3MjA5Qjc7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgDQogICAgICA8bGluZWFyR3JhZGllbnQgaWQ9Imdsb3dHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+DQogICAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDA7c3RvcC1vcGFjaXR5OjAuOCIgLz4NCiAgICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZBNTAwO3N0b3Atb3BhY2l0eTowLjQiIC8+DQogICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgDQogICAgICA8ZmlsdGVyIGlkPSJwcmVtaXVtU2hhZG93Ij4NCiAgICAgICAgPGZlRHJvcFNoYWRvdyBkeD0iMCIgZHk9IjQiIHN0ZERldmlhdGlvbj0iNiIgZmxvb2Qtb3BhY2l0eT0iMC4zNSIvPg0KICAgICAgPC9maWx0ZXI+DQogICAgPC9kZWZzPg0KICAgIA0KICAgIDwhLS0gR29sZGVuIGdsb3cvaGFsbyBiZWhpbmQgaWNvbiAtLT4NCiAgICA8Y2lyY2xlIGN4PSIzNiIgY3k9IjM2IiByPSIzNCIgZmlsbD0idXJsKCNnbG93R3JhZGllbnQpIiBvcGFjaXR5PSIwLjUiLz4NCiAgICANCiAgICA8IS0tIE1haW4gcHVycGxlIHJvdW5kZWQtc3F1YXJlIGJhY2tncm91bmQgLS0+DQogICAgPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iMTYiIGZpbGw9InVybCgjcHVycGxlR3JhZGllbnQpIiBmaWx0ZXI9InVybCgjcHJlbWl1bVNoYWRvdykiLz4NCiAgICANCiAgICA8IS0tIENhbWVyYSBib2R5ICh3aGl0ZSBvdXRsaW5lIHN0eWxlKSAtLT4NCiAgICA8cmVjdCB4PSIxNiIgeT0iMjIiIHdpZHRoPSIyNCIgaGVpZ2h0PSIxOCIgcng9IjIiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMi41Ii8+DQogICAgDQogICAgPCEtLSBDYW1lcmEgbGVucyAoY2lyY3VsYXIpIC0tPg0KICAgIDxjaXJjbGUgY3g9IjQ0IiBjeT0iMzEiIHI9IjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxjaXJjbGUgY3g9IjQ0IiBjeT0iMzEiIHI9IjMuNSIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuNSIvPg0KICAgIA0KICAgIDwhLS0gTGlnaHRuaW5nIGJvbHQgYWNjZW50ICh0b3AgcmlnaHQpIC0tPg0KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ2LCAxMCkiPg0KICAgICAgPCEtLSBNYWluIGxpZ2h0bmluZyBzaGFwZSAtLT4NCiAgICAgIDxwYXRoIGQ9Ik0gNiAwIEwgMiA2IEwgNiA2IEwgMCAxNCBMIDggOCBMIDQgOCBaIiBmaWxsPSIjRkZENzAwIiBzdHJva2U9IiNGRjhBMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogICAgICA8IS0tIElubmVyIGhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgICA8cGF0aCBkPSJNIDQgMSBMIDMgNCBMIDUgNCBMIDEgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRUIzQiIgc3Ryb2tlLXdpZHRoPSIwLjgiIG9wYWNpdHk9IjAuNyIvPg0KICAgIDwvZz4NCiAgICANCiAgICA8IS0tIEdvbGRlbiBzcGFya2xlIGFjY2VudHMgLS0+DQogICAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMS41IiBmaWxsPSIjRkZENzAwIiBvcGFjaXR5PSIwLjkiLz4NCiAgICA8Y2lyY2xlIGN4PSI1OCIgY3k9IjE4IiByPSIxLjUiIGZpbGw9IiNGRkQ3MDAiIG9wYWNpdHk9IjAuOCIvPg0KICAgIDxjaXJjbGUgY3g9IjE2IiBjeT0iNTYiIHI9IjEiIGZpbGw9IiNGRkIzMUEiIG9wYWNpdHk9IjAuNyIvPg0KICA8L2c+DQogIA0KICA8IS0tIEZMSU5YWCBUZXh0IC0tPg0KICA8dGV4dCB4PSI4MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSI0MiIgZm9udC13ZWlnaHQ9IjkwMCIgZmlsbD0idXJsKCN0ZXh0R3JhZGllbnQpIiBsZXR0ZXItc3BhY2luZz0iMSI+DQogICAgRkxJTlhYDQogIDwvdGV4dD4NCiAgDQogIDwhLS0gVGV4dCBHcmFkaWVudCAtLT4NCiAgPGRlZnM+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJ0ZXh0R3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDA7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQjMxQTtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGOEEwMDtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICA8L2xpbmVhckdyYWRpZW50Pg0KICA8L2RlZnM+DQo8L3N2Zz4NCg==",v2=({isOpen:t,onClose:e})=>{const[n,r]=R.useState([{id:1,text:"Hi, this is our virtual assistant. Tell us how we can help.",sender:"assistant",timestamp:new Date}]),[i,s]=R.useState(""),o=R.useRef(null),l=()=>{var p;(p=o.current)==null||p.scrollIntoView({behavior:"smooth"})};R.useEffect(()=>{l()},[n]);const c=()=>{if(i.trim()==="")return;const p={id:n.length+1,text:i,sender:"user",timestamp:new Date};r([...n,p]),s(""),setTimeout(()=>{const m={id:n.length+2,text:"Thanks for reaching out! Our team will get back to you shortly.",sender:"assistant",timestamp:new Date};r(y=>[...y,m])},500)},h=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),c())};return t?u.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:u.jsxs("div",{className:"w-96 bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-gray-200",style:{maxHeight:"600px"},children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"Contact Us"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We typically reply in minutes"})]}),u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors text-2xl leading-none","aria-label":"Close chat",children:""})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 bg-gray-50 space-y-4",children:[n.map(p=>u.jsx("div",{className:`flex ${p.sender==="user"?"justify-end":"justify-start"}`,children:u.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-lg ${p.sender==="user"?"bg-blue-600 text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"}`,children:[u.jsx("p",{className:"text-sm break-words",children:p.text}),u.jsx("span",{className:`text-xs mt-1 block ${p.sender==="user"?"text-blue-100":"text-gray-500"}`,children:p.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},p.id)),u.jsx("div",{ref:o})]}),u.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:i,onChange:p=>s(p.target.value),onKeyPress:h,placeholder:"Type message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm"}),u.jsx("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors font-semibold","aria-label":"Send message",children:"Send"})]})})]})}):null},w2=()=>{const t=en(),[e,n]=R.useState(!1),[r,i]=R.useState(!1),s=()=>{n(!0),setTimeout(()=>{t("/login",{replace:!0})},500)};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-4 flex justify-between items-center max-w-full",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:y2,alt:"Flinxx",className:"h-12",style:{width:"auto"}}),u.jsx("span",{className:"text-sm text-white/90 ml-2",children:" 3,247 online"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:s,className:"text-white font-bold px-6 py-2 rounded-lg transition transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 20px rgba(255, 139, 0, 0.3)"},onMouseEnter:o=>o.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)",onMouseLeave:o=>o.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)",children:"Start Now"})})]})}),u.jsx("div",{className:"relative z-10 min-h-[500px] flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"text-center max-w-3xl",children:[u.jsxs("h1",{className:"text-6xl md:text-7xl font-black text-white mb-6 leading-tight",children:["Meet New People",u.jsx("br",{}),"Around the World"]}),u.jsx("p",{className:"text-xl text-white/90 mb-10",children:"Connect instantly with strangers through video chat"}),u.jsx("div",{className:"flex items-center justify-center gap-4 mb-12",children:u.jsx("button",{onClick:s,disabled:e,className:`inline-flex items-center gap-2 px-8 py-4 text-lg font-bold rounded-lg transition-all transform hover:scale-105 ${e?"cursor-not-allowed text-gray-700":"text-white"}`,style:e?{backgroundColor:"#9CA3AF"}:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 30px rgba(255, 139, 0, 0.4)"},onMouseEnter:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)"),onMouseLeave:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)"),children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""})," Starting Chat..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Start Chatting Now"]})})}),u.jsx("p",{className:"text-white/80 text-sm",children:"Fast, simple video chats  Real users, real time"})]})}),u.jsx("div",{className:"relative z-10 px-4 py-16 bg-gradient-to-b from-transparent via-purple-600/50 to-purple-700",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0 shadow-lg",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Instant Connection"}),u.jsx("p",{className:"text-white/80 text-base",children:"Connect with random strangers in seconds. No waiting, no hassle."})]})]})}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-pink-400 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Global Community"}),u.jsx("p",{className:"text-white/80 text-base",children:"Meet people from all over the world. Make international friends."})]})]})}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-cyan-400 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Safe & Verified"}),u.jsx("p",{className:"text-white/80 text-base",children:"Verified users, moderated content, and privacy protection."})]})]})})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-b from-purple-700 via-purple-600 to-purple-500",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-black text-white text-center mb-16",children:"How It Works"}),u.jsx("div",{className:"relative bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"1"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Sign Up"}),u.jsx("p",{className:"text-white/80 text-base",children:"Create your free account in seconds"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"2"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Start Video Chat"}),u.jsx("p",{className:"text-white/80 text-base",children:"Get matched with random strangers instantly"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"3"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Make Friends"}),u.jsx("p",{className:"text-white/80 text-base",children:"Chat, connect, and meet awesome people"})]})]})})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-b from-purple-500 via-purple-600 to-purple-700",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-black text-white text-center mb-16",children:"Smart Matching Features"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-3xl mb-6 shadow-lg",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"One-Click Connect"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Connect with strangers instantly with just one click. No complicated setup needed."}),u.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-200 px-4 py-1 rounded-full text-sm font-semibold",children:"Free"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-3xl mb-6 shadow-lg",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"Auto-Matching"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Our intelligent algorithm matches you with compatible users based on interests and preferences."}),u.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-200 px-4 py-1 rounded-full text-sm font-semibold",children:"Free"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all md:col-span-2",children:[u.jsx("div",{className:"w-14 h-14 bg-purple-400 rounded-xl flex items-center justify-center text-3xl mb-6",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"Gender Preference Filter"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Fine-tune your matching experience with optional gender preferences. Available in Premium."}),u.jsx("div",{className:"inline-block bg-purple-400/30 text-purple-200 px-4 py-1 rounded-full text-sm font-semibold border border-purple-400/50",children:" Premium Feature"})]})]})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:u.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[u.jsx("h2",{className:"text-5xl md:text-6xl font-black text-white mb-6",children:"Ready to Meet New People?"}),u.jsx("p",{className:"text-xl text-white/90 mb-10",children:"Join thousands of users connecting right now"}),u.jsx("button",{onClick:s,disabled:e,className:`inline-flex items-center gap-3 px-10 py-4 text-xl font-bold rounded-lg transition-all transform hover:scale-105 ${e?"cursor-not-allowed text-gray-700":"text-white"}`,style:e?{backgroundColor:"#9CA3AF"}:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 30px rgba(255, 139, 0, 0.4)"},onMouseEnter:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)"),onMouseLeave:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)"),children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""})," Starting Chat..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Get Started Free"]})})]})}),!r&&u.jsxs("button",{onClick:()=>i(!0),className:"fixed bottom-6 right-6 inline-flex items-center gap-2 px-6 py-3 bg-white text-gray-800 font-bold rounded-full shadow-lg transition-all transform hover:scale-110 hover:shadow-2xl",style:{zIndex:9999},children:[u.jsx("span",{className:"text-lg",children:""}),"Contact Us"]}),u.jsx(v2,{isOpen:r,onClose:()=>i(!1)})]})};class _2 extends Error{}_2.prototype.name="InvalidTokenError";const ca="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Orange%20gradient%20background%20--%3e%3crect%20width='40'%20height='40'%20rx='8'%20fill='url(%23gradient)'%20/%3e%3c!--%20Video%20camera%20icon%20--%3e%3cg%20transform='translate(8,%208)'%3e%3c!--%20Camera%20body%20--%3e%3crect%20x='1'%20y='6'%20width='16'%20height='12'%20rx='1'%20fill='white'%20stroke='white'%20stroke-width='0.5'/%3e%3c!--%20Camera%20lens%20--%3e%3ccircle%20cx='17'%20cy='12'%20r='4'%20fill='none'%20stroke='white'%20stroke-width='1'/%3e%3ccircle%20cx='17'%20cy='12'%20r='2.5'%20fill='white'%20opacity='0.8'/%3e%3c!--%20Recording%20indicator%20dot%20--%3e%3ccircle%20cx='3'%20cy='3'%20r='1.5'%20fill='%23FF4444'/%3e%3c/g%3e%3c!--%20Gradient%20definition%20--%3e%3cdefs%3e%3clinearGradient%20id='gradient'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%23FF8C42;stop-opacity:1'%20/%3e%3cstop%20offset='100%25'%20style='stop-color:%23FF6B35;stop-opacity:1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",x2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%3e%3cpath%20fill='%234285F4'%20d='M22.56%2012.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26%201.37-1.04%202.53-2.21%203.31v2.77h3.57c2.08-1.92%203.28-4.74%203.28-8.09z'/%3e%3cpath%20fill='%2334A853'%20d='M12%2023c2.97%200%205.46-.98%207.28-2.66l-3.57-2.77c-.98.66-2.23%201.06-3.71%201.06-2.86%200-5.29-1.93-6.16-4.53H2.18v2.84C3.99%2020.53%207.7%2023%2012%2023z'/%3e%3cpath%20fill='%23FBBC05'%20d='M5.84%2014.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43%208.55%201%2010.22%201%2012s.43%203.45%201.18%204.93l2.85-2.22.81-.62z'/%3e%3cpath%20fill='%23EA4335'%20d='M12%205.38c1.62%200%203.06.56%204.21%201.64l3.15-3.15C17.45%202.09%2014.97%201%2012%201%207.7%201%203.99%203.47%202.18%207.07l3.66%202.84c.87-2.6%203.3-4.53%206.16-4.53z'/%3e%3c/svg%3e",Ux=({onContinue:t,onCancel:e})=>{R.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),R.useEffect(()=>{const r=i=>{i.key==="Escape"&&i.preventDefault()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[]),R.useEffect(()=>{window.history.pushState(null,"",window.location.href);const r=i=>{i.preventDefault(),window.history.pushState(null,"",window.location.href)};return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[]);const n=()=>{localStorage.setItem("termsAccepted","true"),t==null||t()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Before you continue"}),u.jsxs("p",{className:"text-gray-700 text-center text-sm",children:["By continuing, you confirm that you are 18 years or older and agree to Flinxx's"," ",u.jsx("a",{href:"/terms-and-conditions",className:"text-blue-600 underline",children:"Terms & Conditions"})," ","and"," ",u.jsx("a",{href:"/privacy-policy",className:"text-blue-600 underline",children:"Privacy Policy"}),"."]}),u.jsx("p",{className:"text-gray-700 text-center text-sm mt-4",children:"You understand that Flinxx is a live interaction platform and you use it at your own responsibility."}),u.jsxs("div",{className:"flex gap-4 mt-6",children:[u.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-900 font-semibold rounded-lg hover:bg-gray-300 transition-colors",children:"Decline"}),u.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-colors",children:"Accept & Proceed"})]})]})})},Bx=()=>{try{return localStorage.getItem("termsAccepted")==="true"}catch(t){return console.error(" Error checking terms acceptance:",t),!1}},E2=()=>{try{localStorage.setItem("termsAccepted","true"),console.log(" Terms accepted and saved to localStorage")}catch(t){console.error(" Error saving terms acceptance:",t)}},I2=({isSigningIn:t,onShowTermsModal:e})=>{const n=()=>{console.log(" Google login clicked - checking terms acceptance"),Bx()?(console.log(" Terms already accepted - proceeding with Google login"),r()):(console.log(" Terms not accepted - showing modal first"),e("google"))},r=()=>{const i="https://flinxx-backend.onrender.com";console.log(" Redirecting to Google OAuth:",`${i}/auth/google`),window.location.href=`${i}/auth/google`};return u.jsxs("button",{onClick:n,disabled:t,className:`w-full py-3 px-6 rounded-full transition-all text-lg font-bold flex items-center justify-center gap-3 ${t?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-white hover:bg-gray-50 text-black shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:[u.jsx("img",{src:x2,alt:"Google",className:"w-6 h-6"}),"Continue with Google"]})},S2=()=>{const t=en(),[e,n]=R.useState(!1),[r,i]=R.useState(null),[s,o]=R.useState(!1),[l,c]=R.useState(null);R.useEffect(()=>{(async()=>{try{const b=await wP();b&&(console.log(" Login successful:",b.email),t("/chat"))}catch(b){console.error(" Login check failed:",b)}})()},[t]);const h=T=>{console.log(` Showing Terms modal for ${T}`),c(T),o(!0)},p=()=>{console.log(" User cancelled terms modal"),o(!1),c(null)},m=async()=>{if(console.log(" User accepted terms"),E2(),o(!1),l==="google"){console.log(" Proceeding with Google login after terms acceptance");const T="https://flinxx-backend.onrender.com";window.location.href=`${T}/auth/google`}else if(l==="facebook"){console.log(" Proceeding with Facebook login after terms acceptance");try{await my()}catch(T){console.error(" Facebook login error:",T),i("Facebook login failed. Please try again.")}}c(null)},y=async()=>{if(console.log(" Facebook login clicked - checking terms acceptance"),Bx()){console.log(" Terms already accepted - proceeding with Facebook login"),n(!0),i(null);try{console.log(" Starting Facebook login..."),console.log("Facebook App ID:","863917229498555"),console.log("Redirect URL:","https://flinx-8a05e.firebaseapp.com/__/auth/handler"),await my()}catch(T){console.error(" Facebook login error:",T),i("Facebook login failed. Please try again."),n(!1)}}else console.log(" Terms not accepted - showing modal first"),h("facebook")};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:[u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"Welcome to Flinxx"}),u.jsx("p",{className:"text-lg text-white/80",children:"Connect with strangers instantly"}),u.jsx("p",{className:"text-sm text-white/70 mt-2",children:"Sign up to get started"})]}),r&&u.jsx("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg",children:u.jsx("p",{className:"text-red-200 text-sm",children:r})}),u.jsxs("div",{className:"space-y-4",children:[e&&u.jsxs("button",{disabled:!0,className:"w-full bg-gray-400 cursor-not-allowed text-gray-700 font-bold py-3 px-6 rounded-full transition-all text-lg flex items-center justify-center gap-2",children:[u.jsx("span",{className:"animate-spin",children:""})," Signing in..."]}),u.jsx(I2,{isSigningIn:e,onShowTermsModal:h}),u.jsxs("button",{onClick:y,disabled:e,className:`w-full py-3 px-6 rounded-full transition-all text-lg font-bold flex items-center justify-center gap-3 ${e?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:[u.jsx("span",{className:"text-xl",children:"f"})," Continue with Facebook"]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsxs("p",{className:"text-xs text-white/60",children:["By signing in, you agree to our"," ",u.jsx("a",{href:"/terms",className:"text-white/80 hover:text-white underline",children:"TERMS & CONDITIONS"})," ","and"," ",u.jsx("a",{href:"/privacy-policy",className:"text-white/80 hover:text-white underline",children:"Privacy Policy"})]})}),u.jsxs("div",{className:"mt-10 flex flex-col items-center gap-3 text-white/80 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"Instant connection with strangers"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"100% Anonymous & Safe"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"High-quality Video Chat"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"Connect Worldwide"})]})]})]}),s&&u.jsx(Ux,{onCancel:p,onContinue:m})]})},C2=()=>{console.log(`
 `),console.log(" [ICE SERVERS CONFIGURATION]"),console.log(" "),console.log(" STUN Server:"),console.log("   - stun:global.xirsys.net"),console.log("     Purpose: NAT detection, find public IP"),console.log("     Status: Should work on all networks"),console.log(" "),console.log(" TURN Servers (for relaying if P2P blocked):"),console.log("   - turn:global.xirsys.net:3478?transport=udp"),console.log("     Status: Blocked if ISP blocks UDP port 3478"),console.log("   - turn:global.xirsys.net:3478?transport=tcp"),console.log("     Status: Blocked if ISP blocks TCP port 3478"),console.log("   - turns:global.xirsys.net:5349?transport=tcp"),console.log("     Status: Blocked if ISP blocks TLS port 5349"),console.log(" "),console.log(" Credentials:"),console.log("   - Username: nkhlydv"),console.log("   - Credential: a8e244b8-cf5b-11f0-8771-0242ac140002"),console.log(" "),console.log(" If all TURN candidates fail with error 701:"),console.log("    Configuration is CORRECT"),console.log("    STUN works (can find your IP)"),console.log("    ISP/Network is blocking TURN ports"),console.log("    Try VPN or different network to test"),console.log(` 
`)},T2=()=>[{urls:["stun:global.xirsys.net"]},{urls:["turn:global.xirsys.net:3478?transport=udp","turn:global.xirsys.net:3478?transport=tcp","turns:global.xirsys.net:5349?transport=tcp"],username:"nkhlydv",credential:"a8e244b8-cf5b-11f0-8771-0242ac140002"}],k2=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}h ${n}m ${r}s`:n>0?`${n}m ${r}s`:`${r}s`},A2=({isOpen:t,onClose:e})=>{const[n,r]=R.useState("flex"),[i,s]=R.useState("lite");if(!t)return null;const o=[{id:"lite",name:"LITE",emoji:"",price:"69",duration:"1 Day",features:["Unlimited Filters","Gender Filter: 50/day","10 Match Preferences","Ads Enabled","No Boost"]},{id:"prime",name:"PRIME",emoji:"",price:"199",duration:"15 Days",features:["Unlimited Filters","Gender Filter: 150/day","Full Match Preferences","No Ads","2x Profile Boost","Priority Match Queue"]},{id:"ultra",name:"ULTRA",emoji:"",price:"399",duration:"30 Days",features:["Unlimited Filters","Unlimited Gender Filter","Full Match Preferences","No Ads","5x Profile Boost","Ultra Priority Queue","Ultra Badge","Double Visibility"]}],l=[{id:"blue-tick",name:"Blue Tick",emoji:"",price:"69",features:["Verification badge","Trust boost","Status indicator"]},{id:"chat-themes",name:"Chat Themes",emoji:"",price:"49",features:["Unlock themes","Custom colors","Personal style"]},{id:"match-boost",name:"Match Boost",emoji:"",price:"39",features:["30 min visibility boost","Increased reach","More matches"]},{id:"profile-ring",name:"Profile Ring",emoji:"",price:"79",features:["Colored profile ring","Stand out","Eye-catching design"]},{id:"profile-highlight",name:"Profile Highlight",emoji:"",price:"99",features:["24h highlight","Top search visibility","Premium placement"]}];return o.find(c=>c.id===i),u.jsx("div",{className:"premium-overlay",onClick:e,children:u.jsxs("div",{className:"premium-box",onClick:c=>c.stopPropagation(),children:[u.jsx("button",{className:"close-btn",onClick:e,children:""}),u.jsx("h2",{className:"premium-title",children:"Flinxx Subscriptions"}),u.jsxs("div",{className:"main-tabs-container",children:[!1,u.jsx("button",{className:`main-tab ${n==="flex"?"active":""}`,onClick:()=>r("flex"),children:"Flex Plans"})]}),!1,n==="flex"&&u.jsxs("div",{className:"tab-content",children:[u.jsx("p",{className:"flex-subtitle",children:"Choose individual features"}),u.jsx("div",{className:"flex-section flex-wrapper",children:u.jsx("div",{className:"flex-plans-box",children:u.jsx("div",{className:"flex-plans-container",children:l.map(c=>u.jsxs("div",{className:"flex-card",children:[u.jsxs("div",{className:"flex-item-header",children:[u.jsx("span",{className:"flex-emoji",children:c.emoji}),u.jsx("h4",{children:c.name})]}),u.jsx("div",{className:"flex-item-price",children:c.price}),u.jsx("ul",{className:"flex-item-features",children:c.features.map((h,p)=>u.jsxs("li",{children:[u.jsx("span",{className:"flex-check",children:""}),u.jsx("span",{children:h})]},p))}),u.jsx("button",{className:"flex-item-btn",children:"Add Now"})]},c.id))})})})]}),u.jsx("div",{className:"premium-footer",children:u.jsx("p",{children:"Recurring billing. Cancel anytime. No hidden charges."})})]})})},b2=({isOpen:t,onClose:e,currentGender:n="both",onOpenPremium:r})=>{const[i,s]=R.useState(n);if(!t)return null;const o=()=>{console.log("Gender filter saved:",i),e()},l=()=>{console.log("Join clicked - opening premium modal"),r(),e()};return u.jsx("div",{className:"gender-filter-overlay",onClick:e,children:u.jsxs("div",{className:"gender-filter-modal",onClick:c=>c.stopPropagation(),children:[u.jsx("button",{className:"gender-close-btn",onClick:e,children:""}),u.jsxs("div",{className:"gender-premium-section",children:[u.jsx("div",{className:"premium-icon",children:""}),u.jsxs("div",{className:"premium-content",children:[u.jsx("h3",{children:"Flinxx Prime"}),u.jsx("p",{children:"Get More Gender Filters"})]}),u.jsx("button",{className:"join-btn",onClick:l,children:"Join"})]}),u.jsxs("div",{className:"gender-section",children:[u.jsx("div",{className:"gender-icon",children:""}),u.jsx("h2",{children:"Gender"}),u.jsxs("div",{className:"gender-options",children:[u.jsxs("button",{className:`gender-option ${i==="girls"?"selected":""}`,onClick:()=>s("girls"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Girls Only"})]}),u.jsxs("button",{className:`gender-option ${i==="guys"?"selected":""}`,onClick:()=>s("guys"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Guys Only"})]}),!1]})]}),u.jsxs("div",{className:"gender-footer",children:[u.jsx("button",{className:"save-btn",onClick:o,children:"Save"}),u.jsx("button",{className:"filter-btn",children:""})]})]})})},R2=({isOpen:t,onClose:e,onOpenPremium:n,onReinitializeCamera:r})=>{const i=en(),{user:s}=R.useContext(cr)||{},[o,l]=R.useState(!1),[c,h]=R.useState({id:"",name:"",email:"",picture:"",googleId:"",location:"",gender:"",birthday:"",tokens:0,gems:0}),[p,m]=R.useState(!1),[y,T]=R.useState(null),[b,k]=R.useState(!1),P=g=>{g&&(navigator.clipboard.writeText(g),k(!0),setTimeout(()=>k(!1),2e3))};R.useEffect(()=>{t&&s&&x()},[t,s]),R.useEffect(()=>{!y&&t&&I()},[t]);const I=async()=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async g=>{var A,N,C;const{latitude:w,longitude:E}=g.coords;try{const Ke=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${w}&lon=${E}`)).json(),Dt=((A=Ke.address)==null?void 0:A.city)||((N=Ke.address)==null?void 0:N.town)||"Unknown",bt=((C=Ke.address)==null?void 0:C.country)||"Unknown";T(`${Dt}, ${bt}`),h(H=>({...H,location:`${Dt}, ${bt}`}))}catch(oe){console.log("Reverse geocoding error:",oe)}},g=>{console.log("Geolocation error:",g),_()}):_()}catch(g){console.log("Location detection error:",g)}},_=async()=>{try{const w=await(await fetch("https://ipapi.co/json/")).json(),E=`${w.city}, ${w.country_name}`;T(E),h(A=>({...A,location:E}))}catch(g){console.log("IP API error:",g)}},x=async()=>{var g;if(s)try{h(E=>({...E,id:s.id||"",name:s.name||"User",email:s.email||"",picture:s.picture||"",googleId:s.googleId||""}));const w=localStorage.getItem("token");if(w){console.log("[ProfileModal] Fetching fresh user profile from backend");const A=await fetch("https://flinxx-backend.onrender.com/api/profile",{method:"GET",headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(A.ok){const N=await A.json();console.log("[ProfileModal]  Fetched profile data from backend:",(g=N.user)==null?void 0:g.email),N.success&&N.user&&h(C=>({...C,id:N.user.id||N.user.userId||"",name:N.user.name||"User",email:N.user.email||"",picture:N.user.picture||"",googleId:N.user.googleId||"",gender:N.user.gender||"Not set",birthday:N.user.birthday||"Not set"}))}else console.warn("[ProfileModal]  Failed to fetch profile from backend:",A.status)}else console.log("[ProfileModal]  No token found in localStorage")}catch(w){console.error("[ProfileModal]  Error loading user profile:",w)}},O=g=>{const{name:w,value:E}=g.target;h(A=>({...A,[w]:E}))},V=g=>{var E;const w=(E=g.target.files)==null?void 0:E[0];if(w){const A=new FileReader;A.onloadend=()=>{h(N=>({...N,picture:A.result}))},A.readAsDataURL(w)}},D=async()=>{m(!0);try{console.log("[PROFILE SAVE] Starting profile save process"),console.log("[PROFILE SAVE] Profile data:",c);const g=(s==null?void 0:s.googleId)||localStorage.getItem("userId");if(console.log("[PROFILE SAVE] User ID:",g),!g){console.error("[PROFILE SAVE] Error: No user ID found"),alert("Error: User ID not found. Please login again."),m(!1);return}const w={userId:g,birthday:c.birthday||new Date().toISOString().split("T")[0],gender:c.gender||"Not set"};console.log("[PROFILE SAVE] Request body:",JSON.stringify(w)),console.log("[PROFILE SAVE] Required fields check:"),console.log("  - userId:",!!w.userId),console.log("  - birthday:",!!w.birthday),console.log("  - gender:",!!w.gender);const E=localStorage.getItem("token");console.log("[PROFILE SAVE] Token present:",!!E),E||console.warn("[PROFILE SAVE] Warning: No auth token found");const A="https://flinxx-backend.onrender.com";console.log("[PROFILE SAVE] Backend URL:",A),console.log("[PROFILE SAVE] Making API call to /api/users/complete-profile");const N=await fetch(`${A}/api/users/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json",...E&&{Authorization:`Bearer ${E}`}},body:JSON.stringify(w)});if(console.log("[PROFILE SAVE] Response status:",N.status),!N.ok){const oe=await N.json();console.error("[PROFILE SAVE] Error response:",oe),alert(`Failed to save profile: ${oe.error||"Unknown error"}`),m(!1);return}const C=await N.json();console.log("[PROFILE SAVE]  Profile saved successfully:",C),localStorage.setItem("userProfile",JSON.stringify(w)),l(!1),console.log("[PROFILE SAVE] Profile saved successfully"),console.log("[PROFILE SAVE] Closing ProfileModal..."),e(),alert("Profile updated successfully!"),console.log(" [ProfileModal] Scheduling camera re-init with 500ms delay to allow modal unmount"),typeof r=="function"?setTimeout(()=>{console.log(`
 [ProfileModal] 500ms delay complete, reinitializing camera now`),console.log(" [ProfileModal] Calling onReinitializeCamera()"),r().then(oe=>{oe?console.log(" [ProfileModal]  Camera reinitialized successfully after profile save"):console.warn(" [ProfileModal]  Camera reinitialization returned false")}).catch(oe=>{console.error(" [ProfileModal]  Error calling reinitializeCamera:",oe)})},500):console.warn(" [ProfileModal]  onReinitializeCamera callback not provided")}catch(g){console.error("[PROFILE SAVE] Error:",g),console.error("[PROFILE SAVE] Error message:",g.message),console.error("[PROFILE SAVE] Error stack:",g.stack),alert("Failed to save profile: "+g.message)}finally{m(!1)}},S=async()=>{try{await ok(Ho),localStorage.removeItem("userInfo"),localStorage.removeItem("userProfile"),i("/login",{replace:!0})}catch(g){console.error("Sign out error:",g)}};return t?u.jsx("div",{className:"profile-modal-overlay",onClick:e,children:u.jsxs("div",{className:"profile-modal-container",onClick:g=>g.stopPropagation(),children:[u.jsx("button",{className:"profile-modal-close",onClick:e,children:""}),u.jsxs("div",{className:"profile-header",children:[u.jsxs("div",{className:"profile-picture-container",children:[u.jsx("img",{src:c.picture||"https://via.placeholder.com/120",alt:"Profile",className:"profile-picture"}),o&&u.jsxs("label",{className:"photo-upload-label",children:[u.jsx("input",{type:"file",accept:"image/*",onChange:V,style:{display:"none"}}),""]})]}),o?u.jsx("input",{type:"text",name:"name",value:c.name,onChange:O,className:"profile-input-name",placeholder:"Name"}):u.jsx("h2",{className:"profile-name",children:c.name}),u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:"6px",opacity:.8},children:[u.jsxs("span",{children:["ID: ",c.id||"N/A"]}),c.id&&u.jsx("button",{onClick:()=>P(c.id),style:{background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center"},title:"Copy ID",children:""})]})]}),u.jsxs("div",{className:"profile-premium-section",onClick:n,style:{cursor:"pointer"},children:[u.jsx("div",{className:"premium-badge",children:" Flinxx Premium"}),u.jsx("p",{className:"premium-description",children:"Unlock premium features"})]}),u.jsxs("div",{className:"profile-details",children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Tokens"}),u.jsx("span",{className:"detail-value",children:c.tokens})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gems"}),u.jsx("span",{className:"detail-value",children:c.gems})]}),o?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Location"}),u.jsx("input",{type:"text",name:"location",value:c.location,onChange:O,className:"profile-input-small"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gender"}),u.jsxs("select",{name:"gender",value:c.gender,onChange:O,className:"profile-input-small",children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Birthday"}),u.jsx("input",{type:"date",name:"birthday",value:c.birthday?c.birthday.slice(0,10):"",onChange:O,className:"profile-input-small text-black focus:text-black !text-black [&::-webkit-datetime-edit]:text-black [&::-webkit-datetime-edit-year-field]:text-black [&::-webkit-datetime-edit-month-field]:text-black [&::-webkit-datetime-edit-day-field]:text-black"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Location"}),u.jsx("span",{className:"detail-value",children:c.location||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gender"}),u.jsx("span",{className:"detail-value",children:c.gender||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Birthday"}),u.jsx("span",{className:"detail-value",children:c.birthday||"Not set"})]})]})]}),u.jsx("div",{className:"profile-actions",children:o?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-save",onClick:D,disabled:p,children:p?"Saving...":"Save Changes"}),u.jsx("button",{className:"btn-cancel",onClick:()=>{l(!1),x()},children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-edit",onClick:()=>l(!0),children:" Edit Profile"}),u.jsx("button",{className:"btn-more",children:" More"})]})}),u.jsx("button",{className:"btn-sign-out",onClick:S,children:"Sign Out"})]})}):null},N2=({isOpen:t,onClose:e})=>{const[n,r]=R.useState([{id:1,username:"Up ke ",name:"Up ke",location:"National Capital Territory of Delhi",duration:"00:05",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:2,username:"Loup ",name:"Loup",location:"Algeria",duration:"00:06",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:3,username:"Nish ",name:"Nish",location:"Maharashtra",duration:"00:04",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:4,username:"Priya ",name:"Priya",location:"Gujarat",duration:"00:02",date:"11/27/2025",time:"9:23PM",avatar:"M",liked:!1},{id:5,username:"pagbigyamnmako ",name:"pagbigyamnmako",location:"Philippines",duration:"00:08",date:"11/27/2025",time:"9:23PM",avatar:"",liked:!1}]),i=o=>{r(n.map(l=>l.id===o?{...l,liked:!l.liked}:l))},s=o=>{r(n.filter(l=>l.id!==o))};return t?u.jsx("div",{className:"match-history-overlay",onClick:e,children:u.jsxs("div",{className:"match-history-container",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"match-history-header",children:[u.jsx("h2",{children:"Match History"}),u.jsx("button",{className:"match-history-close",onClick:e,children:""})]}),u.jsx("div",{className:"match-history-list",children:n.length===0?u.jsxs("div",{className:"match-history-empty",children:[u.jsx("p",{children:"No match history yet"}),u.jsx("p",{className:"match-history-empty-sub",children:"Start video chatting to build your history!"})]}):n.map(o=>u.jsxs("div",{className:"match-card",children:[u.jsxs("div",{className:"match-card-date",children:[u.jsxs("div",{className:"match-card-datetime",children:[u.jsx("span",{className:"match-date",children:o.date}),u.jsx("span",{className:"match-time",children:o.time})]}),u.jsxs("div",{className:"match-duration",children:[" ",o.duration]})]}),u.jsxs("div",{className:"match-card-user",children:[u.jsx("div",{className:"match-card-avatar",children:o.avatar==="M"?u.jsx("div",{className:"avatar-initial",children:"M"}):u.jsx("span",{children:o.avatar})}),u.jsxs("div",{className:"match-card-info",children:[u.jsx("p",{className:"match-card-name",children:o.name}),u.jsxs("p",{className:"match-card-location",children:[" ",o.location]})]})]}),u.jsxs("div",{className:"match-card-actions",children:[u.jsx("button",{className:`action-btn like-btn ${o.liked?"liked":""}`,onClick:()=>i(o.id),title:"Like this match",children:""}),u.jsx("button",{className:"action-btn delete-btn",onClick:()=>s(o.id),title:"Delete from history",children:""})]})]},o.id))})]})}):null},Ny=({friend:t,onBack:e,onMessageSent:n})=>{var m;const{user:r}=R.useContext(cr)||{},[i,s]=R.useState([]),[o,l]=R.useState(""),c=r==null?void 0:r.uuid;if(!c||typeof c!="string"||c.length!==36)return console.warn(" ChatBox: Invalid my UUID, blocking render:",c==null?void 0:c.length),null;if(!(t!=null&&t.id)||typeof t.id!="string"||t.id.length!==36)return console.warn(" ChatBox: Invalid friend UUID, blocking render:",(m=t==null?void 0:t.id)==null?void 0:m.length),null;R.useEffect(()=>{if(!c||!t)return;const y=t.id,T=c<y?`${c}_${y}`:`${y}_${c}`;console.log(` Joining chat room: ${T}`),console.log(`   My UUID: ${c}`),console.log(`   Friend UUID: ${y}`),ee.emit("join_chat",{senderId:c,receiverId:t.id})},[t,c]),R.useEffect(()=>{if(!c||!(t!=null&&t.id))return;(async()=>{try{const T=t.id,b=c<T?`${c}_${T}`:`${T}_${c}`,k=await yh(b);k!=null&&k.success&&console.log(" Messages from",t.display_name,"marked as read (chatId)",b)}catch(T){console.error(" Error marking messages as read:",T)}})()},[t==null?void 0:t.id,c]),R.useEffect(()=>{if(!c||!(t!=null&&t.id)){console.log(" ChatBox: Waiting for myUserId or friend.id",{myUserId:c,friendId:t==null?void 0:t.id});return}console.log(" ChatBox: Loading messages for friend:",{myUserId:c,friendId:t.id,friendName:t.display_name});const T=`https://flinxx-backend.onrender.com/api/messages?user1=${c}&user2=${t.id}`;console.log(" Fetching chat history from:",T),fetch(T).then(b=>{if(console.log(" Response status:",b.status),!b.ok)throw new Error(`HTTP ${b.status}`);return b.json()}).then(b=>{console.log(" Messages loaded:",b.length,"messages"),Array.isArray(b)&&s(b.map(k=>({me:k.sender_id===c,text:k.message})))}).catch(b=>{console.error(" Failed to load chat history:",b)})},[c,t]);const h=()=>{if(!o.trim())return;const y=new Date().toISOString();ee.emit("send_message",{senderId:c,receiverId:t.id,message:o,created_at:y}),l(""),n&&n(t.id,y)};R.useEffect(()=>{const y=T=>{if(s(b=>[...b,{me:T.senderId===c,text:T.message}]),n&&T.senderId!==c){const b=T.created_at||new Date().toISOString();n(t.id,b)}};return ee.on("receive_message",y),()=>ee.off("receive_message",y)},[c,t,n]);const p=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),h())};return u.jsxs("div",{className:"chat-box",children:[u.jsxs("div",{className:"chat-header",children:[u.jsx("button",{onClick:e,children:""}),u.jsx("img",{src:t.photo_url,alt:t.display_name}),u.jsx("span",{children:t.display_name})]}),u.jsxs("div",{className:"chat-body",children:[i.length===0&&u.jsxs("p",{className:"empty",children:["Start a conversation with ",t.display_name]}),i.map((y,T)=>u.jsx("div",{className:`bubble ${y.me?"me":""}`,children:y.text},T))]}),u.jsxs("div",{className:"chat-input",children:[u.jsx("input",{value:o,onChange:y=>l(y.target.value),onKeyPress:p,placeholder:"Type a message"}),u.jsx("button",{onClick:h,children:""})]})]})},Py=({isOpen:t,onClose:e,onUserSelect:n,mode:r="search"})=>{const{markAsRead:i}=R.useContext(hx)||{},{user:s,notifications:o,refreshNotifications:l}=R.useContext(cr)||{},{setUnreadCount:c}=Ax(),[h,p]=R.useState(""),[m,y]=R.useState(""),[T,b]=R.useState(!1),[k,P]=R.useState({}),[I,_]=R.useState(null),[x,O]=R.useState(null),[V,D]=R.useState([]),[S,g]=R.useState(null),w=r==="notifications",E=r==="message",A="https://flinxx-backend.onrender.com",N=async()=>{try{const F=await fetch(`${A}/api/profile`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!F.ok)return null;const Q=await F.json();if(Q!=null&&Q.user){const ae={...Q.user,publicId:Q.user.public_id};return localStorage.setItem("user",JSON.stringify(ae)),ae}return null}catch(F){return console.error("Failed to ensure current user",F),null}},C=()=>{try{const F=JSON.parse(localStorage.getItem("user"));return F?{...F,publicId:F.publicId||F.public_id||F.id}:null}catch{return null}},oe=async F=>{try{const Q=C();if(!Q||!Q.id){console.warn("Current user not available for status check");return}const ae=await fetch(`${A}/api/friends/status?senderPublicId=${Q.id}&receiverPublicId=${F}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(ae.ok){const Ue=await ae.json();P(Ie=>({...Ie,[F]:Ue.status}))}}catch(Q){console.error("Error checking friend status:",Q)}};R.useEffect(()=>{t&&N()},[t]),R.useEffect(()=>{t&&s!=null&&s.uuid&&s.uuid.length===36&&(console.log(" Loading friends for message mode"),_P(s.uuid).then(F=>{const Q=Array.isArray(F)?F.sort((ae,Ue)=>{const Ie=ae.last_message_at?new Date(ae.last_message_at):new Date(0);return(Ue.last_message_at?new Date(Ue.last_message_at):new Date(0))-Ie}):[];D(Q)}).catch(F=>{console.error(" Error loading friends:",F),D([])}))},[t,s==null?void 0:s.uuid]),R.useEffect(()=>{t&&w&&s!=null&&s.uuid&&s.uuid.length===36&&l&&(console.log(" Refreshing notifications when panel opens"),l())},[t,w,s==null?void 0:s.uuid,l]);const Ke=o||[],Dt=(F,Q)=>{D(ae=>ae.map(Ie=>Ie.id===F?{...Ie,last_message_at:Q}:Ie).sort((Ie,Qe)=>{const Ci=Ie.last_message_at?new Date(Ie.last_message_at):new Date(0);return(Qe.last_message_at?new Date(Qe.last_message_at):new Date(0))-Ci}))},bt=async F=>{F!=null&&F.id&&(s!=null&&s.uuid)&&s.uuid.length===36&&await yh(s.uuid,F.id),i&&F.id&&i(F.id),c(Q=>Math.max(Q-1,0)),g(F)};if(!t)return null;const H=async F=>{if(!(!F||typeof F!="string")){if(p(F),!F.trim()){y([]);return}b(!0);try{const Q=await fetch(`${A}/api/search-user?q=${encodeURIComponent(F)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!Q.ok){console.error("Search error:",Q.status),y([]);return}const ae=await Q.json();y(Array.isArray(ae)?ae:[]),Array.isArray(ae)&&ae.forEach(Ue=>{oe(Ue.publicId)})}catch(Q){console.error("Search error:",Q),y([])}finally{b(!1)}}},X=F=>{const Q=k[F];return Q==="pending"?"SENT":Q==="accepted"?"MESSAGE":"FRIEND"},te=F=>{const Q=k[F];return Q==="pending"?"":Q==="accepted"?"":""},we=async F=>{const Q=k[F];if(Q==="pending"||Q==="accepted"){console.log("Friend request already sent or accepted");return}_(F);try{const ae=C();if(!(ae!=null&&ae.id)){console.error("Current user id not found",ae);return}(await fetch(`${A}/api/friends/send`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({senderPublicId:String(ae.id),receiverPublicId:String(F)})})).ok?(P(Ie=>({...Ie,[F]:"pending"})),console.log("Friend request sent to:",F)):console.error("Failed to send friend request")}catch(ae){console.error("Error sending friend request:",ae)}finally{_(null)}};return u.jsx("div",{className:"search-friends-overlay",onClick:e,children:u.jsxs("div",{className:"search-friends-modal",onClick:F=>F.stopPropagation(),children:[u.jsxs("div",{className:"search-friends-header",children:[u.jsx("h2",{children:E?"Message":w?"Notifications":"Search Friends"}),u.jsx("button",{className:"search-close-btn",onClick:e,children:""})]}),!w&&!E&&u.jsxs("div",{className:"search-input-container",children:[u.jsx("input",{type:"text",placeholder:"Search a friend by ID",value:h,onChange:F=>H(F.target.value),className:"search-input",autoFocus:!0}),u.jsx("span",{className:"search-icon",children:""})]}),!w&&!E&&u.jsx("div",{className:"search-results",children:m.length===0?u.jsx("div",{className:"search-empty-state",children:u.jsx("p",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.6)",marginTop:"40px"},children:h?"No users found":""})}):m.map((F,Q)=>u.jsxs("div",{className:"search-result-item",onClick:()=>{n&&n(F),e()},children:[u.jsx("div",{className:"result-avatar",children:F.avatar&&F.avatar.startsWith("http")?u.jsx("img",{src:F.avatar,alt:"avatar",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):""}),u.jsxs("div",{className:"result-info",children:[u.jsxs("div",{className:"result-name-row",children:[u.jsx("p",{className:"result-name",children:F.name}),u.jsxs("button",{className:"friend-badge-btn",title:"Send Friend Request",disabled:k[F.publicId]==="pending",onClick:ae=>{ae.stopPropagation(),we(F.publicId)},children:[u.jsx("span",{className:"friend-emoji","aria-hidden":"true",children:te(F.publicId)}),u.jsx("span",{className:"friend-text",children:X(F.publicId)})]})]}),u.jsx("p",{className:"tap-to-chat",children:"Tap to chat"})]})]},`user-${F.shortId}-${Q}`))}),w&&u.jsx("div",{className:"search-results",children:S?u.jsx(Ny,{friend:S,onBack:()=>g(null),onMessageSent:Dt}):notificationsLoading?u.jsx("p",{style:{textAlign:"center",color:"#9ca3af",marginTop:"40px"},children:"Loading notifications..."}):Ke.length===0?u.jsx("p",{style:{textAlign:"center",color:"rgba(255,255,255,0.6)",marginTop:"40px"},children:"No notifications"}):Ke.map(F=>u.jsxs("div",{className:"notification-item",children:[u.jsx("div",{className:"notification-avatar",children:F.photo_url?u.jsx("img",{src:F.photo_url,alt:F.display_name}):u.jsx("div",{className:"text-avatar",children:F.display_name.charAt(0).toUpperCase()})}),u.jsx("div",{className:"notification-text",children:u.jsx("strong",{children:F.display_name})}),F.status==="accepted"&&u.jsx("div",{className:"message-actions",children:u.jsx("button",{className:"message-btn",onClick:async()=>{s!=null&&s.uuid&&s.uuid.length===36&&F.user_id&&await yh(s.uuid,F.user_id),i&&F.user_id&&i(F.user_id);const Q={...F,id:F.user_id};console.log("Opening chat from notification:",Q),g(Q)},children:"Message"})})]},F.id))}),E&&u.jsx("div",{className:"message-panel-body",children:S?u.jsx(Ny,{friend:S,onBack:()=>g(null),onMessageSent:Dt}):u.jsx("div",{className:"search-results",children:V.length===0?u.jsx("p",{style:{textAlign:"center",color:"rgba(255,255,255,0.6)",marginTop:"40px"},children:"No friends yet"}):V.map(F=>u.jsxs("div",{className:"search-result-item friend-row",onClick:()=>bt(F),children:[u.jsx("div",{className:"result-avatar",children:F.photo_url?u.jsx("img",{src:F.photo_url,alt:F.display_name,style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):""}),u.jsxs("div",{className:"result-info",children:[u.jsx("p",{className:"result-name",children:F.display_name}),u.jsx("p",{className:"tap-to-chat",children:"Tap to chat"})]})]},F.id))})})]})})},P2="https://flinxx-backend.onrender.com",j2=({currentUser:t,onProfileClick:e,onPremiumClick:n,onMatchHistoryClick:r,onSearchClick:i,onRequestsClick:s,onMessageClick:o,isFixedPosition:l=!1})=>{const{unreadCount:c}=Ax(),h=async()=>{try{const y=localStorage.getItem("token");if(!y){console.warn("No auth token, skipping mark-all-read"),o==null||o();return}(await fetch(`${P2}/api/messages/mark-all-read`,{method:"POST",headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}})).ok&&console.log(" All messages marked as read")}catch(y){console.error(" Error marking messages as read:",y)}o==null||o()},p=l?{position:"fixed",top:"12px",right:"24px",zIndex:999999}:{},m=l?"flex items-center gap-4":"top-right-icons";return u.jsxs("div",{className:m,style:p,children:[u.jsx("div",{className:"icon-circle",title:"Profile",onClick:e,style:{cursor:"pointer"},children:t!=null&&t.picture?u.jsx("img",{src:t.picture,alt:"Profile"}):""}),u.jsx("div",{className:"icon-circle",title:"Search",onClick:i,style:{cursor:"pointer"},children:""}),u.jsx("div",{className:"icon-circle",title:"Requests",onClick:s,style:{cursor:"pointer"},children:""}),u.jsxs("div",{className:"icon-wrapper",title:"Messages",onClick:h,style:{cursor:"pointer",position:"relative"},children:[u.jsx("div",{className:"icon-circle",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:""}),c>0&&u.jsx("span",{className:"badge",children:c})]}),u.jsx("div",{className:"icon-circle",title:"Flinx Premium",onClick:n,children:""}),u.jsx("div",{className:"icon-circle",title:"Match History",onClick:r,children:""})]})};console.log(" CHAT BUILD: 2025-12-20T00:00:00Z - WebRTC stable remote stream handling");const O2=()=>{var ga;console.log("RENDER START");const t=en(),e=tu(),{user:n}=R.useContext(cr)||{},[r,i]=R.useState(!1),[s,o]=R.useState(!1),[l,c]=R.useState(null),[h,p]=R.useState(!1),[m,y]=R.useState(!1),[T,b]=R.useState(!1),[k,P]=R.useState(!1),[I,_]=R.useState(!1),[x,O]=R.useState(null),[V,D]=R.useState(0),[S,g]=R.useState(!1),[w,E]=R.useState(!1),[A,N]=R.useState(!1),[C,oe]=R.useState(!1),[Ke,Dt]=R.useState(!1),[bt,H]=R.useState(!1),[X,te]=R.useState(null),[we,F]=R.useState("both"),[Q,ae]=R.useState(!1),[Ue,Ie]=R.useState([]),[Qe,Ci]=R.useState(""),[Ts,hn]=R.useState(!1),Wr=R.useRef(null),Z=R.useRef(null),Ti=R.useRef(null),nt=R.useRef(null),[ye,ua]=R.useState(null),ie=R.useRef(null),Lt=R.useRef(null),se=R.useRef(null),Rt=R.useRef(null),ks=R.useRef(null),[nu,da]=R.useState(!1);if(console.log("HOOKS DONE"),!(n!=null&&n.uuid)||typeof n.uuid!="string"||n.uuid.length!==36)return console.log(" Chat: Waiting for valid user UUID from AuthContext..."),null;console.log(" CHAT COMPONENT LOADED - BUILD: 895cedd (temporal deadzone fix - move hooks to top)"),R.useEffect(()=>{console.log(" [TERMS CHECK] Checking if terms are accepted...");try{const M=localStorage.getItem("termsAccepted")==="true";console.log(" [TERMS CHECK] termsAccepted from localStorage:",M),M?(console.log(" [TERMS CHECK] User has accepted terms - allowing access"),o(!0)):(console.log(" [TERMS CHECK] User has not accepted terms - showing modal"),i(!0))}catch(M){console.error(" [TERMS CHECK] Error checking terms:",M),o(!0)}},[]);const As=()=>{console.log(" User accepted terms on dashboard"),localStorage.setItem("termsAccepted","true"),i(!1),o(!0)},ha=()=>{console.log(" User cancelled terms on dashboard - redirecting to login"),i(!1),t("/login",{replace:!0})};R.useEffect(()=>{const G=new URLSearchParams(e.search).get("view");c(G),p(G==="home"),console.log("[Chat] Location search params:",e.search),console.log("[Chat] view parameter:",G),console.log("[Chat] shouldStartAsIntro:",G==="home")},[e.search]),R.useEffect(()=>{const M=n||{googleId:"guest_"+Math.random().toString(36).substring(2,9),name:"Guest User",email:"guest@flinxx.local",picture:null};ua(M),nt.current||(nt.current=M.uuid,!nt.current||nt.current.length!==36?console.error(" CRITICAL: Invalid or missing UUID from localStorage:",nt.current):console.log(" USER UUID INITIALIZED (ONE TIME):",nt.current)),Ti.current||(Ti.current=M)},[n]),R.useEffect(()=>()=>{ks.current&&clearInterval(ks.current)},[]),R.useEffect(()=>{var M;console.log(" Refs initialized:"),console.log("   localVideoRef.current exists:",!!ie.current),console.log("   localVideoRef.current in DOM:",(M=ie.current)!=null&&M.parentElement?"YES":"NO"),console.log("   remoteVideoRef.current exists:",!!Lt.current),console.log("   localStreamRef.current exists:",!!se.current)},[]),R.useEffect(()=>{const M=setInterval(()=>{var J,q;const G=!!Lt.current,$=!!((J=Lt.current)!=null&&J.parentElement);(q=Lt.current)!=null&&q.srcObject,G&&$?console.log(" remoteVideoRef is AVAILABLE in DOM and ready for ontrack"):G&&!$?console.warn(" remoteVideoRef exists but NOT in DOM - ontrack may fail!"):console.log(" Waiting for remoteVideoRef to be mounted...")},2e3);return()=>clearInterval(M)},[]),R.useEffect(()=>{if(console.log(`
 [POSITIONING] Local video positioning effect triggered`),console.log("   cameraStarted:",m),console.log("   hasPartner:",k),console.log("   isMatchingStarted:",T),!m){console.log("   [POSITIONING] Camera not started yet, skipping positioning");return}const M=ie.current;if(!M){console.warn(" [POSITIONING] Persistent video ref is null - element not yet rendered");return}console.log(" [POSITIONING] Video element ref found:",M);const G=document.querySelectorAll(".left-panel");console.log(`   Found ${G.length} left-panel containers`);for(let $=0;$<G.length;$++){const J=G[$];if(J.offsetParent!==null){console.log(`   [POSITIONING] Visible left-panel found at index ${$}`),M.parentElement!==J?(console.log(`   [POSITIONING] Moving video into left-panel ${$}`),J.insertBefore(M,J.firstChild),M.style.display="block",console.log(`    [POSITIONING] Video positioned in left-panel ${$}`)):(console.log("    [POSITIONING] Video already in correct panel"),M.style.display="block");return}}},[m,k,T]);const Ye=Yo.useCallback(async()=>{console.log(`

 ===== CAMERA RE-INITIALIZATION STARTED =====`),console.log(" [REINIT] Camera re-initialization requested"),console.log(" [REINIT] Current state:"),console.log("  - localStreamRef.current exists:",!!se.current),console.log("  - localVideoRef.current exists:",!!ie.current),console.log("  - cameraStarted:",m);try{if(!ie.current)return console.error(" [REINIT]  CRITICAL: localVideoRef.current is null/undefined - video element not in DOM"),!1;if(!ie.current.parentElement)return console.error(" [REINIT]  CRITICAL: Video element is not attached to DOM"),!1;if(console.log(" [REINIT]  Video element exists in DOM"),se.current){console.log(" [REINIT] Stream exists, checking if tracks are active...");const G=se.current.getTracks();if(console.log(" [REINIT] Stream has",G.length,"tracks"),G.forEach(($,J)=>{console.log(`  Track ${J}:`,{kind:$.kind,enabled:$.enabled,readyState:$.readyState})}),G.length===0)console.warn(" [REINIT]  Stream exists but has no active tracks - will request new stream"),se.current=null;else{console.log(" [REINIT]  Stream has active tracks, reattaching to video element"),ie.current.srcObject=se.current,ie.current.muted=!0,console.log(" [REINIT] srcObject set, waiting for play()...");try{const $=ie.current.play();return $!==void 0&&await $,console.log(" [REINIT]  Camera preview reattached and playing"),console.log(` ===== CAMERA RE-INITIALIZATION SUCCESSFUL =====

`),!0}catch($){return console.error(" [REINIT]  Error playing video:",$),console.error(" [REINIT] Error name:",$.name),console.error(" [REINIT] Error message:",$.message),!1}}}console.log(" [REINIT] No existing stream or tracks inactive, requesting new preview stream");const M=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});return se.current=M,console.log(" [REINIT]  New camera stream obtained:",M),console.log(" [REINIT] New stream tracks:",M.getTracks().map(G=>({kind:G.kind,id:G.id}))),ie.current.srcObject=M,ie.current.muted=!0,console.log(" [REINIT] srcObject set to new stream, calling play()..."),requestAnimationFrame(()=>{var G;(G=ie.current)==null||G.play().catch($=>{console.log(" [REINIT] Video play blocked:",$)}),console.log(" [REINIT]  New camera preview play command dispatched")}),y(!0),console.log(` ===== CAMERA RE-INITIALIZATION SUCCESSFUL =====

`),!0}catch(M){return console.error(" [REINIT]  Error reinitializing camera:",M),console.error(" [REINIT] Error name:",M.name),console.error(" [REINIT] Error message:",M.message),console.error(` ===== CAMERA RE-INITIALIZATION FAILED =====

`),!1}},[m]);R.useEffect(()=>{Wr.current={reinitializeCamera:Ye}},[Ye]),R.useEffect(()=>{if(!I)return;const M=setInterval(()=>{D(G=>G+1)},1e3);return()=>clearInterval(M)},[I]),R.useEffect(()=>{k&&m&&console.log(" [PARTNER FOUND] Transitioning to video chat screen")},[k,m]),R.useEffect(()=>{if(h){console.log("[Camera]  Skipping auto camera init - user just completed profile (view=home)"),console.log('[Camera] Camera will start when user clicks "Start Video Chat" button');return}async function M(){try{if(console.log(" Starting camera preview..."),console.log(" [INIT] Chat component mounted, attempting to initialize camera"),!ie.current){console.error(" [INIT]  Video element not in DOM yet, cannot initialize camera");return}console.log(" [INIT]  Video element found in DOM, requesting camera permissions");const $=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(se.current=$,console.log("[Camera]  Camera stream obtained"),console.log("[Camera] Stream tracks:",$.getTracks().map(J=>({kind:J.kind,id:J.id}))),ie.current){ie.current.srcObject=$,ie.current.muted=!0;try{await ie.current.play(),console.log(" Camera preview playing successfully"),y(!0)}catch(J){console.error(" Preview play error:",J)}}}catch($){console.log(" Camera preview error (this is OK, user may deny permission):",$.message),console.log(" Error name:",$.name),console.log(" Error code:",$.code)}}console.log("[Camera] Chat component useEffect triggered, scheduling camera init with delay");const G=setTimeout(()=>{console.log("[Camera] Delay complete, now calling startPreview()"),M()},100);return()=>{console.log("[Camera] Chat component unmounting, clearing camera init timer"),clearTimeout(G)}},[h]);const rt=async()=>{if(console.log(" createPeerConnection called"),console.log("   Current localStreamRef:",se.current),!se.current){console.warn(" CRITICAL: localStreamRef.current is null - attempting to reacquire camera stream");try{const J=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(se.current=J,ie.current){ie.current.srcObject=J,ie.current.muted=!0;try{await ie.current.play()}catch(q){console.warn(" Play error during reacquisition:",q)}}console.log(" LOCAL STREAM RE-ACQUIRED SUCCESSFULLY"),console.log("   Tracks:",J.getTracks().map(q=>({kind:q.kind,id:q.id})))}catch(J){throw console.error(" FATAL: Could not reacquire camera stream:",J.message),new Error("Cannot proceed: local camera stream unavailable - "+J.message)}}C2();const M=await ki(),G=[{urls:["stun:global.xirsys.net","turn:global.xirsys.net:3478?transport=udp","turn:global.xirsys.net:3478?transport=tcp"],username:"nkhlvdv",credential:"a8e244b8-cf5b-11f0-8771-0242ac140002"},...M];console.log(" ICE Servers Configuration:",{count:G.length,servers:G.map(J=>({urls:J.urls,username:J.username?"***":void 0,credential:J.credential?"***":void 0}))});const $=new RTCPeerConnection({iceServers:G,iceTransportPolicy:"all"});if(Z.current=$,console.log(" RTCPeerConnection created with iceTransportPolicy: all"),$.onicecandidate=J=>{if(J.candidate){const q=J.candidate;console.log(" ICE candidate generated:",{candidate:q.candidate,protocol:q.protocol,port:q.port,address:q.address,type:q.type,priority:q.priority,sdpMLineIndex:q.sdpMLineIndex,sdpMId:q.sdpMid}),q.type==="relay"?(console.log(" RELAY (TURN) candidate generated - TURN server is reachable"),console.log("   Protocol:",q.protocol,"Port:",q.port)):q.type==="srflx"?(console.log(" SRFLX (server reflexive) candidate - STUN working"),console.log("   Found public address via STUN")):q.type==="host"&&console.log(" HOST candidate - direct LAN connection possible"),console.log(" Sending ICE candidate to partner socket:",Rt.current),ee.emit("ice_candidate",{candidate:q,to:Rt.current}),console.log(" ICE candidate sent to peer")}else console.log(" ICE gathering complete (null candidate received)"),console.log(" ICE gathering summary:"),console.log("   Connection State:",$.connectionState),console.log("   ICE Connection State:",$.iceConnectionState),console.log("   ICE Gathering State:",$.iceGatheringState)},$.oniceconnectionstatechange=()=>{const J=$.iceConnectionState;switch(console.log(`
 ===== ICE CONNECTION STATE CHANGED =====`),console.log(" New ICE Connection State:",J),J){case"new":console.log(" State: NEW - Gathering ICE candidates");break;case"checking":console.log(" State: CHECKING - Testing ICE candidate pairs"),console.log(" Connection in progress - waiting for connectivity");break;case"connected":console.log(" State: CONNECTED - Found working ICE candidate pair"),console.log(" Peer-to-peer communication established");break;case"completed":console.log(" State: COMPLETED - ICE checks completed, ready for media"),console.log(" All connectivity checks passed");break;case"failed":console.error(" State: FAILED - All ICE candidate pairs failed"),console.error(" Could not establish peer-to-peer connection"),console.error(" TURN server may be unreachable or blocked by ISP"),console.error(" Troubleshooting:"),console.error("   - Check console for TURN error details"),console.error("   - TURN error 701 = Network/ISP blocking ports 3478, 5349"),console.error("   - Solutions: Try VPN, different WiFi, or mobile hotspot"),console.error("   - User can retry with a retry button (do NOT auto-restart ICE)");break;case"disconnected":console.warn(" State: DISCONNECTED - Lost connection to peer"),console.warn("   Note: ICE restart is manual only to prevent stream loss");break;case"closed":console.log(" State: CLOSED - Connection closed");break}console.log(" Full connection states:"),console.log("   Signaling State:",$.signalingState),console.log("   Connection State:",$.connectionState),console.log("   ICE Gathering State:",$.iceGatheringState)},Z.current._remoteStream||(Z.current._remoteStream=new MediaStream,console.log(" PERSISTENT REMOTE STREAM CREATED - will accumulate all incoming tracks")),$.ontrack=J=>{console.log(`

 ===== CRITICAL: ONTRACK HANDLER FIRING! =====`),console.log(" ONTRACK CALLED AT:",new Date().toISOString()),console.log(" Track received:",{kind:J.track.kind,id:J.track.id,enabled:J.track.enabled});const q=Z.current._remoteStream;if(console.log(" Using persistent remote stream ID:",q.id),q.addTrack(J.track),console.log(" Track added to persistent remote stream"),console.log(" Remote stream now has",q.getTracks().length,"track(s)"),console.log(" Tracks:",q.getTracks().map(ve=>({kind:ve.kind,id:ve.id,enabled:ve.enabled}))),!Lt.current){console.error(" CRITICAL ERROR: remoteVideoRef.current is NULL!"),console.error("   Cannot attach remote track - video element not available");return}Lt.current.srcObject!==q?(console.log(" ATTACHING PERSISTENT STREAM to remoteVideoRef"),Lt.current.srcObject=q,Lt.current.muted=!1,console.log(" srcObject attached, attempting play()..."),Lt.current.play().catch(()=>{console.log(" Autoplay blocked - will play on user interaction")})):(console.log(" STREAM ALREADY ATTACHED - skipping re-attachment"),console.log("   Stream has",q.getTracks().length,"tracks now")),console.log(`   ONTRACK COMPLETE - Remote stream persisted and attached

`)},$.onconnectionstatechange=()=>{console.log(`
 ===== CONNECTION STATE CHANGED =====`),console.log(" New Connection State:",$.connectionState),console.log("   ICE Connection State:",$.iceConnectionState),console.log("   ICE Gathering State:",$.iceGatheringState),console.log("   Signaling State:",$.signalingState),$.connectionState==="connected"?(_(!0),console.log(" WebRTC connection ESTABLISHED"),setTimeout(()=>{console.log(`
 ===== RECEIVER DEBUG CHECK (after connected) =====`);const J=$.getReceivers();console.log(" Total receivers:",J.length),J.forEach((ve,Re)=>{var Te,ct,je,Je,me;console.log(` Receiver ${Re}:`,{kind:(Te=ve.track)==null?void 0:Te.kind,enabled:(ct=ve.track)==null?void 0:ct.enabled,readyState:(je=ve.track)==null?void 0:je.readyState,id:(Je=ve.track)==null?void 0:Je.id,muted:(me=ve.track)==null?void 0:me.muted})}),console.log(" Audio and video tracks should be present above");const q=$.getSenders();console.log(`
 Total senders:`,q.length),q.forEach((ve,Re)=>{var Te,ct,je,Je;console.log(` Sender ${Re}:`,{kind:(Te=ve.track)==null?void 0:Te.kind,enabled:(ct=ve.track)==null?void 0:ct.enabled,readyState:(je=ve.track)==null?void 0:je.readyState,id:(Je=ve.track)==null?void 0:Je.id})})},1e3)):$.connectionState==="disconnected"?(_(!1),console.log(" WebRTC connection DISCONNECTED")):$.connectionState==="failed"?(_(!1),console.log(" WebRTC connection FAILED")):$.connectionState==="closed"&&(_(!1),console.log(" WebRTC connection CLOSED"))},!se.current)throw console.error(" CRITICAL ERROR: localStreamRef.current is null/undefined in createPeerConnection!"),new Error("Local stream lost before createPeerConnection");return $};R.useEffect(()=>(console.log(`

 ===== SOCKET LISTENERS SETUP (COMPONENT MOUNT) =====`),console.log(" Setting up socket listeners - runs ONCE on component load"),console.log(" Socket ID:",ee.id),console.log(" Socket connected:",ee.connected),console.log("  Using userIdRef.current for ALL ID comparisons:",nt.current),ee.off("partner_found"),ee.off("webrtc_offer"),ee.off("webrtc_answer"),ee.off("ice_candidate"),ee.off("receive_message"),ee.off("partner_disconnected"),ee.off("disconnect"),console.log(" Removed old listeners (if any existed)"),ee.on("partner_found",async M=>{var Te,ct,je,Je;console.log(`

 ===== PARTNER FOUND EVENT RECEIVED =====`),console.log(" RAW DATA from server:",JSON.stringify(M,null,2)),console.log(" My socket ID:",ee.id),console.log(" currentUser object:",JSON.stringify(ye,null,2)),console.log(" userIdRef.current (SHOULD USE THIS):",nt.current),console.log(" currentUser.googleId:",ye==null?void 0:ye.googleId),console.log(" currentUser.id:",ye==null?void 0:ye.id),console.log(" data.socketId:",M.socketId),console.log(" data.partnerId:",M.partnerId),console.log(" data.userName:",M.userName),console.log(`
 SELF-MATCH CHECK - START`);const G=nt.current,$=M.partnerId;if(console.log(" COMPARISON VALUES:"),console.log("   myUserId type:",typeof G,"value:",G),console.log("   partnerUserId type:",typeof $,"value:",$),console.log("   Are they EQUAL?",G===$),console.log("   String comparison:",String(G)===String($)),G===$){console.error(`
 CRITICAL ERROR: SELF-MATCH DETECTED! `),console.error("   My user ID:",G,"type:",typeof G),console.error("   Partner user ID:",$,"type:",typeof $),console.error("   Match IDs:",G===$),console.error("   These should be DIFFERENT!"),hn(!0),console.error("   Emitting skip_user..."),ee.emit("skip_user",{partnerSocketId:M.socketId}),console.error("   Emitting find_partner..."),ee.emit("find_partner",{userId:nt.current,userName:ye.name||"Anonymous",userAge:ye.age||18,userLocation:ye.location||"Unknown"}),console.error("   Returning - match REJECTED");return}console.log(" SELF-MATCH CHECK PASSED - partner is different user"),console.log("   Accepting match and proceeding with WebRTC setup"),console.log(` SELF-MATCH CHECK - END
`),Rt.current=M.socketId,console.log(" CRITICAL: Stored partner socket ID:",Rt.current),console.log(" CRITICAL: Verification - partnerSocketIdRef.current is now:",Rt.current),console.log(" ABOUT TO CALL setHasPartner(true)"),P(!0),console.log("  setHasPartner(true) CALLED - force attach effect should trigger");const J={...M,picture:M.userPicture||M.picture||null,userName:M.userName||M.name||"Anonymous",userLocation:M.userLocation||M.location||"Unknown",userAge:M.userAge||M.age||18};O(J),console.log("  setPartnerInfo CALLED with data:",J);const q=ee.id,ve=M.socketId,Re=q<ve;if(console.log(" SOCKET ID COMPARISON:"),console.log("   My socket ID:",q),console.log("   Partner socket ID:",ve),console.log("   Am I offerer? (myID < partnerID):",Re),console.log(`
 ===== CRITICAL STREAM VERIFICATION =====`),console.log(" Checking localStreamRef.current status:"),console.log("   exists:",!!se.current),console.log("   tracks:",((Te=se.current)==null?void 0:Te.getTracks().length)||0),console.log("   video element srcObject:",!!((ct=ie.current)!=null&&ct.srcObject)),!se.current){console.error("  CRITICAL: localStreamRef.current is NULL - cannot proceed to WebRTC"),console.error("   This means the camera stream was never acquired or was lost"),console.error("   Attempting emergency camera reacquisition...");try{const me=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(se.current=me,ie.current){ie.current.srcObject=me,ie.current.muted=!0;try{await ie.current.play()}catch{console.warn(" Play error in emergency reacquisition")}}console.log("  EMERGENCY: Camera stream re-acquired")}catch(me){console.error("  EMERGENCY FAILED: Could not reacquire camera -",me.message),console.error("   User must allow camera permission to continue");return}}if(console.log(`  STREAM VERIFICATION PASSED - proceeding with WebRTC
`),!Re){console.log(" I am the ANSWERER - waiting for offer from offerer");return}console.log(" I am the OFFERER - creating peer connection and sending offer");try{if(console.log(`
 OFFERER: Creating peer connection`),Z.current){console.warn(" OFFERER: WARNING - Peer connection already exists! Not recreating."),console.warn("   Existing PC state:",{connectionState:Z.current.connectionState,iceConnectionState:Z.current.iceConnectionState,signalingState:Z.current.signalingState});return}let me;try{me=await rt()}catch(Ne){console.error(" OFFERER: Error creating peer connection:",Ne);return}if(Z.current=me,console.log(" OFFERER: Peer connection created"),console.log(" OFFERER Stream status after peer connection creation:",{exists:!!se.current,trackCount:(je=se.current)==null?void 0:je.getTracks().length,tracks:(Je=se.current)==null?void 0:Je.getTracks().map(Ne=>({kind:Ne.kind,enabled:Ne.enabled,state:Ne.readyState}))}),se.current){console.log(`
 OFFERER localStream:`,se.current);const Ne=se.current.getTracks();console.log(" OFFERER: All available tracks:",Ne),console.log(" OFFERER tracks detail:",Ne.map(Xe=>({kind:Xe.kind,id:Xe.id,enabled:Xe.enabled,state:Xe.readyState})));const tn=me.getSenders();if(console.log(" OFFERER: Existing senders count:",tn.length),tn.length>0)console.warn(" OFFERER WARNING: Tracks already added! Senders:",tn.map(Xe=>{var ut,bn;return{kind:(ut=Xe.track)==null?void 0:ut.kind,id:(bn=Xe.track)==null?void 0:bn.id}})),console.warn("   Not adding tracks again to avoid duplicates");else{console.log(`
 OFFERER: Adding ${Ne.length} local tracks to peer connection`),Ne.forEach((ut,bn)=>{console.log(`  [${bn}] Adding ${ut.kind} track (id: ${ut.id}, enabled: ${ut.enabled})`);try{const Ht=me.addTrack(ut,se.current);console.log(`  [${bn}]  addTrack succeeded, sender:`,Ht)}catch(Ht){console.error(`  [${bn}]  addTrack failed:`,Ht)}}),console.log(`
 OFFERER: All tracks added to peer connection`);const Xe=me.getSenders();console.log(" OFFERER senders count:",Xe.length),console.log(" OFFERER senders after addTrack:",Xe.map((ut,bn)=>{var Ht,ya,va;return{index:bn,kind:(Ht=ut.track)==null?void 0:Ht.kind,id:(ya=ut.track)==null?void 0:ya.id,trackExists:!!ut.track,trackEnabled:(va=ut.track)==null?void 0:va.enabled}})),console.log(" OFFERER: Ready to send offer with",Ne.length,`tracks
`)}}else console.error(" OFFERER: No local stream available - TRACKS WILL NOT BE SENT!"),console.error(" OFFERER: localStreamRef.current is:",se.current);console.log(`
 ===== OFFERER CREATING AND SENDING OFFER =====`),console.log(" OFFERER: Creating WebRTC offer with offerToReceiveVideo/Audio");const An=await me.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0});console.log(" OFFERER: Offer created with receive constraints:",An),console.log(" OFFERER SDP CHECK - Looking for a=sendrecv:");const $e=An.sdp.split(`
`).filter(Ne=>Ne.includes("sendrecv")||Ne.includes("recvonly")||Ne.includes("sendonly"));console.log("   Media direction lines:"),$e.forEach(Ne=>console.log("   ",Ne)),console.log(" OFFERER: Setting local description (offer)"),await me.setLocalDescription(An),console.log(" OFFERER: Local description set"),console.log(`
 OFFERER: Sending offer with tracks:`,me.getSenders().map(Ne=>{var tn,Xe,ut;return{kind:(tn=Ne.track)==null?void 0:tn.kind,id:(Xe=Ne.track)==null?void 0:Xe.id,enabled:(ut=Ne.track)==null?void 0:ut.enabled}})),console.log(" OFFERER: Partner socket ID from data:",M.socketId),console.log(" OFFERER: partnerSocketIdRef.current value:",Rt.current),console.log(" CRITICAL: About to emit webrtc_offer with to:",M.socketId),console.log(" CRITICAL: Is to value empty/null/undefined?",!M.socketId),ee.emit("webrtc_offer",{offer:Z.current.localDescription,to:M.socketId}),console.log(" OFFERER: webrtc_offer emitted successfully"),console.log(" OFFERER: webrtc_offer sent to socket ID:",M.socketId),console.log(" OFFERER: webrtc_offer contains",Z.current.getSenders().length,"senders"),console.log(" OFFERER: Sent to socket:",M.socketId)}catch(me){console.error(" OFFERER: Error in partner_found handler:",me),console.error(" OFFERER: Stack trace:",me.stack)}}),ee.on("webrtc_offer",async M=>{console.log(`

`),console.log("  ANSWERER HANDLER FIRED  "),console.log(""),console.log(" ===== ANSWERER RECEIVED OFFER ====="),console.log(" ANSWERER: WEBRTC_OFFER EVENT FIRED - OFFER WAS RECEIVED"),console.log(" ANSWERER: Received WebRTC offer from offerer"),console.log(" ANSWERER: My socket ID:",ee.id),console.log(" ANSWERER: Offer from:",M.from),console.log(" ANSWERER: Full data:",M),console.log(" ANSWERER: data.from (offerer socket ID):",M.from),Rt.current=M.from,console.log(" CRITICAL: Stored offerer socket ID:",Rt.current);try{if(Z.current)console.log(" ANSWERER: WARNING - peerConnectionRef already exists (should be null for answerer)");else{console.log(" ANSWERER: Creating new peer connection for the first time");let q;try{q=await rt()}catch(ve){console.error(" ANSWERER: Error creating peer connection:",ve);return}Z.current=q,console.log(" ANSWERER: Peer connection created")}if(console.log(`
 ANSWERER: ALWAYS executing track addition logic`),console.log(" ANSWERER: Checking localStreamRef.current..."),console.log(" ANSWERER localStreamRef.current:",se.current),console.log(" ANSWERER localStreamRef.current === null?",se.current===null),console.log(" ANSWERER localStreamRef.current === undefined?",se.current===void 0),!se.current){console.warn(" ANSWERER: localStreamRef.current is NULL - attempting emergency reacquisition");try{const q=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(se.current=q,ie.current){ie.current.srcObject=q,ie.current.muted=!0;try{await ie.current.play()}catch{console.warn(" Play error in answerer emergency reacquisition")}}console.log(" ANSWERER: Emergency stream acquisition successful")}catch(q){throw console.error(" ANSWERER: Emergency stream acquisition failed:",q.message),new Error("ANSWERER: Cannot reacquire camera stream - "+q.message)}}if(se.current){console.log(`
 ANSWERER: localStream EXISTS - will add tracks`),console.log(" ANSWERER localStream object:",se.current);const q=se.current.getTracks();console.log(" ANSWERER: getAllTracks() returned:",q),console.log(" ANSWERER: Track array length:",q.length),q.length>0?console.log(" ANSWERER: Tracks detail:",q.map(Re=>({kind:Re.kind,id:Re.id,enabled:Re.enabled,readyState:Re.readyState}))):console.warn(" ANSWERER: WARNING - localStream exists but getTracks() returned empty array!");const ve=Z.current.getSenders();if(console.log(" ANSWERER: Existing senders count:",ve.length),ve.length>0)console.warn(" ANSWERER WARNING: Tracks already added! Senders:",ve.map(Re=>{var Te,ct;return{kind:(Te=Re.track)==null?void 0:Te.kind,id:(ct=Re.track)==null?void 0:ct.id}})),console.warn("   Not adding tracks again to avoid duplicates");else{console.log(`
 ANSWERER: Attempting to add ${q.length} local tracks to peer connection`);let Re=0,Te=0;q.forEach((je,Je)=>{console.log(`  [${Je}] About to add ${je.kind} track (id: ${je.id}, enabled: ${je.enabled})`);try{const me=Z.current.addTrack(je,se.current);console.log(`  [${Je}]  addTrack SUCCEEDED`),console.log(`  [${Je}] Sender:`,me),Re++}catch(me){console.error(`  [${Je}]  addTrack FAILED`),console.error(`  [${Je}] Error:`,me.message),Te++}}),console.log(`
 ANSWERER: Track addition complete (${Re} succeeded, ${Te} failed)`);const ct=Z.current.getSenders();console.log(" ANSWERER: Final senders count:",ct.length),console.log(" ANSWERER: Senders:",ct.map((je,Je)=>{var me,An,$e;return{index:Je,kind:(me=je.track)==null?void 0:me.kind,id:(An=je.track)==null?void 0:An.id,trackExists:!!je.track,trackEnabled:($e=je.track)==null?void 0:$e.enabled}}))}}else throw console.error(`
 ANSWERER: CRITICAL ERROR - localStreamRef.current is NULL!`),console.error(" ANSWERER: Cannot add tracks - stream does not exist"),new Error("ANSWERER: No local stream - cannot add tracks");console.log(`
 ANSWERER: Setting remote description (offer from offerer)`),await Z.current.setRemoteDescription(new RTCSessionDescription(M.offer)),console.log(" ANSWERER: Remote description set successfully"),console.log(" ANSWERER: Creating answer");const G=await Z.current.createAnswer({offerToReceiveVideo:!0,offerToReceiveAudio:!0});console.log(" ANSWERER: Answer created with receive constraints"),console.log(" ANSWERER SDP CHECK - Looking for a=sendrecv:");const $=G.sdp.split(`
`).filter(q=>q.includes("sendrecv")||q.includes("recvonly")||q.includes("sendonly"));console.log("   Media direction lines:"),$.forEach(q=>console.log("   ",q)),console.log(" ANSWERER: Setting local description (answer)"),await Z.current.setLocalDescription(G),console.log(" ANSWERER: Local description set successfully"),console.log(`
 ===== ANSWERER SENDING ANSWER =====`);const J=Z.current.getSenders();console.log(" ANSWERER: Final senders count:",J.length),console.log(" ANSWERER: Sending answer with tracks:",J.map(q=>{var ve,Re,Te;return{kind:(ve=q.track)==null?void 0:ve.kind,id:(Re=q.track)==null?void 0:Re.id,enabled:(Te=q.track)==null?void 0:Te.enabled}})),console.log(" CRITICAL: Offerer socket ID from offer:",M.from),console.log(" SERVER sending ANSWER to:",M.from),ee.emit("webrtc_answer",{answer:Z.current.localDescription,to:M.from}),console.log(" ANSWERER: Answer emitted to offerer via socket:",M.from),console.log(` ===== ANSWERER ANSWER SENT =====

`)}catch(G){console.error(`
 ANSWERER: ERROR in webrtc_offer handler:`,G),console.error(" ANSWERER: Error message:",G.message),console.error(" ANSWERER: Stack trace:",G.stack)}}),ee.on("webrtc_answer",async M=>{console.log(`

 ===== OFFERER RECEIVED ANSWER =====`),console.log(" OFFERER: Received WebRTC answer from answerer"),console.log(" OFFERER: data.from (answerer socket ID):",M.from),console.log(" OFFERER: Answer SDP:",M.answer),Rt.current=M.from,console.log(" CRITICAL: Stored answerer socket ID:",Rt.current);try{if(!Z.current){console.error(" OFFERER: No peer connection available to handle answer");return}console.log(`
 OFFERER: Setting remote description (answer from answerer)`),console.log(" OFFERER: Current connection state before answer:",{connectionState:Z.current.connectionState,iceConnectionState:Z.current.iceConnectionState,signalingState:Z.current.signalingState}),await Z.current.setRemoteDescription(new RTCSessionDescription(M.answer)),console.log(" OFFERER: Remote description (answer) set successfully"),console.log(" OFFERER: Connection state after answer:",{connectionState:Z.current.connectionState,iceConnectionState:Z.current.iceConnectionState,signalingState:Z.current.signalingState}),console.log(` ===== OFFERER ANSWER RECEIVED AND SET =====

`)}catch(G){console.error(" OFFERER: Error handling answer:",G),console.error(" OFFERER: Stack trace:",G.stack)}}),ee.on("ice_candidate",async M=>{if(console.log(`
 ICE candidate received from peer:`,{candidate:M.candidate,sdpMLineIndex:M.sdpMLineIndex,sdpMid:M.sdpMid}),!M.candidate||M.candidate.sdpMid==null&&M.candidate.sdpMLineIndex==null){console.warn(" Ignoring invalid ICE candidate (empty sdpMid and sdpMLineIndex)");return}try{Z.current?(console.log(" Adding ICE candidate to peer connection"),await Z.current.addIceCandidate(new RTCIceCandidate(M.candidate)),console.log(` ICE candidate added successfully
`)):console.warn(" No peer connection available for ICE candidate")}catch(G){console.error(" Error adding ICE candidate:",G)}}),ee.on("partner_disconnected",M=>{console.log(`

 ===== PARTNER DISCONNECTED EVENT RECEIVED ===== `),console.log(" Event Data:",M),console.log(" Timestamp:",new Date().toISOString()),console.log(" Partner has closed the browser/tab"),console.log(" Cleaning up WebRTC connection..."),Z.current?(console.log(" Closing peer connection"),console.log("   Current state:",Z.current.connectionState),Z.current.close(),Z.current=null,console.log(" Peer connection closed successfully")):console.log(" WARNING: peerConnectionRef.current was null"),Lt.current&&(console.log(" Clearing remote video ref"),Lt.current.srcObject=null),console.log(" Calling endChat() to reset UI"),ru(),console.log(" Cleanup complete - ready for new partner")}),ee.on("disconnect",()=>{console.log("Socket disconnected"),Hr()}),console.log(`

 ===== ALL SOCKET LISTENERS REGISTERED =====`),console.log("  partner_found listener active"),console.log("  webrtc_offer listener active"),console.log("  webrtc_answer listener active"),console.log("  ice_candidate listener active"),console.log("  partner_disconnected listener active (CRITICAL FOR DISCONNECT)"),console.log("  disconnect listener active"),console.log(` Ready to receive WebRTC signaling messages

`),()=>{console.log(" Removing socket listeners on component unmount"),ee.off("partner_found"),ee.off("webrtc_offer"),ee.off("webrtc_answer"),ee.off("ice_candidate"),ee.off("partner_disconnected"),ee.off("disconnect")}),[]),R.useEffect(()=>{const M=T,G=k;return()=>{console.log(`

   CHAT COMPONENT UNMOUNTING - CRITICAL CLEANUP   `),M&&!G&&(console.log(" User was still looking for partner - emitting cancel_matching"),ee.emit("cancel_matching",{userId:nt.current,timestamp:new Date().toISOString()})),Z.current&&(console.log(" Closing peer connection"),Z.current.close(),Z.current=null),console.log(" Chat component cleanup complete (tracks NOT stopped - will be reused)")}},[]),R.useEffect(()=>()=>{console.log(" Chat component unmounting - cleaning up peer connection only"),Z.current&&(Z.current.close(),Z.current=null)},[]);const ki=async()=>{var M;try{console.log(" Fetching TURN servers from Xirsys via backend API...");const $=await(await fetch("https://flinxx-backend.onrender.com/api/turn")).json();if(console.log(" Xirsys API Response:",$),(M=$==null?void 0:$.v)!=null&&M.iceServers&&Array.isArray($.v.iceServers))return console.log(" TURN servers fetched from Xirsys API"),console.log(" iceServers is an array with",$.v.iceServers.length,"entries"),console.log(" ICE Servers:",$.v.iceServers),$.v.iceServers;throw console.warn(" Invalid Xirsys TURN response format"),console.log("   Expected: data.v.iceServers as array"),console.log("   Received:",$),new Error("Invalid Xirsys TURN response format")}catch(G){console.error(" Error fetching TURN servers from Xirsys:",G.message),console.log(" Falling back to static STUN/TURN configuration");const $=T2();return console.log(" Using fallback ICE servers:",$),$}},fa=async()=>{if(m)m&&!T&&(console.log(' [MATCHING] User clicked "Start Video Chat" again - starting matching'),console.log(" [MATCHING]  NOT reinitializing camera - stream already active"),console.log(" [MATCHING] Emitting find_partner event to server"),b(!0),hn(!0),ee.emit("find_partner",{userId:nt.current,userName:ye.name||"Anonymous",userAge:ye.age||18,userLocation:ye.location||"Unknown",userPicture:ye.picture||null}),console.log(" [MATCHING]  find_partner event emitted - now waiting for a partner"));else{if(console.log(' [START] User clicked "Allow Camera & Continue" - requesting camera permission'),Q){console.warn(" Camera request already in progress");return}try{ae(!0),hn(!0),console.log(" [INIT] Requesting camera permission from browser...");const M=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(se.current=M,console.log("[Camera]  Camera stream obtained"),console.log("[Camera] Stream tracks:",M.getTracks().map(G=>({kind:G.kind,id:G.id}))),ie.current){ie.current.srcObject=M,ie.current.muted=!0;try{await ie.current.play(),console.log(" Camera preview playing successfully")}catch(G){console.error(" Play error:",G)}}console.log(" [START] Setting cameraStarted = true (camera preview now showing)"),y(!0),ae(!1),hn(!1),console.log(" [START]  Camera initialized - user is still on home screen, matching NOT started yet")}catch(M){console.error(" Error initializing camera:",M),ae(!1),hn(!1),M.name==="NotAllowedError"?console.warn(" Camera permission denied by user"):M.name==="NotFoundError"?console.warn(" No camera device found"):M.name==="NotReadableError"&&console.warn(" Camera device is already in use by another application")}}},bs=()=>{if(Qe.trim()===""||!k)return;const M={id:Date.now(),sender:"user",text:Qe,timestamp:new Date};Ie(G=>[...G,M]),ee.emit("send_message",{message:Qe,to:Rt.current}),Ci("")},ru=()=>{P(!1),_(!1),O(null),Ie([]),D(0),Z.current&&(Z.current.close(),Z.current=null),ee.emit("find_partner",{userId:nt.current,userName:ye.name||"Anonymous",userAge:ye.age||18,userLocation:ye.location||"Unknown"})},Hr=()=>{console.log(" Cleaning up chat session"),Z.current&&(Z.current.close(),Z.current=null),y(!1),P(!1),_(!1),Ie([]),D(0)},pa=()=>u.jsxs("div",{className:"intro-screen-container flex flex-row w-full max-w-[1500px] mx-auto gap-12 px-10 mt-20 items-start overflow-visible",style:{minHeight:"100vh",height:"auto",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx(j2,{currentUser:ye,onProfileClick:()=>N(!0),onPremiumClick:()=>g(!0),onMatchHistoryClick:()=>oe(!0),onSearchClick:()=>Dt(!0),onRequestsClick:()=>te(X==="notification"?null:"notification"),onMessageClick:()=>te(X==="message"?null:"message"),isFixedPosition:!0}),u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})}),u.jsx("div",{className:"right-panel flex-1 rounded-3xl shadow-xl p-12 pb-16 space-y-6 flex items-center justify-center",style:{height:"520px",minHeight:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f"},children:u.jsxs("div",{className:"w-full h-full rounded-3xl p-8 shadow-2xl flex flex-col items-center justify-between text-center",children:[u.jsxs("div",{className:"flex gap-3 justify-center",children:[u.jsx("button",{className:"text-white font-bold py-2 px-6 rounded-lg transition-all text-sm shadow-md hover:shadow-lg",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"SoloX"}),u.jsx("button",{className:"text-white font-bold py-2 px-6 rounded-lg transition-all text-sm",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"DuoX"})]}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("img",{src:ca,alt:"Flinxx",className:"w-16 h-16"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black mb-2",style:{color:"#d9b85f"},children:"Flinxx"}),u.jsx("p",{className:"text-sm",style:{color:"#d9b85f"},children:"Meet new people in real time."})]}),we!=="both"&&u.jsx("button",{onClick:()=>E(!0),className:"rounded-full px-4 py-1 transition-all cursor-pointer text-xs",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:u.jsxs("span",{className:"font-semibold",children:[" ",we==="girls"?"Girls Only":we==="guys"?"Guys Only":"Both"]})})]}),u.jsx("button",{onClick:fa,disabled:Ts,className:"w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 text-sm shadow-lg",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:Ts?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin inline-block mr-2",children:""})," ",m?"Starting Match...":"Requesting Access..."]}):m?"Start Video Chat":"Allow Camera & Continue"})]})})]}),ma=()=>(R.useEffect(()=>{console.log(`

 ===== WAITING SCREEN DIAGNOSTIC CHECK =====
`);const M=!!ie.current;console.log(" CHECK 1: Video element found?",M?"YES":"NO",ie.current);const G=!!se.current;if(console.log(" CHECK 2: Local stream valid?",G?"YES":"NO",se.current),G){const $=se.current.getVideoTracks();if(console.log(" CHECK 3: Does stream have video track?",$.length>0?"YES":"NO"),$.length>0){const J=$[0];console.log("   - kind:",J.kind),console.log("   - enabled:",J.enabled),console.log("   - readyState:",J.readyState),console.log("   - id:",J.id)}}if(M&&G){const $=ie.current.srcObject===se.current;console.log(" CHECK 4: Stream attached to video element?",$?"YES":"NO"),$||(console.log("    Attaching stream to video element NOW..."),ie.current.srcObject=se.current,ie.current.muted=!0,console.log("    Stream attached!"))}console.log(`
 ===== END DIAGNOSTIC CHECK =====

`)},[T]),u.jsxs("div",{className:"flex flex-row w-full max-w-[1500px] mx-auto gap-12 px-10 mt-20 items-start overflow-visible",style:{minHeight:"100vh",height:"auto",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})}),u.jsx("div",{className:"right-panel flex-1 rounded-3xl shadow-xl flex flex-col",style:{height:"520px",minHeight:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f",padding:0,overflow:"visible",position:"relative",zIndex:5},children:u.jsxs("div",{className:"flex flex-col items-center justify-center text-center gap-8 py-20",children:[u.jsx("div",{className:"animate-pulse text-6xl",children:""}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("h2",{className:"text-2xl font-bold",style:{color:"#d9b85f"},children:"Looking for a partner..."}),u.jsx("p",{className:"text-sm",style:{color:"#d9b85f"},children:"Matching you with someone nearby"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0.2s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0.4s"}})]}),u.jsx("button",{onClick:()=>{console.log(" Cancel matching - emitting cancel_matching event"),ee.emit("cancel_matching",{userId:nt.current,timestamp:new Date().toISOString()}),b(!1),hn(!1)},className:"w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 text-sm shadow-lg mt-4",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"Cancel Search"})]})})]})),Rs=()=>(console.log(" VideoChatScreen rendering - partnerInfo:",{exists:!!x,userName:x==null?void 0:x.userName,userLocation:x==null?void 0:x.userLocation,picture:!!(x!=null&&x.picture),fullObject:x}),console.log(" currentUser for comparison:",{name:ye==null?void 0:ye.name,location:ye==null?void 0:ye.location,picture:!!(ye!=null&&ye.picture)}),u.jsxs("div",{className:"video-chat-container flex flex-col md:flex-row w-full h-full gap-6 items-start overflow-visible",style:{minHeight:"100vh",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsxs("div",{className:"right-panel flex-1 rounded-3xl shadow-xl flex flex-col",style:{height:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f",padding:0,overflow:"visible"},children:[u.jsxs("div",{className:"w-full h-full bg-black rounded-3xl shadow-2xl flex flex-col overflow-visible",style:{backgroundColor:"#131313",overflow:"visible"},children:[u.jsxs("div",{className:"px-4 flex items-center justify-between backdrop-blur-sm flex-shrink-0",style:{height:"56px",paddingTop:"8px",paddingBottom:"8px",backgroundColor:"rgba(19, 19, 19, 0.8)",borderBottom:"1px solid #d9b85f"},children:[u.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg flex-shrink-0 overflow-hidden",children:k&&x&&x.picture?u.jsx("img",{src:x.picture,alt:"Partner",className:"w-full h-full object-cover"}):""}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-semibold text-sm leading-tight truncate",style:{color:"#d9b85f"},children:k&&x?x.userName:"Waiting..."}),u.jsx("p",{className:"text-xs truncate",style:{color:"#d9b85f"},children:k&&x?x.userLocation:"for a partner"})]})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[u.jsx("button",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""}),u.jsx("button",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""})]})]}),u.jsxs("div",{id:"main-container",className:"overflow-visible flex flex-col w-full flex-1",style:{zIndex:1,backgroundColor:"transparent",padding:0,overflow:"visible"},children:[u.jsxs("div",{id:"remote-video-wrapper",style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:1,overflow:"visible",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:[u.jsx("video",{id:"remote-video-singleton",ref:Lt,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"black",display:k?"block":"none",zIndex:10}}),!k&&u.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000000",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:u.jsx("p",{style:{color:"#d9b85f",fontSize:"14px"},children:"Waiting for partner video..."})}),I&&k&&u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 text-xs font-semibold z-50 shadow-lg px-2 py-1 rounded-full",style:{backgroundColor:"rgba(217, 184, 95, 0.9)",color:"#0f0f0f"},children:[u.jsx("span",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:"#0f0f0f"}}),k2(V)]})]}),!k&&u.jsx("div",{className:"flex-1 w-full flex items-center justify-center flex-col bg-black rounded-2xl",style:{zIndex:1},children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin mb-4 text-5xl inline-block",children:""}),u.jsx("p",{className:"font-semibold text-base",style:{color:"#d9b85f"},children:"Looking for a partner..."}),u.jsx("p",{className:"text-xs mt-2",style:{color:"#d9b85f"},children:"This won't take long"})]})}),Ue.length>0&&k&&u.jsx("div",{className:"space-y-2 mt-3 px-4",style:{zIndex:10},children:Ue.map(M=>u.jsx("div",{className:`flex ${M.sender==="user"?"justify-end":"justify-start"}`,children:u.jsx("div",{className:`max-w-xs px-3 py-2 rounded-2xl text-xs ${M.sender==="user","text-white"}`,style:{backgroundColor:M.sender==="user"?"#d9b85f":"rgba(217, 184, 95, 0.6)",color:M.sender==="user"?"#0f0f0f":"#d9b85f"},children:M.text})},M.id))})]})]}),u.jsxs("div",{className:"px-4 flex items-center justify-between backdrop-blur-sm flex-shrink-0",style:{height:"56px",paddingTop:"8px",paddingBottom:"8px",backgroundColor:"rgba(19, 19, 19, 0.8)",borderTop:"1px solid #d9b85f"},children:[u.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"M"})}),u.jsxs("div",{className:"flex items-center gap-2 flex-1 ml-2 flex-shrink-0",children:[u.jsx("input",{type:"text",value:Qe,onChange:M=>Ci(M.target.value),onKeyPress:M=>M.key==="Enter"&&bs(),placeholder:"Send Message",disabled:!k,className:"flex-1 px-3 py-2 rounded-lg focus:outline-none disabled:bg-gray-500/20 text-xs font-medium",style:{backgroundColor:"rgba(217, 184, 95, 0.1)",borderColor:"#d9b85f",border:"1px solid #d9b85f",color:"#d9b85f"}}),u.jsx("button",{onClick:bs,disabled:!k||Qe.trim()==="",className:"w-8 h-8 font-bold rounded-lg transition-all disabled:cursor-not-allowed flex items-center justify-center text-sm shadow-md flex-shrink-0",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""})]})]})]}),u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})})]}));return u.jsxs(u.Fragment,{children:[r&&u.jsx(Ux,{onCancel:ha,onContinue:As}),s?u.jsxs("div",{className:"flex flex-col h-screen w-screen overflow-visible min-h-0",style:{backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx("video",{ref:ie,id:"local-video-singleton",className:"local-video",autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#000",display:m?"block":"none",zIndex:1}}),k?u.jsx(Rs,{}):T?u.jsx(ma,{}):u.jsx(pa,{}),u.jsx(A2,{isOpen:S,onClose:()=>g(!1)}),u.jsx(R2,{isOpen:A,onClose:()=>N(!1),onOpenPremium:()=>g(!0),onReinitializeCamera:(ga=Wr.current)==null?void 0:ga.reinitializeCamera}),u.jsx(N2,{isOpen:C,onClose:()=>oe(!1)}),u.jsx(Py,{isOpen:Ke,onClose:()=>Dt(!1),mode:"search",onUserSelect:M=>{console.log("Selected user from search:",M)}}),u.jsx(Py,{isOpen:X!==null,onClose:()=>te(null),mode:X==="message"?"message":"notifications"}),u.jsx(b2,{isOpen:w,onClose:()=>E(!1),currentGender:we,onOpenPremium:()=>g(!0)}),nu&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-indigo-600 rounded-2xl p-8 max-w-md w-full border border-white/20 shadow-2xl",children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-center",children:" Time's Up!"}),u.jsx("p",{className:"text-white/90 text-center mb-4",children:"Your 2-minute guest preview has ended. Redirecting to login..."}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsx("div",{className:"animate-spin text-4xl",children:""})})]})})]}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center",children:u.jsx("div",{className:"text-center text-white",children:u.jsx("p",{children:"Loading..."})})})]})},D2=()=>{const t=en(),[e,n]=R.useState(5),[r,i]=R.useState(!0),[s,o]=R.useState([{id:1,username:"Alex_24",name:"Alex",age:24,country:"USA",avatar:"",status:"Online"},{id:2,username:"Jordan_22",name:"Jordan",age:22,country:"UK",avatar:"",status:"Online"},{id:3,username:"Casey_25",name:"Casey",age:25,country:"Canada",avatar:"",status:"Online"},{id:4,username:"Morgan_23",name:"Morgan",age:23,country:"Australia",avatar:"",status:"Online"},{id:5,username:"Taylor_26",name:"Taylor",age:26,country:"Germany",avatar:"",status:"Online"},{id:6,username:"Alex_27",name:"Alex",age:27,country:"France",avatar:"",status:"Online"},{id:7,username:"Sam_21",name:"Sam",age:21,country:"Canada",avatar:"",status:"Online"},{id:8,username:"Chris_28",name:"Chris",age:28,country:"Japan",avatar:"",status:"Online"}]),[l,c]=R.useState(0),h=R.useRef(null);R.useEffect(()=>(r&&e>0?h.current=setTimeout(()=>{n(k=>k-1)},1e3):r&&e===0&&(p(),n(5)),()=>clearTimeout(h.current)),[e,r]);const p=()=>{l<s.length-1?(c(k=>k+1),n(5),i(!0)):(c(0),n(5),i(!0))},m=()=>{p()},y=()=>{ee.emit("connect_user",{targetUserId:s[l].id}),t("/chat")},T=s[l],b=s[(l+1)%s.length];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex flex-col",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-6 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ca,alt:"Flinxx",className:"w-8 h-8"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:()=>t("/"),className:"text-white font-semibold hover:text-white/80 transition",children:" Back"})})]})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-8",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"relative h-[600px] mb-8",children:[u.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-md rounded-3xl border border-white/20 p-8 transform scale-95 translate-y-4 opacity-50",children:u.jsxs("div",{className:"h-full flex flex-col justify-between",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-white font-bold text-xl mb-2",children:[b.name,", ",b.age]}),u.jsxs("p",{className:"text-white/70 text-sm mb-6",children:[" ",b.country]})]}),u.jsx("div",{className:"text-center opacity-50",children:u.jsx("p",{className:"text-white/50 text-sm",children:"Next up..."})})]})}),u.jsxs("div",{className:"absolute inset-0 bg-gradient-to-b from-white/20 to-white/5 backdrop-blur-md rounded-3xl border-2 border-white/30 p-8 flex flex-col justify-between shadow-2xl hover:border-white/50 transition-all duration-300",children:[u.jsx("div",{className:"flex justify-center mb-6",children:u.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-5xl shadow-lg shadow-blue-600/50 border-4 border-white/40 text-white",children:T.avatar})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-white font-black text-3xl mb-1",children:T.name}),u.jsx("p",{className:"text-white/90 text-2xl font-bold mb-2",children:T.age}),u.jsxs("p",{className:"text-white/80 text-base mb-2",children:[" ",T.country]}),u.jsxs("p",{className:"text-white/70 text-sm mb-6",children:["@",T.username]}),u.jsx("div",{className:"space-y-3",children:u.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20",children:[u.jsx("p",{className:"text-white/70 text-xs",children:"Status"}),u.jsxs("p",{className:"text-white font-bold text-sm",children:[" ",T.status]})]})})]}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsxs("div",{className:"relative w-20 h-20",children:[u.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[u.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"white",strokeWidth:"2",opacity:"0.2"}),u.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"url(#gradient)",strokeWidth:"2",strokeDasharray:`${(5-e)/5*226.2} 226.2`,className:"transition-all duration-1000"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:"#fbbf24"}),u.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})]})})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-black text-2xl",children:e})})]})}),r&&u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-blue-400 text-sm font-semibold animate-pulse",children:[" Auto-next in ",e,"s"]})})]})]}),u.jsxs("div",{className:"flex gap-4 justify-center",children:[u.jsx("button",{onClick:m,className:"flex-1 px-6 py-4 bg-white/20 hover:bg-white/30 border-2 border-white/40 hover:border-white/60 rounded-full font-bold text-white transition-all transform hover:scale-105 backdrop-blur",children:" Skip"}),u.jsx("button",{onClick:y,className:"flex-1 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-2xl shadow-blue-600/30 transition-all transform hover:scale-105",children:" Connect"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx("button",{onClick:()=>i(!r),className:`px-6 py-2 rounded-full font-semibold text-sm transition-all ${r?"bg-blue-600/30 text-blue-200 border border-blue-400/50":"bg-white/10 text-white/70 border border-white/20"}`,children:r?" Auto-Next ON":" Auto-Next OFF"})}),u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("p",{className:"text-white/70 text-sm",children:["Showing ",l+1," of ",s.length," profiles"]})})]})})]})},L2=()=>{const t=en(),{user:e}=R.useContext(cr)||{},r=(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null)||e||{name:"Guest User",email:"guest@flinxx.local",picture:null,googleId:"N/A"};console.log(" Profile Component - Loaded User:",r);const[i,s]=R.useState({username:(r==null?void 0:r.name)||"User",age:(r==null?void 0:r.age)||24,country:(r==null?void 0:r.location)||"Unknown",bio:"Welcome to my profile",avatar:"",gender:"Not specified",status:"Looking to chat",email:(r==null?void 0:r.email)||"",displayName:(r==null?void 0:r.name)||"",photoURL:(r==null?void 0:r.picture)||"",userId:(r==null?void 0:r.userId)||"N/A"}),[o,l]=R.useState(!0);R.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.email)){console.log(" No user email found, using localStorage data only"),console.log(" Profile from localStorage:",{name:r==null?void 0:r.name,email:r==null?void 0:r.email,picture:r==null?void 0:r.picture,googleId:r==null?void 0:r.googleId}),l(!1);return}const P="https://flinxx-backend.onrender.com";console.log(` Profile Component - Fetching from: ${P}/api/user/profile?email=${r.email}`);const I=await fetch(`${P}/api/user/profile?email=${encodeURIComponent(r.email)}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!I.ok)throw new Error(`Failed to fetch profile: ${I.status}`);const _=await I.json();console.log(" Profile data fetched from backend:",_.profile),_.profile?s(x=>({...x,email:_.profile.email||r.email||x.email,displayName:_.profile.name||r.name||x.displayName,photoURL:_.profile.picture||r.picture||x.photoURL,userId:_.profile.id||x.userId})):s(x=>({...x,email:r.email||x.email,displayName:r.name||x.displayName,photoURL:r.picture||x.photoURL,userId:r.userId||x.userId}))}catch(P){console.error(" Error fetching profile:",P),s(I=>({...I,email:r.email||I.email,displayName:r.name||I.displayName,photoURL:r.picture||I.photoURL,userId:r.userId||I.userId}))}finally{l(!1)}})()},[r==null?void 0:r.email]);const[c,h]=R.useState(!1),[p,m]=R.useState(i),y=k=>{const{name:P,value:I}=k.target;m(_=>({..._,[P]:P==="age"?parseInt(I):I}))},T=()=>{s(p),h(!1),console.log("Profile saved:",p)},b=["","","","","","","","",""];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-6 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ca,alt:"Flinxx",className:"w-8 h-8"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:()=>t("/"),className:"text-white font-semibold hover:text-white/80 transition",children:" Back"})})]})}),u.jsx("div",{className:"flex-1 px-4 py-12",children:u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 mb-8",children:[u.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.photoURL&&!c?u.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center shadow-2xl shadow-yellow-400/50 mb-6 border-4 border-white/30 overflow-hidden",children:u.jsx("img",{src:i.photoURL,alt:"Profile",className:"w-full h-full object-cover"})}):u.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-7xl shadow-2xl shadow-blue-600/50 mb-6 border-4 border-white/30",children:c?u.jsx("div",{className:"grid grid-cols-3 gap-2 p-4",children:b.map(k=>u.jsx("button",{onClick:()=>m(P=>({...P,avatar:k})),className:`text-3xl p-2 rounded-lg transition-all ${p.avatar===k?"bg-white/30 border-2 border-white scale-110":"bg-white/10 hover:bg-white/20"}`,children:k},k))}):i.avatar}),!c&&u.jsx("p",{className:"text-white/70 text-sm",children:"Click Edit to change avatar"})]}),c?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Full Name"}),u.jsx("input",{type:"text",name:"displayName",value:p.displayName,onChange:y,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60",placeholder:"Enter your full name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:p.email,onChange:y,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60",placeholder:"Enter your email"})]}),p.userId&&p.userId!=="N/A"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"User ID (Read-only)"}),u.jsx("input",{type:"text",value:p.userId,disabled:!0,className:"w-full mt-2 bg-white/5 border border-white/20 rounded-xl px-4 py-3 text-white/60 cursor-not-allowed"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Username"}),u.jsx("input",{type:"text",name:"username",value:p.username,onChange:y,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Age"}),u.jsx("input",{type:"number",name:"age",value:p.age,onChange:y,min:"18",max:"100",className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Country"}),u.jsx("input",{type:"text",name:"country",value:p.country,onChange:y,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Gender"}),u.jsxs("select",{name:"gender",value:p.gender,onChange:y,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/60",children:[u.jsx("option",{value:"Male",children:"Male"}),u.jsx("option",{value:"Female",children:"Female"}),u.jsx("option",{value:"Other",children:"Other"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Bio"}),u.jsx("textarea",{name:"bio",value:p.bio,onChange:y,rows:"4",className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60 resize-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Status"}),u.jsxs("select",{name:"status",value:p.status,onChange:y,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/60",children:[u.jsx("option",{value:"Looking to chat",children:"Looking to chat"}),u.jsx("option",{value:"Making friends",children:"Making friends"}),u.jsx("option",{value:"Just browsing",children:"Just browsing"})]})]}),u.jsxs("div",{className:"flex gap-4 pt-6",children:[u.jsx("button",{onClick:()=>{h(!1),m(i)},className:"flex-1 bg-white/20 hover:bg-white/30 text-white font-bold py-3 rounded-xl transition-all",children:"Cancel"}),u.jsx("button",{onClick:T,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105",children:"Save Profile"})]})]}):u.jsxs("div",{className:"space-y-6",children:[i.displayName&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Full Name"}),u.jsx("p",{className:"text-white font-bold text-2xl mt-2",children:i.displayName})]}),i.email&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Email"}),u.jsx("p",{className:"text-white font-normal text-base mt-2",children:i.email})]}),i.userId&&i.userId!=="N/A"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"User ID"}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("p",{className:"text-white font-mono text-sm",children:i.userId}),u.jsx("button",{onClick:()=>navigator.clipboard.writeText(i.userId),className:"text-white/70 hover:text-white transition",title:"Copy ID",children:""})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Username"}),u.jsx("p",{className:"text-white font-bold text-2xl mt-2",children:i.username})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Age"}),u.jsxs("p",{className:"text-white font-bold text-xl mt-2",children:[i.age," years old"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Country"}),u.jsxs("p",{className:"text-white font-bold text-xl mt-2",children:[" ",i.country]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Gender"}),u.jsx("p",{className:"text-white font-bold text-lg mt-2",children:i.gender})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Bio"}),u.jsx("p",{className:"text-white/90 text-base mt-2",children:i.bio})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Status"}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),u.jsx("p",{className:"text-white font-semibold",children:i.status})]})]}),u.jsx("button",{onClick:()=>h(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105",children:" Edit Profile"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Matches"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"24"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Chats"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"8"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Time Online"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"42h"})]})]})]})})]})},M2=({value:t,onChange:e,maxDate:n})=>{const r=n?`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`:null;return u.jsx("input",{type:"date",value:t||"",onChange:i=>e(i.target.value),max:r,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white text-gray-900",placeholder:"",required:!0})},zx=({user:t,onProfileComplete:e,isOpen:n})=>{const[r,i]=R.useState(""),[s,o]=R.useState(""),[l,c]=R.useState(null),[h,p]=R.useState(null),[m,y]=R.useState(!1),T=en();R.useEffect(()=>{if(r){const[P,I,_]=r.split("-").map(Number),x=new Date(P,I-1,_),O=new Date;let V=O.getFullYear()-x.getFullYear();const D=O.getMonth()-x.getMonth();(D<0||D===0&&O.getDate()<x.getDate())&&V--,c(V)}else c(null)},[r]);const b=!r||!s||m,k=async P=>{if(P.preventDefault(),!r||!s){p("Please fill in all required fields");return}if(l&&l<18){p("You must be 18+ to use this app");return}y(!0),p(null);try{const I="https://flinxx-backend.onrender.com",_=t.id||t.uid||t.googleId;if(!_)throw new Error("Unable to determine user ID");const x=await fetch(`${I}/api/users/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:_,birthday:r||null,gender:s})}),O=await x.json();if(!x.ok){if(O.code==="UNDERAGE_USER"){p("You must be 18+ to use this app");return}p(O.error||"Failed to save profile");return}console.log(" Profile saved successfully:",O);const V={...t,profileCompleted:!0,isProfileCompleted:!0,birthday:r,gender:s,age:l};localStorage.setItem("profileCompleted","true"),localStorage.setItem("user",JSON.stringify(V)),e&&e(V),setTimeout(()=>{T("/chat?view=home")},500)}catch(I){console.error(" Error saving profile:",I),p(I.message||"Network error. Please try again.")}finally{y(!1)}};return!n||!t?null:u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:u.jsx("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 my-8",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Complete Your Profile"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Just a few more details to get started"})]}),u.jsx("div",{className:"flex justify-center mb-6",children:t.picture||t.photoURL?u.jsx("img",{src:t.picture||t.photoURL,alt:t.name||t.displayName,className:"w-20 h-20 rounded-full object-cover border-4 border-blue-500"}):u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center border-4 border-blue-500",children:u.jsx("span",{className:"text-gray-600 text-2xl",children:""})})}),h&&u.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:u.jsx("p",{className:"text-red-700 text-sm font-medium",children:h})}),u.jsxs("form",{onSubmit:k,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),u.jsx("input",{type:"text",value:t.name||t.displayName||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Birthday ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx(M2,{value:r,onChange:i,maxDate:new Date}),l!==null&&u.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Age: ",u.jsxs("span",{className:l<18?"text-red-600 font-bold":"text-green-600 font-bold",children:[l," years old"]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Gender ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{value:s,onChange:P=>o(P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white text-gray-900 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},required:!0,children:[u.jsx("option",{value:"",disabled:!0,children:"Select gender"}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"})]})]}),u.jsx("button",{type:"submit",disabled:b,className:`w-full py-3 px-4 rounded-lg font-medium transition mt-6 ${b?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:m?u.jsxs("span",{className:"flex items-center justify-center",children:[u.jsx("span",{className:"inline-block animate-spin mr-2",children:""}),"Saving..."]}):"Save Profile"})]}),u.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Your birthday and gender cannot be changed after saving."})]})})})};function F2(){const t=en(),[e]=Vx(),[n,r]=R.useState(!1),[i,s]=R.useState(null);R.useEffect(()=>{try{const l=e.get("token"),c=e.get("user"),h=e.get("error");if(console.log(" Callback - Token:",l),console.log(" Callback - User:",c),h){console.error(" OAuth Error:",h),t("/login?error="+encodeURIComponent(h),{replace:!0});return}if(l&&c)try{const p=JSON.parse(c);localStorage.setItem("token",l),localStorage.setItem("authToken",l),localStorage.setItem("user",JSON.stringify(p)),localStorage.setItem("authProvider","google"),localStorage.setItem("userInfo",JSON.stringify(p)),console.log(" User data saved:",p),p.isProfileCompleted?(console.log(" Profile completed, redirecting to chat..."),setTimeout(()=>{t("/chat")},500)):(console.log(" Profile not completed, showing setup modal"),s(p),r(!0))}catch(p){console.error(" Error parsing user data:",p),t("/login?error=invalid_user_data",{replace:!0})}else console.error(" Missing token or user data"),t("/login?error=missing_data",{replace:!0})}catch(l){console.error(" Callback error:",l),t("/login?error="+encodeURIComponent(l.message),{replace:!0})}},[e,t]);const o=l=>{console.log(" Profile completed, redirecting to chat"),r(!1),setTimeout(()=>{t("/chat")},500)};return n&&i?u.jsx(zx,{user:i,onProfileComplete:o,isOpen:!0}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Completing your login..."}),u.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Please wait while we set up your session"})]})})}function V2(){const t=en(),{setAuthToken:e}=R.useContext(cr)||{},[n]=Vx(),[r,i]=R.useState(null),[s,o]=R.useState(!0),[l,c]=R.useState(null);return R.useEffect(()=>{(async()=>{var p,m,y;try{const T=n.get("token"),b=n.get("data");if(!T){c("No authentication token received"),o(!1);return}console.log(" Auth Success - Token received:",T.substring(0,10)+"...");let k=null;if(b)try{k=JSON.parse(decodeURIComponent(b)),console.log(" Response data from backend:",k)}catch(x){console.warn(" Could not parse response data:",x)}const I=await fetch(`https://flinxx-backend.onrender.com/auth-success?token=${T}`);if(!I.ok)throw new Error(`Failed to fetch user data: ${I.statusText}`);const _=await I.json();if(console.log(" User data received:",_.user.email),_.success&&_.user){const x=_.user;let O=null;if(x.uuid&&typeof x.uuid=="string"&&x.uuid.length===36)O=x.uuid,console.log(" Valid UUID found in user.uuid:",O.substring(0,8)+"...");else if(x.id&&typeof x.id=="string"&&x.id.length===36)O=x.id,console.log(" Valid UUID found in user.id (fallback):",O.substring(0,8)+"...");else{console.error(" CRITICAL: No valid 36-char UUID found in backend response"),console.error("   user.uuid:",x.uuid,"(type:",typeof x.uuid+", length:",((p=x.uuid)==null?void 0:p.length)+")"),console.error("   user.id:",x.id,"(type:",typeof x.id+", length:",((m=x.id)==null?void 0:m.length)+")"),console.error("   Full response:",x),c("Authentication failed: Invalid UUID from server"),o(!1);return}const V={uuid:O,name:x.name||x.display_name||"User",email:x.email,picture:x.picture||x.photo_url,profileCompleted:x.profileCompleted||!1};console.log(" User data normalized for storage (UUID ONLY):",{uuid:V.uuid.substring(0,8)+"...",email:V.email}),e?(console.log("[AuthSuccess] Storing token and user via AuthContext"),e(T,V)):(console.log("[AuthSuccess] AuthContext not available, saving to localStorage directly"),localStorage.setItem("token",T),localStorage.setItem("authToken",T),localStorage.setItem("user",JSON.stringify(V)),localStorage.setItem("authProvider","google"));const D=JSON.parse(localStorage.getItem("user")||"{}");console.log(" VERIFICATION - localStorage.user contents:",{has_uuid:!!D.uuid,uuid_length:(y=D.uuid)==null?void 0:y.length,has_id:!!D.id,has_email:!!D.email}),i(x),console.log(" Routing all users to /chat (unified dashboard)"),setTimeout(()=>{t("/chat")},500)}else c(_.error||"Failed to authenticate")}catch(T){console.error(" Auth Success Error:",T),c(T.message||"An error occurred during authentication")}finally{o(!1)}})()},[n,t,e]),l?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white text-2xl font-bold mb-4",children:" Authentication Error"}),u.jsx("p",{className:"text-white/70 text-lg mb-6",children:l}),u.jsx("button",{onClick:()=>t("/login",{replace:!0}),className:"px-6 py-2 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100",children:"Back to Login"})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Completing your login..."}),u.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Please wait while we set up your session"})]})})}const jy=()=>{const t=en();return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsx("div",{className:"px-6 py-4 flex justify-start items-center max-w-full",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ca,alt:"Flinxx",className:"w-10 h-10"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]})})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"w-full max-w-3xl",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-8",children:"Terms & Conditions"}),u.jsxs("div",{className:"max-h-[70vh] overflow-y-auto pr-4 space-y-6 text-white/90",children:[u.jsx("p",{className:"text-sm text-white/70 italic",children:"Last Updated: December 21, 2025"}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"1. Acceptance of Terms"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:'By accessing and using the Flinxx platform (the "Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"2. Use License"}),u.jsx("p",{className:"text-white/80 leading-relaxed mb-3",children:"Permission is granted to temporarily download one copy of the materials (information or software) on Flinxx for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:"}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-white/80",children:[u.jsx("li",{children:"Modifying or copying the materials"}),u.jsx("li",{children:"Using the materials for any commercial purpose or for any public display"}),u.jsx("li",{children:"Attempting to decompile or reverse engineer any software contained on the Service"}),u.jsx("li",{children:"Removing any copyright or other proprietary notations from the materials"}),u.jsx("li",{children:'Transferring the materials to another person or "mirroring" the materials on any other server'}),u.jsx("li",{children:"Violating any laws or regulations applicable to the Service"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"3. Age Restriction"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"You must be at least 18 years of age to use this Service. By using Flinxx, you represent and warrant that you are at least 18 years old and have the legal right to use the platform in your jurisdiction."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"4. Disclaimer"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"The materials on Flinxx are provided on an 'as is' basis. Flinxx makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"5. Limitations"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"In no event shall Flinxx or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on Flinxx, even if Flinxx or a Flinxx authorized representative has been notified orally or in writing of the possibility of such damage."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"6. Accuracy of Materials"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"The materials appearing on Flinxx could include technical, typographical, or photographic errors. Flinxx does not warrant that any of the materials on its Service are accurate, complete, or current. Flinxx may make changes to the materials contained on the Service at any time without notice."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"7. User Conduct"}),u.jsx("p",{className:"text-white/80 leading-relaxed mb-3",children:"You agree that you will not engage in any conduct that:"}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-white/80",children:[u.jsx("li",{children:"Violates any applicable law or regulation"}),u.jsx("li",{children:"Infringes upon or violates any intellectual property rights"}),u.jsx("li",{children:"Harasses, abuses, or threatens other users"}),u.jsx("li",{children:"Uploads malware, viruses, or other harmful code"}),u.jsx("li",{children:"Impersonates any person or entity"}),u.jsx("li",{children:"Shares non-consensual intimate content"}),u.jsx("li",{children:"Attempts to gain unauthorized access to the Service"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"8. Materials License"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"By posting materials to Flinxx, you grant Flinxx a worldwide, royalty-free license to use, reproduce, modify and publish that material in any form, in any media now known or hereafter discovered. However, this license does not extend to any materials posted by other users."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"9. Limitations of Liability"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"In no event shall Flinxx, its employees, agents, suppliers, or any other affiliated parties be liable to you or any third party for any direct, indirect, consequential, special, or punitive damages whatsoever, including without limitation, damages for loss of profits, loss of use, business interruption, or loss of data, even if Flinxx has been advised of the possibility of such damages."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"10. Privacy Policy"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Your use of Flinxx is also governed by our Privacy Policy. Please review our Privacy Policy to understand our practices regarding the collection and use of your personal information."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"11. Termination"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx may terminate or suspend your account and access to the Service at any time, for any reason, without notice. Upon termination, your right to use the Service will immediately cease. You remain liable for all charges incurred through the date of termination."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"12. Modifications to Terms"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx may revise these terms of service for the Service at any time without notice. By using this Service, you are agreeing to be bound by the then current version of these terms of service. If you do not agree to any of these terms, or any revised terms, please stop using the Service."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"13. Governing Law"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"These terms and conditions are governed by and construed in accordance with the laws of the jurisdiction in which Flinxx operates, and you irrevocably submit to the exclusive jurisdiction of the courts in that location."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"14. Contact Information"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"If you have any questions about these Terms & Conditions, please contact us at: support@flinxx.com"})]}),u.jsx("div",{className:"pt-6 border-t border-white/20",children:u.jsx("p",{className:"text-sm text-white/70",children:" 2025 Flinxx. All rights reserved."})})]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsx("button",{onClick:()=>t("/",{replace:!0}),className:"px-8 py-3 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100 transition-all",children:"Back to Home"})})]})})]})},U2=()=>{const t=en();return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsx("div",{className:"px-6 py-4 flex justify-start items-center max-w-full",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ca,alt:"Flinxx",className:"w-10 h-10"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]})})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"w-full max-w-3xl",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-8",children:"Privacy Policy"}),u.jsxs("div",{className:"max-h-[70vh] overflow-y-auto pr-4 space-y-6 text-white/90",children:[u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"By accessing or using Flinxx, you agree to this Privacy Policy."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx is a live interaction platform where users and streamers communicate in real time. Due to the nature of live content, complete privacy cannot be guaranteed."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx hosts multiple streamers and users. You understand that any user or streamer may record video, audio, or interactions without your consent and may upload or share such content on external platforms. You are solely responsible for your own privacy and actions. Flinxx provides no guarantee or control over such recordings or uploads."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Your video, audio, messages, and interactions may also be recorded, stored, reviewed, or used by Flinxx for safety, moderation, legal compliance, marketing, promotional, or platform improvement purposes. By continuing, you give your full consent."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx is not responsible or liable for screenshots, screen recordings, re-uploads, misuse, or distribution of content by users or streamers outside the platform. You agree that you use Flinxx at your own risk."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"We do not guarantee the behavior, conduct, or content of any user or streamer. Flinxx shall not be held liable for any loss, damage, harassment, or misuse arising from live interactions."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Basic information such as device data, usage activity, and login details may be collected to operate, secure, and improve the platform."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"If you do not agree with this Privacy Policy, please discontinue use of Flinxx immediately."})}),u.jsx("div",{className:"text-sm text-white/50 italic pt-6 border-t border-white/20",children:u.jsx("p",{children:" 2025 Flinxx. All rights reserved."})})]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsx("button",{onClick:()=>t("/",{replace:!0}),className:"px-8 py-3 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100 transition-all",children:"Back to Home"})})]})})]})},B2=({children:t})=>{const e=en(),n=R.useContext(cr),r=n==null?void 0:n.user,i=n==null?void 0:n.isLoading,[s,o]=R.useState(!1),[l,c]=R.useState(null),[h,p]=R.useState(!0);console.log(`
[ProtectedChatRoute]  RENDER CALLED`),console.log("[ProtectedChatRoute]   - isLoading:",h),console.log("[ProtectedChatRoute]   - showProfileSetup:",s),console.log("[ProtectedChatRoute]   - authLoading:",i),console.log("[ProtectedChatRoute]   - authUser:",r?r.email:"null"),R.useEffect(()=>{console.log(`

 [ProtectedChatRoute] `),console.log(" [ProtectedChatRoute] EFFECT RUNNING - PROFILE CHECK"),console.log(" [ProtectedChatRoute] "),console.log(" [ProtectedChatRoute] Effect dependencies changed:"),console.log(" [ProtectedChatRoute]   - authLoading:",i),console.log(" [ProtectedChatRoute]   - authUser:",r?r.email:"null");try{if(i===!0){console.log(" [ProtectedChatRoute]  WAITING - AuthContext is still initializing (isLoading=true)"),p(!0);return}if(i===void 0){console.log(" [ProtectedChatRoute]  WAITING - AuthContext loading state is undefined"),p(!0);return}if(console.log(" [ProtectedChatRoute]  AuthContext finished loading (isLoading=false)"),!r){console.log(" [ProtectedChatRoute]  AuthContext finished loading but NO USER found"),console.log(" [ProtectedChatRoute] Redirecting to /login"),p(!1),e("/login",{replace:!0});return}console.log(" [ProtectedChatRoute]  AuthContext loaded with user:",r.email),console.log(" [ProtectedChatRoute] authUser object:",{id:r.id,email:r.email,profileCompleted:r.profileCompleted,birthday:r.birthday,gender:r.gender}),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted type:",typeof r.profileCompleted),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted value:",r.profileCompleted),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted === true?",r.profileCompleted===!0);const y=localStorage.getItem("user");if(console.log(" [ProtectedChatRoute] Checking localStorage:"),console.log(" [ProtectedChatRoute]   - user key exists:",!!y),y)try{const P=JSON.parse(y);console.log(" [ProtectedChatRoute] localStorage user:",{id:P.id,email:P.email,profileCompleted:P.profileCompleted}),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted type:",typeof P.profileCompleted),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted value:",P.profileCompleted),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted === true?",P.profileCompleted===!0)}catch(P){console.error("[ProtectedChatRoute] Failed to parse localStorage user:",P)}else console.log("[ProtectedChatRoute]  No user in localStorage");c(r),console.log(`
 [ProtectedChatRoute] PROFILE COMPLETION CHECK:`);const T=r==null?void 0:r.profileCompleted;console.log(" [ProtectedChatRoute]   Source 1 (AuthContext):"),console.log(" [ProtectedChatRoute]     authUser.profileCompleted =",T),console.log(" [ProtectedChatRoute]     typeof =",typeof T),console.log(" [ProtectedChatRoute]     === true?",T===!0);let b=null;y?(b=JSON.parse(y).profileCompleted,console.log(" [ProtectedChatRoute]   Source 2 (localStorage):"),console.log(" [ProtectedChatRoute]     localStorage.profileCompleted =",b),console.log(" [ProtectedChatRoute]     typeof =",typeof b),console.log(" [ProtectedChatRoute]     === true?",b===!0)):console.log(" [ProtectedChatRoute]   Source 2 (localStorage): not available");const k=T===!0||b===!0;console.log(`
 [ProtectedChatRoute] FINAL DECISION:`),console.log(" [ProtectedChatRoute]   profileCompletedAuth === true?",T===!0),console.log(" [ProtectedChatRoute]   profileCompletedStorage === true?",b===!0),console.log(" [ProtectedChatRoute]   isProfileComplete (final):",k),k?(console.log(`
 [ProtectedChatRoute]  DECISION: Profile IS completed`),console.log(` [ProtectedChatRoute]  SHOWING Chat page
`)):(console.log(`
 [ProtectedChatRoute]  DECISION: Profile NOT completed`),console.log(` [ProtectedChatRoute]  SHOWING ProfileSetupModal
`),o(!0)),p(!1)}catch(y){console.error("[ProtectedChatRoute]  ERROR in profile check:",y),console.error("[ProtectedChatRoute] Stack:",y.stack),p(!1),e("/login",{replace:!0})}},[e,r,i]);const m=y=>{console.log("Profile completed:",y),o(!1),c(y)};return h?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Loading..."})]})}):u.jsxs(u.Fragment,{children:[s&&l&&u.jsx(zx,{user:l,onProfileComplete:m,isOpen:!0}),!s&&t]})};function z2(){return u.jsx(w1,{children:u.jsx(g2,{children:u.jsx("div",{style:{width:"100%",minHeight:"100vh",display:"flex",flexDirection:"column"},children:u.jsxs(h2,{children:[u.jsx(nn,{path:"/",element:u.jsx(w2,{})}),u.jsx(nn,{path:"/login",element:u.jsx(S2,{})}),u.jsx(nn,{path:"/terms",element:u.jsx(jy,{})}),u.jsx(nn,{path:"/terms-and-conditions",element:u.jsx(jy,{})}),u.jsx(nn,{path:"/privacy-policy",element:u.jsx(U2,{})}),u.jsx(nn,{path:"/callback",element:u.jsx(F2,{})}),u.jsx(nn,{path:"/auth-success",element:u.jsx(V2,{})}),u.jsx(nn,{path:"/chat",element:u.jsx(B2,{children:u.jsx(O2,{})})}),u.jsx(nn,{path:"/matching",element:u.jsx(D2,{})}),u.jsx(nn,{path:"/profile",element:u.jsx(L2,{})}),u.jsx(nn,{path:"*",element:u.jsx($2,{})})]})})})})}const $2=()=>u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-5xl font-bold text-indigo-400 mb-4",children:"404"}),u.jsx("p",{className:"text-gray-300 mb-8",children:"Page not found"}),u.jsx("a",{href:"/",className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white font-semibold",children:"Go Home"})]})});function W2(){return u.jsx("div",{style:{width:"100%",height:"100vh"},children:u.jsx(z2,{})})}sd.createRoot(document.getElementById("root")).render(u.jsx(Yo.StrictMode,{children:u.jsx(VS,{clientId:"373922547944-gm8fgpgjebnraruomkpajoa7s3nqups0.apps.googleusercontent.com",onScriptProps:{async:!0,defer:!0,nonce:"YOUR_NONCE_VALUE"},children:u.jsx(IP,{children:u.jsx(v1,{children:u.jsx(SP,{children:u.jsx(W2,{})})})})})}));
//# sourceMappingURL=index-BkQbVNlE.js.map
