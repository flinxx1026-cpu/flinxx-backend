function Zx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function eE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ky={exports:{}},fc={},Ay={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qo=Symbol.for("react.element"),tE=Symbol.for("react.portal"),nE=Symbol.for("react.fragment"),rE=Symbol.for("react.strict_mode"),iE=Symbol.for("react.profiler"),sE=Symbol.for("react.provider"),oE=Symbol.for("react.context"),aE=Symbol.for("react.forward_ref"),lE=Symbol.for("react.suspense"),cE=Symbol.for("react.memo"),uE=Symbol.for("react.lazy"),qp=Symbol.iterator;function dE(t){return t===null||typeof t!="object"?null:(t=qp&&t[qp]||t["@@iterator"],typeof t=="function"?t:null)}var by={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ry=Object.assign,Ny={};function ps(t,e,n){this.props=t,this.context=e,this.refs=Ny,this.updater=n||by}ps.prototype.isReactComponent={};ps.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ps.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Py(){}Py.prototype=ps.prototype;function _h(t,e,n){this.props=t,this.context=e,this.refs=Ny,this.updater=n||by}var xh=_h.prototype=new Py;xh.constructor=_h;Ry(xh,ps.prototype);xh.isPureReactComponent=!0;var Kp=Array.isArray,Oy=Object.prototype.hasOwnProperty,Eh={current:null},jy={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Oy.call(e,r)&&!jy.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Qo,type:t,key:s,ref:o,props:i,_owner:Eh.current}}function hE(t,e){return{$$typeof:Qo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ih(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qo}function fE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qp=/\/+/g;function uu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fE(""+t.key):e.toString(36)}function Za(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qo:case tE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+uu(o,0):r,Kp(i)?(n="",t!=null&&(n=t.replace(Qp,"$&/")+"/"),Za(i,e,n,"",function(h){return h})):i!=null&&(Ih(i)&&(i=hE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Qp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Kp(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+uu(s,l);o+=Za(s,e,n,c,i)}else if(c=dE(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+uu(s,l++),o+=Za(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Aa(t,e,n){if(t==null)return t;var r=[],i=0;return Za(t,r,"","",function(s){return e.call(n,s,i++)}),r}function pE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},el={transition:null},mE={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:el,ReactCurrentOwner:Eh};function Ly(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Aa,forEach:function(t,e,n){Aa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Aa(t,function(){e++}),e},toArray:function(t){return Aa(t,function(e){return e})||[]},only:function(t){if(!Ih(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=ps;se.Fragment=nE;se.Profiler=iE;se.PureComponent=_h;se.StrictMode=rE;se.Suspense=lE;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mE;se.act=Ly;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ry({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Eh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Oy.call(e,c)&&!jy.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Qo,type:t.type,key:i,ref:s,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:oE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sE,_context:t},t.Consumer=t};se.createElement=Dy;se.createFactory=function(t){var e=Dy.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:aE,render:t}};se.isValidElement=Ih;se.lazy=function(t){return{$$typeof:uE,_payload:{_status:-1,_result:t},_init:pE}};se.memo=function(t,e){return{$$typeof:cE,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=el.transition;el.transition={};try{t()}finally{el.transition=e}};se.unstable_act=Ly;se.useCallback=function(t,e){return kt.current.useCallback(t,e)};se.useContext=function(t){return kt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};se.useEffect=function(t,e){return kt.current.useEffect(t,e)};se.useId=function(){return kt.current.useId()};se.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return kt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};se.useRef=function(t){return kt.current.useRef(t)};se.useState=function(t){return kt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return kt.current.useTransition()};se.version="18.3.1";Ay.exports=se;var R=Ay.exports;const Yo=eE(R),gE=Zx({__proto__:null,default:Yo},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE=R,vE=Symbol.for("react.element"),wE=Symbol.for("react.fragment"),_E=Object.prototype.hasOwnProperty,xE=yE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EE={key:!0,ref:!0,__self:!0,__source:!0};function My(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_E.call(e,r)&&!EE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:vE,type:t,key:s,ref:o,props:i,_owner:xE.current}}fc.Fragment=wE;fc.jsx=My;fc.jsxs=My;ky.exports=fc;var u=ky.exports,Zu={},Fy={exports:{}},Gt={},Vy={exports:{}},Uy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,J){var X=W.length;W.push(J);e:for(;0<X;){var pe=X-1>>>1,he=W[pe];if(0<i(he,J))W[pe]=J,W[X]=he,X=pe;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var J=W[0],X=W.pop();if(X!==J){W[0]=X;e:for(var pe=0,he=W.length,Te=he>>>1;pe<Te;){var dt=2*(pe+1)-1,Qt=W[dt],K=dt+1,Yt=W[K];if(0>i(Qt,X))K<he&&0>i(Yt,Qt)?(W[pe]=Yt,W[K]=X,pe=K):(W[pe]=Qt,W[dt]=X,pe=dt);else if(K<he&&0>i(Yt,X))W[pe]=Yt,W[K]=X,pe=K;else break e}}return J}function i(W,J){var X=W.sortIndex-J.sortIndex;return X!==0?X:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,v=3,C=!1,b=!1,k=!1,O=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(W){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=W)r(h),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(h)}}function j(W){if(k=!1,I(W),!b)if(n(c)!==null)b=!0,_i(L);else{var J=n(h);J!==null&&ln(j,J.startTime-W)}}function L(W,J){b=!1,k&&(k=!1,E(y),y=-1),C=!0;var X=v;try{for(I(J),m=n(c);m!==null&&(!(m.expirationTime>J)||W&&!A());){var pe=m.callback;if(typeof pe=="function"){m.callback=null,v=m.priorityLevel;var he=pe(m.expirationTime<=J);J=t.unstable_now(),typeof he=="function"?m.callback=he:m===n(c)&&r(c),I(J)}else r(c);m=n(c)}if(m!==null)var Te=!0;else{var dt=n(h);dt!==null&&ln(j,dt.startTime-J),Te=!1}return Te}finally{m=null,v=X,C=!1}}var F=!1,_=null,y=-1,x=5,S=-1;function A(){return!(t.unstable_now()-S<x)}function N(){if(_!==null){var W=t.unstable_now();S=W;var J=!0;try{J=_(!0,W)}finally{J?T():(F=!1,_=null)}}else F=!1}var T;if(typeof w=="function")T=function(){w(N)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Ft=Qe.port2;Qe.port1.onmessage=N,T=function(){Ft.postMessage(null)}}else T=function(){O(N,0)};function _i(W){_=W,F||(F=!0,T())}function ln(W,J){y=O(function(){W(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){b||C||(b=!0,_i(L))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(W){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var X=v;v=J;try{return W()}finally{v=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var X=v;v=W;try{return J()}finally{v=X}},t.unstable_scheduleCallback=function(W,J,X){var pe=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?pe+X:pe):X=pe,W){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=X+he,W={id:p++,callback:J,priorityLevel:W,startTime:X,expirationTime:he,sortIndex:-1},X>pe?(W.sortIndex=X,e(h,W),n(c)===null&&W===n(h)&&(k?(E(y),y=-1):k=!0,ln(j,X-pe))):(W.sortIndex=he,e(c,W),b||C||(b=!0,_i(L))),W},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(W){var J=v;return function(){var X=v;v=J;try{return W.apply(this,arguments)}finally{v=X}}}})(Uy);Vy.exports=Uy;var IE=Vy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE=R,Ht=IE;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var By=new Set,vo={};function mi(t,e){ts(t,e),ts(t+"Capture",e)}function ts(t,e){for(vo[t]=e,t=0;t<e.length;t++)By.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ed=Object.prototype.hasOwnProperty,TE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yp={},Jp={};function CE(t){return ed.call(Jp,t)?!0:ed.call(Yp,t)?!1:TE.test(t)?Jp[t]=!0:(Yp[t]=!0,!1)}function kE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AE(t,e,n,r){if(e===null||typeof e>"u"||kE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sh=/[\-:]([a-z])/g;function Th(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sh,Th);ut[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sh,Th);ut[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sh,Th);ut[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ch(t,e,n,r){var i=ut.hasOwnProperty(e)?ut[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AE(e,n,i,r)&&(n=null),r||i===null?CE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sr=SE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ba=Symbol.for("react.element"),Pi=Symbol.for("react.portal"),Oi=Symbol.for("react.fragment"),kh=Symbol.for("react.strict_mode"),td=Symbol.for("react.profiler"),zy=Symbol.for("react.provider"),$y=Symbol.for("react.context"),Ah=Symbol.for("react.forward_ref"),nd=Symbol.for("react.suspense"),rd=Symbol.for("react.suspense_list"),bh=Symbol.for("react.memo"),hr=Symbol.for("react.lazy"),Wy=Symbol.for("react.offscreen"),Xp=Symbol.iterator;function Vs(t){return t===null||typeof t!="object"?null:(t=Xp&&t[Xp]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,du;function Ys(t){if(du===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);du=e&&e[1]||""}return`
`+du+t}var hu=!1;function fu(t,e){if(!t||hu)return"";hu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{hu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ys(t):""}function bE(t){switch(t.tag){case 5:return Ys(t.type);case 16:return Ys("Lazy");case 13:return Ys("Suspense");case 19:return Ys("SuspenseList");case 0:case 2:case 15:return t=fu(t.type,!1),t;case 11:return t=fu(t.type.render,!1),t;case 1:return t=fu(t.type,!0),t;default:return""}}function id(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oi:return"Fragment";case Pi:return"Portal";case td:return"Profiler";case kh:return"StrictMode";case nd:return"Suspense";case rd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $y:return(t.displayName||"Context")+".Consumer";case zy:return(t._context.displayName||"Context")+".Provider";case Ah:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bh:return e=t.displayName||null,e!==null?e:id(t.type)||"Memo";case hr:e=t._payload,t=t._init;try{return id(t(e))}catch{}}return null}function RE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return id(e);case 8:return e===kh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NE(t){var e=Hy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ra(t){t._valueTracker||(t._valueTracker=NE(t))}function Gy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Hy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Il(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sd(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Or(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qy(t,e){e=e.checked,e!=null&&Ch(t,"checked",e,!1)}function od(t,e){qy(t,e);var n=Or(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ad(t,e.type,n):e.hasOwnProperty("defaultValue")&&ad(t,e.type,Or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function em(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ad(t,e,n){(e!=="number"||Il(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Js=Array.isArray;function Wi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Or(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ld(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Js(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Or(n)}}function Ky(t,e){var n=Or(e.value),r=Or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Qy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Qy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Na,Yy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Na=Na||document.createElement("div"),Na.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Na.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var no={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PE=["Webkit","ms","Moz","O"];Object.keys(no).forEach(function(t){PE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),no[e]=no[t]})});function Jy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||no.hasOwnProperty(t)&&no[t]?(""+e).trim():e+"px"}function Xy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var OE=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ud(t,e){if(e){if(OE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function dd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hd=null;function Rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fd=null,Hi=null,Gi=null;function rm(t){if(t=Zo(t)){if(typeof fd!="function")throw Error(U(280));var e=t.stateNode;e&&(e=vc(e),fd(t.stateNode,t.type,e))}}function Zy(t){Hi?Gi?Gi.push(t):Gi=[t]:Hi=t}function ev(){if(Hi){var t=Hi,e=Gi;if(Gi=Hi=null,rm(t),e)for(t=0;t<e.length;t++)rm(e[t])}}function tv(t,e){return t(e)}function nv(){}var pu=!1;function rv(t,e,n){if(pu)return t(e,n);pu=!0;try{return tv(t,e,n)}finally{pu=!1,(Hi!==null||Gi!==null)&&(nv(),ev())}}function _o(t,e){var n=t.stateNode;if(n===null)return null;var r=vc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var pd=!1;if(Zn)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){pd=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{pd=!1}function jE(t,e,n,r,i,s,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var ro=!1,Sl=null,Tl=!1,md=null,DE={onError:function(t){ro=!0,Sl=t}};function LE(t,e,n,r,i,s,o,l,c){ro=!1,Sl=null,jE.apply(DE,arguments)}function ME(t,e,n,r,i,s,o,l,c){if(LE.apply(this,arguments),ro){if(ro){var h=Sl;ro=!1,Sl=null}else throw Error(U(198));Tl||(Tl=!0,md=h)}}function gi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function im(t){if(gi(t)!==t)throw Error(U(188))}function FE(t){var e=t.alternate;if(!e){if(e=gi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return im(i),t;if(s===r)return im(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function sv(t){return t=FE(t),t!==null?ov(t):null}function ov(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ov(t);if(e!==null)return e;t=t.sibling}return null}var av=Ht.unstable_scheduleCallback,sm=Ht.unstable_cancelCallback,VE=Ht.unstable_shouldYield,UE=Ht.unstable_requestPaint,Ue=Ht.unstable_now,BE=Ht.unstable_getCurrentPriorityLevel,Nh=Ht.unstable_ImmediatePriority,lv=Ht.unstable_UserBlockingPriority,Cl=Ht.unstable_NormalPriority,zE=Ht.unstable_LowPriority,cv=Ht.unstable_IdlePriority,pc=null,Nn=null;function $E(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(pc,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:GE,WE=Math.log,HE=Math.LN2;function GE(t){return t>>>=0,t===0?32:31-(WE(t)/HE|0)|0}var Pa=64,Oa=4194304;function Xs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Xs(l):(s&=o,s!==0&&(r=Xs(s)))}else o=n&~i,o!==0?r=Xs(o):s!==0&&(r=Xs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xn(e),i=1<<n,r|=t[n],e&=~i;return r}function qE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-xn(s),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=qE(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uv(){var t=Pa;return Pa<<=1,!(Pa&4194240)&&(Pa=64),t}function mu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=n}function QE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ph(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ye=0;function dv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hv,Oh,fv,pv,mv,yd=!1,ja=[],xr=null,Er=null,Ir=null,xo=new Map,Eo=new Map,pr=[],YE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function om(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eo.delete(e.pointerId)}}function Bs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zo(e),e!==null&&Oh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function JE(t,e,n,r,i){switch(e){case"focusin":return xr=Bs(xr,t,e,n,r,i),!0;case"dragenter":return Er=Bs(Er,t,e,n,r,i),!0;case"mouseover":return Ir=Bs(Ir,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xo.set(s,Bs(xo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Eo.set(s,Bs(Eo.get(s)||null,t,e,n,r,i)),!0}return!1}function gv(t){var e=qr(t.target);if(e!==null){var n=gi(e);if(n!==null){if(e=n.tag,e===13){if(e=iv(n),e!==null){t.blockedOn=e,mv(t.priority,function(){fv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hd=r,n.target.dispatchEvent(r),hd=null}else return e=Zo(n),e!==null&&Oh(e),t.blockedOn=n,!1;e.shift()}return!0}function am(t,e,n){tl(t)&&n.delete(e)}function XE(){yd=!1,xr!==null&&tl(xr)&&(xr=null),Er!==null&&tl(Er)&&(Er=null),Ir!==null&&tl(Ir)&&(Ir=null),xo.forEach(am),Eo.forEach(am)}function zs(t,e){t.blockedOn===e&&(t.blockedOn=null,yd||(yd=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,XE)))}function Io(t){function e(i){return zs(i,t)}if(0<ja.length){zs(ja[0],t);for(var n=1;n<ja.length;n++){var r=ja[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&zs(xr,t),Er!==null&&zs(Er,t),Ir!==null&&zs(Ir,t),xo.forEach(e),Eo.forEach(e),n=0;n<pr.length;n++)r=pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)gv(n),n.blockedOn===null&&pr.shift()}var qi=sr.ReactCurrentBatchConfig,Al=!0;function ZE(t,e,n,r){var i=ye,s=qi.transition;qi.transition=null;try{ye=1,jh(t,e,n,r)}finally{ye=i,qi.transition=s}}function eI(t,e,n,r){var i=ye,s=qi.transition;qi.transition=null;try{ye=4,jh(t,e,n,r)}finally{ye=i,qi.transition=s}}function jh(t,e,n,r){if(Al){var i=vd(t,e,n,r);if(i===null)Tu(t,e,r,bl,n),om(t,r);else if(JE(i,t,e,n,r))r.stopPropagation();else if(om(t,r),e&4&&-1<YE.indexOf(t)){for(;i!==null;){var s=Zo(i);if(s!==null&&hv(s),s=vd(t,e,n,r),s===null&&Tu(t,e,r,bl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tu(t,e,r,null,n)}}var bl=null;function vd(t,e,n,r){if(bl=null,t=Rh(r),t=qr(t),t!==null)if(e=gi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bl=t,null}function yv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BE()){case Nh:return 1;case lv:return 4;case Cl:case zE:return 16;case cv:return 536870912;default:return 16}default:return 16}}var vr=null,Dh=null,nl=null;function vv(){if(nl)return nl;var t,e=Dh,n=e.length,r,i="value"in vr?vr.value:vr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return nl=i.slice(t,1<r?1-r:void 0)}function rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Da(){return!0}function lm(){return!1}function qt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Da:lm,this.isPropagationStopped=lm,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Da)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Da)},persist:function(){},isPersistent:Da}),e}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lh=qt(ms),Xo=Ne({},ms,{view:0,detail:0}),tI=qt(Xo),gu,yu,$s,mc=Ne({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$s&&($s&&t.type==="mousemove"?(gu=t.screenX-$s.screenX,yu=t.screenY-$s.screenY):yu=gu=0,$s=t),gu)},movementY:function(t){return"movementY"in t?t.movementY:yu}}),cm=qt(mc),nI=Ne({},mc,{dataTransfer:0}),rI=qt(nI),iI=Ne({},Xo,{relatedTarget:0}),vu=qt(iI),sI=Ne({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),oI=qt(sI),aI=Ne({},ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lI=qt(aI),cI=Ne({},ms,{data:0}),um=qt(cI),uI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hI[t])?!!e[t]:!1}function Mh(){return fI}var pI=Ne({},Xo,{key:function(t){if(t.key){var e=uI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mh,charCode:function(t){return t.type==="keypress"?rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mI=qt(pI),gI=Ne({},mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=qt(gI),yI=Ne({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mh}),vI=qt(yI),wI=Ne({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),_I=qt(wI),xI=Ne({},mc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EI=qt(xI),II=[9,13,27,32],Fh=Zn&&"CompositionEvent"in window,io=null;Zn&&"documentMode"in document&&(io=document.documentMode);var SI=Zn&&"TextEvent"in window&&!io,wv=Zn&&(!Fh||io&&8<io&&11>=io),hm=" ",fm=!1;function _v(t,e){switch(t){case"keyup":return II.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function TI(t,e){switch(t){case"compositionend":return xv(e);case"keypress":return e.which!==32?null:(fm=!0,hm);case"textInput":return t=e.data,t===hm&&fm?null:t;default:return null}}function CI(t,e){if(ji)return t==="compositionend"||!Fh&&_v(t,e)?(t=vv(),nl=Dh=vr=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wv&&e.locale!=="ko"?null:e.data;default:return null}}var kI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kI[t.type]:e==="textarea"}function Ev(t,e,n,r){Zy(r),e=Rl(e,"onChange"),0<e.length&&(n=new Lh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var so=null,So=null;function AI(t){Ov(t,0)}function gc(t){var e=Mi(t);if(Gy(e))return t}function bI(t,e){if(t==="change")return e}var Iv=!1;if(Zn){var wu;if(Zn){var _u="oninput"in document;if(!_u){var mm=document.createElement("div");mm.setAttribute("oninput","return;"),_u=typeof mm.oninput=="function"}wu=_u}else wu=!1;Iv=wu&&(!document.documentMode||9<document.documentMode)}function gm(){so&&(so.detachEvent("onpropertychange",Sv),So=so=null)}function Sv(t){if(t.propertyName==="value"&&gc(So)){var e=[];Ev(e,So,t,Rh(t)),rv(AI,e)}}function RI(t,e,n){t==="focusin"?(gm(),so=e,So=n,so.attachEvent("onpropertychange",Sv)):t==="focusout"&&gm()}function NI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gc(So)}function PI(t,e){if(t==="click")return gc(e)}function OI(t,e){if(t==="input"||t==="change")return gc(e)}function jI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:jI;function To(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ed.call(e,i)||!Sn(t[i],e[i]))return!1}return!0}function ym(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vm(t,e){var n=ym(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ym(n)}}function Tv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Tv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Cv(){for(var t=window,e=Il();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Il(t.document)}return e}function Vh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DI(t){var e=Cv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Tv(n.ownerDocument.documentElement,n)){if(r!==null&&Vh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=vm(n,s);var o=vm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LI=Zn&&"documentMode"in document&&11>=document.documentMode,Di=null,wd=null,oo=null,_d=!1;function wm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_d||Di==null||Di!==Il(r)||(r=Di,"selectionStart"in r&&Vh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oo&&To(oo,r)||(oo=r,r=Rl(wd,"onSelect"),0<r.length&&(e=new Lh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Di)))}function La(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Li={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionend:La("Transition","TransitionEnd")},xu={},kv={};Zn&&(kv=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function yc(t){if(xu[t])return xu[t];if(!Li[t])return t;var e=Li[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kv)return xu[t]=e[n];return t}var Av=yc("animationend"),bv=yc("animationiteration"),Rv=yc("animationstart"),Nv=yc("transitionend"),Pv=new Map,_m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,e){Pv.set(t,e),mi(e,[t])}for(var Eu=0;Eu<_m.length;Eu++){var Iu=_m[Eu],MI=Iu.toLowerCase(),FI=Iu[0].toUpperCase()+Iu.slice(1);Fr(MI,"on"+FI)}Fr(Av,"onAnimationEnd");Fr(bv,"onAnimationIteration");Fr(Rv,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(Nv,"onTransitionEnd");ts("onMouseEnter",["mouseout","mouseover"]);ts("onMouseLeave",["mouseout","mouseover"]);ts("onPointerEnter",["pointerout","pointerover"]);ts("onPointerLeave",["pointerout","pointerover"]);mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zs));function xm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ME(r,e,void 0,t),t.currentTarget=null}function Ov(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;xm(i,l,h),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;xm(i,l,h),s=c}}}if(Tl)throw t=md,Tl=!1,md=null,t}function Ie(t,e){var n=e[Td];n===void 0&&(n=e[Td]=new Set);var r=t+"__bubble";n.has(r)||(jv(e,t,2,!1),n.add(r))}function Su(t,e,n){var r=0;e&&(r|=4),jv(n,t,r,e)}var Ma="_reactListening"+Math.random().toString(36).slice(2);function Co(t){if(!t[Ma]){t[Ma]=!0,By.forEach(function(n){n!=="selectionchange"&&(VI.has(n)||Su(n,!1,t),Su(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ma]||(e[Ma]=!0,Su("selectionchange",!1,e))}}function jv(t,e,n,r){switch(yv(e)){case 1:var i=ZE;break;case 4:i=eI;break;default:i=jh}n=i.bind(null,e,n,t),i=void 0,!pd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=qr(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}rv(function(){var h=s,p=Rh(n),m=[];e:{var v=Pv.get(t);if(v!==void 0){var C=Lh,b=t;switch(t){case"keypress":if(rl(n)===0)break e;case"keydown":case"keyup":C=mI;break;case"focusin":b="focus",C=vu;break;case"focusout":b="blur",C=vu;break;case"beforeblur":case"afterblur":C=vu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=rI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=vI;break;case Av:case bv:case Rv:C=oI;break;case Nv:C=_I;break;case"scroll":C=tI;break;case"wheel":C=EI;break;case"copy":case"cut":case"paste":C=lI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=dm}var k=(e&4)!==0,O=!k&&t==="scroll",E=k?v!==null?v+"Capture":null:v;k=[];for(var w=h,I;w!==null;){I=w;var j=I.stateNode;if(I.tag===5&&j!==null&&(I=j,E!==null&&(j=_o(w,E),j!=null&&k.push(ko(w,j,I)))),O)break;w=w.return}0<k.length&&(v=new C(v,b,null,n,p),m.push({event:v,listeners:k}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",v&&n!==hd&&(b=n.relatedTarget||n.fromElement)&&(qr(b)||b[er]))break e;if((C||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,C?(b=n.relatedTarget||n.toElement,C=h,b=b?qr(b):null,b!==null&&(O=gi(b),b!==O||b.tag!==5&&b.tag!==6)&&(b=null)):(C=null,b=h),C!==b)){if(k=cm,j="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(k=dm,j="onPointerLeave",E="onPointerEnter",w="pointer"),O=C==null?v:Mi(C),I=b==null?v:Mi(b),v=new k(j,w+"leave",C,n,p),v.target=O,v.relatedTarget=I,j=null,qr(p)===h&&(k=new k(E,w+"enter",b,n,p),k.target=I,k.relatedTarget=O,j=k),O=j,C&&b)t:{for(k=C,E=b,w=0,I=k;I;I=Ri(I))w++;for(I=0,j=E;j;j=Ri(j))I++;for(;0<w-I;)k=Ri(k),w--;for(;0<I-w;)E=Ri(E),I--;for(;w--;){if(k===E||E!==null&&k===E.alternate)break t;k=Ri(k),E=Ri(E)}k=null}else k=null;C!==null&&Em(m,v,C,k,!1),b!==null&&O!==null&&Em(m,O,b,k,!0)}}e:{if(v=h?Mi(h):window,C=v.nodeName&&v.nodeName.toLowerCase(),C==="select"||C==="input"&&v.type==="file")var L=bI;else if(pm(v))if(Iv)L=OI;else{L=NI;var F=RI}else(C=v.nodeName)&&C.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(L=PI);if(L&&(L=L(t,h))){Ev(m,L,n,p);break e}F&&F(t,v,h),t==="focusout"&&(F=v._wrapperState)&&F.controlled&&v.type==="number"&&ad(v,"number",v.value)}switch(F=h?Mi(h):window,t){case"focusin":(pm(F)||F.contentEditable==="true")&&(Di=F,wd=h,oo=null);break;case"focusout":oo=wd=Di=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,wm(m,n,p);break;case"selectionchange":if(LI)break;case"keydown":case"keyup":wm(m,n,p)}var _;if(Fh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ji?_v(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(wv&&n.locale!=="ko"&&(ji||y!=="onCompositionStart"?y==="onCompositionEnd"&&ji&&(_=vv()):(vr=p,Dh="value"in vr?vr.value:vr.textContent,ji=!0)),F=Rl(h,y),0<F.length&&(y=new um(y,t,null,n,p),m.push({event:y,listeners:F}),_?y.data=_:(_=xv(n),_!==null&&(y.data=_)))),(_=SI?TI(t,n):CI(t,n))&&(h=Rl(h,"onBeforeInput"),0<h.length&&(p=new um("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=_))}Ov(m,e)})}function ko(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_o(t,n),s!=null&&r.unshift(ko(t,s,i)),s=_o(t,e),s!=null&&r.push(ko(t,s,i))),t=t.return}return r}function Ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Em(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,i?(c=_o(n,s),c!=null&&o.unshift(ko(n,c,l))):i||(c=_o(n,s),c!=null&&o.push(ko(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var UI=/\r\n?/g,BI=/\u0000|\uFFFD/g;function Im(t){return(typeof t=="string"?t:""+t).replace(UI,`
`).replace(BI,"")}function Fa(t,e,n){if(e=Im(e),Im(t)!==e&&n)throw Error(U(425))}function Nl(){}var xd=null,Ed=null;function Id(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sd=typeof setTimeout=="function"?setTimeout:void 0,zI=typeof clearTimeout=="function"?clearTimeout:void 0,Sm=typeof Promise=="function"?Promise:void 0,$I=typeof queueMicrotask=="function"?queueMicrotask:typeof Sm<"u"?function(t){return Sm.resolve(null).then(t).catch(WI)}:Sd;function WI(t){setTimeout(function(){throw t})}function Cu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Io(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Io(e)}function Sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gs=Math.random().toString(36).slice(2),bn="__reactFiber$"+gs,Ao="__reactProps$"+gs,er="__reactContainer$"+gs,Td="__reactEvents$"+gs,HI="__reactListeners$"+gs,GI="__reactHandles$"+gs;function qr(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tm(t);t!==null;){if(n=t[bn])return n;t=Tm(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[bn]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function vc(t){return t[Ao]||null}var Cd=[],Fi=-1;function Vr(t){return{current:t}}function Se(t){0>Fi||(t.current=Cd[Fi],Cd[Fi]=null,Fi--)}function _e(t,e){Fi++,Cd[Fi]=t.current,t.current=e}var jr={},It=Vr(jr),Pt=Vr(!1),ii=jr;function ns(t,e){var n=t.type.contextTypes;if(!n)return jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ot(t){return t=t.childContextTypes,t!=null}function Pl(){Se(Pt),Se(It)}function Cm(t,e,n){if(It.current!==jr)throw Error(U(168));_e(It,e),_e(Pt,n)}function Dv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,RE(t)||"Unknown",i));return Ne({},n,r)}function Ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jr,ii=It.current,_e(It,t),_e(Pt,Pt.current),!0}function km(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Dv(t,e,ii),r.__reactInternalMemoizedMergedChildContext=t,Se(Pt),Se(It),_e(It,t)):Se(Pt),_e(Pt,n)}var zn=null,wc=!1,ku=!1;function Lv(t){zn===null?zn=[t]:zn.push(t)}function qI(t){wc=!0,Lv(t)}function Ur(){if(!ku&&zn!==null){ku=!0;var t=0,e=ye;try{var n=zn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,wc=!1}catch(i){throw zn!==null&&(zn=zn.slice(t+1)),av(Nh,Ur),i}finally{ye=e,ku=!1}}return null}var Vi=[],Ui=0,jl=null,Dl=0,Zt=[],en=0,si=null,Hn=1,Gn="";function Wr(t,e){Vi[Ui++]=Dl,Vi[Ui++]=jl,jl=t,Dl=e}function Mv(t,e,n){Zt[en++]=Hn,Zt[en++]=Gn,Zt[en++]=si,si=t;var r=Hn;t=Gn;var i=32-xn(r)-1;r&=~(1<<i),n+=1;var s=32-xn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Hn=1<<32-xn(e)+i|n<<i|r,Gn=s+t}else Hn=1<<s|n<<i|r,Gn=t}function Uh(t){t.return!==null&&(Wr(t,1),Mv(t,1,0))}function Bh(t){for(;t===jl;)jl=Vi[--Ui],Vi[Ui]=null,Dl=Vi[--Ui],Vi[Ui]=null;for(;t===si;)si=Zt[--en],Zt[en]=null,Gn=Zt[--en],Zt[en]=null,Hn=Zt[--en],Zt[en]=null}var $t=null,zt=null,ke=!1,yn=null;function Fv(t,e){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Am(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,zt=Sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=si!==null?{id:Hn,overflow:Gn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,zt=null,!0):!1;default:return!1}}function kd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ad(t){if(ke){var e=zt;if(e){var n=e;if(!Am(t,e)){if(kd(t))throw Error(U(418));e=Sr(n.nextSibling);var r=$t;e&&Am(t,e)?Fv(r,n):(t.flags=t.flags&-4097|2,ke=!1,$t=t)}}else{if(kd(t))throw Error(U(418));t.flags=t.flags&-4097|2,ke=!1,$t=t}}}function bm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function Va(t){if(t!==$t)return!1;if(!ke)return bm(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Id(t.type,t.memoizedProps)),e&&(e=zt)){if(kd(t))throw Vv(),Error(U(418));for(;e;)Fv(t,e),e=Sr(e.nextSibling)}if(bm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=Sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=$t?Sr(t.stateNode.nextSibling):null;return!0}function Vv(){for(var t=zt;t;)t=Sr(t.nextSibling)}function rs(){zt=$t=null,ke=!1}function zh(t){yn===null?yn=[t]:yn.push(t)}var KI=sr.ReactCurrentBatchConfig;function Ws(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ua(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rm(t){var e=t._init;return e(t._payload)}function Uv(t){function e(E,w){if(t){var I=E.deletions;I===null?(E.deletions=[w],E.flags|=16):I.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function i(E,w){return E=Ar(E,w),E.index=0,E.sibling=null,E}function s(E,w,I){return E.index=I,t?(I=E.alternate,I!==null?(I=I.index,I<w?(E.flags|=2,w):I):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,w,I,j){return w===null||w.tag!==6?(w=ju(I,E.mode,j),w.return=E,w):(w=i(w,I),w.return=E,w)}function c(E,w,I,j){var L=I.type;return L===Oi?p(E,w,I.props.children,j,I.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===hr&&Rm(L)===w.type)?(j=i(w,I.props),j.ref=Ws(E,w,I),j.return=E,j):(j=ul(I.type,I.key,I.props,null,E.mode,j),j.ref=Ws(E,w,I),j.return=E,j)}function h(E,w,I,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=Du(I,E.mode,j),w.return=E,w):(w=i(w,I.children||[]),w.return=E,w)}function p(E,w,I,j,L){return w===null||w.tag!==7?(w=ei(I,E.mode,j,L),w.return=E,w):(w=i(w,I),w.return=E,w)}function m(E,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ju(""+w,E.mode,I),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ba:return I=ul(w.type,w.key,w.props,null,E.mode,I),I.ref=Ws(E,null,w),I.return=E,I;case Pi:return w=Du(w,E.mode,I),w.return=E,w;case hr:var j=w._init;return m(E,j(w._payload),I)}if(Js(w)||Vs(w))return w=ei(w,E.mode,I,null),w.return=E,w;Ua(E,w)}return null}function v(E,w,I,j){var L=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return L!==null?null:l(E,w,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ba:return I.key===L?c(E,w,I,j):null;case Pi:return I.key===L?h(E,w,I,j):null;case hr:return L=I._init,v(E,w,L(I._payload),j)}if(Js(I)||Vs(I))return L!==null?null:p(E,w,I,j,null);Ua(E,I)}return null}function C(E,w,I,j,L){if(typeof j=="string"&&j!==""||typeof j=="number")return E=E.get(I)||null,l(w,E,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ba:return E=E.get(j.key===null?I:j.key)||null,c(w,E,j,L);case Pi:return E=E.get(j.key===null?I:j.key)||null,h(w,E,j,L);case hr:var F=j._init;return C(E,w,I,F(j._payload),L)}if(Js(j)||Vs(j))return E=E.get(I)||null,p(w,E,j,L,null);Ua(w,j)}return null}function b(E,w,I,j){for(var L=null,F=null,_=w,y=w=0,x=null;_!==null&&y<I.length;y++){_.index>y?(x=_,_=null):x=_.sibling;var S=v(E,_,I[y],j);if(S===null){_===null&&(_=x);break}t&&_&&S.alternate===null&&e(E,_),w=s(S,w,y),F===null?L=S:F.sibling=S,F=S,_=x}if(y===I.length)return n(E,_),ke&&Wr(E,y),L;if(_===null){for(;y<I.length;y++)_=m(E,I[y],j),_!==null&&(w=s(_,w,y),F===null?L=_:F.sibling=_,F=_);return ke&&Wr(E,y),L}for(_=r(E,_);y<I.length;y++)x=C(_,E,y,I[y],j),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?y:x.key),w=s(x,w,y),F===null?L=x:F.sibling=x,F=x);return t&&_.forEach(function(A){return e(E,A)}),ke&&Wr(E,y),L}function k(E,w,I,j){var L=Vs(I);if(typeof L!="function")throw Error(U(150));if(I=L.call(I),I==null)throw Error(U(151));for(var F=L=null,_=w,y=w=0,x=null,S=I.next();_!==null&&!S.done;y++,S=I.next()){_.index>y?(x=_,_=null):x=_.sibling;var A=v(E,_,S.value,j);if(A===null){_===null&&(_=x);break}t&&_&&A.alternate===null&&e(E,_),w=s(A,w,y),F===null?L=A:F.sibling=A,F=A,_=x}if(S.done)return n(E,_),ke&&Wr(E,y),L;if(_===null){for(;!S.done;y++,S=I.next())S=m(E,S.value,j),S!==null&&(w=s(S,w,y),F===null?L=S:F.sibling=S,F=S);return ke&&Wr(E,y),L}for(_=r(E,_);!S.done;y++,S=I.next())S=C(_,E,y,S.value,j),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?y:S.key),w=s(S,w,y),F===null?L=S:F.sibling=S,F=S);return t&&_.forEach(function(N){return e(E,N)}),ke&&Wr(E,y),L}function O(E,w,I,j){if(typeof I=="object"&&I!==null&&I.type===Oi&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ba:e:{for(var L=I.key,F=w;F!==null;){if(F.key===L){if(L=I.type,L===Oi){if(F.tag===7){n(E,F.sibling),w=i(F,I.props.children),w.return=E,E=w;break e}}else if(F.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===hr&&Rm(L)===F.type){n(E,F.sibling),w=i(F,I.props),w.ref=Ws(E,F,I),w.return=E,E=w;break e}n(E,F);break}else e(E,F);F=F.sibling}I.type===Oi?(w=ei(I.props.children,E.mode,j,I.key),w.return=E,E=w):(j=ul(I.type,I.key,I.props,null,E.mode,j),j.ref=Ws(E,w,I),j.return=E,E=j)}return o(E);case Pi:e:{for(F=I.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){n(E,w.sibling),w=i(w,I.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Du(I,E.mode,j),w.return=E,E=w}return o(E);case hr:return F=I._init,O(E,w,F(I._payload),j)}if(Js(I))return b(E,w,I,j);if(Vs(I))return k(E,w,I,j);Ua(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(n(E,w.sibling),w=i(w,I),w.return=E,E=w):(n(E,w),w=ju(I,E.mode,j),w.return=E,E=w),o(E)):n(E,w)}return O}var is=Uv(!0),Bv=Uv(!1),Ll=Vr(null),Ml=null,Bi=null,$h=null;function Wh(){$h=Bi=Ml=null}function Hh(t){var e=Ll.current;Se(Ll),t._currentValue=e}function bd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ki(t,e){Ml=t,$h=Bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if($h!==t)if(t={context:t,memoizedValue:e,next:null},Bi===null){if(Ml===null)throw Error(U(308));Bi=t,Ml.dependencies={lanes:0,firstContext:t}}else Bi=Bi.next=t;return e}var Kr=null;function Gh(t){Kr===null?Kr=[t]:Kr.push(t)}function zv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Gh(e)):(n.next=i.next,i.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function qh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $v(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,tr(t,n)}return i=r.interleaved,i===null?(e.next=e,Gh(r)):(e.next=i.next,i.next=e),r.interleaved=e,tr(t,n)}function il(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ph(t,n)}}function Nm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fl(t,e,n,r){var i=t.updateQueue;fr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;o=0,p=h=c=null,l=s;do{var v=l.lane,C=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,k=l;switch(v=e,C=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){m=b.call(C,m,v);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,v=typeof b=="function"?b.call(C,m,v):b,v==null)break e;m=Ne({},m,v);break e;case 2:fr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else C={eventTime:C,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=C,c=m):p=p.next=C,o|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ai|=o,t.lanes=o,t.memoizedState=m}}function Pm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var ea={},Pn=Vr(ea),bo=Vr(ea),Ro=Vr(ea);function Qr(t){if(t===ea)throw Error(U(174));return t}function Kh(t,e){switch(_e(Ro,e),_e(bo,t),_e(Pn,ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cd(e,t)}Se(Pn),_e(Pn,e)}function ss(){Se(Pn),Se(bo),Se(Ro)}function Wv(t){Qr(Ro.current);var e=Qr(Pn.current),n=cd(e,t.type);e!==n&&(_e(bo,t),_e(Pn,n))}function Qh(t){bo.current===t&&(Se(Pn),Se(bo))}var be=Vr(0);function Vl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Au=[];function Yh(){for(var t=0;t<Au.length;t++)Au[t]._workInProgressVersionPrimary=null;Au.length=0}var sl=sr.ReactCurrentDispatcher,bu=sr.ReactCurrentBatchConfig,oi=0,Re=null,Ge=null,Xe=null,Ul=!1,ao=!1,No=0,QI=0;function gt(){throw Error(U(321))}function Jh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function Xh(t,e,n,r,i,s){if(oi=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sl.current=t===null||t.memoizedState===null?ZI:eS,t=n(r,i),ao){s=0;do{if(ao=!1,No=0,25<=s)throw Error(U(301));s+=1,Xe=Ge=null,e.updateQueue=null,sl.current=tS,t=n(r,i)}while(ao)}if(sl.current=Bl,e=Ge!==null&&Ge.next!==null,oi=0,Xe=Ge=Re=null,Ul=!1,e)throw Error(U(300));return t}function Zh(){var t=No!==0;return No=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Re.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function an(){if(Ge===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Xe===null?Re.memoizedState:Xe.next;if(e!==null)Xe=e,Ge=t;else{if(t===null)throw Error(U(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Xe===null?Re.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Po(t,e){return typeof e=="function"?e(t):e}function Ru(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ge,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,c=null,h=s;do{var p=h.lane;if((oi&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Re.lanes|=p,ai|=p}h=h.next}while(h!==null&&h!==s);c===null?o=r:c.next=l,Sn(r,e.memoizedState)||(Nt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Re.lanes|=s,ai|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nu(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Sn(s,e.memoizedState)||(Nt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Hv(){}function Gv(t,e){var n=Re,r=an(),i=e(),s=!Sn(r.memoizedState,i);if(s&&(r.memoizedState=i,Nt=!0),r=r.queue,ef(Qv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Oo(9,Kv.bind(null,n,r,i,e),void 0,null),et===null)throw Error(U(349));oi&30||qv(n,e,i)}return i}function qv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Kv(t,e,n,r){e.value=n,e.getSnapshot=r,Yv(e)&&Jv(t)}function Qv(t,e,n){return n(function(){Yv(e)&&Jv(t)})}function Yv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function Jv(t){var e=tr(t,1);e!==null&&En(e,t,1,-1)}function Om(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:t},e.queue=t,t=t.dispatch=XI.bind(null,Re,t),[e.memoizedState,t]}function Oo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Xv(){return an().memoizedState}function ol(t,e,n,r){var i=An();Re.flags|=t,i.memoizedState=Oo(1|e,n,void 0,r===void 0?null:r)}function _c(t,e,n,r){var i=an();r=r===void 0?null:r;var s=void 0;if(Ge!==null){var o=Ge.memoizedState;if(s=o.destroy,r!==null&&Jh(r,o.deps)){i.memoizedState=Oo(e,n,s,r);return}}Re.flags|=t,i.memoizedState=Oo(1|e,n,s,r)}function jm(t,e){return ol(8390656,8,t,e)}function ef(t,e){return _c(2048,8,t,e)}function Zv(t,e){return _c(4,2,t,e)}function e0(t,e){return _c(4,4,t,e)}function t0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function n0(t,e,n){return n=n!=null?n.concat([t]):null,_c(4,4,t0.bind(null,e,t),n)}function tf(){}function r0(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function i0(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function s0(t,e,n){return oi&21?(Sn(n,e)||(n=uv(),Re.lanes|=n,ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=n)}function YI(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=bu.transition;bu.transition={};try{t(!1),e()}finally{ye=n,bu.transition=r}}function o0(){return an().memoizedState}function JI(t,e,n){var r=kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},a0(t))l0(e,n);else if(n=zv(t,e,n,r),n!==null){var i=Ct();En(n,t,r,i),c0(n,e,r)}}function XI(t,e,n){var r=kr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(a0(t))l0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Sn(l,o)){var c=e.interleaved;c===null?(i.next=i,Gh(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=zv(t,e,i,r),n!==null&&(i=Ct(),En(n,t,r,i),c0(n,e,r))}}function a0(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function l0(t,e){ao=Ul=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function c0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ph(t,n)}}var Bl={readContext:on,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},ZI={readContext:on,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:jm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ol(4194308,4,t0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return ol(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=An();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JI.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:Om,useDebugValue:tf,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=Om(!1),e=t[0];return t=YI.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,i=An();if(ke){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),et===null)throw Error(U(349));oi&30||qv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,jm(Qv.bind(null,r,s,t),[t]),r.flags|=2048,Oo(9,Kv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=An(),e=et.identifierPrefix;if(ke){var n=Gn,r=Hn;n=(r&~(1<<32-xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=No++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eS={readContext:on,useCallback:r0,useContext:on,useEffect:ef,useImperativeHandle:n0,useInsertionEffect:Zv,useLayoutEffect:e0,useMemo:i0,useReducer:Ru,useRef:Xv,useState:function(){return Ru(Po)},useDebugValue:tf,useDeferredValue:function(t){var e=an();return s0(e,Ge.memoizedState,t)},useTransition:function(){var t=Ru(Po)[0],e=an().memoizedState;return[t,e]},useMutableSource:Hv,useSyncExternalStore:Gv,useId:o0,unstable_isNewReconciler:!1},tS={readContext:on,useCallback:r0,useContext:on,useEffect:ef,useImperativeHandle:n0,useInsertionEffect:Zv,useLayoutEffect:e0,useMemo:i0,useReducer:Nu,useRef:Xv,useState:function(){return Nu(Po)},useDebugValue:tf,useDeferredValue:function(t){var e=an();return Ge===null?e.memoizedState=t:s0(e,Ge.memoizedState,t)},useTransition:function(){var t=Nu(Po)[0],e=an().memoizedState;return[t,e]},useMutableSource:Hv,useSyncExternalStore:Gv,useId:o0,unstable_isNewReconciler:!1};function pn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xc={isMounted:function(t){return(t=t._reactInternals)?gi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=kr(t),s=Yn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Tr(t,s,i),e!==null&&(En(e,t,i,r),il(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=kr(t),s=Yn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Tr(t,s,i),e!==null&&(En(e,t,i,r),il(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=kr(t),i=Yn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Tr(t,i,r),e!==null&&(En(e,t,r,n),il(e,t,r))}};function Dm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!To(n,r)||!To(i,s):!0}function u0(t,e,n){var r=!1,i=jr,s=e.contextType;return typeof s=="object"&&s!==null?s=on(s):(i=Ot(e)?ii:It.current,r=e.contextTypes,s=(r=r!=null)?ns(t,i):jr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Lm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xc.enqueueReplaceState(e,e.state,null)}function Nd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},qh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=on(s):(s=Ot(e)?ii:It.current,i.context=ns(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xc.enqueueReplaceState(i,i.state,null),Fl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function os(t,e){try{var n="",r=e;do n+=bE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nS=typeof WeakMap=="function"?WeakMap:Map;function d0(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$l||($l=!0,zd=r),Pd(t,e)},n}function h0(t,e,n){n=Yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Pd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Pd(t,e),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Mm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=gS.bind(null,t,e,n),e.then(t,t))}function Fm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,Tr(n,e,1))),n.lanes|=1),t)}var rS=sr.ReactCurrentOwner,Nt=!1;function Tt(t,e,n,r){e.child=t===null?Bv(e,null,n,r):is(e,t.child,n,r)}function Um(t,e,n,r,i){n=n.render;var s=e.ref;return Ki(e,i),r=Xh(t,e,n,r,s,i),n=Zh(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nr(t,e,i)):(ke&&n&&Uh(e),e.flags|=1,Tt(t,e,r,i),e.child)}function Bm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!uf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,f0(t,e,s,r,i)):(t=ul(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:To,n(o,r)&&t.ref===e.ref)return nr(t,e,i)}return e.flags|=1,t=Ar(s,r),t.ref=e.ref,t.return=e,e.child=t}function f0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(To(s,r)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,nr(t,e,i)}return Od(t,e,n,r,i)}function p0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e($i,Bt),Bt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e($i,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e($i,Bt),Bt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_e($i,Bt),Bt|=r;return Tt(t,e,i,n),e.child}function m0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Od(t,e,n,r,i){var s=Ot(n)?ii:It.current;return s=ns(e,s),Ki(e,i),n=Xh(t,e,n,r,s,i),r=Zh(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nr(t,e,i)):(ke&&r&&Uh(e),e.flags|=1,Tt(t,e,n,i),e.child)}function zm(t,e,n,r,i){if(Ot(n)){var s=!0;Ol(e)}else s=!1;if(Ki(e,i),e.stateNode===null)al(t,e),u0(e,n,r),Nd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=on(h):(h=Ot(n)?ii:It.current,h=ns(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&Lm(e,o,r,h),fr=!1;var v=e.memoizedState;o.state=v,Fl(e,r,o,i),c=e.memoizedState,l!==r||v!==c||Pt.current||fr?(typeof p=="function"&&(Rd(e,n,p,r),c=e.memoizedState),(l=fr||Dm(e,n,l,r,v,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$v(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:pn(e.type,l),o.props=h,m=e.pendingProps,v=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=on(c):(c=Ot(n)?ii:It.current,c=ns(e,c));var C=n.getDerivedStateFromProps;(p=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||v!==c)&&Lm(e,o,r,c),fr=!1,v=e.memoizedState,o.state=v,Fl(e,r,o,i);var b=e.memoizedState;l!==m||v!==b||Pt.current||fr?(typeof C=="function"&&(Rd(e,n,C,r),b=e.memoizedState),(h=fr||Dm(e,n,h,r,v,b,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return jd(t,e,n,r,s,i)}function jd(t,e,n,r,i,s){m0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&km(e,n,!1),nr(t,e,s);r=e.stateNode,rS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=is(e,t.child,null,s),e.child=is(e,null,l,s)):Tt(t,e,l,s),e.memoizedState=r.state,i&&km(e,n,!0),e.child}function g0(t){var e=t.stateNode;e.pendingContext?Cm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cm(t,e.context,!1),Kh(t,e.containerInfo)}function $m(t,e,n,r,i){return rs(),zh(i),e.flags|=256,Tt(t,e,n,r),e.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Ld(t){return{baseLanes:t,cachePool:null,transitions:null}}function y0(t,e,n){var r=e.pendingProps,i=be.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_e(be,i&1),t===null)return Ad(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Sc(o,r,0,null),t=ei(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ld(n),e.memoizedState=Dd,t):nf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return iS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ar(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ar(l,s):(s=ei(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ld(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Dd,r}return s=t.child,t=s.sibling,r=Ar(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nf(t,e){return e=Sc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ba(t,e,n,r){return r!==null&&zh(r),is(e,t.child,null,n),t=nf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Pu(Error(U(422))),Ba(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Sc({mode:"visible",children:r.children},i,0,null),s=ei(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&is(e,t.child,null,o),e.child.memoizedState=Ld(o),e.memoizedState=Dd,s);if(!(e.mode&1))return Ba(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=Pu(s,r,void 0),Ba(t,e,o,r)}if(l=(o&t.childLanes)!==0,Nt||l){if(r=et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,tr(t,i),En(r,t,i,-1))}return cf(),r=Pu(Error(U(421))),Ba(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=yS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,zt=Sr(i.nextSibling),$t=e,ke=!0,yn=null,t!==null&&(Zt[en++]=Hn,Zt[en++]=Gn,Zt[en++]=si,Hn=t.id,Gn=t.overflow,si=e),e=nf(e,r.children),e.flags|=4096,e)}function Wm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bd(t.return,e,n)}function Ou(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function v0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Tt(t,e,r.children,n),r=be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wm(t,n,e);else if(t.tag===19)Wm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(be,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Vl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ou(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Vl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ou(e,!0,n,null,s);break;case"together":Ou(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function al(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sS(t,e,n){switch(e.tag){case 3:g0(e),rs();break;case 5:Wv(e);break;case 1:Ot(e.type)&&Ol(e);break;case 4:Kh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_e(Ll,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?y0(t,e,n):(_e(be,be.current&1),t=nr(t,e,n),t!==null?t.sibling:null);_e(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return v0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,p0(t,e,n)}return nr(t,e,n)}var w0,Md,_0,x0;w0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Md=function(){};_0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Qr(Pn.current);var s=null;switch(n){case"input":i=sd(t,i),r=sd(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=ld(t,i),r=ld(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nl)}ud(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(vo.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(vo.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ie("scroll",t),s||l===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};x0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hs(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oS(t,e,n){var r=e.pendingProps;switch(Bh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return Ot(e.type)&&Pl(),yt(e),null;case 3:return r=e.stateNode,ss(),Se(Pt),Se(It),Yh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Va(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yn!==null&&(Hd(yn),yn=null))),Md(t,e),yt(e),null;case 5:Qh(e);var i=Qr(Ro.current);if(n=e.type,t!==null&&e.stateNode!=null)_0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return yt(e),null}if(t=Qr(Pn.current),Va(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[bn]=e,r[Ao]=s,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<Zs.length;i++)Ie(Zs[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Zp(r,s),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ie("invalid",r);break;case"textarea":tm(r,s),Ie("invalid",r)}ud(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Fa(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Fa(r.textContent,l,t),i=["children",""+l]):vo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Ra(r),em(r,s,!0);break;case"textarea":Ra(r),nm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Nl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bn]=e,t[Ao]=r,w0(t,e,!1,!1),e.stateNode=t;e:{switch(o=dd(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zs.length;i++)Ie(Zs[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":Zp(t,r),i=sd(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":tm(t,r),i=ld(t,r),Ie("invalid",t);break;default:i=r}ud(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Xy(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Yy(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wo(t,c):typeof c=="number"&&wo(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(vo.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ie("scroll",t):c!=null&&Ch(t,s,c,o))}switch(n){case"input":Ra(t),em(t,r,!1);break;case"textarea":Ra(t),nm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Or(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Wi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Nl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)x0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Qr(Ro.current),Qr(Pn.current),Va(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(s=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:Fa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fa(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return yt(e),null;case 13:if(Se(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&zt!==null&&e.mode&1&&!(e.flags&128))Vv(),rs(),e.flags|=98560,s=!1;else if(s=Va(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[bn]=e}else rs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),s=!1}else yn!==null&&(Hd(yn),yn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?qe===0&&(qe=3):cf())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return ss(),Md(t,e),t===null&&Co(e.stateNode.containerInfo),yt(e),null;case 10:return Hh(e.type._context),yt(e),null;case 17:return Ot(e.type)&&Pl(),yt(e),null;case 19:if(Se(be),s=e.memoizedState,s===null)return yt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Hs(s,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vl(t),o!==null){for(e.flags|=128,Hs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(be,be.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ue()>as&&(e.flags|=128,r=!0,Hs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Vl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ke)return yt(e),null}else 2*Ue()-s.renderingStartTime>as&&n!==1073741824&&(e.flags|=128,r=!0,Hs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ue(),e.sibling=null,n=be.current,_e(be,r?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return lf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function aS(t,e){switch(Bh(e),e.tag){case 1:return Ot(e.type)&&Pl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ss(),Se(Pt),Se(It),Yh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qh(e),null;case 13:if(Se(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));rs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(be),null;case 4:return ss(),null;case 10:return Hh(e.type._context),null;case 22:case 23:return lf(),null;case 24:return null;default:return null}}var za=!1,_t=!1,lS=typeof WeakSet=="function"?WeakSet:Set,q=null;function zi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Fd(t,e,n){try{n()}catch(r){Le(t,e,r)}}var Hm=!1;function cS(t,e){if(xd=Al,t=Cv(),Vh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,v=null;t:for(;;){for(var C;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(C=m.firstChild)!==null;)v=m,m=C;for(;;){if(m===t)break t;if(v===n&&++h===i&&(l=o),v===s&&++p===r&&(c=o),(C=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=C}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ed={focusedElem:t,selectionRange:n},Al=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,O=b.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?k:pn(e.type,k),O);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(j){Le(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return b=Hm,Hm=!1,b}function lo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fd(e,n,s)}i=i.next}while(i!==r)}}function Ec(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function E0(t){var e=t.alternate;e!==null&&(t.alternate=null,E0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[Ao],delete e[Td],delete e[HI],delete e[GI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I0(t){return t.tag===5||t.tag===3||t.tag===4}function Gm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ud(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nl));else if(r!==4&&(t=t.child,t!==null))for(Ud(t,e,n),t=t.sibling;t!==null;)Ud(t,e,n),t=t.sibling}function Bd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bd(t,e,n),t=t.sibling;t!==null;)Bd(t,e,n),t=t.sibling}var st=null,mn=!1;function ur(t,e,n){for(n=n.child;n!==null;)S0(t,e,n),n=n.sibling}function S0(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(pc,n)}catch{}switch(n.tag){case 5:_t||zi(n,e);case 6:var r=st,i=mn;st=null,ur(t,e,n),st=r,mn=i,st!==null&&(mn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(mn?(t=st,n=n.stateNode,t.nodeType===8?Cu(t.parentNode,n):t.nodeType===1&&Cu(t,n),Io(t)):Cu(st,n.stateNode));break;case 4:r=st,i=mn,st=n.stateNode.containerInfo,mn=!0,ur(t,e,n),st=r,mn=i;break;case 0:case 11:case 14:case 15:if(!_t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fd(n,e,o),i=i.next}while(i!==r)}ur(t,e,n);break;case 1:if(!_t&&(zi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}ur(t,e,n);break;case 21:ur(t,e,n);break;case 22:n.mode&1?(_t=(r=_t)||n.memoizedState!==null,ur(t,e,n),_t=r):ur(t,e,n);break;default:ur(t,e,n)}}function qm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lS),e.forEach(function(r){var i=vS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,mn=!1;break e;case 3:st=l.stateNode.containerInfo,mn=!0;break e;case 4:st=l.stateNode.containerInfo,mn=!0;break e}l=l.return}if(st===null)throw Error(U(160));S0(s,o,i),st=null,mn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Le(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)T0(e,t),e=e.sibling}function T0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),kn(t),r&4){try{lo(3,t,t.return),Ec(3,t)}catch(k){Le(t,t.return,k)}try{lo(5,t,t.return)}catch(k){Le(t,t.return,k)}}break;case 1:fn(e,t),kn(t),r&512&&n!==null&&zi(n,n.return);break;case 5:if(fn(e,t),kn(t),r&512&&n!==null&&zi(n,n.return),t.flags&32){var i=t.stateNode;try{wo(i,"")}catch(k){Le(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&qy(i,s),dd(l,o);var h=dd(l,s);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?Xy(i,m):p==="dangerouslySetInnerHTML"?Yy(i,m):p==="children"?wo(i,m):Ch(i,p,m,h)}switch(l){case"input":od(i,s);break;case"textarea":Ky(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var C=s.value;C!=null?Wi(i,!!s.multiple,C,!1):v!==!!s.multiple&&(s.defaultValue!=null?Wi(i,!!s.multiple,s.defaultValue,!0):Wi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ao]=s}catch(k){Le(t,t.return,k)}}break;case 6:if(fn(e,t),kn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){Le(t,t.return,k)}}break;case 3:if(fn(e,t),kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Io(e.containerInfo)}catch(k){Le(t,t.return,k)}break;case 4:fn(e,t),kn(t);break;case 13:fn(e,t),kn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(of=Ue())),r&4&&qm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(_t=(h=_t)||p,fn(e,t),_t=h):fn(e,t),kn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(q=t,p=t.child;p!==null;){for(m=q=p;q!==null;){switch(v=q,C=v.child,v.tag){case 0:case 11:case 14:case 15:lo(4,v,v.return);break;case 1:zi(v,v.return);var b=v.stateNode;if(typeof b.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(k){Le(r,n,k)}}break;case 5:zi(v,v.return);break;case 22:if(v.memoizedState!==null){Qm(m);continue}}C!==null?(C.return=v,q=C):Qm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Jy("display",o))}catch(k){Le(t,t.return,k)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(k){Le(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:fn(e,t),kn(t),r&4&&qm(t);break;case 21:break;default:fn(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(I0(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wo(i,""),r.flags&=-33);var s=Gm(t);Bd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Gm(t);Ud(t,l,o);break;default:throw Error(U(161))}}catch(c){Le(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uS(t,e,n){q=t,C0(t)}function C0(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||za;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||_t;l=za;var h=_t;if(za=o,(_t=c)&&!h)for(q=i;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?Ym(i):c!==null?(c.return=o,q=c):Ym(i);for(;s!==null;)q=s,C0(s),s=s.sibling;q=i,za=l,_t=h}Km(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Km(t)}}function Km(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||Ec(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_t)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Pm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Io(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}_t||e.flags&512&&Vd(e)}catch(v){Le(e,e.return,v)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Qm(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Ym(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ec(4,e)}catch(c){Le(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Le(e,i,c)}}var s=e.return;try{Vd(e)}catch(c){Le(e,s,c)}break;case 5:var o=e.return;try{Vd(e)}catch(c){Le(e,o,c)}}}catch(c){Le(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var dS=Math.ceil,zl=sr.ReactCurrentDispatcher,rf=sr.ReactCurrentOwner,rn=sr.ReactCurrentBatchConfig,ue=0,et=null,We=null,ct=0,Bt=0,$i=Vr(0),qe=0,jo=null,ai=0,Ic=0,sf=0,co=null,Rt=null,of=0,as=1/0,Bn=null,$l=!1,zd=null,Cr=null,$a=!1,wr=null,Wl=0,uo=0,$d=null,ll=-1,cl=0;function Ct(){return ue&6?Ue():ll!==-1?ll:ll=Ue()}function kr(t){return t.mode&1?ue&2&&ct!==0?ct&-ct:KI.transition!==null?(cl===0&&(cl=uv()),cl):(t=ye,t!==0||(t=window.event,t=t===void 0?16:yv(t.type)),t):1}function En(t,e,n,r){if(50<uo)throw uo=0,$d=null,Error(U(185));Jo(t,n,r),(!(ue&2)||t!==et)&&(t===et&&(!(ue&2)&&(Ic|=n),qe===4&&mr(t,ct)),jt(t,r),n===1&&ue===0&&!(e.mode&1)&&(as=Ue()+500,wc&&Ur()))}function jt(t,e){var n=t.callbackNode;KE(t,e);var r=kl(t,t===et?ct:0);if(r===0)n!==null&&sm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sm(n),e===1)t.tag===0?qI(Jm.bind(null,t)):Lv(Jm.bind(null,t)),$I(function(){!(ue&6)&&Ur()}),n=null;else{switch(dv(r)){case 1:n=Nh;break;case 4:n=lv;break;case 16:n=Cl;break;case 536870912:n=cv;break;default:n=Cl}n=j0(n,k0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function k0(t,e){if(ll=-1,cl=0,ue&6)throw Error(U(327));var n=t.callbackNode;if(Qi()&&t.callbackNode!==n)return null;var r=kl(t,t===et?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hl(t,r);else{e=r;var i=ue;ue|=2;var s=b0();(et!==t||ct!==e)&&(Bn=null,as=Ue()+500,Zr(t,e));do try{pS();break}catch(l){A0(t,l)}while(!0);Wh(),zl.current=s,ue=i,We!==null?e=0:(et=null,ct=0,e=qe)}if(e!==0){if(e===2&&(i=gd(t),i!==0&&(r=i,e=Wd(t,i))),e===1)throw n=jo,Zr(t,0),mr(t,r),jt(t,Ue()),n;if(e===6)mr(t,r);else{if(i=t.current.alternate,!(r&30)&&!hS(i)&&(e=Hl(t,r),e===2&&(s=gd(t),s!==0&&(r=s,e=Wd(t,s))),e===1))throw n=jo,Zr(t,0),mr(t,r),jt(t,Ue()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Hr(t,Rt,Bn);break;case 3:if(mr(t,r),(r&130023424)===r&&(e=of+500-Ue(),10<e)){if(kl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sd(Hr.bind(null,t,Rt,Bn),e);break}Hr(t,Rt,Bn);break;case 4:if(mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dS(r/1960))-r,10<r){t.timeoutHandle=Sd(Hr.bind(null,t,Rt,Bn),r);break}Hr(t,Rt,Bn);break;case 5:Hr(t,Rt,Bn);break;default:throw Error(U(329))}}}return jt(t,Ue()),t.callbackNode===n?k0.bind(null,t):null}function Wd(t,e){var n=co;return t.current.memoizedState.isDehydrated&&(Zr(t,e).flags|=256),t=Hl(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&Hd(e)),t}function Hd(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function hS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Sn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mr(t,e){for(e&=~sf,e&=~Ic,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xn(e),r=1<<n;t[n]=-1,e&=~r}}function Jm(t){if(ue&6)throw Error(U(327));Qi();var e=kl(t,0);if(!(e&1))return jt(t,Ue()),null;var n=Hl(t,e);if(t.tag!==0&&n===2){var r=gd(t);r!==0&&(e=r,n=Wd(t,r))}if(n===1)throw n=jo,Zr(t,0),mr(t,e),jt(t,Ue()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,Rt,Bn),jt(t,Ue()),null}function af(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(as=Ue()+500,wc&&Ur())}}function li(t){wr!==null&&wr.tag===0&&!(ue&6)&&Qi();var e=ue;ue|=1;var n=rn.transition,r=ye;try{if(rn.transition=null,ye=1,t)return t()}finally{ye=r,rn.transition=n,ue=e,!(ue&6)&&Ur()}}function lf(){Bt=$i.current,Se($i)}function Zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zI(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Bh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pl();break;case 3:ss(),Se(Pt),Se(It),Yh();break;case 5:Qh(r);break;case 4:ss();break;case 13:Se(be);break;case 19:Se(be);break;case 10:Hh(r.type._context);break;case 22:case 23:lf()}n=n.return}if(et=t,We=t=Ar(t.current,null),ct=Bt=e,qe=0,jo=null,sf=Ic=ai=0,Rt=co=null,Kr!==null){for(e=0;e<Kr.length;e++)if(n=Kr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Kr=null}return t}function A0(t,e){do{var n=We;try{if(Wh(),sl.current=Bl,Ul){for(var r=Re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ul=!1}if(oi=0,Xe=Ge=Re=null,ao=!1,No=0,rf.current=null,n===null||n.return===null){qe=1,jo=e,We=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var C=Fm(o);if(C!==null){C.flags&=-257,Vm(C,o,l,s,e),C.mode&1&&Mm(s,h,e),e=C,c=h;var b=e.updateQueue;if(b===null){var k=new Set;k.add(c),e.updateQueue=k}else b.add(c);break e}else{if(!(e&1)){Mm(s,h,e),cf();break e}c=Error(U(426))}}else if(ke&&l.mode&1){var O=Fm(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Vm(O,o,l,s,e),zh(os(c,l));break e}}s=c=os(c,l),qe!==4&&(qe=2),co===null?co=[s]:co.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=d0(s,c,e);Nm(s,E);break e;case 1:l=c;var w=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Cr===null||!Cr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=h0(s,l,e);Nm(s,j);break e}}s=s.return}while(s!==null)}N0(n)}catch(L){e=L,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function b0(){var t=zl.current;return zl.current=Bl,t===null?Bl:t}function cf(){(qe===0||qe===3||qe===2)&&(qe=4),et===null||!(ai&268435455)&&!(Ic&268435455)||mr(et,ct)}function Hl(t,e){var n=ue;ue|=2;var r=b0();(et!==t||ct!==e)&&(Bn=null,Zr(t,e));do try{fS();break}catch(i){A0(t,i)}while(!0);if(Wh(),ue=n,zl.current=r,We!==null)throw Error(U(261));return et=null,ct=0,qe}function fS(){for(;We!==null;)R0(We)}function pS(){for(;We!==null&&!VE();)R0(We)}function R0(t){var e=O0(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?N0(t):We=e,rf.current=null}function N0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aS(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,We=null;return}}else if(n=oS(n,e,Bt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);qe===0&&(qe=5)}function Hr(t,e,n){var r=ye,i=rn.transition;try{rn.transition=null,ye=1,mS(t,e,n,r)}finally{rn.transition=i,ye=r}return null}function mS(t,e,n,r){do Qi();while(wr!==null);if(ue&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(QE(t,s),t===et&&(We=et=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$a||($a=!0,j0(Cl,function(){return Qi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=rn.transition,rn.transition=null;var o=ye;ye=1;var l=ue;ue|=4,rf.current=null,cS(t,n),T0(n,t),DI(Ed),Al=!!xd,Ed=xd=null,t.current=n,uS(n),UE(),ue=l,ye=o,rn.transition=s}else t.current=n;if($a&&($a=!1,wr=t,Wl=i),s=t.pendingLanes,s===0&&(Cr=null),$E(n.stateNode),jt(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($l)throw $l=!1,t=zd,zd=null,t;return Wl&1&&t.tag!==0&&Qi(),s=t.pendingLanes,s&1?t===$d?uo++:(uo=0,$d=t):uo=0,Ur(),null}function Qi(){if(wr!==null){var t=dv(Wl),e=rn.transition,n=ye;try{if(rn.transition=null,ye=16>t?16:t,wr===null)var r=!1;else{if(t=wr,wr=null,Wl=0,ue&6)throw Error(U(331));var i=ue;for(ue|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(q=h;q!==null;){var p=q;switch(p.tag){case 0:case 11:case 15:lo(8,p,s)}var m=p.child;if(m!==null)m.return=p,q=m;else for(;q!==null;){p=q;var v=p.sibling,C=p.return;if(E0(p),p===h){q=null;break}if(v!==null){v.return=C,q=v;break}q=C}}}var b=s.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var O=k.sibling;k.sibling=null,k=O}while(k!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lo(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,q=E;break e}q=s.return}}var w=t.current;for(q=w;q!==null;){o=q;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,q=I;else e:for(o=w;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ec(9,l)}}catch(L){Le(l,l.return,L)}if(l===o){q=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,q=j;break e}q=l.return}}if(ue=i,Ur(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(pc,t)}catch{}r=!0}return r}finally{ye=n,rn.transition=e}}return!1}function Xm(t,e,n){e=os(n,e),e=d0(t,e,1),t=Tr(t,e,1),e=Ct(),t!==null&&(Jo(t,1,e),jt(t,e))}function Le(t,e,n){if(t.tag===3)Xm(t,t,n);else for(;e!==null;){if(e.tag===3){Xm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){t=os(n,t),t=h0(e,t,1),e=Tr(e,t,1),t=Ct(),e!==null&&(Jo(e,1,t),jt(e,t));break}}e=e.return}}function gS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(ct&n)===n&&(qe===4||qe===3&&(ct&130023424)===ct&&500>Ue()-of?Zr(t,0):sf|=n),jt(t,e)}function P0(t,e){e===0&&(t.mode&1?(e=Oa,Oa<<=1,!(Oa&130023424)&&(Oa=4194304)):e=1);var n=Ct();t=tr(t,e),t!==null&&(Jo(t,e,n),jt(t,n))}function yS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),P0(t,n)}function vS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),P0(t,n)}var O0;O0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pt.current)Nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nt=!1,sS(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,ke&&e.flags&1048576&&Mv(e,Dl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;al(t,e),t=e.pendingProps;var i=ns(e,It.current);Ki(e,n),i=Xh(null,e,r,t,i,n);var s=Zh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(r)?(s=!0,Ol(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qh(e),i.updater=xc,e.stateNode=i,i._reactInternals=e,Nd(e,r,t,n),e=jd(null,e,r,!0,s,n)):(e.tag=0,ke&&s&&Uh(e),Tt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(al(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=_S(r),t=pn(r,t),i){case 0:e=Od(null,e,r,t,n);break e;case 1:e=zm(null,e,r,t,n);break e;case 11:e=Um(null,e,r,t,n);break e;case 14:e=Bm(null,e,r,pn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Od(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),zm(t,e,r,i,n);case 3:e:{if(g0(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,$v(t,e),Fl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=os(Error(U(423)),e),e=$m(t,e,r,n,i);break e}else if(r!==i){i=os(Error(U(424)),e),e=$m(t,e,r,n,i);break e}else for(zt=Sr(e.stateNode.containerInfo.firstChild),$t=e,ke=!0,yn=null,n=Bv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rs(),r===i){e=nr(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return Wv(e),t===null&&Ad(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Id(r,i)?o=null:s!==null&&Id(r,s)&&(e.flags|=32),m0(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&Ad(e),null;case 13:return y0(t,e,n);case 4:return Kh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=is(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Um(t,e,r,i,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_e(Ll,r._currentValue),r._currentValue=o,s!==null)if(Sn(s.value,o)){if(s.children===i.children&&!Pt.current){e=nr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Yn(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),bd(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),bd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Tt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ki(e,n),i=on(i),r=r(i),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,i=pn(r,e.pendingProps),i=pn(r.type,i),Bm(t,e,r,i,n);case 15:return f0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),al(t,e),e.tag=1,Ot(r)?(t=!0,Ol(e)):t=!1,Ki(e,n),u0(e,r,i),Nd(e,r,i,n),jd(null,e,r,!0,t,n);case 19:return v0(t,e,n);case 22:return p0(t,e,n)}throw Error(U(156,e.tag))};function j0(t,e){return av(t,e)}function wS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,r){return new wS(t,e,n,r)}function uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _S(t){if(typeof t=="function")return uf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ah)return 11;if(t===bh)return 14}return 2}function Ar(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ul(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")uf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oi:return ei(n.children,i,s,e);case kh:o=8,i|=8;break;case td:return t=nn(12,n,e,i|2),t.elementType=td,t.lanes=s,t;case nd:return t=nn(13,n,e,i),t.elementType=nd,t.lanes=s,t;case rd:return t=nn(19,n,e,i),t.elementType=rd,t.lanes=s,t;case Wy:return Sc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zy:o=10;break e;case $y:o=9;break e;case Ah:o=11;break e;case bh:o=14;break e;case hr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=nn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ei(t,e,n,r){return t=nn(7,t,r,e),t.lanes=n,t}function Sc(t,e,n,r){return t=nn(22,t,r,e),t.elementType=Wy,t.lanes=n,t.stateNode={isHidden:!1},t}function ju(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function Du(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mu(0),this.expirationTimes=mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function df(t,e,n,r,i,s,o,l,c){return t=new xS(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qh(s),t}function ES(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function D0(t){if(!t)return jr;t=t._reactInternals;e:{if(gi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ot(n))return Dv(t,n,e)}return e}function L0(t,e,n,r,i,s,o,l,c){return t=df(n,r,!0,t,i,s,o,l,c),t.context=D0(null),n=t.current,r=Ct(),i=kr(n),s=Yn(r,i),s.callback=e??null,Tr(n,s,i),t.current.lanes=i,Jo(t,i,r),jt(t,r),t}function Tc(t,e,n,r){var i=e.current,s=Ct(),o=kr(i);return n=D0(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Tr(i,e,o),t!==null&&(En(t,i,o,s),il(t,i,o)),o}function Gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hf(t,e){Zm(t,e),(t=t.alternate)&&Zm(t,e)}function IS(){return null}var M0=typeof reportError=="function"?reportError:function(t){console.error(t)};function ff(t){this._internalRoot=t}Cc.prototype.render=ff.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Tc(t,e,null,null)};Cc.prototype.unmount=ff.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;li(function(){Tc(null,t,null,null)}),e[er]=null}};function Cc(t){this._internalRoot=t}Cc.prototype.unstable_scheduleHydration=function(t){if(t){var e=pv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&gv(t)}};function pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eg(){}function SS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Gl(o);s.call(h)}}var o=L0(e,r,t,0,null,!1,!1,"",eg);return t._reactRootContainer=o,t[er]=o.current,Co(t.nodeType===8?t.parentNode:t),li(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Gl(c);l.call(h)}}var c=df(t,0,!1,null,null,!1,!1,"",eg);return t._reactRootContainer=c,t[er]=c.current,Co(t.nodeType===8?t.parentNode:t),li(function(){Tc(e,c,n,r)}),c}function Ac(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=Gl(o);l.call(c)}}Tc(e,o,t,i)}else o=SS(n,e,t,i,r);return Gl(o)}hv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xs(e.pendingLanes);n!==0&&(Ph(e,n|1),jt(e,Ue()),!(ue&6)&&(as=Ue()+500,Ur()))}break;case 13:li(function(){var r=tr(t,1);if(r!==null){var i=Ct();En(r,t,1,i)}}),hf(t,1)}};Oh=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=Ct();En(e,t,134217728,n)}hf(t,134217728)}};fv=function(t){if(t.tag===13){var e=kr(t),n=tr(t,e);if(n!==null){var r=Ct();En(n,t,e,r)}hf(t,e)}};pv=function(){return ye};mv=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};fd=function(t,e,n){switch(e){case"input":if(od(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=vc(r);if(!i)throw Error(U(90));Gy(r),od(r,i)}}}break;case"textarea":Ky(t,n);break;case"select":e=n.value,e!=null&&Wi(t,!!n.multiple,e,!1)}};tv=af;nv=li;var TS={usingClientEntryPoint:!1,Events:[Zo,Mi,vc,Zy,ev,af]},Gs={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CS={bundleType:Gs.bundleType,version:Gs.version,rendererPackageName:Gs.rendererPackageName,rendererConfig:Gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sv(t),t===null?null:t.stateNode},findFiberByHostInstance:Gs.findFiberByHostInstance||IS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wa.isDisabled&&Wa.supportsFiber)try{pc=Wa.inject(CS),Nn=Wa}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TS;Gt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pf(e))throw Error(U(200));return ES(t,e,null,n)};Gt.createRoot=function(t,e){if(!pf(t))throw Error(U(299));var n=!1,r="",i=M0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=df(t,1,!1,null,null,n,!1,r,i),t[er]=e.current,Co(t.nodeType===8?t.parentNode:t),new ff(e)};Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=sv(e),t=t===null?null:t.stateNode,t};Gt.flushSync=function(t){return li(t)};Gt.hydrate=function(t,e,n){if(!kc(e))throw Error(U(200));return Ac(null,t,e,!0,n)};Gt.hydrateRoot=function(t,e,n){if(!pf(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=M0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=L0(e,null,t,1,n??null,i,!1,s,o),t[er]=e.current,Co(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cc(e)};Gt.render=function(t,e,n){if(!kc(e))throw Error(U(200));return Ac(null,t,e,!1,n)};Gt.unmountComponentAtNode=function(t){if(!kc(t))throw Error(U(40));return t._reactRootContainer?(li(function(){Ac(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};Gt.unstable_batchedUpdates=af;Gt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Ac(t,e,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function F0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F0)}catch(t){console.error(t)}}F0(),Fy.exports=Gt;var kS=Fy.exports,tg=kS;Zu.createRoot=tg.createRoot,Zu.hydrateRoot=tg.hydrateRoot;function AS(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[i,s]=R.useState(!1),o=R.useRef(n);o.current=n;const l=R.useRef(r);return l.current=r,R.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var h;s(!0),(h=o.current)===null||h===void 0||h.call(o)},c.onerror=()=>{var h;s(!1),(h=l.current)===null||h===void 0||h.call(l)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),i}const bS=R.createContext(null);function RS({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:i}){const s=AS({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),o=R.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return Yo.createElement(bS.Provider,{value:o},i)}var ng={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},NS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},U0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let v=(l&15)<<2|h>>6,C=h&63;c||(C=64,o||(v=64)),r.push(n[p],n[m],n[v],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(V0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new PS;const v=s<<2|l>>4;if(r.push(v),h!==64){const C=l<<4&240|h>>2;if(r.push(C),m!==64){const b=h<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OS=function(t){const e=V0(t);return U0.encodeByteArray(e,!0)},ql=function(t){return OS(t).replace(/\./g,"")},B0=function(t){try{return U0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=()=>jS().__FIREBASE_DEFAULTS__,LS=()=>{if(typeof process>"u"||typeof ng>"u")return;const t=ng.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&B0(t[1]);return e&&JSON.parse(e)},bc=()=>{try{return DS()||LS()||MS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},z0=t=>{var e,n;return(n=(e=bc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FS=t=>{const e=z0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$0=()=>{var t;return(t=bc())===null||t===void 0?void 0:t.config},W0=t=>{var e;return(e=bc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ql(JSON.stringify(n)),ql(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function zS(){var t;const e=(t=bc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $S(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function H0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function WS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HS(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GS(){return!zS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G0(){try{return typeof indexedDB=="object"}catch{return!1}}function q0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function qS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="FirebaseError";class Cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KS,Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yi.prototype.create)}}class yi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?QS(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Cn(i,l,r)}}function QS(t,e){return t.replace(YS,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const YS=/\{\$([^}]+)}/g;function JS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Do(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(rg(s)&&rg(o)){if(!Do(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function XS(t,e){const n=new ZS(t,e);return n.subscribe.bind(n)}class ZS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");eT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Lu),i.error===void 0&&(i.error=Lu),i.complete===void 0&&(i.complete=Lu);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lu(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=1e3,nT=2,rT=4*60*60*1e3,iT=.5;function ig(t,e=tT,n=nT){const r=e*Math.pow(n,t),i=Math.round(iT*r*(Math.random()-.5)*2);return Math.min(rT,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class Tn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aT(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oT(t){return t===Gr?void 0:t}function aT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const cT={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},uT=ae.INFO,dT={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},hT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=dT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rc{constructor(e){this.name=e,this._logLevel=uT,this._logHandler=hT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const fT=(t,e)=>e.some(n=>t instanceof n);let sg,og;function pT(){return sg||(sg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mT(){return og||(og=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K0=new WeakMap,Gd=new WeakMap,Q0=new WeakMap,Mu=new WeakMap,mf=new WeakMap;function gT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(br(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&K0.set(n,t)}).catch(()=>{}),mf.set(e,t),e}function yT(t){if(Gd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Gd.set(t,e)}let qd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Q0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vT(t){qd=t(qd)}function wT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fu(this),e,...n);return Q0.set(r,e.sort?e.sort():[e]),br(r)}:mT().includes(t)?function(...e){return t.apply(Fu(this),e),br(K0.get(this))}:function(...e){return br(t.apply(Fu(this),e))}}function _T(t){return typeof t=="function"?wT(t):(t instanceof IDBTransaction&&yT(t),fT(t,pT())?new Proxy(t,qd):t)}function br(t){if(t instanceof IDBRequest)return gT(t);if(Mu.has(t))return Mu.get(t);const e=_T(t);return e!==t&&(Mu.set(t,e),mf.set(e,t)),e}const Fu=t=>mf.get(t);function Y0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=br(o);return r&&o.addEventListener("upgradeneeded",c=>{r(br(o.result),c.oldVersion,c.newVersion,br(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const xT=["get","getKey","getAll","getAllKeys","count"],ET=["put","add","delete","clear"],Vu=new Map;function ag(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vu.get(e))return Vu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ET.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xT.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&c.done]))[0]};return Vu.set(e,s),s}vT(t=>({...t,get:(e,n,r)=>ag(e,n)||t.get(e,n,r),has:(e,n)=>!!ag(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ST(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ST(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kd="@firebase/app",lg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Rc("@firebase/app"),TT="@firebase/app-compat",CT="@firebase/analytics-compat",kT="@firebase/analytics",AT="@firebase/app-check-compat",bT="@firebase/app-check",RT="@firebase/auth",NT="@firebase/auth-compat",PT="@firebase/database",OT="@firebase/data-connect",jT="@firebase/database-compat",DT="@firebase/functions",LT="@firebase/functions-compat",MT="@firebase/installations",FT="@firebase/installations-compat",VT="@firebase/messaging",UT="@firebase/messaging-compat",BT="@firebase/performance",zT="@firebase/performance-compat",$T="@firebase/remote-config",WT="@firebase/remote-config-compat",HT="@firebase/storage",GT="@firebase/storage-compat",qT="@firebase/firestore",KT="@firebase/vertexai-preview",QT="@firebase/firestore-compat",YT="firebase",JT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="[DEFAULT]",XT={[Kd]:"fire-core",[TT]:"fire-core-compat",[kT]:"fire-analytics",[CT]:"fire-analytics-compat",[bT]:"fire-app-check",[AT]:"fire-app-check-compat",[RT]:"fire-auth",[NT]:"fire-auth-compat",[PT]:"fire-rtdb",[OT]:"fire-data-connect",[jT]:"fire-rtdb-compat",[DT]:"fire-fn",[LT]:"fire-fn-compat",[MT]:"fire-iid",[FT]:"fire-iid-compat",[VT]:"fire-fcm",[UT]:"fire-fcm-compat",[BT]:"fire-perf",[zT]:"fire-perf-compat",[$T]:"fire-rc",[WT]:"fire-rc-compat",[HT]:"fire-gcs",[GT]:"fire-gcs-compat",[qT]:"fire-fst",[QT]:"fire-fst-compat",[KT]:"fire-vertex","fire-js":"fire-js",[YT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Map,ZT=new Map,Yd=new Map;function cg(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jn(t){const e=t.name;if(Yd.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;Yd.set(e,t);for(const n of Kl.values())cg(n,t);for(const n of ZT.values())cg(n,t);return!0}function vi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new yi("app","Firebase",eC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=JT;function J0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Qd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Rr.create("bad-app-name",{appName:String(i)});if(n||(n=$0()),!n)throw Rr.create("no-options");const s=Kl.get(i);if(s){if(Do(n,s.options)&&Do(r,s.config))return s;throw Rr.create("duplicate-app",{appName:i})}const o=new lT(i);for(const c of Yd.values())o.addComponent(c);const l=new tC(n,r,o);return Kl.set(i,l),l}function gf(t=Qd){const e=Kl.get(t);if(!e&&t===Qd&&$0())return J0();if(!e)throw Rr.create("no-app",{appName:t});return e}function sn(t,e,n){var r;let i=(r=XT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(l.join(" "));return}jn(new Tn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="firebase-heartbeat-database",rC=1,Lo="firebase-heartbeat-store";let Uu=null;function X0(){return Uu||(Uu=Y0(nC,rC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Uu}async function iC(t){try{const n=(await X0()).transaction(Lo),r=await n.objectStore(Lo).get(Z0(t));return await n.done,r}catch(e){if(e instanceof Cn)rr.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function ug(t,e){try{const r=(await X0()).transaction(Lo,"readwrite");await r.objectStore(Lo).put(e,Z0(t)),await r.done}catch(n){if(n instanceof Cn)rr.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function Z0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=1024,oC=30*24*60*60*1e3;class aC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=oC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dg(),{heartbeatsToSend:r,unsentEntries:i}=lC(this._heartbeatsCache.heartbeats),s=ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return rr.warn(n),""}}}function dg(){return new Date().toISOString().substring(0,10)}function lC(t,e=sC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),hg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return G0()?q0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ug(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ug(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function hg(t){return ql(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){jn(new Tn("platform-logger",e=>new IT(e),"PRIVATE")),jn(new Tn("heartbeat",e=>new aC(e),"PRIVATE")),sn(Kd,lg,t),sn(Kd,lg,"esm2017"),sn("fire-js","")}uC("");function yf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ew(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dC=ew,tw=new yi("auth","Firebase",ew());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Rc("@firebase/auth");function hC(t,...e){Ql.logLevel<=ae.WARN&&Ql.warn(`Auth (${ys}): ${t}`,...e)}function dl(t,...e){Ql.logLevel<=ae.ERROR&&Ql.error(`Auth (${ys}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw wf(t,...e)}function In(t,...e){return wf(t,...e)}function vf(t,e,n){const r=Object.assign(Object.assign({},dC()),{[e]:n});return new yi("auth","Firebase",r).create(e,{appName:t.name})}function Nr(t){return vf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nw(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dn(t,"argument-error"),vf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tw.create(t,...e)}function Z(t,e,...n){if(!t)throw wf(e,...n)}function qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dl(e),new Error(e)}function ir(t,e){t||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fC(){return fg()==="http:"||fg()==="https:"}function fg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fC()||H0()||"connection"in navigator)?navigator.onLine:!0}function mC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.shortDelay=e,this.longDelay=n,ir(n>e,"Short delay should be less than long delay!"),this.isMobile=BS()||WS()}get(){return pC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t,e){ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new na(3e4,6e4);function xf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vs(t,e,n,r,i={}){return iw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=ta(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},s);return $S()||(h.referrerPolicy="no-referrer"),rw.fetch()(sw(t,t.config.apiHost,n,l),h)})}async function iw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},gC),e);try{const i=new wC(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ha(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ha(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ha(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ha(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw vf(t,p,h);Dn(t,p)}}catch(i){if(i instanceof Cn)throw i;Dn(t,"network-request-failed",{message:String(i)})}}async function vC(t,e,n,r,i={}){const s=await vs(t,e,n,r,i);return"mfaPendingCredential"in s&&Dn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function sw(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?_f(t.config,i):`${t.config.apiScheme}://${i}`}class wC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(In(this.auth,"network-request-failed")),yC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ha(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=In(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(t,e){return vs(t,"POST","/v1/accounts:delete",e)}async function ow(t,e){return vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xC(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),i=Ef(r);Z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ho(Bu(i.auth_time)),issuedAtTime:ho(Bu(i.iat)),expirationTime:ho(Bu(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Bu(t){return Number(t)*1e3}function Ef(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dl("JWT malformed, contained fewer than 3 sections"),null;try{const i=B0(n);return i?JSON.parse(i):(dl("Failed to decode base64 JWT payload"),null)}catch(i){return dl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function pg(t){const e=Ef(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cn&&EC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function EC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ho(this.lastLoginAt),this.creationTime=ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Mo(t,ow(n,{idToken:r}));Z(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?aw(s.providerUserInfo):[],l=TC(t.providerData,o),c=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Xd(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function SC(t){const e=Lt(t);await Yl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TC(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aw(t){return t.map(e=>{var{providerId:n}=e,r=yf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(t,e){const n=await iw(t,{},async()=>{const r=ta({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=sw(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",rw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kC(t,e){return vs(t,"POST","/v2/accounts:revokeToken",xf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=pg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await CC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Yi;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yi,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=yf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new IC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Mo(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xC(this,e)}reload(){return SC(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(Nr(this.auth));const e=await this.getIdToken();return await Mo(this,_C(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,C=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(l=n.tenantId)!==null&&l!==void 0?l:void 0,O=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:I,emailVerified:j,isAnonymous:L,providerData:F,stsTokenManager:_}=n;Z(I&&_,e,"internal-error");const y=Yi.fromJSON(this.name,_);Z(typeof I=="string",e,"internal-error"),dr(m,e.name),dr(v,e.name),Z(typeof j=="boolean",e,"internal-error"),Z(typeof L=="boolean",e,"internal-error"),dr(C,e.name),dr(b,e.name),dr(k,e.name),dr(O,e.name),dr(E,e.name),dr(w,e.name);const x=new Kn({uid:I,auth:e,email:v,emailVerified:j,displayName:m,isAnonymous:L,photoURL:b,phoneNumber:C,tenantId:k,stsTokenManager:y,createdAt:E,lastLoginAt:w});return F&&Array.isArray(F)&&(x.providerData=F.map(S=>Object.assign({},S))),O&&(x._redirectEventId=O),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new Yi;i.updateFromServerResponse(n);const s=new Kn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Yl(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Z(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?aw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Yi;l.updateFromIdToken(r);const c=new Kn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Xd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=new Map;function Qn(t){ir(t instanceof Function,"Expected a class definition");let e=mg.get(t);return e?(ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lw.type="NONE";const gg=lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ji{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=hl(this.userKey,i.apiKey,s),this.fullPersistenceKey=hl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Kn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ji(Qn(gg),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Qn(gg);const o=hl(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Kn._fromJSON(e,p);h!==s&&(l=m),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ji(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Ji(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pw(e))return"Blackberry";if(mw(e))return"Webos";if(uw(e))return"Safari";if((e.includes("chrome/")||dw(e))&&!e.includes("edge/"))return"Chrome";if(fw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cw(t=St()){return/firefox\//i.test(t)}function uw(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dw(t=St()){return/crios\//i.test(t)}function hw(t=St()){return/iemobile/i.test(t)}function fw(t=St()){return/android/i.test(t)}function pw(t=St()){return/blackberry/i.test(t)}function mw(t=St()){return/webos/i.test(t)}function If(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function AC(t=St()){var e;return If(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bC(){return HS()&&document.documentMode===10}function gw(t=St()){return If(t)||fw(t)||mw(t)||pw(t)||/windows phone/i.test(t)||hw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t,e=[]){let n;switch(t){case"Browser":n=yg(St());break;case"Worker":n=`${yg(St())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ys}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(t,e={}){return vs(t,"GET","/v2/passwordPolicy",xf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=6;class OC{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vg(this),this.idTokenSubscription=new vg(this),this.beforeStateQueue=new RC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ji.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ow(this,{idToken:e}),r=await Kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(Nr(this));const n=e?Lt(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NC(this),n=new OC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qn(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await Ji.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&hC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ws(t){return Lt(t)}class vg{constructor(e){this.auth=e,this.observer=null,this.addObserver=XS(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DC(t){Sf=t}function LC(t){return Sf.loadJS(t)}function MC(){return Sf.gapiScript}function FC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t,e){const n=vi(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Do(s,e??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:e})}function UC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BC(t,e,n){const r=ws(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=vw(e),{host:o,port:l}=zC(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),$C()}function vw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zC(t){const e=vw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wg(o)}}}function wg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $C(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(t,e){return vC(t,"POST","/v1/accounts:signInWithIdp",xf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="http://localhost";class ci extends ww{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ci(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=yf(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ci(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xi(e,n)}buildRequest(){const e={requestUri:WC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ta(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Nc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends ra{constructor(){super("facebook.com")}static credential(e){return ci._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $n.credential(e.oauthAccessToken)}catch{return null}}}$n.FACEBOOK_SIGN_IN_METHOD="facebook.com";$n.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends ra{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ci._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Wn.credential(n,r)}catch{return null}}}Wn.GOOGLE_SIGN_IN_METHOD="google.com";Wn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends ra{constructor(){super("github.com")}static credential(e){return ci._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.GITHUB_SIGN_IN_METHOD="github.com";gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends ra{constructor(){super("twitter.com")}static credential(e,n){return ci._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.TWITTER_SIGN_IN_METHOD="twitter.com";yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Kn._fromIdTokenResponse(e,r,i),o=_g(r);return new ls({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_g(r);return new ls({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _g(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends Cn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jl.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Jl(e,n,r,i)}}function _w(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jl._fromErrorAndOperation(t,s,e,r):s})}async function HC(t,e,n=!1){const r=await Mo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ls._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t,e,n=!1){const{auth:r}=t;if(Rn(r.app))return Promise.reject(Nr(r));const i="reauthenticate";try{const s=await Mo(t,_w(r,i,e,t),n);Z(s.idToken,r,"internal-error");const o=Ef(s.idToken);Z(o,r,"internal-error");const{sub:l}=o;return Z(t.uid===l,r,"user-mismatch"),ls._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t,e,n=!1){if(Rn(t.app))return Promise.reject(Nr(t));const r="signIn",i=await _w(t,r,e),s=await ls._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function KC(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function QC(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function YC(t,e,n,r){return Lt(t).onAuthStateChanged(e,n,r)}function JC(t){return Lt(t).signOut()}const Xl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xl,"1"),this.storage.removeItem(Xl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=1e3,ZC=10;class Ew extends xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ZC):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ew.type="LOCAL";const ek=Ew;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw extends xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Iw.type="SESSION";const Sw=Iw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Pc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(n.origin,s)),c=await tk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const h=Tf("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const v=m;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(v.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return window}function rk(t){On().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function ik(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ok(){return Tw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="firebaseLocalStorageDb",ak=1,Zl="firebaseLocalStorage",kw="fbase_key";class ia{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Oc(t,e){return t.transaction([Zl],e?"readwrite":"readonly").objectStore(Zl)}function lk(){const t=indexedDB.deleteDatabase(Cw);return new ia(t).toPromise()}function Zd(){const t=indexedDB.open(Cw,ak);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zl,{keyPath:kw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zl)?e(r):(r.close(),await lk(),e(await Zd()))})})}async function xg(t,e,n){const r=Oc(t,!0).put({[kw]:e,value:n});return new ia(r).toPromise()}async function ck(t,e){const n=Oc(t,!1).get(e),r=await new ia(n).toPromise();return r===void 0?null:r.value}function Eg(t,e){const n=Oc(t,!0).delete(e);return new ia(n).toPromise()}const uk=800,dk=3;class Aw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>dk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pc._getInstance(ok()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ik(),!this.activeServiceWorker)return;this.sender=new nk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zd();return await xg(e,Xl,"1"),await Eg(e,Xl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ck(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Eg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Oc(i,!1).getAll();return new ia(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Aw.type="LOCAL";const hk=Aw;new na(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t,e){return e?Qn(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends ww{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fk(t){return qC(t.auth,new kf(t),t.bypassAuthState)}function pk(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),GC(n,new kf(t),t.bypassAuthState)}async function mk(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),HC(n,new kf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fk;case"linkViaPopup":case"linkViaRedirect":return mk;case"reauthViaPopup":case"reauthViaRedirect":return pk;default:Dn(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new na(2e3,1e4);async function yk(t,e,n){if(Rn(t.app))return Promise.reject(In(t,"operation-not-supported-in-this-environment"));const r=ws(t);nw(t,e,Nc);const i=Cf(r,n);return new Yr(r,"signInViaPopup",e,i).executeNotNull()}class Yr extends bw{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Yr.currentPopupAction&&Yr.currentPopupAction.cancel(),Yr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=Tf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(In(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gk.get())};e()}}Yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="pendingRedirect",fl=new Map;class wk extends bw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fl.get(this.auth._key());if(!e){try{const r=await _k(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fl.set(this.auth._key(),e)}return this.bypassAuthState||fl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _k(t,e){const n=Nw(e),r=Rw(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function xk(t,e){return Rw(t)._set(Nw(e),"true")}function Ek(t,e){fl.set(t._key(),e)}function Rw(t){return Qn(t._redirectPersistence)}function Nw(t){return hl(vk,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e,n){return Sk(t,e,n)}async function Sk(t,e,n){if(Rn(t.app))return Promise.reject(Nr(t));const r=ws(t);nw(t,e,Nc),await r._initializationPromise;const i=Cf(r,n);return await xk(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Tk(t,e){return await ws(t)._initializationPromise,Pw(t,e,!1)}async function Pw(t,e,n=!1){if(Rn(t.app))return Promise.reject(Nr(t));const r=ws(t),i=Cf(r,e),o=await new wk(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=10*60*1e3;class kk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ak(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ow(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(In(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ck&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ig(e))}saveEventToCache(e){this.cachedEventUids.add(Ig(e)),this.lastProcessedEventTime=Date.now()}}function Ig(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ow({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ak(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ow(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,e={}){return vs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nk=/^https?/;async function Pk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bk(t);for(const n of e)try{if(Ok(n))return}catch{}Dn(t,"unauthorized-domain")}function Ok(t){const e=Jd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Nk.test(n))return!1;if(Rk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new na(3e4,6e4);function Sg(){const t=On().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Dk(t){return new Promise((e,n)=>{var r,i,s;function o(){Sg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sg(),n(In(t,"network-request-failed"))},timeout:jk.get()})}if(!((i=(r=On().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=On().gapi)===null||s===void 0)&&s.load)o();else{const l=FC("iframefcb");return On()[l]=()=>{gapi.load?o():n(In(t,"network-request-failed"))},LC(`${MC()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw pl=null,e})}let pl=null;function Lk(t){return pl=pl||Dk(t),pl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new na(5e3,15e3),Fk="__/auth/iframe",Vk="emulator/auth/iframe",Uk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zk(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_f(e,Vk):`https://${t.config.authDomain}/${Fk}`,r={apiKey:e.apiKey,appName:t.name,v:ys},i=Bk.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ta(r).slice(1)}`}async function $k(t){const e=await Lk(t),n=On().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:zk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uk,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=In(t,"network-request-failed"),l=On().setTimeout(()=>{s(o)},Mk.get());function c(){On().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hk=500,Gk=600,qk="_blank",Kk="http://localhost";class Tg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Qk(t,e,n,r=Hk,i=Gk){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Wk),{width:r.toString(),height:i.toString(),top:s,left:o}),h=St().toLowerCase();n&&(l=dw(h)?qk:n),cw(h)&&(e=e||Kk,c.scrollbars="yes");const p=Object.entries(c).reduce((v,[C,b])=>`${v}${C}=${b},`,"");if(AC(h)&&l!=="_self")return Yk(e||"",l),new Tg(null);const m=window.open(e||"",l,p);Z(m,t,"popup-blocked");try{m.focus()}catch{}return new Tg(m)}function Yk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="__/auth/handler",Xk="emulator/auth/handler",Zk=encodeURIComponent("fac");async function Cg(t,e,n,r,i,s){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ys,eventId:i};if(e instanceof Nc){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",JS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof ra){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${Zk}=${encodeURIComponent(c)}`:"";return`${eA(t)}?${ta(l).slice(1)}${h}`}function eA({config:t}){return t.emulator?_f(t,Xk):`https://${t.authDomain}/${Jk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu="webStorageSupport";class tA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sw,this._completeRedirectFn=Pw,this._overrideRedirectResult=Ek}async _openPopup(e,n,r,i){var s;ir((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Cg(e,n,r,Jd(),i);return Qk(e,o,Tf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Cg(e,n,r,Jd(),i);return rk(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ir(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $k(e),r=new kk(e);return n.register("authEvent",i=>(Z(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zu,{type:zu},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[zu];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Pk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gw()||uw()||If()}}const nA=tA;var kg="@firebase/auth",Ag="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sA(t){jn(new Tn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yw(t)},h=new jC(r,i,s,c);return UC(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jn(new Tn("auth-internal",e=>{const n=ws(e.getProvider("auth").getImmediate());return(r=>new rA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),sn(kg,Ag,iA(t)),sn(kg,Ag,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=5*60,aA=W0("authIdTokenMaxAge")||oA;let bg=null;const lA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>aA)return;const i=n==null?void 0:n.token;bg!==i&&(bg=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function cA(t=gf()){const e=vi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VC(t,{popupRedirectResolver:nA,persistence:[hk,ek,Sw]}),r=W0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=lA(s.toString());QC(n,o,()=>o(n.currentUser)),KC(n,l=>o(l))}}const i=z0("auth");return i&&BC(n,`http://${i}`),n}function uA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=In("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",uA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sA("Browser");var dA="firebase",hA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn(dA,hA,"app");var Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function x(){}x.prototype=y.prototype,_.D=y.prototype,_.prototype=new x,_.prototype.constructor=_,_.C=function(S,A,N){for(var T=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)T[Qe-2]=arguments[Qe];return y.prototype[A].apply(S,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,y,x){x||(x=0);var S=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)S[A]=y.charCodeAt(x++)|y.charCodeAt(x++)<<8|y.charCodeAt(x++)<<16|y.charCodeAt(x++)<<24;else for(A=0;16>A;++A)S[A]=y[x++]|y[x++]<<8|y[x++]<<16|y[x++]<<24;y=_.g[0],x=_.g[1],A=_.g[2];var N=_.g[3],T=y+(N^x&(A^N))+S[0]+3614090360&4294967295;y=x+(T<<7&4294967295|T>>>25),T=N+(A^y&(x^A))+S[1]+3905402710&4294967295,N=y+(T<<12&4294967295|T>>>20),T=A+(x^N&(y^x))+S[2]+606105819&4294967295,A=N+(T<<17&4294967295|T>>>15),T=x+(y^A&(N^y))+S[3]+3250441966&4294967295,x=A+(T<<22&4294967295|T>>>10),T=y+(N^x&(A^N))+S[4]+4118548399&4294967295,y=x+(T<<7&4294967295|T>>>25),T=N+(A^y&(x^A))+S[5]+1200080426&4294967295,N=y+(T<<12&4294967295|T>>>20),T=A+(x^N&(y^x))+S[6]+2821735955&4294967295,A=N+(T<<17&4294967295|T>>>15),T=x+(y^A&(N^y))+S[7]+4249261313&4294967295,x=A+(T<<22&4294967295|T>>>10),T=y+(N^x&(A^N))+S[8]+1770035416&4294967295,y=x+(T<<7&4294967295|T>>>25),T=N+(A^y&(x^A))+S[9]+2336552879&4294967295,N=y+(T<<12&4294967295|T>>>20),T=A+(x^N&(y^x))+S[10]+4294925233&4294967295,A=N+(T<<17&4294967295|T>>>15),T=x+(y^A&(N^y))+S[11]+2304563134&4294967295,x=A+(T<<22&4294967295|T>>>10),T=y+(N^x&(A^N))+S[12]+1804603682&4294967295,y=x+(T<<7&4294967295|T>>>25),T=N+(A^y&(x^A))+S[13]+4254626195&4294967295,N=y+(T<<12&4294967295|T>>>20),T=A+(x^N&(y^x))+S[14]+2792965006&4294967295,A=N+(T<<17&4294967295|T>>>15),T=x+(y^A&(N^y))+S[15]+1236535329&4294967295,x=A+(T<<22&4294967295|T>>>10),T=y+(A^N&(x^A))+S[1]+4129170786&4294967295,y=x+(T<<5&4294967295|T>>>27),T=N+(x^A&(y^x))+S[6]+3225465664&4294967295,N=y+(T<<9&4294967295|T>>>23),T=A+(y^x&(N^y))+S[11]+643717713&4294967295,A=N+(T<<14&4294967295|T>>>18),T=x+(N^y&(A^N))+S[0]+3921069994&4294967295,x=A+(T<<20&4294967295|T>>>12),T=y+(A^N&(x^A))+S[5]+3593408605&4294967295,y=x+(T<<5&4294967295|T>>>27),T=N+(x^A&(y^x))+S[10]+38016083&4294967295,N=y+(T<<9&4294967295|T>>>23),T=A+(y^x&(N^y))+S[15]+3634488961&4294967295,A=N+(T<<14&4294967295|T>>>18),T=x+(N^y&(A^N))+S[4]+3889429448&4294967295,x=A+(T<<20&4294967295|T>>>12),T=y+(A^N&(x^A))+S[9]+568446438&4294967295,y=x+(T<<5&4294967295|T>>>27),T=N+(x^A&(y^x))+S[14]+3275163606&4294967295,N=y+(T<<9&4294967295|T>>>23),T=A+(y^x&(N^y))+S[3]+4107603335&4294967295,A=N+(T<<14&4294967295|T>>>18),T=x+(N^y&(A^N))+S[8]+1163531501&4294967295,x=A+(T<<20&4294967295|T>>>12),T=y+(A^N&(x^A))+S[13]+2850285829&4294967295,y=x+(T<<5&4294967295|T>>>27),T=N+(x^A&(y^x))+S[2]+4243563512&4294967295,N=y+(T<<9&4294967295|T>>>23),T=A+(y^x&(N^y))+S[7]+1735328473&4294967295,A=N+(T<<14&4294967295|T>>>18),T=x+(N^y&(A^N))+S[12]+2368359562&4294967295,x=A+(T<<20&4294967295|T>>>12),T=y+(x^A^N)+S[5]+4294588738&4294967295,y=x+(T<<4&4294967295|T>>>28),T=N+(y^x^A)+S[8]+2272392833&4294967295,N=y+(T<<11&4294967295|T>>>21),T=A+(N^y^x)+S[11]+1839030562&4294967295,A=N+(T<<16&4294967295|T>>>16),T=x+(A^N^y)+S[14]+4259657740&4294967295,x=A+(T<<23&4294967295|T>>>9),T=y+(x^A^N)+S[1]+2763975236&4294967295,y=x+(T<<4&4294967295|T>>>28),T=N+(y^x^A)+S[4]+1272893353&4294967295,N=y+(T<<11&4294967295|T>>>21),T=A+(N^y^x)+S[7]+4139469664&4294967295,A=N+(T<<16&4294967295|T>>>16),T=x+(A^N^y)+S[10]+3200236656&4294967295,x=A+(T<<23&4294967295|T>>>9),T=y+(x^A^N)+S[13]+681279174&4294967295,y=x+(T<<4&4294967295|T>>>28),T=N+(y^x^A)+S[0]+3936430074&4294967295,N=y+(T<<11&4294967295|T>>>21),T=A+(N^y^x)+S[3]+3572445317&4294967295,A=N+(T<<16&4294967295|T>>>16),T=x+(A^N^y)+S[6]+76029189&4294967295,x=A+(T<<23&4294967295|T>>>9),T=y+(x^A^N)+S[9]+3654602809&4294967295,y=x+(T<<4&4294967295|T>>>28),T=N+(y^x^A)+S[12]+3873151461&4294967295,N=y+(T<<11&4294967295|T>>>21),T=A+(N^y^x)+S[15]+530742520&4294967295,A=N+(T<<16&4294967295|T>>>16),T=x+(A^N^y)+S[2]+3299628645&4294967295,x=A+(T<<23&4294967295|T>>>9),T=y+(A^(x|~N))+S[0]+4096336452&4294967295,y=x+(T<<6&4294967295|T>>>26),T=N+(x^(y|~A))+S[7]+1126891415&4294967295,N=y+(T<<10&4294967295|T>>>22),T=A+(y^(N|~x))+S[14]+2878612391&4294967295,A=N+(T<<15&4294967295|T>>>17),T=x+(N^(A|~y))+S[5]+4237533241&4294967295,x=A+(T<<21&4294967295|T>>>11),T=y+(A^(x|~N))+S[12]+1700485571&4294967295,y=x+(T<<6&4294967295|T>>>26),T=N+(x^(y|~A))+S[3]+2399980690&4294967295,N=y+(T<<10&4294967295|T>>>22),T=A+(y^(N|~x))+S[10]+4293915773&4294967295,A=N+(T<<15&4294967295|T>>>17),T=x+(N^(A|~y))+S[1]+2240044497&4294967295,x=A+(T<<21&4294967295|T>>>11),T=y+(A^(x|~N))+S[8]+1873313359&4294967295,y=x+(T<<6&4294967295|T>>>26),T=N+(x^(y|~A))+S[15]+4264355552&4294967295,N=y+(T<<10&4294967295|T>>>22),T=A+(y^(N|~x))+S[6]+2734768916&4294967295,A=N+(T<<15&4294967295|T>>>17),T=x+(N^(A|~y))+S[13]+1309151649&4294967295,x=A+(T<<21&4294967295|T>>>11),T=y+(A^(x|~N))+S[4]+4149444226&4294967295,y=x+(T<<6&4294967295|T>>>26),T=N+(x^(y|~A))+S[11]+3174756917&4294967295,N=y+(T<<10&4294967295|T>>>22),T=A+(y^(N|~x))+S[2]+718787259&4294967295,A=N+(T<<15&4294967295|T>>>17),T=x+(N^(A|~y))+S[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,_.g[2]=_.g[2]+A&4294967295,_.g[3]=_.g[3]+N&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var x=y-this.blockSize,S=this.B,A=this.h,N=0;N<y;){if(A==0)for(;N<=x;)i(this,_,N),N+=this.blockSize;if(typeof _=="string"){for(;N<y;)if(S[A++]=_.charCodeAt(N++),A==this.blockSize){i(this,S),A=0;break}}else for(;N<y;)if(S[A++]=_[N++],A==this.blockSize){i(this,S),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var x=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=x&255,x/=256;for(this.u(_),_=Array(16),y=x=0;4>y;++y)for(var S=0;32>S;S+=8)_[x++]=this.g[y]>>>S&255;return _};function s(_,y){var x=l;return Object.prototype.hasOwnProperty.call(x,_)?x[_]:x[_]=y(_)}function o(_,y){this.h=y;for(var x=[],S=!0,A=_.length-1;0<=A;A--){var N=_[A]|0;S&&N==y||(x[A]=N,S=!1)}this.g=x}var l={};function c(_){return-128<=_&&128>_?s(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return m;if(0>_)return O(h(-_));for(var y=[],x=1,S=0;_>=x;S++)y[S]=_/x|0,x*=4294967296;return new o(y,0)}function p(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return O(p(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(y,8)),S=m,A=0;A<_.length;A+=8){var N=Math.min(8,_.length-A),T=parseInt(_.substring(A,A+N),y);8>N?(N=h(Math.pow(y,N)),S=S.j(N).add(h(T))):(S=S.j(x),S=S.add(h(T)))}return S}var m=c(0),v=c(1),C=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-O(this).m();for(var _=0,y=1,x=0;x<this.g.length;x++){var S=this.i(x);_+=(0<=S?S:4294967296+S)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b(this))return"0";if(k(this))return"-"+O(this).toString(_);for(var y=h(Math.pow(_,6)),x=this,S="";;){var A=j(x,y).g;x=E(x,A.j(y));var N=((0<x.g.length?x.g[0]:x.h)>>>0).toString(_);if(x=A,b(x))return N+S;for(;6>N.length;)N="0"+N;S=N+S}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function b(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function k(_){return _.h==-1}t.l=function(_){return _=E(this,_),k(_)?-1:b(_)?0:1};function O(_){for(var y=_.g.length,x=[],S=0;S<y;S++)x[S]=~_.g[S];return new o(x,~_.h).add(v)}t.abs=function(){return k(this)?O(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),x=[],S=0,A=0;A<=y;A++){var N=S+(this.i(A)&65535)+(_.i(A)&65535),T=(N>>>16)+(this.i(A)>>>16)+(_.i(A)>>>16);S=T>>>16,N&=65535,T&=65535,x[A]=T<<16|N}return new o(x,x[x.length-1]&-2147483648?-1:0)};function E(_,y){return _.add(O(y))}t.j=function(_){if(b(this)||b(_))return m;if(k(this))return k(_)?O(this).j(O(_)):O(O(this).j(_));if(k(_))return O(this.j(O(_)));if(0>this.l(C)&&0>_.l(C))return h(this.m()*_.m());for(var y=this.g.length+_.g.length,x=[],S=0;S<2*y;S++)x[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<_.g.length;A++){var N=this.i(S)>>>16,T=this.i(S)&65535,Qe=_.i(A)>>>16,Ft=_.i(A)&65535;x[2*S+2*A]+=T*Ft,w(x,2*S+2*A),x[2*S+2*A+1]+=N*Ft,w(x,2*S+2*A+1),x[2*S+2*A+1]+=T*Qe,w(x,2*S+2*A+1),x[2*S+2*A+2]+=N*Qe,w(x,2*S+2*A+2)}for(S=0;S<y;S++)x[S]=x[2*S+1]<<16|x[2*S];for(S=y;S<2*y;S++)x[S]=0;return new o(x,0)};function w(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function I(_,y){this.g=_,this.h=y}function j(_,y){if(b(y))throw Error("division by zero");if(b(_))return new I(m,m);if(k(_))return y=j(O(_),y),new I(O(y.g),O(y.h));if(k(y))return y=j(_,O(y)),new I(O(y.g),y.h);if(30<_.g.length){if(k(_)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var x=v,S=y;0>=S.l(_);)x=L(x),S=L(S);var A=F(x,1),N=F(S,1);for(S=F(S,2),x=F(x,2);!b(S);){var T=N.add(S);0>=T.l(_)&&(A=A.add(x),N=T),S=F(S,1),x=F(x,1)}return y=E(_,A.j(y)),new I(A,y)}for(A=m;0<=_.l(y);){for(x=Math.max(1,Math.floor(_.m()/y.m())),S=Math.ceil(Math.log(x)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),N=h(x),T=N.j(y);k(T)||0<T.l(_);)x-=S,N=h(x),T=N.j(y);b(N)&&(N=v),A=A.add(N),_=E(_,T)}return new I(A,_)}t.A=function(_){return j(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),x=[],S=0;S<y;S++)x[S]=this.i(S)&_.i(S);return new o(x,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),x=[],S=0;S<y;S++)x[S]=this.i(S)|_.i(S);return new o(x,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),x=[],S=0;S<y;S++)x[S]=this.i(S)^_.i(S);return new o(x,this.h^_.h)};function L(_){for(var y=_.g.length+1,x=[],S=0;S<y;S++)x[S]=_.i(S)<<1|_.i(S-1)>>>31;return new o(x,_.h)}function F(_,y){var x=y>>5;y%=32;for(var S=_.g.length-x,A=[],N=0;N<S;N++)A[N]=0<y?_.i(N+x)>>>y|_.i(N+x+1)<<32-y:_.i(N+x);return new o(A,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,jw=o}).apply(typeof Rg<"u"?Rg:typeof self<"u"?self:typeof window<"u"?window:{});var Ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dw,eo,Lw,ml,eh,Mw,Fw,Vw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ga=="object"&&Ga];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var P=a[g];if(!(P in f))break e;f=f[P]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,g=!1,P={next:function(){if(!g&&f<a.length){var D=f++;return{value:d(D,a[D]),done:!1}}return g=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,g),a.apply(d,P)}}return function(){return a.apply(d,arguments)}}function v(a,d,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,v.apply(null,arguments)}function C(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function b(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,P,D){for(var $=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)$[ve-2]=arguments[ve];return d.prototype[P].apply(g,$)}}function k(a){const d=a.length;if(0<d){const f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function O(a,d){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(c(g)){const P=a.length||0,D=g.length||0;a.length=P+D;for(let $=0;$<D;$++)a[P+$]=g[$]}else a.push(g)}}class E{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var L=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function F(a,d,f){for(const g in a)d.call(f,a[g],g,a)}function _(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,d){let f,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(f in g)a[f]=g[f];for(let D=0;D<x.length;D++)f=x[D],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function A(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function N(a){l.setTimeout(()=>{throw a},0)}function T(){var a=J;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Qe{constructor(){this.h=this.g=null}add(d,f){const g=Ft.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ft=new E(()=>new _i,a=>a.reset());class _i{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ln,W=!1,J=new Qe,X=()=>{const a=l.Promise.resolve(void 0);ln=()=>{a.then(pe)}};var pe=()=>{for(var a;a=T();){try{a.h.call(a.g)}catch(f){N(f)}var d=Ft;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}W=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function Qt(a,d){if(Te.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{j(d.nodeName);var P=!0;break e}catch{}P=!1}P||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:K[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Qt.aa.h.call(this)}}b(Qt,Te);var K={2:"touch",3:"pen",4:"mouse"};Qt.prototype.h=function(){Qt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Yt="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function me(a,d,f,g,P){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=P,this.key=++Vt,this.da=this.fa=!1}function xi(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function te(a){this.src=a,this.g={},this.h=0}te.prototype.add=function(a,d,f,g,P){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var $=re(a,d,g,P);return-1<$?(d=a[$],f||(d.fa=!1)):(d=new me(d,this.src,D,!!g,P),d.fa=f,a.push(d)),d};function ht(a,d){var f=d.type;if(f in a.g){var g=a.g[f],P=Array.prototype.indexOf.call(g,d,void 0),D;(D=0<=P)&&Array.prototype.splice.call(g,P,1),D&&(xi(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function re(a,d,f,g){for(var P=0;P<a.length;++P){var D=a[P];if(!D.da&&D.listener==d&&D.capture==!!f&&D.ha==g)return P}return-1}var bt="closure_lm_"+(1e6*Math.random()|0),Ei={};function ua(a,d,f,g,P){if(Array.isArray(d)){for(var D=0;D<d.length;D++)ua(a,d[D],f,g,P);return null}return f=ha(f),a&&a[Yt]?a.K(d,f,h(g)?!!g.capture:!1,P):ap(a,d,f,!1,g,P)}function ap(a,d,f,g,P,D){if(!d)throw Error("Invalid event type");var $=h(P)?!!P.capture:!!P,ve=ks(a);if(ve||(a[bt]=ve=new te(a)),f=ve.add(d,f,g,$,D),f.proxy)return f;if(g=Yc(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)dt||(P=$),P===void 0&&(P=!1),a.addEventListener(d.toString(),g,P);else if(a.attachEvent)a.attachEvent(Cs(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Yc(){function a(f){return d.call(a.src,a.listener,f)}const d=Jc;return a}function da(a,d,f,g,P){if(Array.isArray(d))for(var D=0;D<d.length;D++)da(a,d[D],f,g,P);else g=h(g)?!!g.capture:!!g,f=ha(f),a&&a[Yt]?(a=a.i,d=String(d).toString(),d in a.g&&(D=a.g[d],f=re(D,f,g,P),-1<f&&(xi(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete a.g[d],a.h--)))):a&&(a=ks(a))&&(d=a.g[d.toString()],a=-1,d&&(a=re(d,f,g,P)),(f=-1<a?d[a]:null)&&Ii(f))}function Ii(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Yt])ht(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(Cs(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=ks(d))?(ht(f,a),f.h==0&&(f.src=null,d[bt]=null)):xi(a)}}}function Cs(a){return a in Ei?Ei[a]:Ei[a]="on"+a}function Jc(a,d){if(a.da)a=!0;else{d=new Qt(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Ii(a),a=f.call(g,d)}return a}function ks(a){return a=a[bt],a instanceof te?a:null}var Si="__closure_events_fn_"+(1e9*Math.random()>>>0);function ha(a){return typeof a=="function"?a:(a[Si]||(a[Si]=function(d){return a.handleEvent(d)}),a[Si])}function Ye(){he.call(this),this.i=new te(this),this.M=this,this.F=null}b(Ye,he),Ye.prototype[Yt]=!0,Ye.prototype.removeEventListener=function(a,d,f,g){da(this,a,d,f,g)};function nt(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Te(d,a);else if(d instanceof Te)d.target=d.target||a;else{var P=d;d=new Te(g,a),S(d,P)}if(P=!0,f)for(var D=f.length-1;0<=D;D--){var $=d.g=f[D];P=Ti($,g,!0,d)&&P}if($=d.g=a,P=Ti($,g,!0,d)&&P,P=Ti($,g,!1,d)&&P,f)for(D=0;D<f.length;D++)$=d.g=f[D],P=Ti($,g,!1,d)&&P}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)xi(f[g]);delete a.g[d],a.h--}}this.F=null},Ye.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},Ye.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Ti(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var P=!0,D=0;D<d.length;++D){var $=d[D];if($&&!$.da&&$.capture==f){var ve=$.listener,it=$.ha||$.src;$.fa&&ht(a.i,$),P=ve.call(it,g)!==!1&&P}}return P&&!g.defaultPrevented}function fa(a,d,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function As(a){a.g=fa(()=>{a.g=null,a.i&&(a.i=!1,As(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class M extends he{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:As(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function H(a){he.call(this),this.h=a,this.g={}}b(H,he);var z=[];function Y(a){F(a.g,function(d,f){this.g.hasOwnProperty(f)&&Ii(d)},a),a.g={}}H.prototype.N=function(){H.aa.N.call(this),Y(this)},H.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var G=l.JSON.stringify,ge=l.JSON.parse,Pe=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Me(){}Me.prototype.h=null;function rt(a){return a.h||(a.h=a.i())}function Fe(){}var Oe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fe(){Te.call(this,"d")}b(fe,Te);function cn(){Te.call(this,"c")}b(cn,Te);var Jt={},Ce=null;function un(){return Ce=Ce||new Ye}Jt.La="serverreachability";function ft(a){Te.call(this,Jt.La,a)}b(ft,Te);function Ve(a){const d=un();nt(d,new ft(d))}Jt.STAT_EVENT="statevent";function dn(a,d){Te.call(this,Jt.STAT_EVENT,a),this.stat=d}b(dn,Te);function je(a){const d=un();nt(d,new dn(d,a))}Jt.Ma="timingevent";function bs(a,d){Te.call(this,Jt.Ma,a),this.size=d}b(bs,Te);function or(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function Rx(a,d,f,g,P,D){a.info(function(){if(a.g)if(D)for(var $="",ve=D.split("&"),it=0;it<ve.length;it++){var de=ve[it].split("=");if(1<de.length){var pt=de[0];de=de[1];var mt=pt.split("_");$=2<=mt.length&&mt[1]=="type"?$+(pt+"="+de+"&"):$+(pt+"=redacted&")}}else $=null;else $=D;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+d+`
`+f+`
`+$})}function Nx(a,d,f,g,P,D,$){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+d+`
`+f+`
`+D+" "+$})}function Ci(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ox(a,f)+(g?" "+g:"")})}function Px(a,d){a.info(function(){return"TIMEOUT: "+d})}Rs.prototype.info=function(){};function Ox(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var P=g[1];if(Array.isArray(P)&&!(1>P.length)){var D=P[0];if(D!="noop"&&D!="stop"&&D!="close")for(var $=1;$<P.length;$++)P[$]=""}}}}return G(f)}catch{return d}}var pa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xc;function ma(){}b(ma,Me),ma.prototype.g=function(){return new XMLHttpRequest},ma.prototype.i=function(){return{}},Xc=new ma;function ar(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new H(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cp}function cp(){this.i=null,this.g="",this.h=!1}var up={},Zc={};function eu(a,d,f){a.L=1,a.v=wa(Vn(d)),a.m=f,a.P=!0,dp(a,null)}function dp(a,d){a.F=Date.now(),ga(a),a.A=Vn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Tp(f.i,"t",g),a.C=0,f=a.j.J,a.h=new cp,a.g=$p(a.j,f?d:null,!a.m),0<a.O&&(a.M=new M(v(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(z[0]=P.toString()),P=z);for(var D=0;D<P.length;D++){var $=ua(f,P[D],g||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Ve(),Rx(a.i,a.u,a.A,a.l,a.R,a.m)}ar.prototype.ca=function(a){a=a.target;const d=this.M;d&&Un(a)==3?d.j():this.Y(a)},ar.prototype.Y=function(a){try{if(a==this.g)e:{const mt=Un(this.g);var d=this.g.Ba();const bi=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||Pp(this.g)))){this.J||mt!=4||d==7||(d==8||0>=bi?Ve(3):Ve(2)),tu(this);var f=this.g.Z();this.X=f;t:if(hp(this)){var g=Pp(this.g);a="";var P=g.length,D=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),Ns(this);var $="";break t}this.h.i=new l.TextDecoder}for(d=0;d<P;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(D&&d==P-1)});g.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,Nx(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,it=this.g;if((ve=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ve)){var de=ve;break t}}de=null}if(f=de)Ci(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nu(this,f);else{this.o=!1,this.s=3,je(12),Br(this),Ns(this);break e}}if(this.P){f=!0;let hn;for(;!this.J&&this.C<$.length;)if(hn=jx(this,$),hn==Zc){mt==4&&(this.s=4,je(14),f=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==up){this.s=4,je(15),Ci(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else Ci(this.i,this.l,hn,null),nu(this,hn);if(hp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||$.length!=0||this.h.h||(this.s=1,je(16),f=!1),this.o=this.o&&f,!f)Ci(this.i,this.l,$,"[Invalid Chunked Response]"),Br(this),Ns(this);else if(0<$.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),lu(pt),pt.M=!0,je(11))}}else Ci(this.i,this.l,$,null),nu(this,$);mt==4&&Br(this),this.o&&!this.J&&(mt==4?Vp(this.j,this):(this.o=!1,ga(this)))}else Jx(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),Br(this),Ns(this)}}}catch{}finally{}};function hp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function jx(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Zc:(f=Number(d.substring(f,g)),isNaN(f)?up:(g+=1,g+f>d.length?Zc:(d=d.slice(g,g+f),a.C=g+f,d)))}ar.prototype.cancel=function(){this.J=!0,Br(this)};function ga(a){a.S=Date.now()+a.I,fp(a,a.I)}function fp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=or(v(a.ba,a),d)}function tu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ar.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Px(this.i,this.A),this.L!=2&&(Ve(),je(17)),Br(this),this.s=2,Ns(this)):fp(this,this.S-a)};function Ns(a){a.j.G==0||a.J||Vp(a.j,a)}function Br(a){tu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Y(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function nu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||ru(f.h,a))){if(!a.K&&ru(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Ta(f),Ia(f);else break e;au(f),je(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=or(v(f.Za,f),6e3));if(1>=gp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else $r(f,11)}else if((a.K||f.g==a)&&Ta(f),!w(d))for(P=f.Da.g.parse(d),d=0;d<P.length;d++){let de=P[d];if(f.T=de[0],de=de[1],f.G==2)if(de[0]=="c"){f.K=de[1],f.ia=de[2];const pt=de[3];pt!=null&&(f.la=pt,f.j.info("VER="+f.la));const mt=de[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));const bi=de[5];bi!=null&&typeof bi=="number"&&0<bi&&(g=1.5*bi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const hn=a.g;if(hn){const ka=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var D=g.h;D.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(iu(D,D.h),D.h=null))}if(g.D){const cu=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;cu&&(g.ya=cu,Ee(g.I,g.D,cu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var $=a;if(g.qa=zp(g,g.J?g.ia:null,g.W),$.K){yp(g.h,$);var ve=$,it=g.L;it&&(ve.I=it),ve.B&&(tu(ve),ga(ve)),g.g=$}else Mp(g);0<f.i.length&&Sa(f)}else de[0]!="stop"&&de[0]!="close"||$r(f,7);else f.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?$r(f,7):ou(f):de[0]!="noop"&&f.l&&f.l.ta(de),f.v=0)}}Ve(4)}catch{}}var Dx=class{constructor(a,d){this.g=a,this.map=d}};function pp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function gp(a){return a.h?1:a.g?a.g.size:0}function ru(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function iu(a,d){a.g?a.g.add(d):a.h=d}function yp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}pp.prototype.cancel=function(){if(this.i=vp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function vp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return k(a.i)}function Lx(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function Mx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const g in a)d[f++]=g;return d}}}function wp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Mx(a),g=Lx(a),P=g.length,D=0;D<P;D++)d.call(void 0,g[D],f&&f[D],a)}var _p=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fx(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),P=null;if(0<=g){var D=a[f].substring(0,g);P=a[f].substring(g+1)}else D=a[f];d(D,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof zr){this.h=a.h,ya(this,a.j),this.o=a.o,this.g=a.g,va(this,a.s),this.l=a.l;var d=a.i,f=new js;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),xp(this,f),this.m=a.m}else a&&(d=String(a).match(_p))?(this.h=!1,ya(this,d[1]||"",!0),this.o=Ps(d[2]||""),this.g=Ps(d[3]||"",!0),va(this,d[4]),this.l=Ps(d[5]||"",!0),xp(this,d[6]||"",!0),this.m=Ps(d[7]||"")):(this.h=!1,this.i=new js(null,this.h))}zr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Os(d,Ep,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Os(d,Ep,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Os(f,f.charAt(0)=="/"?Bx:Ux,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Os(f,$x)),a.join("")};function Vn(a){return new zr(a)}function ya(a,d,f){a.j=f?Ps(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function va(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function xp(a,d,f){d instanceof js?(a.i=d,Wx(a.i,a.h)):(f||(d=Os(d,zx)),a.i=new js(d,a.h))}function Ee(a,d,f){a.i.set(d,f)}function wa(a){return Ee(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ps(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Os(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Vx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Vx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ep=/[#\/\?@]/g,Ux=/[#\?:]/g,Bx=/[#\?]/g,zx=/[#\?@]/g,$x=/#/g;function js(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function lr(a){a.g||(a.g=new Map,a.h=0,a.i&&Fx(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=js.prototype,t.add=function(a,d){lr(this),this.i=null,a=ki(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Ip(a,d){lr(a),d=ki(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Sp(a,d){return lr(a),d=ki(a,d),a.g.has(d)}t.forEach=function(a,d){lr(this),this.g.forEach(function(f,g){f.forEach(function(P){a.call(d,P,g,this)},this)},this)},t.na=function(){lr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){const P=a[g];for(let D=0;D<P.length;D++)f.push(d[g])}return f},t.V=function(a){lr(this);let d=[];if(typeof a=="string")Sp(this,a)&&(d=d.concat(this.g.get(ki(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return lr(this),this.i=null,a=ki(this,a),Sp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Tp(a,d,f){Ip(a,d),0<f.length&&(a.i=null,a.g.set(ki(a,d),k(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];const D=encodeURIComponent(String(g)),$=this.V(g);for(g=0;g<$.length;g++){var P=D;$[g]!==""&&(P+="="+encodeURIComponent(String($[g]))),a.push(P)}}return this.i=a.join("&")};function ki(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Wx(a,d){d&&!a.j&&(lr(a),a.i=null,a.g.forEach(function(f,g){var P=g.toLowerCase();g!=P&&(Ip(this,g),Tp(this,P,f))},a)),a.j=d}function Hx(a,d){const f=new Rs;if(l.Image){const g=new Image;g.onload=C(cr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=C(cr,f,"TestLoadImage: error",!1,d,g),g.onabort=C(cr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=C(cr,f,"TestLoadImage: timeout",!1,d,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function Gx(a,d){const f=new Rs,g=new AbortController,P=setTimeout(()=>{g.abort(),cr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(D=>{clearTimeout(P),D.ok?cr(f,"TestPingServer: ok",!0,d):cr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(P),cr(f,"TestPingServer: error",!1,d)})}function cr(a,d,f,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(f)}catch{}}function qx(){this.g=new Pe}function Kx(a,d,f){const g=f||"";try{wp(a,function(P,D){let $=P;h(P)&&($=G(P)),d.push(g+D+"="+encodeURIComponent($))})}catch(P){throw d.push(g+"type="+encodeURIComponent("_badmap")),P}}function _a(a){this.l=a.Ub||null,this.j=a.eb||!1}b(_a,Me),_a.prototype.g=function(){return new xa(this.l,this.j)},_a.prototype.i=function(a){return function(){return a}}({});function xa(a,d){Ye.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(xa,Ye),t=xa.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ls(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ds(this):Ls(this),this.readyState==3&&Cp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ds(this))},t.Qa=function(a){this.g&&(this.response=a,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ls(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ls(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(xa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function kp(a){let d="";return F(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function su(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=kp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ee(a,d,f))}function De(a){Ye.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(De,Ye);var Qx=/^https?$/i,Yx=["POST","PUT"];t=De.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xc.g(),this.v=this.o?rt(this.o):rt(Xc),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(D){Ap(this,D);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)f.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const D of g.keys())f.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),P=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Yx,d,void 0))||g||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,$]of f)this.g.setRequestHeader(D,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Np(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Ap(this,D)}};function Ap(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,bp(a),Ea(a)}function bp(a){a.A||(a.A=!0,nt(a,"complete"),nt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,nt(this,"complete"),nt(this,"abort"),Ea(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ea(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rp(this):this.bb())},t.bb=function(){Rp(this)};function Rp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Un(a)!=4||a.Z()!=2)){if(a.u&&Un(a)==4)fa(a.Ea,0,a);else if(nt(a,"readystatechange"),Un(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=$===0){var P=String(a.D).match(_p)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),g=!Qx.test(P?P.toLowerCase():"")}f=g}if(f)nt(a,"complete"),nt(a,"success");else{a.m=6;try{var D=2<Un(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",bp(a)}}finally{Ea(a)}}}}function Ea(a,d){if(a.g){Np(a);const f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||nt(a,"ready");try{f.onreadystatechange=g}catch{}}}function Np(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Un(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),ge(d)}};function Pp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Jx(a){const d={};a=(a.g&&2<=Un(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var f=A(a[g]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=d[P]||[];d[P]=D,D.push(f)}_(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Op(a){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,a),this.cb=Ms("retryDelaySeedMs",1e4,a),this.Wa=Ms("forwardChannelMaxRetries",2,a),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new pp(a&&a.concurrentRequestLimit),this.Da=new qx,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Op.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){je(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=zp(this,null,this.W),Sa(this)};function ou(a){if(jp(a),a.G==3){var d=a.U++,f=Vn(a.I);if(Ee(f,"SID",a.K),Ee(f,"RID",d),Ee(f,"TYPE","terminate"),Fs(a,f),d=new ar(a,a.j,d),d.L=2,d.v=wa(Vn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=$p(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ga(d)}Bp(a)}function Ia(a){a.g&&(lu(a),a.g.cancel(),a.g=null)}function jp(a){Ia(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ta(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Sa(a){if(!mp(a.h)&&!a.s){a.s=!0;var d=a.Ga;ln||X(),W||(ln(),W=!0),J.add(d,a),a.B=0}}function Xx(a,d){return gp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=or(v(a.Ga,a,d),Up(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new ar(this,this.j,a);let D=this.o;if(this.S&&(D?(D=y(D),S(D,this.S)):D=this.S),this.m!==null||this.O||(P.H=D,D=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Lp(this,P,d),f=Vn(this.I),Ee(f,"RID",a),Ee(f,"CVER",22),this.D&&Ee(f,"X-HTTP-Session-Id",this.D),Fs(this,f),D&&(this.O?d="headers="+encodeURIComponent(String(kp(D)))+"&"+d:this.m&&su(f,this.m,D)),iu(this.h,P),this.Ua&&Ee(f,"TYPE","init"),this.P?(Ee(f,"$req",d),Ee(f,"SID","null"),P.T=!0,eu(P,f,null)):eu(P,f,d),this.G=2}}else this.G==3&&(a?Dp(this,a):this.i.length==0||mp(this.h)||Dp(this))};function Dp(a,d){var f;d?f=d.l:f=a.U++;const g=Vn(a.I);Ee(g,"SID",a.K),Ee(g,"RID",f),Ee(g,"AID",a.T),Fs(a,g),a.m&&a.o&&su(g,a.m,a.o),f=new ar(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Lp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),iu(a.h,f),eu(f,g,d)}function Fs(a,d){a.H&&F(a.H,function(f,g){Ee(d,g,f)}),a.l&&wp({},function(f,g){Ee(d,g,f)})}function Lp(a,d,f){f=Math.min(a.i.length,f);var g=a.l?v(a.l.Na,a.l,a):null;e:{var P=a.i;let D=-1;for(;;){const $=["count="+f];D==-1?0<f?(D=P[0].g,$.push("ofs="+D)):D=0:$.push("ofs="+D);let ve=!0;for(let it=0;it<f;it++){let de=P[it].g;const pt=P[it].map;if(de-=D,0>de)D=Math.max(0,P[it].g-100),ve=!1;else try{Kx(pt,$,"req"+de+"_")}catch{g&&g(pt)}}if(ve){g=$.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function Mp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;ln||X(),W||(ln(),W=!0),J.add(d,a),a.v=0}}function au(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=or(v(a.Fa,a),Up(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Fp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=or(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),Ia(this),Fp(this))};function lu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Fp(a){a.g=new ar(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Vn(a.qa);Ee(d,"RID","rpc"),Ee(d,"SID",a.K),Ee(d,"AID",a.T),Ee(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ee(d,"TO",a.ja),Ee(d,"TYPE","xmlhttp"),Fs(a,d),a.m&&a.o&&su(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=wa(Vn(d)),f.m=null,f.P=!0,dp(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Ia(this),au(this),je(19))};function Ta(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Vp(a,d){var f=null;if(a.g==d){Ta(a),lu(a),a.g=null;var g=2}else if(ru(a.h,d))f=d.D,yp(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var P=a.B;g=un(),nt(g,new bs(g,f)),Sa(a)}else Mp(a);else if(P=d.s,P==3||P==0&&0<d.X||!(g==1&&Xx(a,d)||g==2&&au(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),P){case 1:$r(a,5);break;case 4:$r(a,10);break;case 3:$r(a,6);break;default:$r(a,2)}}}function Up(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function $r(a,d){if(a.j.info("Error code "+d),d==2){var f=v(a.fb,a),g=a.Xa;const P=!g;g=new zr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ya(g,"https"),wa(g),P?Hx(g.toString(),f):Gx(g.toString(),f)}else je(2);a.G=0,a.l&&a.l.sa(d),Bp(a),jp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function Bp(a){if(a.G=0,a.ka=[],a.l){const d=vp(a.h);(d.length!=0||a.i.length!=0)&&(O(a.ka,d),O(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function zp(a,d,f){var g=f instanceof zr?Vn(f):new zr(f);if(g.g!="")d&&(g.g=d+"."+g.g),va(g,g.s);else{var P=l.location;g=P.protocol,d=d?d+"."+P.hostname:P.hostname,P=+P.port;var D=new zr(null);g&&ya(D,g),d&&(D.g=d),P&&va(D,P),f&&(D.l=f),g=D}return f=a.D,d=a.ya,f&&d&&Ee(g,f,d),Ee(g,"VER",a.la),Fs(a,g),g}function $p(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new De(new _a({eb:f})):new De(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wp(){}t=Wp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ca(){}Ca.prototype.g=function(a,d){return new Ut(a,d)};function Ut(a,d){Ye.call(this),this.g=new Op(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ai(this)}b(Ut,Ye),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){ou(this.g)},Ut.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=G(a),a=f);d.i.push(new Dx(d.Ya++,a)),d.G==3&&Sa(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,ou(this.g),delete this.g,Ut.aa.N.call(this)};function Hp(a){fe.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}b(Hp,fe);function Gp(){cn.call(this),this.status=1}b(Gp,cn);function Ai(a){this.g=a}b(Ai,Wp),Ai.prototype.ua=function(){nt(this.g,"a")},Ai.prototype.ta=function(a){nt(this.g,new Hp(a))},Ai.prototype.sa=function(a){nt(this.g,new Gp)},Ai.prototype.ra=function(){nt(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,Vw=function(){return new Ca},Fw=function(){return un()},Mw=Jt,eh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pa.NO_ERROR=0,pa.TIMEOUT=8,pa.HTTP_ERROR=6,ml=pa,lp.COMPLETE="complete",Lw=lp,Fe.EventType=Oe,Oe.OPEN="a",Oe.CLOSE="b",Oe.ERROR="c",Oe.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,eo=Fe,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,Dw=De}).apply(typeof Ga<"u"?Ga:typeof self<"u"?self:typeof window<"u"?window:{});const Ng="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _s="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new Rc("@firebase/firestore");function qs(){return ui.logLevel}function Q(t,...e){if(ui.logLevel<=ae.DEBUG){const n=e.map(Af);ui.debug(`Firestore (${_s}): ${t}`,...n)}}function di(t,...e){if(ui.logLevel<=ae.ERROR){const n=e.map(Af);ui.error(`Firestore (${_s}): ${t}`,...n)}}function ec(t,...e){if(ui.logLevel<=ae.WARN){const n=e.map(Af);ui.warn(`Firestore (${_s}): ${t}`,...n)}}function Af(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${_s}) INTERNAL ASSERTION FAILED: `+t;throw di(e),new Error(e)}function Be(t,e){t||le()}function xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class pA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mA{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ti,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ti)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string"),new Uw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new wt(e)}}class gA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new gA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Be(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new vA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_A(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function cs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new tt(0,0))}static max(){return new Ae(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $e extends Fo{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const xA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Fo{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return xA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ee(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ee(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new ee(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie($e.fromString(e))}static fromName(e){return new ie($e.fromString(e).popFirst(5))}static empty(){return new ie($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new $e(e.slice()))}}function EA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new Dr(i,ie.empty(),e)}function IA(t){return new Dr(t.readTime,t.key,-1)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(Ae.min(),ie.empty(),-1)}static max(){return new Dr(Ae.max(),ie.empty(),-1)}}function SA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==TA)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new V((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function kA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}$w.oe=-1;function bf(t){return t==null}function tc(t){return t===0&&1/t==-1/0}function AA(t){return typeof t=="number"&&Number.isInteger(t)&&!tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ww(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new Mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qa(this.root,e,this.comparator,!0)}}class qa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ot.RED,this.left=i??ot.EMPTY,this.right=s??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ot(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ot.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Og(this.data.getIterator())}getIteratorFrom(e){return new Og(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class Og{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new _n([])}unionWith(e){let n=new Et(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bA("Invalid base64 string: "+s):s}}(e);return new Ln(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ln(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const RA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(t){if(Be(!!t),typeof t=="string"){let e=0;const n=RA.exec(t);if(Be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vo(t){return typeof t=="string"?Ln.fromBase64String(t):Ln.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hw(t){const e=t.mapValue.fields.__previous_value__;return Rf(e)?Hw(e):e}function nc(t){const e=hi(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n,r,i,s,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class rc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new rc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka={mapValue:{}};function us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rf(t)?4:OA(t)?9007199254740991:PA(t)?10:11:le()}function Mn(t,e){if(t===e)return!0;const n=us(t);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nc(t).isEqual(nc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=hi(i.timestampValue),l=hi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Vo(i.bytesValue).isEqual(Vo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return at(i.geoPointValue.latitude)===at(s.geoPointValue.latitude)&&at(i.geoPointValue.longitude)===at(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return at(i.integerValue)===at(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=at(i.doubleValue),l=at(s.doubleValue);return o===l?tc(o)===tc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return cs(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Pg(o)!==Pg(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Mn(o[c],l[c])))return!1;return!0}(t,e);default:return le()}}function Uo(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function ds(t,e){if(t===e)return 0;const n=us(t),r=us(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=at(s.integerValue||s.doubleValue),c=at(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return jg(t.timestampValue,e.timestampValue);case 4:return jg(nc(t),nc(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Vo(s),c=Vo(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=we(l[h],c[h]);if(p!==0)return p}return we(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=we(at(s.latitude),at(o.latitude));return l!==0?l:we(at(s.longitude),at(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,h,p;const m=s.fields||{},v=o.fields||{},C=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=(c=v.value)===null||c===void 0?void 0:c.arrayValue,k=we(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:Dg(C,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ka.mapValue&&o===Ka.mapValue)return 0;if(s===Ka.mapValue)return 1;if(o===Ka.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const v=we(c[m],p[m]);if(v!==0)return v;const C=ds(l[c[m]],h[p[m]]);if(C!==0)return C}return we(c.length,p.length)}(t.mapValue,e.mapValue);default:throw le()}}function jg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=hi(t),r=hi(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function Dg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ds(n[i],r[i]);if(s)return s}return we(n.length,r.length)}function hs(t){return th(t)}function th(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=th(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${th(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function nh(t){return!!t&&"integerValue"in t}function Nf(t){return!!t&&"arrayValue"in t}function gl(t){return!!t&&"mapValue"in t}function PA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fo(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=fo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());gl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];gl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){sa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wn(fo(this.value))}}function Gw(t){const e=[];return sa(t.fields,(n,r)=>{const i=new lt([n]);if(gl(r)){const s=Gw(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new vn(e,0,Ae.min(),Ae.min(),Ae.min(),wn.empty(),0)}static newFoundDocument(e,n,r,i){return new vn(e,1,n,Ae.min(),r,i,0)}static newNoDocument(e,n){return new vn(e,2,n,Ae.min(),Ae.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new vn(e,3,n,Ae.min(),Ae.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.position=e,this.inclusive=n}}function Lg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=ds(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function jA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{}class Ze extends qw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LA(e,n,r):n==="array-contains"?new VA(e,r):n==="in"?new UA(e,r):n==="not-in"?new BA(e,r):n==="array-contains-any"?new zA(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new MA(e,r):new FA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ds(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(ds(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lr extends qw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Lr(e,n)}matches(e){return Kw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Kw(t){return t.op==="and"}function Qw(t){return DA(t)&&Kw(t)}function DA(t){for(const e of t.filters)if(e instanceof Lr)return!1;return!0}function rh(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+hs(t.value);if(Qw(t))return t.filters.map(e=>rh(e)).join(",");{const e=t.filters.map(n=>rh(n)).join(",");return`${t.op}(${e})`}}function Yw(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&Mn(r.value,i.value)}(t,e):t instanceof Lr?function(r,i){return i instanceof Lr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&Yw(o,i.filters[l]),!0):!1}(t,e):void le()}function Jw(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${hs(n.value)}`}(t):t instanceof Lr?function(n){return n.op.toString()+" {"+n.getFilters().map(Jw).join(" ,")+"}"}(t):"Filter"}class LA extends Ze{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class MA extends Ze{constructor(e,n){super(e,"in",n),this.keys=Xw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FA extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=Xw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Xw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class VA extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nf(n)&&Uo(n.arrayValue,this.value)}}class UA extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uo(this.value.arrayValue,n)}}class BA extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uo(this.value.arrayValue,n)}}class zA extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Fg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $A(t,e,n,r,i,s,o)}function Pf(t){const e=xe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hs(r)).join(",")),e.ue=n}return e.ue}function Of(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Yw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mg(t.startAt,e.startAt)&&Mg(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WA(t,e,n,r,i,s,o,l){return new Dc(t,e,n,r,i,s,o,l)}function HA(t){return new Dc(t)}function Vg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GA(t){return t.collectionGroup!==null}function po(t){const e=xe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Et(lt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new sc(s,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new sc(lt.keyField(),r))}return e.ce}function ni(t){const e=xe(t);return e.le||(e.le=qA(e,po(t))),e.le}function qA(t,e){if(t.limitType==="F")return Fg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new sc(i.field,s)});const n=t.endAt?new ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ic(t.startAt.position,t.startAt.inclusive):null;return Fg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ih(t,e,n){return new Dc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zw(t,e){return Of(ni(t),ni(e))&&t.limitType===e.limitType}function e_(t){return`${Pf(ni(t))}|lt:${t.limitType}`}function Ks(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Jw(i)).join(", ")}]`),bf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>hs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>hs(i)).join(",")),`Target(${r})`}(ni(t))}; limitType=${t.limitType})`}function jf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of po(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const h=Lg(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,po(r),i)||r.endAt&&!function(o,l,c){const h=Lg(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,po(r),i))}(t,e)}function KA(t){return(e,n)=>{let r=!1;for(const i of po(t)){const s=QA(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function QA(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,l){const c=o.data.field(s),h=l.data.field(s);return c!==null&&h!==null?ds(c,h):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Ww(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new Mt(ie.comparator);function oc(){return YA}const t_=new Mt(ie.comparator);function Qa(...t){let e=t_;for(const n of t)e=e.insert(n.key,n);return e}function n_(t){let e=t_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Jr(){return mo()}function r_(){return mo()}function mo(){return new xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const JA=new Mt(ie.comparator),XA=new Et(ie.comparator);function xt(...t){let e=XA;for(const n of t)e=e.add(n);return e}const ZA=new Et(we);function eb(){return ZA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function i_(t){return{integerValue:""+t}}function tb(t,e){return AA(e)?i_(e):Df(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function nb(t,e,n){return t instanceof ac?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Rf(s)&&(s=Hw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Bo?o_(t,e):t instanceof zo?a_(t,e):function(i,s){const o=s_(i,s),l=Ug(o)+Ug(i.Pe);return nh(o)&&nh(i.Pe)?i_(l):Df(i.serializer,l)}(t,e)}function rb(t,e,n){return t instanceof Bo?o_(t,e):t instanceof zo?a_(t,e):n}function s_(t,e){return t instanceof lc?function(r){return nh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ac extends Lc{}class Bo extends Lc{constructor(e){super(),this.elements=e}}function o_(t,e){const n=l_(e);for(const r of t.elements)n.some(i=>Mn(i,r))||n.push(r);return{arrayValue:{values:n}}}class zo extends Lc{constructor(e){super(),this.elements=e}}function a_(t,e){let n=l_(e);for(const r of t.elements)n=n.filter(i=>!Mn(i,r));return{arrayValue:{values:n}}}class lc extends Lc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ug(t){return at(t.integerValue||t.doubleValue)}function l_(t){return Nf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ib(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bo&&i instanceof Bo||r instanceof zo&&i instanceof zo?cs(r.elements,i.elements,Mn):r instanceof lc&&i instanceof lc?Mn(r.Pe,i.Pe):r instanceof ac&&i instanceof ac}(t.transform,e.transform)}class sb{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mc{}function c_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new d_(t.key,Jn.none()):new oa(t.key,t.data,Jn.none());{const n=t.data,r=wn.empty();let i=new Et(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new wi(t.key,r,new _n(i.toArray()),Jn.none())}}function ob(t,e,n){t instanceof oa?function(i,s,o){const l=i.value.clone(),c=zg(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof wi?function(i,s,o){if(!yl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=zg(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(u_(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function go(t,e,n,r){return t instanceof oa?function(s,o,l,c){if(!yl(s.precondition,o))return l;const h=s.value.clone(),p=$g(s.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof wi?function(s,o,l,c){if(!yl(s.precondition,o))return l;const h=$g(s.fieldTransforms,c,o),p=o.data;return p.setAll(u_(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return yl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function ab(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=s_(r.transform,i||null);s!=null&&(n===null&&(n=wn.empty()),n.set(r.field,s))}return n||null}function Bg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cs(r,i,(s,o)=>ib(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oa extends Mc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wi extends Mc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function u_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zg(t,e,n){const r=new Map;Be(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,rb(o,l,n[i]))}return r}function $g(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,nb(s,o,e))}return r}class d_ extends Mc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lb extends Mc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ob(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=go(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=go(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=r_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const c=c_(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xt())}isEqual(e){return this.batchId===e.batchId&&cs(this.mutations,e.mutations,(n,r)=>Bg(n,r))&&cs(this.baseMutations,e.baseMutations,(n,r)=>Bg(n,r))}}class Lf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Be(e.mutations.length===r.length);let i=function(){return JA}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Lf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,ce;function db(t){switch(t){default:return le();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function hb(t){if(t===void 0)return di("GRPC error has no .code"),B.UNKNOWN;switch(t){case ze.OK:return B.OK;case ze.CANCELLED:return B.CANCELLED;case ze.UNKNOWN:return B.UNKNOWN;case ze.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case ze.INTERNAL:return B.INTERNAL;case ze.UNAVAILABLE:return B.UNAVAILABLE;case ze.UNAUTHENTICATED:return B.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case ze.NOT_FOUND:return B.NOT_FOUND;case ze.ALREADY_EXISTS:return B.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return B.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case ze.ABORTED:return B.ABORTED;case ze.OUT_OF_RANGE:return B.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return B.UNIMPLEMENTED;case ze.DATA_LOSS:return B.DATA_LOSS;default:return le()}}(ce=ze||(ze={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new jw([4294967295,4294967295],0);class fb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mb(t,e){return sh(t,e.toTimestamp())}function Zi(t){return Be(!!t),Ae.fromTimestamp(function(n){const r=hi(n);return new tt(r.seconds,r.nanos)}(t))}function h_(t,e){return oh(t,e).canonicalString()}function oh(t,e){const n=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gb(t){const e=$e.fromString(t);return Be(Sb(e)),e}function ah(t,e){return h_(t.databaseId,e.path)}function yb(t){const e=gb(t);return e.length===4?$e.emptyPath():wb(e)}function vb(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wb(t){return Be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Wg(t,e,n){return{name:ah(t,e),fields:n.value.mapValue.fields}}function _b(t,e){let n;if(e instanceof oa)n={update:Wg(t,e.key,e.value)};else if(e instanceof d_)n={delete:ah(t,e.key)};else if(e instanceof wi)n={update:Wg(t,e.key,e.data),updateMask:Ib(e.fieldMask)};else{if(!(e instanceof lb))return le();n={verify:ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof ac)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof lc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:mb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function xb(t,e){return t&&t.length>0?(Be(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Zi(i.updateTime):Zi(s);return o.isEqual(Ae.min())&&(o=Zi(s)),new sb(o,i.transformResults||[])}(n,e))):[]}function Eb(t){let e=yb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Be(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const v=f_(m);return v instanceof Lr&&Qw(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(v=>function(b){return new sc(Ni(b.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,bf(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(m){const v=!!m.before,C=m.values||[];return new ic(C,v)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const v=!m.before,C=m.values||[];return new ic(C,v)}(n.endAt)),WA(e,i,o,s,l,"F",c,h)}function f_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ni(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ni(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ni(n.unaryFilter.field);return Ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ni(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Ni(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Lr.create(n.compositeFilter.filters.map(r=>f_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function Ni(t){return lt.fromServerFormat(t.fieldPath)}function Ib(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Sb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e){this.ct=e}}function Cb(t){const e=Eb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ih(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.un=new Ab}addToCollectionParentIndex(e,n){return this.un.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Dr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class Ab{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Et($e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Et($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fs(0)}static kn(){return new fs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.changes=new xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&go(r.mutation,i,_n.empty(),tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xt()){const i=Jr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Qa();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=oc();const o=mo(),l=function(){return mo()}();return n.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof wi)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),go(p.mutation,h,p.mutation.getFieldMask(),tt.now())):o.set(h.key,_n.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new Rb(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=mo();let i=new Mt((o,l)=>o-l),s=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||_n.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(i.get(l.batchId)||xt()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=r_();p.forEach(v=>{if(!s.has(v)){const C=c_(n.get(v),r.get(v));C!==null&&m.set(v,C),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):V.resolve(Jr());let l=-1,c=s;return o.next(h=>V.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?V.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{c=c.insert(p,v)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,xt())).next(p=>({batchId:l,changes:n_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=Qa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Qa();return this.indexManager.getCollectionParents(e,s).next(l=>V.forEach(l,c=>{const h=function(m,v){return new Dc(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,vn.newInvalidDocument(p)))});let l=Qa();return o.forEach((c,h)=>{const p=s.get(c);p!==void 0&&go(p.mutation,h,_n.empty(),tt.now()),jf(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return V.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zi(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Cb(i.bundledQuery),readTime:Zi(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.overlays=new Mt(ie.comparator),this.Ir=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Jr();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=Jr(),s=n.length+1,o=new ie(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Mt((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Jr(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Jr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return V.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ub(n,r));let s=this.Ir.get(n);s===void 0&&(s=xt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this.Tr=new Et(Je.Er),this.dr=new Et(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new $e([])),r=new Je(n,e),i=new Je(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new $e([])),r=new Je(n,e),i=new Je(n,e+1);let s=xt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||we(e.wr,n.wr)}static Ar(e,n){return we(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(Je.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cb(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Je(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),i=new Je(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(we);return n.forEach(i=>{const s=new Je(i,0),o=new Je(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new Je(new ie(s),0);let l=new Et(we);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.wr)),!0)},o),V.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(n.mutations,i=>{const s=new Je(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Je(n,0),i=this.br.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.Mr=e,this.docs=function(){return new Mt(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(n))}getEntries(e,n){let r=oc();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vn.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=oc();const o=n.path,l=new ie(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||SA(IA(p),r)<=0||(i.has(p.key)||jf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Or(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Mb(this)}getSize(e){return V.resolve(this.size)}}class Mb extends bb{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.persistence=e,this.Nr=new xs(n=>Pf(n),Of),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mf,this.targetCount=0,this.kr=fs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),V.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Kn(n),V.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $w(0),this.Kr=!1,this.Kr=!0,this.$r=new jb,this.referenceDelegate=e(this),this.Ur=new Fb(this),this.indexManager=new kb,this.remoteDocumentCache=function(i){return new Lb(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Tb(n),this.Gr=new Pb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ob,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Db(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new Ub(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Ub extends CA{constructor(e){super(),this.currentSequenceNumber=e}}class Ff{constructor(e){this.persistence=e,this.Jr=new Mf,this.Yr=null}static Zr(e){return new Ff(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return V.or([()=>V.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=xt(),i=xt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Vf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return GS()?8:kA(St())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Bb;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(qs()<=ae.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(qs()<=ae.DEBUG&&Q("QueryEngine","Query:",Ks(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(qs()<=ae.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(n))):V.resolve())}Yi(e,n){if(Vg(n))return V.resolve(null);let r=ni(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ih(n,null,"F"),r=ni(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=xt(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,ih(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,i){return Vg(n)||i.isEqual(Ae.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?V.resolve(null):(qs()<=ae.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ks(n)),this.rs(e,o,n,EA(i,-1)).next(l=>l))})}ts(e,n){let r=new Et(KA(e));return n.forEach((i,s)=>{jf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return qs()<=ae.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Ks(n)),this.Ji.getDocumentsMatchingQuery(e,n,Dr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Mt(we),this._s=new xs(s=>Pf(s),Of),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Wb(t,e,n,r){return new $b(t,e,n,r)}async function p_(t,e){const n=xe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=xt();for(const h of i){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function Hb(t,e){const n=xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,v=m.keys();let C=V.resolve();return v.forEach(b=>{C=C.next(()=>p.getEntry(c,b)).next(k=>{const O=h.docVersions.get(b);Be(O!==null),k.version.compareTo(O)<0&&(m.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),p.addEntry(k)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=xt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Gb(t){const e=xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function qb(t,e){const n=xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class Hg{constructor(){this.activeTargetIds=eb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kb{constructor(){this.so=new Hg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Hg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya=null;function $u(){return Ya===null?Ya=function(){return 268435456+Math.round(2147483648*Math.random())}():Ya++,"0x"+Ya.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class Xb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=$u(),c=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,c,h,i).then(p=>(Q("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ec("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",i),p})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_s}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Yb[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=$u();return new Promise((o,l)=>{const c=new Dw;c.setWithCredentials(!0),c.listenOnce(Lw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ml.NO_ERROR:const p=c.getResponseJson();Q(vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case ml.TIMEOUT:Q(vt,`RPC '${e}' ${s} timed out`),l(new ee(B.DEADLINE_EXCEEDED,"Request time out"));break;case ml.HTTP_ERROR:const m=c.getStatus();if(Q(vt,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const C=v==null?void 0:v.error;if(C&&C.status&&C.message){const b=function(O){const E=O.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(E)>=0?E:B.UNKNOWN}(C.status);l(new ee(b,C.message))}else l(new ee(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ee(B.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{Q(vt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Q(vt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=$u(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Vw(),l=Fw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");Q(vt,`Creating RPC '${e}' stream ${i}: ${p}`,c);const m=o.createWebChannel(p,c);let v=!1,C=!1;const b=new Jb({Io:O=>{C?Q(vt,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(v||(Q(vt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),Q(vt,`RPC '${e}' stream ${i} sending:`,O),m.send(O))},To:()=>m.close()}),k=(O,E,w)=>{O.listen(E,I=>{try{w(I)}catch(j){setTimeout(()=>{throw j},0)}})};return k(m,eo.EventType.OPEN,()=>{C||(Q(vt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),k(m,eo.EventType.CLOSE,()=>{C||(C=!0,Q(vt,`RPC '${e}' stream ${i} transport closed`),b.So())}),k(m,eo.EventType.ERROR,O=>{C||(C=!0,ec(vt,`RPC '${e}' stream ${i} transport errored:`,O),b.So(new ee(B.UNAVAILABLE,"The operation could not be completed")))}),k(m,eo.EventType.MESSAGE,O=>{var E;if(!C){const w=O.data[0];Be(!!w);const I=w,j=I.error||((E=I[0])===null||E===void 0?void 0:E.error);if(j){Q(vt,`RPC '${e}' stream ${i} received error:`,j);const L=j.status;let F=function(x){const S=ze[x];if(S!==void 0)return hb(S)}(L),_=j.message;F===void 0&&(F=B.INTERNAL,_="Unknown error status: "+L+" with message "+j.message),C=!0,b.So(new ee(F,_)),m.close()}else Q(vt,`RPC '${e}' stream ${i} received:`,w),b.bo(w)}}),k(l,Mw.STAT_EVENT,O=>{O.stat===eh.PROXY?Q(vt,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===eh.NOPROXY&&Q(vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Wu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){return new fb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n,r,i,s,o,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new m_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(di(n.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ee(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eR extends Zb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=xb(e.writeResults,e.commitTime),r=Zi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=vb(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_b(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,oh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(B.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,oh(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(di(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{la(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=xe(c);h.L_.add(4),await aa(h),h.q_.set("Unknown"),h.L_.delete(4),await Vc(h)}(this))})}),this.q_=new nR(r,i)}}async function Vc(t){if(la(t))for(const e of t.B_)await e(!0)}async function aa(t){for(const e of t.B_)await e(!1)}function la(t){return xe(t).L_.size===0}async function g_(t,e,n){if(!jc(e))throw e;t.L_.add(1),await aa(t),t.q_.set("Offline"),n||(n=()=>Gb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Vc(t)})}function y_(t,e){return e().catch(n=>g_(t,n,e))}async function Uc(t){const e=xe(t),n=Mr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;iR(e);)try{const i=await qb(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,sR(e,i)}catch(i){await g_(e,i)}v_(e)&&w_(e)}function iR(t){return la(t)&&t.O_.length<10}function sR(t,e){t.O_.push(e);const n=Mr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function v_(t){return la(t)&&!Mr(t).n_()&&t.O_.length>0}function w_(t){Mr(t).start()}async function oR(t){Mr(t).p_()}async function aR(t){const e=Mr(t);for(const n of t.O_)e.m_(n.mutations)}async function lR(t,e,n){const r=t.O_.shift(),i=Lf.from(r,e,n);await y_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Uc(t)}async function cR(t,e){e&&Mr(t).V_&&await async function(r,i){if(function(o){return db(o)&&o!==B.ABORTED}(i.code)){const s=r.O_.shift();Mr(r).s_(),await y_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Uc(r)}}(t,e),v_(t)&&w_(t)}async function qg(t,e){const n=xe(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=la(n);n.L_.add(3),await aa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Vc(n)}async function uR(t,e){const n=xe(t);e?(n.L_.delete(2),await Vc(n)):e||(n.L_.add(2),await aa(n),n.q_.set("Unknown"))}function Mr(t){return t.U_||(t.U_=function(n,r,i){const s=xe(n);return s.w_(),new eR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oR.bind(null,t),mo:cR.bind(null,t),f_:aR.bind(null,t),g_:lR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Uc(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Uf(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __(t,e){if(di("AsyncQueue",`${e}: ${t}`),jc(t))return new ee(B.UNAVAILABLE,`${e}: ${t}`);throw t}class dR{constructor(){this.queries=Kg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=xe(n),s=i.queries;i.queries=Kg(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new ee(B.ABORTED,"Firestore shutting down"))}}function Kg(){return new xs(t=>e_(t),Zw)}function hR(t){t.Y_.forEach(e=>{e.next()})}var Qg,Yg;(Yg=Qg||(Qg={})).ea="default",Yg.Cache="cache";class fR{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xs(l=>e_(l),Zw),this.Ma=new Map,this.xa=new Set,this.Oa=new Mt(ie.comparator),this.Na=new Map,this.La=new Mf,this.Ba={},this.ka=new Map,this.qa=fs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pR(t,e,n){const r=vR(t);try{const i=await function(o,l){const c=xe(o),h=tt.now(),p=l.reduce((C,b)=>C.add(b.key),xt());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let b=oc(),k=xt();return c.cs.getEntries(C,p).next(O=>{b=O,b.forEach((E,w)=>{w.isValidDocument()||(k=k.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,b)).next(O=>{m=O;const E=[];for(const w of l){const I=ab(w,m.get(w.key).overlayedDocument);I!=null&&E.push(new wi(w.key,I,Gw(I.value.mapValue),Jn.exists(!0)))}return c.mutationQueue.addMutationBatch(C,h,E,l)}).next(O=>{v=O;const E=O.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(C,O.batchId,E)})}).then(()=>({batchId:v.batchId,changes:n_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Mt(we)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Bc(r,i.changes),await Uc(r.remoteStore)}catch(i){const s=__(i,"Failed to persist write");n.reject(s)}}function Jg(t,e,n){const r=xe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=xe(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const v of m.j_)v.Z_(l)&&(h=!0)}),h&&hR(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mR(t,e){const n=xe(t),r=e.batch.batchId;try{const i=await Hb(n.localStore,e);E_(n,r,null),x_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bc(n,i)}catch(i){await zw(i)}}async function gR(t,e,n){const r=xe(t);try{const i=await function(o,l){const c=xe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(Be(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);E_(r,e,n),x_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bc(r,i)}catch(i){await zw(i)}}function x_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function E_(t,e,n){const r=xe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}async function Bc(t,e,n){const r=xe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=void 0)===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=Vf.Wi(c.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,h){const p=xe(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(h,v=>V.forEach(v.$i,C=>p.persistence.referenceDelegate.addReference(m,v.targetId,C)).next(()=>V.forEach(v.Ui,C=>p.persistence.referenceDelegate.removeReference(m,v.targetId,C)))))}catch(m){if(!jc(m))throw m;Q("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const C=p.os.get(v),b=C.snapshotVersion,k=C.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(v,k)}}}(r.localStore,s))}async function yR(t,e){const n=xe(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await p_(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new ee(B.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bc(n,r.hs)}}function vR(t){const e=xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gR.bind(null,e),e}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Wb(this.persistence,new zb,e.initialUser,this.serializer)}Ga(e){return new Vb(Ff.Zr,this.serializer)}Wa(e){return new Kb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class lh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yR.bind(null,this.syncEngine),await uR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dR}()}createDatastore(e){const n=Fc(e.databaseInfo.databaseId),r=function(s){return new Xb(s)}(e.databaseInfo);return function(s,o,l,c){return new tR(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new rR(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Jg(this.syncEngine,n,0),function(){return Gg.D()?new Gg:new Qb}())}createSyncEngine(e,n){return function(i,s,o,l,c,h,p){const m=new fR(i,s,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=xe(i);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await aa(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lh.provider={build:()=>new lh};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wt.UNAUTHENTICATED,this.clientId=Bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=__(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hu(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await p_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _R(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>qg(e.remoteStore,i)),t._onlineComponents=e}async function _R(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ec("Error using user provided cache. Falling back to memory cache: "+n),await Hu(t,new cc)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Hu(t,new cc);return t._offlineComponents}async function xR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await Xg(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await Xg(t,new lh))),t._onlineComponents}function ER(t){return xR(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t,e,n){if(!n)throw new ee(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SR(t,e,n,r){if(e===!0&&r===!0)throw new ee(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ey(t){if(!ie.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Bf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function ch(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bf(t);throw new ee(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ty({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ty(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fA;switch(r.type){case"firstParty":return new yA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Zg.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Zg.delete(n),r.terminate())}(this),Promise.resolve()}}function TR(t,e,n,r={}){var i;const s=(t=ch(t,zf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ec("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=wt.MOCK_USER;else{l=US(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ee(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new wt(h)}t._authCredentials=new pA(new Uw(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $f(this.firestore,e,this._query)}}class Xn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}}class $o extends $f{constructor(e,n,r){super(e,n,HA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new ie(e))}withConverter(e){return new $o(this.firestore,e,this._path)}}function CR(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=Bw.newId()),IR("doc","path",e),t instanceof zf){const r=$e.fromString(e,...n);return ey(r),new Xn(t,null,new ie(r))}{if(!(t instanceof Xn||t instanceof $o))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return ey(r),new Xn(t.firestore,t instanceof $o?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new m_(this,"async_queue_retry"),this.Vu=()=>{const r=Wu();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Wu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Wu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ti;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!jc(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw di("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Uf.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&le()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class S_ extends zf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ny,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ny(e),this._firestoreClient=void 0,await e}}}function kR(t,e){const n=typeof t=="object"?t:gf(),r=typeof t=="string"?t:"(default)",i=vi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=FS("firestore");s&&TR(i,...s)}return i}function AR(t){if(t._terminated)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bR(t),t._firestoreClient}function bR(t){var e,n,r;const i=t._freezeSettings(),s=function(l,c,h,p){return new NA(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,I_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new wR(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wo(Ln.fromBase64String(e))}catch(n){throw new ee(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wo(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=/^__.*__$/;class NR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new oa(e,this.data,n,this.fieldTransforms)}}function b_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class Wf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Wf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(b_(this.Cu)&&RR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class PR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fc(e)}Qu(e,n,r,i=!1){return new Wf({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function OR(t){const e=t._freezeSettings(),n=Fc(t._databaseId);return new PR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jR(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);O_("Data must be an object, but it was:",o,r);const l=N_(r,o);let c,h;if(s.merge)c=new _n(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const v=DR(e,m,n);if(!o.contains(v))throw new ee(B.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);FR(p,v)||p.push(v)}c=new _n(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new NR(new wn(l),c,h)}function R_(t,e){if(P_(t=Lt(t)))return O_("Unsupported field value:",e,t),N_(t,e);if(t instanceof C_)return function(r,i){if(!b_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=R_(l,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=tt.fromDate(r);return{timestampValue:sh(i.serializer,s)}}if(r instanceof tt){const s=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sh(i.serializer,s)}}if(r instanceof k_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wo)return{bytesValue:pb(i.serializer,r._byteString)};if(r instanceof Xn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:h_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof A_)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Df(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Bf(r)}`)}(t,e)}function N_(t,e){const n={};return Ww(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,(r,i)=>{const s=R_(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function P_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof k_||t instanceof Wo||t instanceof Xn||t instanceof C_||t instanceof A_)}function O_(t,e,n){if(!P_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Bf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function DR(t,e,n){if((e=Lt(e))instanceof T_)return e._internalPath;if(typeof e=="string")return MR(t,e);throw uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const LR=new RegExp("[~\\*/\\[\\]]");function MR(t,e,n){if(e.search(LR)>=0)throw uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new T_(...e.split("."))._internalPath}catch{throw uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ee(B.INVALID_ARGUMENT,l+t+c)}function FR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function UR(t,e,n){t=ch(t,Xn);const r=ch(t.firestore,S_),i=VR(t.converter,e,n);return BR(r,[jR(OR(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Jn.none())])}function BR(t,e){return function(r,i){const s=new ti;return r.asyncQueue.enqueueAndForget(async()=>pR(await ER(r),i,s)),s.promise}(AR(t),e)}(function(e,n=!0){(function(i){_s=i})(ys),jn(new Tn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new S_(new mA(r.getProvider("auth-internal")),new wA(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ee(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),sn(Ng,"4.7.3",e),sn(Ng,"4.7.3","esm2017")})();const j_="@firebase/installations",Hf="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=1e4,L_=`w:${Hf}`,M_="FIS_v2",zR="https://firebaseinstallations.googleapis.com/v1",$R=60*60*1e3,WR="installations",HR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},fi=new yi(WR,HR,GR);function F_(t){return t instanceof Cn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_({projectId:t}){return`${zR}/projects/${t}/installations`}function U_(t){return{token:t.token,requestStatus:2,expiresIn:KR(t.expiresIn),creationTime:Date.now()}}async function B_(t,e){const r=(await e.json()).error;return fi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function z_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function qR(t,{refreshToken:e}){const n=z_(t);return n.append("Authorization",QR(e)),n}async function $_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function KR(t){return Number(t.replace("s","000"))}function QR(t){return`${M_} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=V_(t),i=z_(t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:n,authVersion:M_,appId:t.appId,sdkVersion:L_},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await $_(()=>fetch(r,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:U_(h.authToken)}}else throw await B_("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=/^[cdef][\w-]{21}$/,uh="";function ZR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=eN(t);return XR.test(n)?n:uh}catch{return uh}}function eN(t){return JR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=new Map;function G_(t,e){const n=zc(t);q_(n,e),tN(n,e)}function q_(t,e){const n=H_.get(t);if(n)for(const r of n)r(e)}function tN(t,e){const n=nN();n&&n.postMessage({key:t,fid:e}),rN()}let Xr=null;function nN(){return!Xr&&"BroadcastChannel"in self&&(Xr=new BroadcastChannel("[Firebase] FID Change"),Xr.onmessage=t=>{q_(t.data.key,t.data.fid)}),Xr}function rN(){H_.size===0&&Xr&&(Xr.close(),Xr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="firebase-installations-database",sN=1,pi="firebase-installations-store";let Gu=null;function Gf(){return Gu||(Gu=Y0(iN,sN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(pi)}}})),Gu}async function dc(t,e){const n=zc(t),i=(await Gf()).transaction(pi,"readwrite"),s=i.objectStore(pi),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&G_(t,e.fid),e}async function K_(t){const e=zc(t),r=(await Gf()).transaction(pi,"readwrite");await r.objectStore(pi).delete(e),await r.done}async function $c(t,e){const n=zc(t),i=(await Gf()).transaction(pi,"readwrite"),s=i.objectStore(pi),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&G_(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qf(t){let e;const n=await $c(t.appConfig,r=>{const i=oN(r),s=aN(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===uh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function oN(t){const e=t||{fid:ZR(),registrationStatus:0};return Q_(e)}function aN(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(fi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=lN(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:cN(t)}:{installationEntry:e}}async function lN(t,e){try{const n=await YR(t,e);return dc(t.appConfig,n)}catch(n){throw F_(n)&&n.customData.serverCode===409?await K_(t.appConfig):await dc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function cN(t){let e=await ry(t.appConfig);for(;e.registrationStatus===1;)await W_(100),e=await ry(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await qf(t);return r||n}return e}function ry(t){return $c(t,e=>{if(!e)throw fi.create("installation-not-found");return Q_(e)})}function Q_(t){return uN(t)?{fid:t.fid,registrationStatus:0}:t}function uN(t){return t.registrationStatus===1&&t.registrationTime+D_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN({appConfig:t,heartbeatServiceProvider:e},n){const r=hN(t,n),i=qR(t,n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:L_,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await $_(()=>fetch(r,l));if(c.ok){const h=await c.json();return U_(h)}else throw await B_("Generate Auth Token",c)}function hN(t,{fid:e}){return`${V_(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kf(t,e=!1){let n;const r=await $c(t.appConfig,s=>{if(!Y_(s))throw fi.create("not-registered");const o=s.authToken;if(!e&&mN(o))return s;if(o.requestStatus===1)return n=fN(t,e),s;{if(!navigator.onLine)throw fi.create("app-offline");const l=yN(s);return n=pN(t,l),l}});return n?await n:r.authToken}async function fN(t,e){let n=await iy(t.appConfig);for(;n.authToken.requestStatus===1;)await W_(100),n=await iy(t.appConfig);const r=n.authToken;return r.requestStatus===0?Kf(t,e):r}function iy(t){return $c(t,e=>{if(!Y_(e))throw fi.create("not-registered");const n=e.authToken;return vN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function pN(t,e){try{const n=await dN(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await dc(t.appConfig,r),n}catch(n){if(F_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await K_(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await dc(t.appConfig,r)}throw n}}function Y_(t){return t!==void 0&&t.registrationStatus===2}function mN(t){return t.requestStatus===2&&!gN(t)}function gN(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+$R}function yN(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function vN(t){return t.requestStatus===1&&t.requestTime+D_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t){const e=t,{installationEntry:n,registrationPromise:r}=await qf(e);return r?r.catch(console.error):Kf(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(t,e=!1){const n=t;return await xN(n),(await Kf(n,e)).token}async function xN(t){const{registrationPromise:e}=await qf(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t){if(!t||!t.options)throw qu("App Configuration");if(!t.name)throw qu("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw qu(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function qu(t){return fi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="installations",IN="installations-internal",SN=t=>{const e=t.getProvider("app").getImmediate(),n=EN(e),r=vi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},TN=t=>{const e=t.getProvider("app").getImmediate(),n=vi(e,J_).getImmediate();return{getId:()=>wN(n),getToken:i=>_N(n,i)}};function CN(){jn(new Tn(J_,SN,"PUBLIC")),jn(new Tn(IN,TN,"PRIVATE"))}CN();sn(j_,Hf);sn(j_,Hf,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc="analytics",kN="firebase_id",AN="origin",bN=60*1e3,RN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt=new Rc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wt=new yi("analytics","Analytics",NN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t){if(!t.startsWith(Qf)){const e=Wt.create("invalid-gtag-resource",{gtagURL:t});return Dt.warn(e.message),""}return t}function X_(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function ON(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function jN(t,e){const n=ON("firebase-js-sdk-policy",{createScriptURL:PN}),r=document.createElement("script"),i=`${Qf}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function DN(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function LN(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await X_(n)).find(h=>h.measurementId===i);c&&await e[c.appId]}}catch(l){Dt.error(l)}t("config",i,s)}async function MN(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await X_(n);for(const c of o){const h=l.find(m=>m.measurementId===c),p=h&&e[h.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Dt.error(s)}}function FN(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,c]=o;await MN(t,e,n,l,c)}else if(s==="config"){const[l,c]=o;await LN(t,e,n,r,l,c)}else if(s==="consent"){const[l,c]=o;t("consent",l,c)}else if(s==="get"){const[l,c,h]=o;t("get",l,c,h)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Dt.error(l)}}return i}function VN(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=FN(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function UN(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Qf)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=30,zN=1e3;class $N{constructor(e={},n=zN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Z_=new $N;function WN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function HN(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:WN(r)},s=RN.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw Wt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function GN(t,e=Z_,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Wt.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Wt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new QN;return setTimeout(async()=>{l.abort()},bN),ex({appId:r,apiKey:i,measurementId:s},o,l,e)}async function ex(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Z_){var s;const{appId:o,measurementId:l}=t;try{await qN(r,e)}catch(c){if(l)return Dt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await HN(t);return i.deleteThrottleMetadata(o),c}catch(c){const h=c;if(!KN(h)){if(i.deleteThrottleMetadata(o),l)return Dt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:l};throw c}const p=Number((s=h==null?void 0:h.customData)===null||s===void 0?void 0:s.httpStatus)===503?ig(n,i.intervalMillis,BN):ig(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return i.setThrottleMetadata(o,m),Dt.debug(`Calling attemptFetch again in ${p} millis`),ex(t,m,r,i)}}function qN(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Wt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function KN(t){if(!(t instanceof Cn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class QN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function YN(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(){if(G0())try{await q0()}catch(t){return Dt.warn(Wt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Dt.warn(Wt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function XN(t,e,n,r,i,s,o){var l;const c=GN(t);c.then(C=>{n[C.measurementId]=C.appId,t.options.measurementId&&C.measurementId!==t.options.measurementId&&Dt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${C.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(C=>Dt.error(C)),e.push(c);const h=JN().then(C=>{if(C)return r.getId()}),[p,m]=await Promise.all([c,h]);UN(s)||jN(s,p.measurementId),i("js",new Date);const v=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return v[AN]="firebase",v.update=!0,m!=null&&(v[kN]=m),i("config",p.measurementId,v),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.app=e}_delete(){return delete yo[this.app.options.appId],Promise.resolve()}}let yo={},sy=[];const oy={};let Ku="dataLayer",eP="gtag",ay,tx,ly=!1;function tP(){const t=[];if(H0()&&t.push("This is a browser extension environment."),qS()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Wt.create("invalid-analytics-context",{errorInfo:e});Dt.warn(n.message)}}function nP(t,e,n){tP();const r=t.options.appId;if(!r)throw Wt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Dt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wt.create("no-api-key");if(yo[r]!=null)throw Wt.create("already-exists",{id:r});if(!ly){DN(Ku);const{wrappedGtag:s,gtagCore:o}=VN(yo,sy,oy,Ku,eP);tx=s,ay=o,ly=!0}return yo[r]=XN(t,sy,oy,e,ay,Ku,n),new ZN(t)}function rP(t=gf()){t=Lt(t);const e=vi(t,hc);return e.isInitialized()?e.getImmediate():iP(t)}function iP(t,e={}){const n=vi(t,hc);if(n.isInitialized()){const i=n.getImmediate();if(Do(e,n.getOptions()))return i;throw Wt.create("already-initialized")}return n.initialize({options:e})}function sP(t,e,n,r){t=Lt(t),YN(tx,yo[t.app.options.appId],e,n,r).catch(i=>Dt.error(i))}const cy="@firebase/analytics",uy="0.10.8";function oP(){jn(new Tn(hc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return nP(r,i,n)},"PUBLIC")),jn(new Tn("analytics-internal",t,"PRIVATE")),sn(cy,uy),sn(cy,uy,"esm2017");function t(e){try{const n=e.getProvider(hc).getImmediate();return{logEvent:(r,i,s)=>sP(n,r,i,s)}}catch(n){throw Wt.create("interop-component-reg-failed",{reason:n})}}}oP();const aP={apiKey:"AIzaSyCIqpOl5nT3VH149xISPqyLgkjyIiMWPb8",authDomain:"flinx-8a05e.firebaseapp.com",projectId:"flinx-8a05e",storageBucket:"flinx-8a05e.firebasestorage.app",messagingSenderId:"977393893446",appId:"1:977393893446:web:308db5f232f7c5558cca47",measurementId:"G-N0LW13KMNJ"},Yf=J0(aP);let lP;if(typeof window<"u")try{lP=rP(Yf)}catch{console.log("Analytics initialization skipped (local development)")}const Ho=cA(Yf),cP=kR(Yf),Jf=new Wn;Jf.addScope("profile");Jf.addScope("email");Jf.addScope("openid");const Go=new $n,nx="863917229498555";console.log(" Configuring Facebook Auth Provider:");console.log("   - App ID:",nx);console.log("   - Redirect URL:","https://flinx-8a05e.firebaseapp.com/__/auth/handler");Go.setCustomParameters({app_id:nx,display:"popup",auth_type:"rerequest",scope:"public_profile,email"});Go.addScope("public_profile");Go.addScope("email");console.log(" Facebook Auth Provider initialized with:");console.log("   - Public Profile scope: ");console.log("   - Email scope: ");console.log("   - Web OAuth redirect enabled: ");const rx=async(t,e)=>{var o,l,c;console.log(` Processing ${e} login for user:`,t.email);let n=null;e==="facebook"&&((o=t.providerData[0])!=null&&o.uid)&&(n=t.providerData[0].uid);const r={uid:t.uid,email:t.email,name:t.displayName||"User",picture:t.photoURL||null,authProvider:e,googleId:e==="google"?(l=t.providerData[0])==null?void 0:l.uid:null,facebookId:e==="facebook"?n:null,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};console.log(" User info extracted:",{email:r.email,name:r.name,authProvider:r.authProvider});try{const h=await t.getIdToken();localStorage.setItem("idToken",h),console.log(" Firebase ID token stored for Socket.IO")}catch(h){console.error(" Failed to get Firebase ID token:",h)}try{const p=await fetch("https://flinxx-backend.onrender.com/api/users/save",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({uid:t.uid,email:t.email,displayName:t.displayName||"User",photoURL:t.photoURL||null,authProvider:e})});if(!p.ok)throw new Error(`Failed to save user: ${p.status}`);const m=await p.json();console.log(" User saved to Neon PostgreSQL:",m.user),m.user&&(r.profileCompleted=m.user.profileCompleted,r.isProfileCompleted=m.user.profileCompleted,r.id=m.user.id,console.log("[FIREBASE]  Updated userInfo with profileCompleted:",m.user.profileCompleted)),localStorage.setItem("dbUserId",m.user.id)}catch(h){console.error(" Error saving user to backend database:",h)}try{await UR(CR(cP,"users",t.uid),{email:t.email,displayName:t.displayName,photoURL:t.photoURL,authProvider:e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()},{merge:!0}),console.log(" User saved to Firestore")}catch(h){console.error(" Error saving user to Firestore:",h)}console.log(`
 [firebase] handleLoginSuccess storing to localStorage`),console.log(" [firebase]   - userInfo.profileCompleted =",r.profileCompleted),console.log(" [firebase]   - userInfo.isProfileCompleted =",r.isProfileCompleted);const i={id:r.id,uid:r.uid,name:t.displayName,email:t.email,picture:t.photoURL,googleId:e==="google"?(c=t.providerData[0])==null?void 0:c.uid:null,facebookId:e==="facebook"?n:null,profileCompleted:r.profileCompleted||!1,isProfileCompleted:r.profileCompleted||!1,authProvider:e};console.log(" [firebase] userToStore object:",i),localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("authProvider",e),localStorage.setItem("userInfo",JSON.stringify(r)),console.log(" [firebase]  Stored to localStorage, verifying...");const s=JSON.parse(localStorage.getItem("user"));return console.log(" [firebase]   - Verified profileCompleted:",s.profileCompleted),console.log(" [firebase]  User data stored in localStorage with profileCompleted:",r.profileCompleted||!1),r},dy=async()=>{var t;try{console.log(" Starting Facebook login via popup...");const e=await yk(Ho,Go);console.log(" Facebook popup login successful:",e.user.email);const n=(t=e.user.providerData[0])==null?void 0:t.providerId;let r="facebook";return n==="facebook.com"&&(r="facebook"),rx(e.user,r)}catch(e){console.warn(" Facebook popup login failed, trying redirect method:",e.code);try{return console.log(" Starting Facebook login via redirect..."),await Ik(Ho,Go),null}catch(n){throw console.error(" Facebook login failed:",n),n}}},uP=async()=>{var t;try{const e=await Tk(Ho);if(e!=null&&e.user){console.log(" Redirect login successful:",e.user.email);const n=(t=e.user.providerData[0])==null?void 0:t.providerId;console.log("Provider:",n);let r="unknown";return n==="google.com"?r="google":n==="facebook.com"&&(r="facebook"),rx(e.user,r)}}catch(e){console.error("Redirect result error:",e),e.code==="auth/account-exists-with-different-credential"?console.error("Account exists with different credential"):e.code==="auth/auth-domain-config-required"&&console.error("Auth domain config required")}return null},Es=R.createContext(),dP=({children:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState(!0),[s,o]=R.useState(!1),[l,c]=R.useState(!1);R.useEffect(()=>{(async()=>{try{console.log(`

 [AuthContext] `),console.log(" [AuthContext] INITIALIZATION STARTED"),console.log(" [AuthContext] ");const v=localStorage.getItem("token"),C=localStorage.getItem("user");if(console.log(" [AuthContext] STEP 1: Check localStorage"),console.log(" [AuthContext]   - token:",v?" Found":" Not found"),console.log(" [AuthContext]   - user:",C?" Found":" Not found"),v&&C)try{console.log(`
 [AuthContext] STEP 2: Parse localStorage user`);const k=JSON.parse(C);console.log(" [AuthContext]   - Parsed user email:",k.email),console.log(" [AuthContext]   - profileCompleted from localStorage:",k.profileCompleted,"(type:",typeof k.profileCompleted+")"),console.log(" [AuthContext]  Attempting to restore Google OAuth user from localStorage:",k.email),console.log(" [AuthContext] User data from localStorage:",{id:k.id,email:k.email,profileCompleted:k.profileCompleted,isProfileCompleted:k.isProfileCompleted});const O="https://flinxx-backend.onrender.com";console.log(`
 [AuthContext] STEP 3: Validate token with backend`),console.log(" [AuthContext]   - Backend URL:",O),console.log(" [AuthContext]   - Making request to /api/profile...");const E=await fetch(`${O}/api/profile`,{method:"GET",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(console.log(" [AuthContext]   - Response status:",E.status),E.ok){const w=await E.json();if(console.log(" [AuthContext]   - Response OK, parsing data..."),console.log(" [AuthContext]   - data.success:",w.success),console.log(" [AuthContext]   - data.user available:",!!w.user),w.success&&w.user){console.log(" [AuthContext]  Token validated, user restored from backend"),console.log(" [AuthContext] Backend user data:",{id:w.user.id,email:w.user.email,profileCompleted:w.user.profileCompleted,birthday:w.user.birthday,gender:w.user.gender}),console.log(" [AuthContext] Setting user state with:",{email:w.user.email,profileCompleted:w.user.profileCompleted}),n(w.user),o(!0),i(!1),console.log(" [AuthContext]  COMPLETE - Returning from token validation path");return}else console.log(" [AuthContext]   Response OK but data.success or data.user missing")}else{console.log(" [AuthContext]  Token validation response not OK:",E.status);const w=await E.text();console.log(" [AuthContext] Error response:",w)}}catch(k){console.error(" [AuthContext]  Error validating token:",k)}else console.log(`
 [AuthContext] STEP 2: Skip token validation (missing token or user)`),console.log(" [AuthContext]   - Skipping /api/profile call");if(C)try{console.log(`
 [AuthContext] STEP 3: Restore from localStorage (no token validation)`);const k=JSON.parse(C);console.log(" [AuthContext]   - Email:",k.email),console.log(" [AuthContext]   - profileCompleted:",k.profileCompleted,"(type:",typeof k.profileCompleted+")"),console.log(" [AuthContext]  User loaded from localStorage (no token validation):",k.email),console.log(" [AuthContext] User data from localStorage:",{id:k.id,email:k.email,profileCompleted:k.profileCompleted,isProfileCompleted:k.isProfileCompleted}),console.log(" [AuthContext] Setting user state with profileCompleted:",k.profileCompleted),n(k),o(!0),i(!1),console.log(" [AuthContext]  COMPLETE - Returning from localStorage fallback path");return}catch(k){console.error("[AuthContext] Error parsing saved user:",k)}return console.log(`
 [AuthContext] STEP 3: No stored token or user, checking Firebase...`),YC(Ho,async k=>{var O,E;if(console.log(`
 [AuthContext] Firebase onAuthStateChanged fired`),console.log(" [AuthContext]   - firebaseUser:",k?k.email:"null"),k){const w=((O=k.providerData[0])==null?void 0:O.providerId)||"unknown";console.log(" [AuthContext] User authenticated via Firebase"),console.log(" [AuthContext]   - Email:",k.email),console.log(" [AuthContext]   - Provider:",w);try{console.log(" [AuthContext] Getting Firebase ID token...");const j=await k.getIdToken();console.log(" [AuthContext]  ID token obtained"),localStorage.setItem("idToken",j),console.log(" Firebase ID token stored for Socket.IO");const L="https://flinxx-backend.onrender.com";console.log(" [AuthContext] Calling /api/profile with ID token...");const F=await fetch(`${L}/api/profile`,{method:"GET",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});if(console.log(" [AuthContext] /api/profile response status:",F.status),F.ok){const _=await F.json();if(console.log(" [AuthContext] /api/profile response OK"),console.log(" [AuthContext]   - success:",_.success),console.log(" [AuthContext]   - user.profileCompleted:",(E=_.user)==null?void 0:E.profileCompleted),_.success&&_.user){console.log(" [AuthContext]  Fetched full user profile from database:",{email:_.user.email,profileCompleted:_.user.profileCompleted}),console.log(" [AuthContext] Setting user state with profileCompleted:",_.user.profileCompleted),n(_.user),o(!0),i(!1);return}}else console.log(" [AuthContext]  /api/profile response not OK:",F.status)}catch(j){console.warn("[AuthContext]  Failed to fetch profile from database:",j)}const I={uid:k.uid,email:k.email,displayName:k.displayName,photoURL:k.photoURL,authProvider:w,profileCompleted:!1};console.log("[AuthContext] Using fallback userInfo (database fetch failed):",I.email),console.log("[AuthContext]  WARNING: profileCompleted not loaded from database, defaulting to false"),n(I),o(!0),localStorage.setItem("userInfo",JSON.stringify(I)),localStorage.setItem("authProvider",w)}else{console.log(" [AuthContext] Firebase user is null/logged out");const w=localStorage.getItem("authToken"),I=localStorage.getItem("authProvider");if(console.log(" [AuthContext]   - authToken:",w?"Found":"Not found"),console.log(" [AuthContext]   - authProvider:",I),w&&I==="guest"){const j=JSON.parse(localStorage.getItem("userInfo")||"{}");console.log(" [AuthContext] Restoring guest login"),n(j),o(!0)}else console.log(" [AuthContext]  No authentication found, user will be redirected to login"),n(null),o(!1)}console.log(" [AuthContext] "),console.log(" [AuthContext] INITIALIZATION COMPLETE - Setting isLoading=false"),console.log(` [AuthContext] 
`),i(!1)})}catch(v){console.error("[AuthContext] Error initializing auth:",v),i(!1)}})()},[]);const h=()=>{n(null),o(!1),localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),localStorage.removeItem("authProvider"),localStorage.removeItem("token"),localStorage.removeItem("user")},p=(m,v)=>{console.log("[AuthContext] Storing token and user data:",v==null?void 0:v.email),localStorage.setItem("token",m),localStorage.setItem("user",JSON.stringify(v)),localStorage.setItem("authProvider","google"),n(v),o(!0)};return u.jsx(Es.Provider,{value:{user:e,isAuthenticated:s,isLoading:r,logout:h,authPending:l,setAuthPending:c,setAuthToken:p},children:t})};class hP extends Yo.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){var e;return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-bold text-red-500 mb-4",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-300 mb-8",children:(e=this.state.error)==null?void 0:e.message}),u.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg font-semibold text-white",children:"Reload Page"})]})}):this.props.children}}/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qo(){return qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qo.apply(this,arguments)}var _r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_r||(_r={}));const hy="popstate";function fP(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return dh("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ix(i)}return mP(e,n,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pP(){return Math.random().toString(36).substr(2,8)}function fy(t,e){return{usr:t.state,key:t.key,idx:e}}function dh(t,e,n,r){return n===void 0&&(n=null),qo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Is(e):e,{state:n,key:e&&e.key||r||pP()})}function ix(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Is(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function mP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=_r.Pop,c=null,h=p();h==null&&(h=0,o.replaceState(qo({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=_r.Pop;let O=p(),E=O==null?null:O-h;h=O,c&&c({action:l,location:k.location,delta:E})}function v(O,E){l=_r.Push;let w=dh(k.location,O,E);h=p()+1;let I=fy(w,h),j=k.createHref(w);try{o.pushState(I,"",j)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(j)}s&&c&&c({action:l,location:k.location,delta:1})}function C(O,E){l=_r.Replace;let w=dh(k.location,O,E);h=p();let I=fy(w,h),j=k.createHref(w);o.replaceState(I,"",j),s&&c&&c({action:l,location:k.location,delta:0})}function b(O){let E=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof O=="string"?O:ix(O);return w=w.replace(/ $/,"%20"),Ke(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let k={get action(){return l},get location(){return t(i,o)},listen(O){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(hy,m),c=O,()=>{i.removeEventListener(hy,m),c=null}},createHref(O){return e(i,O)},createURL:b,encodeLocation(O){let E=b(O);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:C,go(O){return o.go(O)}};return k}var py;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(py||(py={}));function gP(t,e,n){return n===void 0&&(n="/"),yP(t,e,n)}function yP(t,e,n,r){let i=typeof e=="string"?Is(e):e,s=ax(i.pathname||"/",n);if(s==null)return null;let o=sx(t);vP(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let h=RP(s);l=kP(o[c],h)}return l}function sx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=ri([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(Ke(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),sx(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:TP(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of ox(s.path))i(s,o,c)}),e}function ox(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ox(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function vP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:CP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wP=/^:[\w-]+$/,_P=3,xP=2,EP=1,IP=10,SP=-2,my=t=>t==="*";function TP(t,e){let n=t.split("/"),r=n.length;return n.some(my)&&(r+=SP),e&&(r+=xP),n.filter(i=>!my(i)).reduce((i,s)=>i+(wP.test(s)?_P:s===""?EP:IP),r)}function CP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function kP(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=AP({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),v=c.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:ri([s,m.pathname]),pathnameBase:MP(ri([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=ri([s,m.pathnameBase]))}return o}function AP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:v,isOptional:C}=p;if(v==="*"){let k=l[m]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const b=l[m];return C&&!b?h[v]=void 0:h[v]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function bP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Xf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function RP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ax(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const NP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PP=t=>NP.test(t);function OP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Is(t):t,s;if(n)if(PP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Xf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=gy(n.substring(1),"/"):s=gy(n,e)}else s=e;return{pathname:s,search:FP(r),hash:VP(i)}}function gy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Qu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function DP(t,e){let n=jP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function LP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Is(t):(i=qo({},t),Ke(!i.pathname||!i.pathname.includes("?"),Qu("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),Qu("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),Qu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}l=m>=0?e[m]:"/"}let c=OP(i,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const ri=t=>t.join("/").replace(/\/\/+/g,"/"),MP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lx=["post","put","patch","delete"];new Set(lx);const BP=["get",...lx];new Set(BP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ko.apply(this,arguments)}const Zf=R.createContext(null),zP=R.createContext(null),Wc=R.createContext(null),Hc=R.createContext(null),Ss=R.createContext({outlet:null,matches:[],isDataRoute:!1}),cx=R.createContext(null);function Gc(){return R.useContext(Hc)!=null}function qc(){return Gc()||Ke(!1),R.useContext(Hc).location}function ux(t){R.useContext(Wc).static||R.useLayoutEffect(t)}function Kt(){let{isDataRoute:t}=R.useContext(Ss);return t?t1():$P()}function $P(){Gc()||Ke(!1);let t=R.useContext(Zf),{basename:e,future:n,navigator:r}=R.useContext(Wc),{matches:i}=R.useContext(Ss),{pathname:s}=qc(),o=JSON.stringify(DP(i,n.v7_relativeSplatPath)),l=R.useRef(!1);return ux(()=>{l.current=!0}),R.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=LP(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ri([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,s,t])}function WP(t,e){return HP(t,e)}function HP(t,e,n,r){Gc()||Ke(!1);let{navigator:i}=R.useContext(Wc),{matches:s}=R.useContext(Ss),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=qc(),p;if(e){var m;let O=typeof e=="string"?Is(e):e;c==="/"||(m=O.pathname)!=null&&m.startsWith(c)||Ke(!1),p=O}else p=h;let v=p.pathname||"/",C=v;if(c!=="/"){let O=c.replace(/^\//,"").split("/");C="/"+v.replace(/^\//,"").split("/").slice(O.length).join("/")}let b=gP(t,{pathname:C}),k=YP(b&&b.map(O=>Object.assign({},O,{params:Object.assign({},l,O.params),pathname:ri([c,i.encodeLocation?i.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?c:ri([c,i.encodeLocation?i.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),s,n,r);return e&&k?R.createElement(Hc.Provider,{value:{location:Ko({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:_r.Pop}},k):k}function GP(){let t=e1(),e=UP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,null)}const qP=R.createElement(GP,null);class KP extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Ss.Provider,{value:this.props.routeContext},R.createElement(cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QP(t){let{routeContext:e,match:n,children:r}=t,i=R.useContext(Zf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Ss.Provider,{value:e},r)}function YP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Ke(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:v,errors:C}=n,b=m.route.loader&&v[m.route.id]===void 0&&(!C||C[m.route.id]===void 0);if(m.route.lazy||b){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,v)=>{let C,b=!1,k=null,O=null;n&&(C=l&&m.route.id?l[m.route.id]:void 0,k=m.route.errorElement||qP,c&&(h<0&&v===0?(n1("route-fallback"),b=!0,O=null):h===v&&(b=!0,O=m.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,v+1)),w=()=>{let I;return C?I=k:b?I=O:m.route.Component?I=R.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=p,R.createElement(QP,{match:m,routeContext:{outlet:p,matches:E,isDataRoute:n!=null},children:I})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?R.createElement(KP,{location:n.location,revalidation:n.revalidation,component:k,error:C,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var dx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dx||{}),hx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hx||{});function JP(t){let e=R.useContext(Zf);return e||Ke(!1),e}function XP(t){let e=R.useContext(zP);return e||Ke(!1),e}function ZP(t){let e=R.useContext(Ss);return e||Ke(!1),e}function fx(t){let e=ZP(),n=e.matches[e.matches.length-1];return n.route.id||Ke(!1),n.route.id}function e1(){var t;let e=R.useContext(cx),n=XP(),r=fx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function t1(){let{router:t}=JP(dx.UseNavigateStable),e=fx(hx.UseNavigateStable),n=R.useRef(!1);return ux(()=>{n.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ko({fromRouteId:e},s)))},[t,e])}const yy={};function n1(t,e,n){yy[t]||(yy[t]=!0)}function r1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Xt(t){Ke(!1)}function i1(t){let{basename:e="/",children:n=null,location:r,navigationType:i=_r.Pop,navigator:s,static:o=!1,future:l}=t;Gc()&&Ke(!1);let c=e.replace(/^\/*/,"/"),h=R.useMemo(()=>({basename:c,navigator:s,static:o,future:Ko({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=Is(r));let{pathname:p="/",search:m="",hash:v="",state:C=null,key:b="default"}=r,k=R.useMemo(()=>{let O=ax(p,c);return O==null?null:{location:{pathname:O,search:m,hash:v,state:C,key:b},navigationType:i}},[c,p,m,v,C,b,i]);return k==null?null:R.createElement(Wc.Provider,{value:h},R.createElement(Hc.Provider,{children:n,value:k}))}function s1(t){let{children:e,location:n}=t;return WP(hh(e),n)}new Promise(()=>{});function hh(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){n.push.apply(n,hh(r.props.children,s));return}r.type!==Xt&&Ke(!1),!r.props.index||!r.props.children||Ke(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hh(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function o1(t,e){let n=fh(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const a1="6";try{window.__reactRouterVersion=a1}catch{}const l1="startTransition",vy=gE[l1];function c1(t){let{basename:e,children:n,future:r,window:i}=t,s=R.useRef();s.current==null&&(s.current=fP({window:i,v5Compat:!0}));let o=s.current,[l,c]=R.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},p=R.useCallback(m=>{h&&vy?vy(()=>c(m)):c(m)},[c,h]);return R.useLayoutEffect(()=>o.listen(p),[o,p]),R.useEffect(()=>r1(r),[r]),R.createElement(i1,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var wy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wy||(wy={}));var _y;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_y||(_y={}));function px(t){let e=R.useRef(fh(t)),n=R.useRef(!1),r=qc(),i=R.useMemo(()=>o1(r.search,n.current?null:e.current),[r.search]),s=Kt(),o=R.useCallback((l,c)=>{const h=fh(typeof l=="function"?l(i):l);n.current=!0,s("?"+h,c)},[s,i]);return[i,o]}const u1="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMjgwIDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8IS0tIFB1cnBsZSBSb3VuZGVkLVNxdWFyZSBJY29uIChleGFjdCBmcm9tIGJyYW5kaW5nKSAtLT4NCiAgPGc+DQogICAgPCEtLSBHcmFkaWVudCBkZWZpbml0aW9ucyAtLT4NCiAgICA8ZGVmcz4NCiAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icHVycGxlR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPg0KICAgICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojOUQ0RUREO3N0b3Atb3BhY2l0eToxIiAvPg0KICAgICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3MjA5Qjc7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgDQogICAgICA8bGluZWFyR3JhZGllbnQgaWQ9Imdsb3dHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+DQogICAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDA7c3RvcC1vcGFjaXR5OjAuOCIgLz4NCiAgICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZBNTAwO3N0b3Atb3BhY2l0eTowLjQiIC8+DQogICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgDQogICAgICA8ZmlsdGVyIGlkPSJwcmVtaXVtU2hhZG93Ij4NCiAgICAgICAgPGZlRHJvcFNoYWRvdyBkeD0iMCIgZHk9IjQiIHN0ZERldmlhdGlvbj0iNiIgZmxvb2Qtb3BhY2l0eT0iMC4zNSIvPg0KICAgICAgPC9maWx0ZXI+DQogICAgPC9kZWZzPg0KICAgIA0KICAgIDwhLS0gR29sZGVuIGdsb3cvaGFsbyBiZWhpbmQgaWNvbiAtLT4NCiAgICA8Y2lyY2xlIGN4PSIzNiIgY3k9IjM2IiByPSIzNCIgZmlsbD0idXJsKCNnbG93R3JhZGllbnQpIiBvcGFjaXR5PSIwLjUiLz4NCiAgICANCiAgICA8IS0tIE1haW4gcHVycGxlIHJvdW5kZWQtc3F1YXJlIGJhY2tncm91bmQgLS0+DQogICAgPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iMTYiIGZpbGw9InVybCgjcHVycGxlR3JhZGllbnQpIiBmaWx0ZXI9InVybCgjcHJlbWl1bVNoYWRvdykiLz4NCiAgICANCiAgICA8IS0tIENhbWVyYSBib2R5ICh3aGl0ZSBvdXRsaW5lIHN0eWxlKSAtLT4NCiAgICA8cmVjdCB4PSIxNiIgeT0iMjIiIHdpZHRoPSIyNCIgaGVpZ2h0PSIxOCIgcng9IjIiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMi41Ii8+DQogICAgDQogICAgPCEtLSBDYW1lcmEgbGVucyAoY2lyY3VsYXIpIC0tPg0KICAgIDxjaXJjbGUgY3g9IjQ0IiBjeT0iMzEiIHI9IjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxjaXJjbGUgY3g9IjQ0IiBjeT0iMzEiIHI9IjMuNSIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuNSIvPg0KICAgIA0KICAgIDwhLS0gTGlnaHRuaW5nIGJvbHQgYWNjZW50ICh0b3AgcmlnaHQpIC0tPg0KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ2LCAxMCkiPg0KICAgICAgPCEtLSBNYWluIGxpZ2h0bmluZyBzaGFwZSAtLT4NCiAgICAgIDxwYXRoIGQ9Ik0gNiAwIEwgMiA2IEwgNiA2IEwgMCAxNCBMIDggOCBMIDQgOCBaIiBmaWxsPSIjRkZENzAwIiBzdHJva2U9IiNGRjhBMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogICAgICA8IS0tIElubmVyIGhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgICA8cGF0aCBkPSJNIDQgMSBMIDMgNCBMIDUgNCBMIDEgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRUIzQiIgc3Ryb2tlLXdpZHRoPSIwLjgiIG9wYWNpdHk9IjAuNyIvPg0KICAgIDwvZz4NCiAgICANCiAgICA8IS0tIEdvbGRlbiBzcGFya2xlIGFjY2VudHMgLS0+DQogICAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMS41IiBmaWxsPSIjRkZENzAwIiBvcGFjaXR5PSIwLjkiLz4NCiAgICA8Y2lyY2xlIGN4PSI1OCIgY3k9IjE4IiByPSIxLjUiIGZpbGw9IiNGRkQ3MDAiIG9wYWNpdHk9IjAuOCIvPg0KICAgIDxjaXJjbGUgY3g9IjE2IiBjeT0iNTYiIHI9IjEiIGZpbGw9IiNGRkIzMUEiIG9wYWNpdHk9IjAuNyIvPg0KICA8L2c+DQogIA0KICA8IS0tIEZMSU5YWCBUZXh0IC0tPg0KICA8dGV4dCB4PSI4MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSI0MiIgZm9udC13ZWlnaHQ9IjkwMCIgZmlsbD0idXJsKCN0ZXh0R3JhZGllbnQpIiBsZXR0ZXItc3BhY2luZz0iMSI+DQogICAgRkxJTlhYDQogIDwvdGV4dD4NCiAgDQogIDwhLS0gVGV4dCBHcmFkaWVudCAtLT4NCiAgPGRlZnM+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJ0ZXh0R3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDA7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQjMxQTtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGOEEwMDtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICA8L2xpbmVhckdyYWRpZW50Pg0KICA8L2RlZnM+DQo8L3N2Zz4NCg==",d1=({isOpen:t,onClose:e})=>{const[n,r]=R.useState([{id:1,text:"Hi, this is our virtual assistant. Tell us how we can help.",sender:"assistant",timestamp:new Date}]),[i,s]=R.useState(""),o=R.useRef(null),l=()=>{var p;(p=o.current)==null||p.scrollIntoView({behavior:"smooth"})};R.useEffect(()=>{l()},[n]);const c=()=>{if(i.trim()==="")return;const p={id:n.length+1,text:i,sender:"user",timestamp:new Date};r([...n,p]),s(""),setTimeout(()=>{const m={id:n.length+2,text:"Thanks for reaching out! Our team will get back to you shortly.",sender:"assistant",timestamp:new Date};r(v=>[...v,m])},500)},h=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),c())};return t?u.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:u.jsxs("div",{className:"w-96 bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-gray-200",style:{maxHeight:"600px"},children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"Contact Us"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We typically reply in minutes"})]}),u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors text-2xl leading-none","aria-label":"Close chat",children:""})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 bg-gray-50 space-y-4",children:[n.map(p=>u.jsx("div",{className:`flex ${p.sender==="user"?"justify-end":"justify-start"}`,children:u.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-lg ${p.sender==="user"?"bg-blue-600 text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"}`,children:[u.jsx("p",{className:"text-sm break-words",children:p.text}),u.jsx("span",{className:`text-xs mt-1 block ${p.sender==="user"?"text-blue-100":"text-gray-500"}`,children:p.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},p.id)),u.jsx("div",{ref:o})]}),u.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:i,onChange:p=>s(p.target.value),onKeyPress:h,placeholder:"Type message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm"}),u.jsx("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors font-semibold","aria-label":"Send message",children:"Send"})]})})]})}):null},h1=()=>{const t=Kt(),[e,n]=R.useState(!1),[r,i]=R.useState(!1),s=()=>{n(!0),setTimeout(()=>{t("/login",{replace:!0})},500)};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-4 flex justify-between items-center max-w-full",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:u1,alt:"Flinxx",className:"h-12",style:{width:"auto"}}),u.jsx("span",{className:"text-sm text-white/90 ml-2",children:" 3,247 online"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:s,className:"text-white font-bold px-6 py-2 rounded-lg transition transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 20px rgba(255, 139, 0, 0.3)"},onMouseEnter:o=>o.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)",onMouseLeave:o=>o.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)",children:"Start Now"})})]})}),u.jsx("div",{className:"relative z-10 min-h-[500px] flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"text-center max-w-3xl",children:[u.jsxs("h1",{className:"text-6xl md:text-7xl font-black text-white mb-6 leading-tight",children:["Meet New People",u.jsx("br",{}),"Around the World"]}),u.jsx("p",{className:"text-xl text-white/90 mb-10",children:"Connect instantly with strangers through video chat"}),u.jsx("div",{className:"flex items-center justify-center gap-4 mb-12",children:u.jsx("button",{onClick:s,disabled:e,className:`inline-flex items-center gap-2 px-8 py-4 text-lg font-bold rounded-lg transition-all transform hover:scale-105 ${e?"cursor-not-allowed text-gray-700":"text-white"}`,style:e?{backgroundColor:"#9CA3AF"}:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 30px rgba(255, 139, 0, 0.4)"},onMouseEnter:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)"),onMouseLeave:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)"),children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""})," Starting Chat..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Start Chatting Now"]})})}),u.jsx("p",{className:"text-white/80 text-sm",children:"Fast, simple video chats  Real users, real time"})]})}),u.jsx("div",{className:"relative z-10 px-4 py-16 bg-gradient-to-b from-transparent via-purple-600/50 to-purple-700",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0 shadow-lg",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Instant Connection"}),u.jsx("p",{className:"text-white/80 text-base",children:"Connect with random strangers in seconds. No waiting, no hassle."})]})]})}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-pink-400 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Global Community"}),u.jsx("p",{className:"text-white/80 text-base",children:"Meet people from all over the world. Make international friends."})]})]})}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-cyan-400 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Safe & Verified"}),u.jsx("p",{className:"text-white/80 text-base",children:"Verified users, moderated content, and privacy protection."})]})]})})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-b from-purple-700 via-purple-600 to-purple-500",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-black text-white text-center mb-16",children:"How It Works"}),u.jsx("div",{className:"relative bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"1"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Sign Up"}),u.jsx("p",{className:"text-white/80 text-base",children:"Create your free account in seconds"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"2"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Start Video Chat"}),u.jsx("p",{className:"text-white/80 text-base",children:"Get matched with random strangers instantly"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"3"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Make Friends"}),u.jsx("p",{className:"text-white/80 text-base",children:"Chat, connect, and meet awesome people"})]})]})})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-b from-purple-500 via-purple-600 to-purple-700",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-black text-white text-center mb-16",children:"Smart Matching Features"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-3xl mb-6 shadow-lg",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"One-Click Connect"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Connect with strangers instantly with just one click. No complicated setup needed."}),u.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-200 px-4 py-1 rounded-full text-sm font-semibold",children:"Free"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-3xl mb-6 shadow-lg",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"Auto-Matching"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Our intelligent algorithm matches you with compatible users based on interests and preferences."}),u.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-200 px-4 py-1 rounded-full text-sm font-semibold",children:"Free"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all md:col-span-2",children:[u.jsx("div",{className:"w-14 h-14 bg-purple-400 rounded-xl flex items-center justify-center text-3xl mb-6",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"Gender Preference Filter"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Fine-tune your matching experience with optional gender preferences. Available in Premium."}),u.jsx("div",{className:"inline-block bg-purple-400/30 text-purple-200 px-4 py-1 rounded-full text-sm font-semibold border border-purple-400/50",children:" Premium Feature"})]})]})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:u.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[u.jsx("h2",{className:"text-5xl md:text-6xl font-black text-white mb-6",children:"Ready to Meet New People?"}),u.jsx("p",{className:"text-xl text-white/90 mb-10",children:"Join thousands of users connecting right now"}),u.jsx("button",{onClick:s,disabled:e,className:`inline-flex items-center gap-3 px-10 py-4 text-xl font-bold rounded-lg transition-all transform hover:scale-105 ${e?"cursor-not-allowed text-gray-700":"text-white"}`,style:e?{backgroundColor:"#9CA3AF"}:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 30px rgba(255, 139, 0, 0.4)"},onMouseEnter:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)"),onMouseLeave:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)"),children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""})," Starting Chat..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Get Started Free"]})})]})}),!r&&u.jsxs("button",{onClick:()=>i(!0),className:"fixed bottom-6 right-6 inline-flex items-center gap-2 px-6 py-3 bg-white text-gray-800 font-bold rounded-full shadow-lg transition-all transform hover:scale-110 hover:shadow-2xl",style:{zIndex:9999},children:[u.jsx("span",{className:"text-lg",children:""}),"Contact Us"]}),u.jsx(d1,{isOpen:r,onClose:()=>i(!1)})]})};class f1 extends Error{}f1.prototype.name="InvalidTokenError";const ca="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Orange%20gradient%20background%20--%3e%3crect%20width='40'%20height='40'%20rx='8'%20fill='url(%23gradient)'%20/%3e%3c!--%20Video%20camera%20icon%20--%3e%3cg%20transform='translate(8,%208)'%3e%3c!--%20Camera%20body%20--%3e%3crect%20x='1'%20y='6'%20width='16'%20height='12'%20rx='1'%20fill='white'%20stroke='white'%20stroke-width='0.5'/%3e%3c!--%20Camera%20lens%20--%3e%3ccircle%20cx='17'%20cy='12'%20r='4'%20fill='none'%20stroke='white'%20stroke-width='1'/%3e%3ccircle%20cx='17'%20cy='12'%20r='2.5'%20fill='white'%20opacity='0.8'/%3e%3c!--%20Recording%20indicator%20dot%20--%3e%3ccircle%20cx='3'%20cy='3'%20r='1.5'%20fill='%23FF4444'/%3e%3c/g%3e%3c!--%20Gradient%20definition%20--%3e%3cdefs%3e%3clinearGradient%20id='gradient'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%23FF8C42;stop-opacity:1'%20/%3e%3cstop%20offset='100%25'%20style='stop-color:%23FF6B35;stop-opacity:1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",p1="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%3e%3cpath%20fill='%234285F4'%20d='M22.56%2012.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26%201.37-1.04%202.53-2.21%203.31v2.77h3.57c2.08-1.92%203.28-4.74%203.28-8.09z'/%3e%3cpath%20fill='%2334A853'%20d='M12%2023c2.97%200%205.46-.98%207.28-2.66l-3.57-2.77c-.98.66-2.23%201.06-3.71%201.06-2.86%200-5.29-1.93-6.16-4.53H2.18v2.84C3.99%2020.53%207.7%2023%2012%2023z'/%3e%3cpath%20fill='%23FBBC05'%20d='M5.84%2014.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43%208.55%201%2010.22%201%2012s.43%203.45%201.18%204.93l2.85-2.22.81-.62z'/%3e%3cpath%20fill='%23EA4335'%20d='M12%205.38c1.62%200%203.06.56%204.21%201.64l3.15-3.15C17.45%202.09%2014.97%201%2012%201%207.7%201%203.99%203.47%202.18%207.07l3.66%202.84c.87-2.6%203.3-4.53%206.16-4.53z'/%3e%3c/svg%3e",ep=({onContinue:t,onCancel:e})=>{R.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),R.useEffect(()=>{const r=i=>{i.key==="Escape"&&i.preventDefault()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[]),R.useEffect(()=>{window.history.pushState(null,"",window.location.href);const r=i=>{i.preventDefault(),window.history.pushState(null,"",window.location.href)};return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[]);const n=()=>{localStorage.setItem("termsAccepted","true"),t==null||t()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Before you continue"}),u.jsxs("p",{className:"text-gray-700 text-center text-sm",children:["By continuing, you confirm that you are 18 years or older and agree to Flinxx's"," ",u.jsx("a",{href:"/terms-and-conditions",className:"text-blue-600 underline",children:"Terms & Conditions"})," ","and"," ",u.jsx("a",{href:"/privacy-policy",className:"text-blue-600 underline",children:"Privacy Policy"}),"."]}),u.jsx("p",{className:"text-gray-700 text-center text-sm mt-4",children:"You understand that Flinxx is a live interaction platform and you use it at your own responsibility."}),u.jsxs("div",{className:"flex gap-4 mt-6",children:[u.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-900 font-semibold rounded-lg hover:bg-gray-300 transition-colors",children:"Decline"}),u.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-colors",children:"Accept & Proceed"})]})]})})},mx=()=>{try{return localStorage.getItem("termsAccepted")==="true"}catch(t){return console.error(" Error checking terms acceptance:",t),!1}},m1=()=>{try{localStorage.setItem("termsAccepted","true"),console.log(" Terms accepted and saved to localStorage")}catch(t){console.error(" Error saving terms acceptance:",t)}},g1=({isSigningIn:t,onShowTermsModal:e})=>{const n=()=>{console.log(" Google login clicked - checking terms acceptance"),mx()?(console.log(" Terms already accepted - proceeding with Google login"),r()):(console.log(" Terms not accepted - showing modal first"),e("google"))},r=()=>{const i="https://flinxx-backend.onrender.com";console.log(" Redirecting to Google OAuth:",`${i}/auth/google`),window.location.href=`${i}/auth/google`};return u.jsxs("button",{onClick:n,disabled:t,className:`w-full py-3 px-6 rounded-full transition-all text-lg font-bold flex items-center justify-center gap-3 ${t?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-white hover:bg-gray-50 text-black shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:[u.jsx("img",{src:p1,alt:"Google",className:"w-6 h-6"}),"Continue with Google"]})},y1=()=>{const t=Kt(),[e,n]=R.useState(!1),[r,i]=R.useState(null),[s,o]=R.useState(!1),[l,c]=R.useState(null);R.useEffect(()=>{(async()=>{try{const b=await uP();b&&(console.log(" Login successful:",b.email),t("/chat"))}catch(b){console.error(" Login check failed:",b)}})()},[t]);const h=C=>{console.log(` Showing Terms modal for ${C}`),c(C),o(!0)},p=()=>{console.log(" User cancelled terms modal"),o(!1),c(null)},m=async()=>{if(console.log(" User accepted terms"),m1(),o(!1),l==="google"){console.log(" Proceeding with Google login after terms acceptance");const C="https://flinxx-backend.onrender.com";window.location.href=`${C}/auth/google`}else if(l==="facebook"){console.log(" Proceeding with Facebook login after terms acceptance");try{await dy()}catch(C){console.error(" Facebook login error:",C),i("Facebook login failed. Please try again.")}}c(null)},v=async()=>{if(console.log(" Facebook login clicked - checking terms acceptance"),mx()){console.log(" Terms already accepted - proceeding with Facebook login"),n(!0),i(null);try{console.log(" Starting Facebook login..."),console.log("Facebook App ID:","863917229498555"),console.log("Redirect URL:","https://flinx-8a05e.firebaseapp.com/__/auth/handler"),await dy()}catch(C){console.error(" Facebook login error:",C),i("Facebook login failed. Please try again."),n(!1)}}else console.log(" Terms not accepted - showing modal first"),h("facebook")};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:[u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"Welcome to Flinxx"}),u.jsx("p",{className:"text-lg text-white/80",children:"Connect with strangers instantly"}),u.jsx("p",{className:"text-sm text-white/70 mt-2",children:"Sign up to get started"})]}),r&&u.jsx("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg",children:u.jsx("p",{className:"text-red-200 text-sm",children:r})}),u.jsxs("div",{className:"space-y-4",children:[e&&u.jsxs("button",{disabled:!0,className:"w-full bg-gray-400 cursor-not-allowed text-gray-700 font-bold py-3 px-6 rounded-full transition-all text-lg flex items-center justify-center gap-2",children:[u.jsx("span",{className:"animate-spin",children:""})," Signing in..."]}),u.jsx(g1,{isSigningIn:e,onShowTermsModal:h}),u.jsxs("button",{onClick:v,disabled:e,className:`w-full py-3 px-6 rounded-full transition-all text-lg font-bold flex items-center justify-center gap-3 ${e?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:[u.jsx("span",{className:"text-xl",children:"f"})," Continue with Facebook"]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsxs("p",{className:"text-xs text-white/60",children:["By signing in, you agree to our"," ",u.jsx("a",{href:"/terms",className:"text-white/80 hover:text-white underline",children:"TERMS & CONDITIONS"})," ","and"," ",u.jsx("a",{href:"/privacy-policy",className:"text-white/80 hover:text-white underline",children:"Privacy Policy"})]})}),u.jsxs("div",{className:"mt-10 flex flex-col items-center gap-3 text-white/80 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"Instant connection with strangers"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"100% Anonymous & Safe"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"High-quality Video Chat"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"Connect Worldwide"})]})]})]}),s&&u.jsx(ep,{onCancel:p,onContinue:m})]})},Fn=Object.create(null);Fn.open="0";Fn.close="1";Fn.ping="2";Fn.pong="3";Fn.message="4";Fn.upgrade="5";Fn.noop="6";const vl=Object.create(null);Object.keys(Fn).forEach(t=>{vl[Fn[t]]=t});const ph={type:"error",data:"parser error"},gx=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",yx=typeof ArrayBuffer=="function",vx=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,tp=({type:t,data:e},n,r)=>gx&&e instanceof Blob?n?r(e):xy(e,r):yx&&(e instanceof ArrayBuffer||vx(e))?n?r(e):xy(new Blob([e]),r):r(Fn[t]+(e||"")),xy=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Ey(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Yu;function v1(t,e){if(gx&&t.data instanceof Blob)return t.data.arrayBuffer().then(Ey).then(e);if(yx&&(t.data instanceof ArrayBuffer||vx(t.data)))return e(Ey(t.data));tp(t,!1,n=>{Yu||(Yu=new TextEncoder),e(Yu.encode(n))})}const Iy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",to=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Iy.length;t++)to[Iy.charCodeAt(t)]=t;const w1=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),p=new Uint8Array(h);for(r=0;r<n;r+=4)s=to[t.charCodeAt(r)],o=to[t.charCodeAt(r+1)],l=to[t.charCodeAt(r+2)],c=to[t.charCodeAt(r+3)],p[i++]=s<<2|o>>4,p[i++]=(o&15)<<4|l>>2,p[i++]=(l&3)<<6|c&63;return h},_1=typeof ArrayBuffer=="function",np=(t,e)=>{if(typeof t!="string")return{type:"message",data:wx(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:x1(t.substring(1),e)}:vl[n]?t.length>1?{type:vl[n],data:t.substring(1)}:{type:vl[n]}:ph},x1=(t,e)=>{if(_1){const n=w1(t);return wx(n,e)}else return{base64:!0,data:t}},wx=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},_x="",E1=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{tp(s,!1,l=>{r[o]=l,++i===n&&e(r.join(_x))})})},I1=(t,e)=>{const n=t.split(_x),r=[];for(let i=0;i<n.length;i++){const s=np(n[i],e);if(r.push(s),s.type==="error")break}return r};function S1(){return new TransformStream({transform(t,e){v1(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Ju;function Ja(t){return t.reduce((e,n)=>e+n.length,0)}function Xa(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function T1(t,e){Ju||(Ju=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Ja(n)<1)break;const c=Xa(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ja(n)<2)break;const c=Xa(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ja(n)<8)break;const c=Xa(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),p=h.getUint32(0);if(p>Math.pow(2,21)-1){l.enqueue(ph);break}i=p*Math.pow(2,32)+h.getUint32(4),r=3}else{if(Ja(n)<i)break;const c=Xa(n,i);l.enqueue(np(s?c:Ju.decode(c),e)),r=0}if(i===0||i>t){l.enqueue(ph);break}}}})}const xx=4;function He(t){if(t)return C1(t)}function C1(t){for(var e in He.prototype)t[e]=He.prototype[e];return t}He.prototype.on=He.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};He.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};He.prototype.off=He.prototype.removeListener=He.prototype.removeAllListeners=He.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};He.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};He.prototype.emitReserved=He.prototype.emit;He.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};He.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Kc=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),tn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),k1="arraybuffer";function Ex(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const A1=tn.setTimeout,b1=tn.clearTimeout;function Qc(t,e){e.useNativeTimers?(t.setTimeoutFn=A1.bind(tn),t.clearTimeoutFn=b1.bind(tn)):(t.setTimeoutFn=tn.setTimeout.bind(tn),t.clearTimeoutFn=tn.clearTimeout.bind(tn))}const R1=1.33;function N1(t){return typeof t=="string"?P1(t):Math.ceil((t.byteLength||t.size)*R1)}function P1(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Ix(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function O1(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function j1(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class D1 extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class rp extends He{constructor(e){super(),this.writable=!1,Qc(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new D1(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=np(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=O1(e);return n.length?"?"+n:""}}class L1 extends rp{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};I1(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,E1(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Ix()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Sx=!1;try{Sx=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const M1=Sx;function F1(){}class V1 extends L1{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let es=class wl extends He{constructor(e,n,r){super(),this.createRequest=e,Qc(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Ex(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=wl.requestsCount++,wl.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=F1,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete wl.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};es.requestsCount=0;es.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Sy);else if(typeof addEventListener=="function"){const t="onpagehide"in tn?"pagehide":"unload";addEventListener(t,Sy,!1)}}function Sy(){for(let t in es.requests)es.requests.hasOwnProperty(t)&&es.requests[t].abort()}const U1=function(){const t=Tx({xdomain:!1});return t&&t.responseType!==null}();class B1 extends V1{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=U1&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new es(Tx,this.uri(),e)}}function Tx(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||M1))return new XMLHttpRequest}catch{}if(!e)try{return new tn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Cx=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class z1 extends rp{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Cx?{}:Ex(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;tp(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Kc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Ix()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Xu=tn.WebSocket||tn.MozWebSocket;class $1 extends z1{createSocket(e,n,r){return Cx?new Xu(e,n,r):n?new Xu(e,n):new Xu(e)}doWrite(e,n){this.ws.send(n)}}class W1 extends rp{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=T1(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=S1();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Kc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const H1={websocket:$1,webtransport:W1,polling:B1},G1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,q1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function mh(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=G1.exec(t||""),s={},o=14;for(;o--;)s[q1[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=K1(s,s.path),s.queryKey=Q1(s,s.query),s}function K1(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Q1(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const gh=typeof addEventListener=="function"&&typeof removeEventListener=="function",_l=[];gh&&addEventListener("offline",()=>{_l.forEach(t=>t())},!1);class Pr extends He{constructor(e,n){if(super(),this.binaryType=k1,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=mh(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=mh(n.host).host);Qc(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=j1(this.opts.query)),gh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},_l.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=xx,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Pr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Pr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=N1(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Kc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Pr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),gh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=_l.indexOf(this._offlineEventListener);r!==-1&&_l.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Pr.protocol=xx;class Y1 extends Pr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Pr.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",m=>{if(!r)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Pr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=n.name,this.emitReserved("upgradeError",v)}}))};function s(){r||(r=!0,p(),n.close(),n=null)}const o=m=>{const v=new Error("probe error: "+m);v.transport=n.name,s(),this.emitReserved("upgradeError",v)};function l(){o("transport closed")}function c(){o("socket closed")}function h(m){n&&m.name!==n.name&&s()}const p=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",h)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let J1=class extends Y1{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>H1[i]).filter(i=>!!i)),super(e,r)}};function X1(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=mh(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const Z1=typeof ArrayBuffer=="function",e2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,kx=Object.prototype.toString,t2=typeof Blob=="function"||typeof Blob<"u"&&kx.call(Blob)==="[object BlobConstructor]",n2=typeof File=="function"||typeof File<"u"&&kx.call(File)==="[object FileConstructor]";function ip(t){return Z1&&(t instanceof ArrayBuffer||e2(t))||t2&&t instanceof Blob||n2&&t instanceof File}function xl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(xl(t[n]))return!0;return!1}if(ip(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return xl(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&xl(t[n]))return!0;return!1}function r2(t){const e=[],n=t.data,r=t;return r.data=yh(n,e),r.attachments=e.length,{packet:r,buffers:e}}function yh(t,e){if(!t)return t;if(ip(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=yh(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=yh(t[r],e));return n}return t}function i2(t,e){return t.data=vh(t.data,e),delete t.attachments,t}function vh(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=vh(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=vh(t[n],e));return t}const s2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],o2=5;var oe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(oe||(oe={}));class a2{constructor(e){this.replacer=e}encode(e){return(e.type===oe.EVENT||e.type===oe.ACK)&&xl(e)?this.encodeAsBinary({type:e.type===oe.EVENT?oe.BINARY_EVENT:oe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===oe.BINARY_EVENT||e.type===oe.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=r2(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Ty(t){return Object.prototype.toString.call(t)==="[object Object]"}class sp extends He{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===oe.BINARY_EVENT;r||n.type===oe.BINARY_ACK?(n.type=r?oe.EVENT:oe.ACK,this.reconstructor=new l2(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(ip(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(oe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===oe.BINARY_EVENT||r.type===oe.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(sp.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case oe.CONNECT:return Ty(n);case oe.DISCONNECT:return n===void 0;case oe.CONNECT_ERROR:return typeof n=="string"||Ty(n);case oe.EVENT:case oe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&s2.indexOf(n[0])===-1);case oe.ACK:case oe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class l2{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=i2(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const c2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:sp,Encoder:a2,get PacketType(){return oe},protocol:o2},Symbol.toStringTag,{value:"Module"}));function gn(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const u2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ax extends He{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[gn(e,"open",this.onopen.bind(this)),gn(e,"packet",this.onpacket.bind(this)),gn(e,"error",this.onerror.bind(this)),gn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(u2.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:oe.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const p=this.ids++,m=n.pop();this._registerAckCallback(p,m),o.id=p}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:oe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case oe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case oe.EVENT:case oe.BINARY_EVENT:this.onevent(e);break;case oe.ACK:case oe.BINARY_ACK:this.onack(e);break;case oe.DISCONNECT:this.ondisconnect();break;case oe.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:oe.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:oe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Ts(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ts.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Ts.prototype.reset=function(){this.attempts=0};Ts.prototype.setMin=function(t){this.ms=t};Ts.prototype.setMax=function(t){this.max=t};Ts.prototype.setJitter=function(t){this.jitter=t};class wh extends He{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Qc(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ts({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||c2;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new J1(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=gn(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=gn(n,"error",s);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(gn(e,"ping",this.onping.bind(this)),gn(e,"data",this.ondata.bind(this)),gn(e,"error",this.onerror.bind(this)),gn(e,"close",this.onclose.bind(this)),gn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Kc(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Ax(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Qs={};function El(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=X1(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Qs[i]&&s in Qs[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return l?c=new wh(r,e):(Qs[i]||(Qs[i]=new wh(r,e)),c=Qs[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(El,{Manager:wh,Socket:Ax,io:El,connect:El});const bx="https://flinxx-backend.onrender.com";console.log(" Socket.IO connecting to:",bx);const ne=El(bx,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:10,transports:["websocket","polling"],secure:!1,rejectUnauthorized:!1,forceNew:!1,withCredentials:!0,upgrade:!0,rememberUpgrade:!1,multiplex:!0,timeout:6e4,extraHeaders:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}});ne.on("connect",()=>{console.log(" Socket connected successfully! ID:",ne.id),console.log(" Transport method:",ne.io.engine.transport.name)});ne.on("connect_error",t=>{console.error(" Socket connection error:",t.message||t),console.error(" Error details:",t),ne.io.engine.transport.name==="polling"&&console.log(" Retrying with websocket...")});ne.on("error",t=>{console.error(" Socket error:",t)});ne.on("disconnect",t=>{console.log(" Socket disconnected. Reason:",t),console.log(" Attempting to reconnect...")});ne.on("connect_timeout",()=>{console.error(" Socket connection timeout")});const d2=()=>{console.log(`
 `),console.log(" [ICE SERVERS CONFIGURATION]"),console.log(" "),console.log(" STUN Server:"),console.log("   - stun:global.xirsys.net"),console.log("     Purpose: NAT detection, find public IP"),console.log("     Status: Should work on all networks"),console.log(" "),console.log(" TURN Servers (for relaying if P2P blocked):"),console.log("   - turn:global.xirsys.net:3478?transport=udp"),console.log("     Status: Blocked if ISP blocks UDP port 3478"),console.log("   - turn:global.xirsys.net:3478?transport=tcp"),console.log("     Status: Blocked if ISP blocks TCP port 3478"),console.log("   - turns:global.xirsys.net:5349?transport=tcp"),console.log("     Status: Blocked if ISP blocks TLS port 5349"),console.log(" "),console.log(" Credentials:"),console.log("   - Username: nkhlydv"),console.log("   - Credential: a8e244b8-cf5b-11f0-8771-0242ac140002"),console.log(" "),console.log(" If all TURN candidates fail with error 701:"),console.log("    Configuration is CORRECT"),console.log("    STUN works (can find your IP)"),console.log("    ISP/Network is blocking TURN ports"),console.log("    Try VPN or different network to test"),console.log(` 
`)},h2=()=>[{urls:["stun:global.xirsys.net"]},{urls:["turn:global.xirsys.net:3478?transport=udp","turn:global.xirsys.net:3478?transport=tcp","turns:global.xirsys.net:5349?transport=tcp"],username:"nkhlydv",credential:"a8e244b8-cf5b-11f0-8771-0242ac140002"}],f2=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}h ${n}m ${r}s`:n>0?`${n}m ${r}s`:`${r}s`},p2=({isOpen:t,onClose:e})=>{const[n,r]=R.useState("premium"),[i,s]=R.useState("lite");if(!t)return null;const o=[{id:"lite",name:"LITE",emoji:"",price:"69",duration:"1 Day",features:["Unlimited Filters","Gender Filter: 50/day","10 Match Preferences","Ads Enabled","No Boost"]},{id:"prime",name:"PRIME",emoji:"",price:"199",duration:"15 Days",features:["Unlimited Filters","Gender Filter: 150/day","Full Match Preferences","No Ads","2x Profile Boost","Priority Match Queue"]},{id:"ultra",name:"ULTRA",emoji:"",price:"399",duration:"30 Days",features:["Unlimited Filters","Unlimited Gender Filter","Full Match Preferences","No Ads","5x Profile Boost","Ultra Priority Queue","Ultra Badge","Double Visibility"]}],l=[{id:"blue-tick",name:"Blue Tick",emoji:"",price:"69",features:["Verification badge","Trust boost","Status indicator"]},{id:"chat-themes",name:"Chat Themes",emoji:"",price:"49",features:["Unlock themes","Custom colors","Personal style"]},{id:"match-boost",name:"Match Boost",emoji:"",price:"39",features:["30 min visibility boost","Increased reach","More matches"]},{id:"profile-ring",name:"Profile Ring",emoji:"",price:"79",features:["Colored profile ring","Stand out","Eye-catching design"]},{id:"profile-highlight",name:"Profile Highlight",emoji:"",price:"99",features:["24h highlight","Top search visibility","Premium placement"]}],c=o.find(h=>h.id===i);return u.jsx("div",{className:"premium-overlay",onClick:e,children:u.jsxs("div",{className:"premium-box",onClick:h=>h.stopPropagation(),children:[u.jsx("button",{className:"close-btn",onClick:e,children:""}),u.jsx("h2",{className:"premium-title",children:"Flinxx Subscriptions"}),u.jsxs("div",{className:"main-tabs-container",children:[u.jsx("button",{className:`main-tab ${n==="premium"?"active":""}`,onClick:()=>r("premium"),children:"Premium Plans"}),u.jsx("button",{className:`main-tab ${n==="flex"?"active":""}`,onClick:()=>r("flex"),children:"Flex Plans"})]}),n==="premium"&&u.jsxs("div",{className:"tab-content",children:[u.jsx("div",{className:"premium-tabs-container",children:o.map(h=>u.jsxs("button",{className:`premium-tab ${i===h.id?"active":""}`,onClick:()=>s(h.id),children:[u.jsx("span",{className:"tab-emoji",children:h.emoji}),u.jsx("span",{className:"tab-name",children:h.name}),u.jsx("span",{className:"tab-price",children:h.price})]},h.id))}),c&&u.jsxs("div",{className:"premium-card",children:[u.jsx("div",{className:"card-header",children:u.jsxs("h3",{children:[c.emoji," ",c.name]})}),u.jsxs("div",{className:"card-price",children:[u.jsx("div",{className:"price-amount",children:c.price}),u.jsxs("div",{className:"price-duration",children:["/ ",c.duration]})]}),u.jsx("ul",{className:"card-features",children:c.features.map((h,p)=>u.jsxs("li",{children:[u.jsx("span",{className:"feature-check",children:""}),u.jsx("span",{className:"feature-text",children:h})]},p))}),u.jsx("button",{className:"card-subscribe-btn",children:"Subscribe Now"})]},i)]}),n==="flex"&&u.jsxs("div",{className:"tab-content",children:[u.jsx("p",{className:"flex-subtitle",children:"Choose individual features"}),u.jsx("div",{className:"flex-section flex-wrapper",children:u.jsx("div",{className:"flex-plans-box",children:u.jsx("div",{className:"flex-plans-container",children:l.map(h=>u.jsxs("div",{className:"flex-card",children:[u.jsxs("div",{className:"flex-item-header",children:[u.jsx("span",{className:"flex-emoji",children:h.emoji}),u.jsx("h4",{children:h.name})]}),u.jsx("div",{className:"flex-item-price",children:h.price}),u.jsx("ul",{className:"flex-item-features",children:h.features.map((p,m)=>u.jsxs("li",{children:[u.jsx("span",{className:"flex-check",children:""}),u.jsx("span",{children:p})]},m))}),u.jsx("button",{className:"flex-item-btn",children:"Add Now"})]},h.id))})})})]}),u.jsx("div",{className:"premium-footer",children:u.jsx("p",{children:"Recurring billing. Cancel anytime. No hidden charges."})})]})})},m2=({isOpen:t,onClose:e,currentGender:n="both",onOpenPremium:r})=>{const[i,s]=R.useState(n);if(!t)return null;const o=()=>{console.log("Gender filter saved:",i),e()},l=()=>{console.log("Join clicked - opening premium modal"),r(),e()};return u.jsx("div",{className:"gender-filter-overlay",onClick:e,children:u.jsxs("div",{className:"gender-filter-modal",onClick:c=>c.stopPropagation(),children:[u.jsx("button",{className:"gender-close-btn",onClick:e,children:""}),u.jsxs("div",{className:"gender-premium-section",children:[u.jsx("div",{className:"premium-icon",children:""}),u.jsxs("div",{className:"premium-content",children:[u.jsx("h3",{children:"Flinxx Prime"}),u.jsx("p",{children:"Get More Gender Filters"})]}),u.jsx("button",{className:"join-btn",onClick:l,children:"Join"})]}),u.jsxs("div",{className:"gender-section",children:[u.jsx("div",{className:"gender-icon",children:""}),u.jsx("h2",{children:"Gender"}),u.jsxs("div",{className:"gender-options",children:[u.jsxs("button",{className:`gender-option ${i==="girls"?"selected":""}`,onClick:()=>s("girls"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Girls Only"})]}),u.jsxs("button",{className:`gender-option ${i==="guys"?"selected":""}`,onClick:()=>s("guys"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Guys Only"})]}),u.jsxs("button",{className:`gender-option ${i==="both"?"selected":""}`,onClick:()=>s("both"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Both"})]})]})]}),u.jsxs("div",{className:"gender-footer",children:[u.jsx("button",{className:"save-btn",onClick:o,children:"Save"}),u.jsx("button",{className:"filter-btn",children:""})]})]})})},g2=({isOpen:t,onClose:e,onOpenPremium:n,onReinitializeCamera:r})=>{const i=Kt(),{user:s}=R.useContext(Es)||{},[o,l]=R.useState(!1),[c,h]=R.useState({name:"",email:"",picture:"",googleId:"",location:"",gender:"",birthday:"",tokens:0,gems:0}),[p,m]=R.useState(!1),[v,C]=R.useState(null);R.useEffect(()=>{t&&s&&O()},[t,s]),R.useEffect(()=>{!v&&t&&b()},[t]);const b=async()=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async L=>{var y,x,S;const{latitude:F,longitude:_}=L.coords;try{const N=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${F}&lon=${_}`)).json(),T=((y=N.address)==null?void 0:y.city)||((x=N.address)==null?void 0:x.town)||"Unknown",Qe=((S=N.address)==null?void 0:S.country)||"Unknown";C(`${T}, ${Qe}`),h(Ft=>({...Ft,location:`${T}, ${Qe}`}))}catch(A){console.log("Reverse geocoding error:",A)}},L=>{console.log("Geolocation error:",L),k()}):k()}catch(L){console.log("Location detection error:",L)}},k=async()=>{try{const F=await(await fetch("https://ipapi.co/json/")).json(),_=`${F.city}, ${F.country_name}`;C(_),h(y=>({...y,location:_}))}catch(L){console.log("IP API error:",L)}},O=async()=>{var L;if(s)try{h(_=>({..._,name:s.name||"User",email:s.email||"",picture:s.picture||"",googleId:s.googleId||""}));const F=localStorage.getItem("token");if(F){console.log("[ProfileModal] Fetching fresh user profile from backend");const y=await fetch("https://flinxx-backend.onrender.com/api/profile",{method:"GET",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"}});if(y.ok){const x=await y.json();console.log("[ProfileModal]  Fetched profile data from backend:",(L=x.user)==null?void 0:L.email),x.success&&x.user&&h(S=>({...S,name:x.user.name||"User",email:x.user.email||"",picture:x.user.picture||"",googleId:x.user.googleId||"",gender:x.user.gender||"Not set",birthday:x.user.birthday||"Not set"}))}else console.warn("[ProfileModal]  Failed to fetch profile from backend:",y.status)}else console.log("[ProfileModal]  No token found in localStorage")}catch(F){console.error("[ProfileModal]  Error loading user profile:",F)}},E=L=>{const{name:F,value:_}=L.target;h(y=>({...y,[F]:_}))},w=L=>{var _;const F=(_=L.target.files)==null?void 0:_[0];if(F){const y=new FileReader;y.onloadend=()=>{h(x=>({...x,picture:y.result}))},y.readAsDataURL(F)}},I=async()=>{m(!0);try{console.log("[PROFILE SAVE] Starting profile save process"),console.log("[PROFILE SAVE] Profile data:",c);const L=(s==null?void 0:s.googleId)||localStorage.getItem("userId");if(console.log("[PROFILE SAVE] User ID:",L),!L){console.error("[PROFILE SAVE] Error: No user ID found"),alert("Error: User ID not found. Please login again."),m(!1);return}const F={userId:L,birthday:c.birthday||new Date().toISOString().split("T")[0],gender:c.gender||"Not set"};console.log("[PROFILE SAVE] Request body:",JSON.stringify(F)),console.log("[PROFILE SAVE] Required fields check:"),console.log("  - userId:",!!F.userId),console.log("  - birthday:",!!F.birthday),console.log("  - gender:",!!F.gender);const _=localStorage.getItem("token");console.log("[PROFILE SAVE] Token present:",!!_),_||console.warn("[PROFILE SAVE] Warning: No auth token found");const y="https://flinxx-backend.onrender.com";console.log("[PROFILE SAVE] Backend URL:",y),console.log("[PROFILE SAVE] Making API call to /api/users/complete-profile");const x=await fetch(`${y}/api/users/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json",..._&&{Authorization:`Bearer ${_}`}},body:JSON.stringify(F)});if(console.log("[PROFILE SAVE] Response status:",x.status),!x.ok){const A=await x.json();console.error("[PROFILE SAVE] Error response:",A),alert(`Failed to save profile: ${A.error||"Unknown error"}`),m(!1);return}const S=await x.json();console.log("[PROFILE SAVE]  Profile saved successfully:",S),localStorage.setItem("userProfile",JSON.stringify(F)),l(!1),console.log("[PROFILE SAVE] Profile saved successfully"),console.log("[PROFILE SAVE] Closing ProfileModal..."),e(),alert("Profile updated successfully!"),console.log(" [ProfileModal] Scheduling camera re-init with 500ms delay to allow modal unmount"),typeof r=="function"?setTimeout(()=>{console.log(`
 [ProfileModal] 500ms delay complete, reinitializing camera now`),console.log(" [ProfileModal] Calling onReinitializeCamera()"),r().then(A=>{A?console.log(" [ProfileModal]  Camera reinitialized successfully after profile save"):console.warn(" [ProfileModal]  Camera reinitialization returned false")}).catch(A=>{console.error(" [ProfileModal]  Error calling reinitializeCamera:",A)})},500):console.warn(" [ProfileModal]  onReinitializeCamera callback not provided")}catch(L){console.error("[PROFILE SAVE] Error:",L),console.error("[PROFILE SAVE] Error message:",L.message),console.error("[PROFILE SAVE] Error stack:",L.stack),alert("Failed to save profile: "+L.message)}finally{m(!1)}},j=async()=>{try{await JC(Ho),localStorage.removeItem("userInfo"),localStorage.removeItem("userProfile"),i("/login",{replace:!0})}catch(L){console.error("Sign out error:",L)}};return t?u.jsx("div",{className:"profile-modal-overlay",onClick:e,children:u.jsxs("div",{className:"profile-modal-container",onClick:L=>L.stopPropagation(),children:[u.jsx("button",{className:"profile-modal-close",onClick:e,children:""}),u.jsxs("div",{className:"profile-header",children:[u.jsxs("div",{className:"profile-picture-container",children:[u.jsx("img",{src:c.picture||"https://via.placeholder.com/120",alt:"Profile",className:"profile-picture"}),o&&u.jsxs("label",{className:"photo-upload-label",children:[u.jsx("input",{type:"file",accept:"image/*",onChange:w,style:{display:"none"}}),""]})]}),o?u.jsx("input",{type:"text",name:"name",value:c.name,onChange:E,className:"profile-input-name",placeholder:"Name"}):u.jsx("h2",{className:"profile-name",children:c.name}),u.jsxs("p",{className:"profile-uid",children:["ID: ",c.googleId||"N/A"]})]}),u.jsxs("div",{className:"profile-premium-section",onClick:n,style:{cursor:"pointer"},children:[u.jsx("div",{className:"premium-badge",children:" Flinxx Premium"}),u.jsx("p",{className:"premium-description",children:"Unlock premium features"})]}),u.jsxs("div",{className:"profile-details",children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Tokens"}),u.jsx("span",{className:"detail-value",children:c.tokens})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gems"}),u.jsx("span",{className:"detail-value",children:c.gems})]}),o?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Location"}),u.jsx("input",{type:"text",name:"location",value:c.location,onChange:E,className:"profile-input-small"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gender"}),u.jsxs("select",{name:"gender",value:c.gender,onChange:E,className:"profile-input-small",children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Birthday"}),u.jsx("input",{type:"date",name:"birthday",value:c.birthday?c.birthday.slice(0,10):"",onChange:E,className:"profile-input-small text-black focus:text-black !text-black [&::-webkit-datetime-edit]:text-black [&::-webkit-datetime-edit-year-field]:text-black [&::-webkit-datetime-edit-month-field]:text-black [&::-webkit-datetime-edit-day-field]:text-black"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Location"}),u.jsx("span",{className:"detail-value",children:c.location||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gender"}),u.jsx("span",{className:"detail-value",children:c.gender||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Birthday"}),u.jsx("span",{className:"detail-value",children:c.birthday||"Not set"})]})]})]}),u.jsx("div",{className:"profile-actions",children:o?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-save",onClick:I,disabled:p,children:p?"Saving...":"Save Changes"}),u.jsx("button",{className:"btn-cancel",onClick:()=>{l(!1),O()},children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-edit",onClick:()=>l(!0),children:" Edit Profile"}),u.jsx("button",{className:"btn-more",children:" More"})]})}),u.jsx("button",{className:"btn-sign-out",onClick:j,children:"Sign Out"})]})}):null},y2=({isOpen:t,onClose:e})=>{const[n,r]=R.useState([{id:1,username:"Up ke ",name:"Up ke",location:"National Capital Territory of Delhi",duration:"00:05",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:2,username:"Loup ",name:"Loup",location:"Algeria",duration:"00:06",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:3,username:"Nish ",name:"Nish",location:"Maharashtra",duration:"00:04",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:4,username:"Priya ",name:"Priya",location:"Gujarat",duration:"00:02",date:"11/27/2025",time:"9:23PM",avatar:"M",liked:!1},{id:5,username:"pagbigyamnmako ",name:"pagbigyamnmako",location:"Philippines",duration:"00:08",date:"11/27/2025",time:"9:23PM",avatar:"",liked:!1}]),i=o=>{r(n.map(l=>l.id===o?{...l,liked:!l.liked}:l))},s=o=>{r(n.filter(l=>l.id!==o))};return t?u.jsx("div",{className:"match-history-overlay",onClick:e,children:u.jsxs("div",{className:"match-history-container",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"match-history-header",children:[u.jsx("h2",{children:"Match History"}),u.jsx("button",{className:"match-history-close",onClick:e,children:""})]}),u.jsx("div",{className:"match-history-list",children:n.length===0?u.jsxs("div",{className:"match-history-empty",children:[u.jsx("p",{children:"No match history yet"}),u.jsx("p",{className:"match-history-empty-sub",children:"Start video chatting to build your history!"})]}):n.map(o=>u.jsxs("div",{className:"match-card",children:[u.jsxs("div",{className:"match-card-date",children:[u.jsxs("div",{className:"match-card-datetime",children:[u.jsx("span",{className:"match-date",children:o.date}),u.jsx("span",{className:"match-time",children:o.time})]}),u.jsxs("div",{className:"match-duration",children:[" ",o.duration]})]}),u.jsxs("div",{className:"match-card-user",children:[u.jsx("div",{className:"match-card-avatar",children:o.avatar==="M"?u.jsx("div",{className:"avatar-initial",children:"M"}):u.jsx("span",{children:o.avatar})}),u.jsxs("div",{className:"match-card-info",children:[u.jsx("p",{className:"match-card-name",children:o.name}),u.jsxs("p",{className:"match-card-location",children:[" ",o.location]})]})]}),u.jsxs("div",{className:"match-card-actions",children:[u.jsx("button",{className:`action-btn like-btn ${o.liked?"liked":""}`,onClick:()=>i(o.id),title:"Like this match",children:""}),u.jsx("button",{className:"action-btn delete-btn",onClick:()=>s(o.id),title:"Delete from history",children:""})]})]},o.id))})]})}):null},v2=({currentUser:t,onProfileClick:e,onPremiumClick:n,onMatchHistoryClick:r,isFixedPosition:i=!1})=>{const s=i?{position:"fixed",top:"12px",right:"24px",zIndex:999999}:{},o=i?"flex items-center gap-4":"top-right-icons";return u.jsxs("div",{className:o,style:s,children:[u.jsx("div",{className:"icon-circle",title:"Profile",onClick:e,style:{cursor:"pointer"},children:t!=null&&t.picture?u.jsx("img",{src:t.picture,alt:"Profile"}):""}),u.jsx("div",{className:"icon-circle",title:"Search",onClick:()=>console.log("Search clicked"),children:""}),u.jsx("div",{className:"icon-circle",title:"Messages",onClick:()=>console.log("Messages clicked"),children:""}),u.jsx("div",{className:"icon-circle",title:"Flinx Premium",onClick:n,children:""}),u.jsx("div",{className:"icon-circle",title:"Match History",onClick:r,children:""})]})};console.log(" CHAT BUILD: 2025-12-20T00:00:00Z - WebRTC stable remote stream handling");const w2=()=>{var As;console.log("RENDER START");const t=Kt(),e=qc(),{user:n}=R.useContext(Es)||{},[r,i]=R.useState(!1),[s,o]=R.useState(!1),[l,c]=R.useState(null),[h,p]=R.useState(!1),[m,v]=R.useState(!1),[C,b]=R.useState(!1),[k,O]=R.useState(!1),[E,w]=R.useState(!1),[I,j]=R.useState(null),[L,F]=R.useState(0),[_,y]=R.useState(!1),[x,S]=R.useState(!1),[A,N]=R.useState(!1),[T,Qe]=R.useState(!1),[Ft,_i]=R.useState("both"),[ln,W]=R.useState(!1),[J,X]=R.useState([]),[pe,he]=R.useState(""),[Te,dt]=R.useState(!1),Qt=R.useRef(null),K=R.useRef(null),Yt=R.useRef(null),Vt=R.useRef(null),[me,xi]=R.useState(null),te=R.useRef(null),ht=R.useRef(null),re=R.useRef(null),bt=R.useRef(null),Ei=R.useRef(null),[ua,ap]=R.useState(!1);console.log("HOOKS DONE"),console.log(" CHAT COMPONENT LOADED - BUILD: 895cedd (temporal deadzone fix - move hooks to top)"),R.useEffect(()=>{console.log(" [TERMS CHECK] Checking if terms are accepted...");try{const M=localStorage.getItem("termsAccepted")==="true";console.log(" [TERMS CHECK] termsAccepted from localStorage:",M),M?(console.log(" [TERMS CHECK] User has accepted terms - allowing access"),o(!0)):(console.log(" [TERMS CHECK] User has not accepted terms - showing modal"),i(!0))}catch(M){console.error(" [TERMS CHECK] Error checking terms:",M),o(!0)}},[]);const Yc=()=>{console.log(" User accepted terms on dashboard"),localStorage.setItem("termsAccepted","true"),i(!1),o(!0)},da=()=>{console.log(" User cancelled terms on dashboard - redirecting to login"),i(!1),t("/login",{replace:!0})};R.useEffect(()=>{const H=new URLSearchParams(e.search).get("view");c(H),p(H==="home"),console.log("[Chat] Location search params:",e.search),console.log("[Chat] view parameter:",H),console.log("[Chat] shouldStartAsIntro:",H==="home")},[e.search]),R.useEffect(()=>{const M=n||{googleId:"guest_"+Math.random().toString(36).substring(2,9),name:"Guest User",email:"guest@flinxx.local",picture:null};xi(M),Vt.current||(Vt.current=M.googleId||M.id,console.log(" USER ID INITIALIZED (ONE TIME):",Vt.current)),Yt.current||(Yt.current=M)},[n]),R.useEffect(()=>()=>{Ei.current&&clearInterval(Ei.current)},[]),R.useEffect(()=>{var M;console.log(" Refs initialized:"),console.log("   localVideoRef.current exists:",!!te.current),console.log("   localVideoRef.current in DOM:",(M=te.current)!=null&&M.parentElement?"YES":"NO"),console.log("   remoteVideoRef.current exists:",!!ht.current),console.log("   localStreamRef.current exists:",!!re.current)},[]),R.useEffect(()=>{const M=setInterval(()=>{var Y,G;const H=!!ht.current,z=!!((Y=ht.current)!=null&&Y.parentElement);(G=ht.current)!=null&&G.srcObject,H&&z?console.log(" remoteVideoRef is AVAILABLE in DOM and ready for ontrack"):H&&!z?console.warn(" remoteVideoRef exists but NOT in DOM - ontrack may fail!"):console.log(" Waiting for remoteVideoRef to be mounted...")},2e3);return()=>clearInterval(M)},[]),R.useEffect(()=>{if(console.log(`
 [POSITIONING] Local video positioning effect triggered`),console.log("   cameraStarted:",m),console.log("   hasPartner:",k),console.log("   isMatchingStarted:",C),!m){console.log("   [POSITIONING] Camera not started yet, skipping positioning");return}const M=te.current;if(!M){console.warn(" [POSITIONING] Persistent video ref is null - element not yet rendered");return}console.log(" [POSITIONING] Video element ref found:",M);const H=document.querySelectorAll(".left-panel");console.log(`   Found ${H.length} left-panel containers`);for(let z=0;z<H.length;z++){const Y=H[z];if(Y.offsetParent!==null){console.log(`   [POSITIONING] Visible left-panel found at index ${z}`),M.parentElement!==Y?(console.log(`   [POSITIONING] Moving video into left-panel ${z}`),Y.insertBefore(M,Y.firstChild),M.style.display="block",console.log(`    [POSITIONING] Video positioned in left-panel ${z}`)):(console.log("    [POSITIONING] Video already in correct panel"),M.style.display="block");return}}},[m,k,C]);const Ii=Yo.useCallback(async()=>{console.log(`

 ===== CAMERA RE-INITIALIZATION STARTED =====`),console.log(" [REINIT] Camera re-initialization requested"),console.log(" [REINIT] Current state:"),console.log("  - localStreamRef.current exists:",!!re.current),console.log("  - localVideoRef.current exists:",!!te.current),console.log("  - cameraStarted:",m);try{if(!te.current)return console.error(" [REINIT]  CRITICAL: localVideoRef.current is null/undefined - video element not in DOM"),!1;if(!te.current.parentElement)return console.error(" [REINIT]  CRITICAL: Video element is not attached to DOM"),!1;if(console.log(" [REINIT]  Video element exists in DOM"),re.current){console.log(" [REINIT] Stream exists, checking if tracks are active...");const H=re.current.getTracks();if(console.log(" [REINIT] Stream has",H.length,"tracks"),H.forEach((z,Y)=>{console.log(`  Track ${Y}:`,{kind:z.kind,enabled:z.enabled,readyState:z.readyState})}),H.length===0)console.warn(" [REINIT]  Stream exists but has no active tracks - will request new stream"),re.current=null;else{console.log(" [REINIT]  Stream has active tracks, reattaching to video element"),te.current.srcObject=re.current,te.current.muted=!0,console.log(" [REINIT] srcObject set, waiting for play()...");try{const z=te.current.play();return z!==void 0&&await z,console.log(" [REINIT]  Camera preview reattached and playing"),console.log(` ===== CAMERA RE-INITIALIZATION SUCCESSFUL =====

`),!0}catch(z){return console.error(" [REINIT]  Error playing video:",z),console.error(" [REINIT] Error name:",z.name),console.error(" [REINIT] Error message:",z.message),!1}}}console.log(" [REINIT] No existing stream or tracks inactive, requesting new preview stream");const M=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});return re.current=M,console.log(" [REINIT]  New camera stream obtained:",M),console.log(" [REINIT] New stream tracks:",M.getTracks().map(H=>({kind:H.kind,id:H.id}))),te.current.srcObject=M,te.current.muted=!0,console.log(" [REINIT] srcObject set to new stream, calling play()..."),requestAnimationFrame(()=>{var H;(H=te.current)==null||H.play().catch(z=>{console.log(" [REINIT] Video play blocked:",z)}),console.log(" [REINIT]  New camera preview play command dispatched")}),v(!0),console.log(` ===== CAMERA RE-INITIALIZATION SUCCESSFUL =====

`),!0}catch(M){return console.error(" [REINIT]  Error reinitializing camera:",M),console.error(" [REINIT] Error name:",M.name),console.error(" [REINIT] Error message:",M.message),console.error(` ===== CAMERA RE-INITIALIZATION FAILED =====

`),!1}},[m]);R.useEffect(()=>{Qt.current={reinitializeCamera:Ii}},[Ii]),R.useEffect(()=>{if(!E)return;const M=setInterval(()=>{F(H=>H+1)},1e3);return()=>clearInterval(M)},[E]),R.useEffect(()=>{k&&m&&console.log(" [PARTNER FOUND] Transitioning to video chat screen")},[k,m]),R.useEffect(()=>{if(h){console.log("[Camera]  Skipping auto camera init - user just completed profile (view=home)"),console.log('[Camera] Camera will start when user clicks "Start Video Chat" button');return}async function M(){try{if(console.log(" Starting camera preview..."),console.log(" [INIT] Chat component mounted, attempting to initialize camera"),!te.current){console.error(" [INIT]  Video element not in DOM yet, cannot initialize camera");return}console.log(" [INIT]  Video element found in DOM, requesting camera permissions");const z=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(re.current=z,console.log("[Camera]  Camera stream obtained"),console.log("[Camera] Stream tracks:",z.getTracks().map(Y=>({kind:Y.kind,id:Y.id}))),te.current){te.current.srcObject=z,te.current.muted=!0;try{await te.current.play(),console.log(" Camera preview playing successfully"),v(!0)}catch(Y){console.error(" Preview play error:",Y)}}}catch(z){console.log(" Camera preview error (this is OK, user may deny permission):",z.message),console.log(" Error name:",z.name),console.log(" Error code:",z.code)}}console.log("[Camera] Chat component useEffect triggered, scheduling camera init with delay");const H=setTimeout(()=>{console.log("[Camera] Delay complete, now calling startPreview()"),M()},100);return()=>{console.log("[Camera] Chat component unmounting, clearing camera init timer"),clearTimeout(H)}},[h]);const Cs=async()=>{if(console.log(" createPeerConnection called"),console.log("   Current localStreamRef:",re.current),!re.current){console.warn(" CRITICAL: localStreamRef.current is null - attempting to reacquire camera stream");try{const Y=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(re.current=Y,te.current){te.current.srcObject=Y,te.current.muted=!0;try{await te.current.play()}catch(G){console.warn(" Play error during reacquisition:",G)}}console.log(" LOCAL STREAM RE-ACQUIRED SUCCESSFULLY"),console.log("   Tracks:",Y.getTracks().map(G=>({kind:G.kind,id:G.id})))}catch(Y){throw console.error(" FATAL: Could not reacquire camera stream:",Y.message),new Error("Cannot proceed: local camera stream unavailable - "+Y.message)}}d2();const M=await Jc(),H=[{urls:["stun:global.xirsys.net","turn:global.xirsys.net:3478?transport=udp","turn:global.xirsys.net:3478?transport=tcp"],username:"nkhlvdv",credential:"a8e244b8-cf5b-11f0-8771-0242ac140002"},...M];console.log(" ICE Servers Configuration:",{count:H.length,servers:H.map(Y=>({urls:Y.urls,username:Y.username?"***":void 0,credential:Y.credential?"***":void 0}))});const z=new RTCPeerConnection({iceServers:H,iceTransportPolicy:"all"});if(K.current=z,console.log(" RTCPeerConnection created with iceTransportPolicy: all"),z.onicecandidate=Y=>{if(Y.candidate){const G=Y.candidate;console.log(" ICE candidate generated:",{candidate:G.candidate,protocol:G.protocol,port:G.port,address:G.address,type:G.type,priority:G.priority,sdpMLineIndex:G.sdpMLineIndex,sdpMId:G.sdpMid}),G.type==="relay"?(console.log(" RELAY (TURN) candidate generated - TURN server is reachable"),console.log("   Protocol:",G.protocol,"Port:",G.port)):G.type==="srflx"?(console.log(" SRFLX (server reflexive) candidate - STUN working"),console.log("   Found public address via STUN")):G.type==="host"&&console.log(" HOST candidate - direct LAN connection possible"),console.log(" Sending ICE candidate to partner socket:",bt.current),ne.emit("ice_candidate",{candidate:G,to:bt.current}),console.log(" ICE candidate sent to peer")}else console.log(" ICE gathering complete (null candidate received)"),console.log(" ICE gathering summary:"),console.log("   Connection State:",z.connectionState),console.log("   ICE Connection State:",z.iceConnectionState),console.log("   ICE Gathering State:",z.iceGatheringState)},z.oniceconnectionstatechange=()=>{const Y=z.iceConnectionState;switch(console.log(`
 ===== ICE CONNECTION STATE CHANGED =====`),console.log(" New ICE Connection State:",Y),Y){case"new":console.log(" State: NEW - Gathering ICE candidates");break;case"checking":console.log(" State: CHECKING - Testing ICE candidate pairs"),console.log(" Connection in progress - waiting for connectivity");break;case"connected":console.log(" State: CONNECTED - Found working ICE candidate pair"),console.log(" Peer-to-peer communication established");break;case"completed":console.log(" State: COMPLETED - ICE checks completed, ready for media"),console.log(" All connectivity checks passed");break;case"failed":console.error(" State: FAILED - All ICE candidate pairs failed"),console.error(" Could not establish peer-to-peer connection"),console.error(" TURN server may be unreachable or blocked by ISP"),console.error(" Troubleshooting:"),console.error("   - Check console for TURN error details"),console.error("   - TURN error 701 = Network/ISP blocking ports 3478, 5349"),console.error("   - Solutions: Try VPN, different WiFi, or mobile hotspot"),console.error("   - User can retry with a retry button (do NOT auto-restart ICE)");break;case"disconnected":console.warn(" State: DISCONNECTED - Lost connection to peer"),console.warn("   Note: ICE restart is manual only to prevent stream loss");break;case"closed":console.log(" State: CLOSED - Connection closed");break}console.log(" Full connection states:"),console.log("   Signaling State:",z.signalingState),console.log("   Connection State:",z.connectionState),console.log("   ICE Gathering State:",z.iceGatheringState)},K.current._remoteStream||(K.current._remoteStream=new MediaStream,console.log(" PERSISTENT REMOTE STREAM CREATED - will accumulate all incoming tracks")),z.ontrack=Y=>{console.log(`

 ===== CRITICAL: ONTRACK HANDLER FIRING! =====`),console.log(" ONTRACK CALLED AT:",new Date().toISOString()),console.log(" Track received:",{kind:Y.track.kind,id:Y.track.id,enabled:Y.track.enabled});const G=K.current._remoteStream;if(console.log(" Using persistent remote stream ID:",G.id),G.addTrack(Y.track),console.log(" Track added to persistent remote stream"),console.log(" Remote stream now has",G.getTracks().length,"track(s)"),console.log(" Tracks:",G.getTracks().map(ge=>({kind:ge.kind,id:ge.id,enabled:ge.enabled}))),!ht.current){console.error(" CRITICAL ERROR: remoteVideoRef.current is NULL!"),console.error("   Cannot attach remote track - video element not available");return}ht.current.srcObject!==G?(console.log(" ATTACHING PERSISTENT STREAM to remoteVideoRef"),ht.current.srcObject=G,ht.current.muted=!1,console.log(" srcObject attached, attempting play()..."),ht.current.play().catch(()=>{console.log(" Autoplay blocked - will play on user interaction")})):(console.log(" STREAM ALREADY ATTACHED - skipping re-attachment"),console.log("   Stream has",G.getTracks().length,"tracks now")),console.log(`   ONTRACK COMPLETE - Remote stream persisted and attached

`)},z.onconnectionstatechange=()=>{console.log(`
 ===== CONNECTION STATE CHANGED =====`),console.log(" New Connection State:",z.connectionState),console.log("   ICE Connection State:",z.iceConnectionState),console.log("   ICE Gathering State:",z.iceGatheringState),console.log("   Signaling State:",z.signalingState),z.connectionState==="connected"?(w(!0),console.log(" WebRTC connection ESTABLISHED"),setTimeout(()=>{console.log(`
 ===== RECEIVER DEBUG CHECK (after connected) =====`);const Y=z.getReceivers();console.log(" Total receivers:",Y.length),Y.forEach((ge,Pe)=>{var Me,rt,Fe,Oe,fe;console.log(` Receiver ${Pe}:`,{kind:(Me=ge.track)==null?void 0:Me.kind,enabled:(rt=ge.track)==null?void 0:rt.enabled,readyState:(Fe=ge.track)==null?void 0:Fe.readyState,id:(Oe=ge.track)==null?void 0:Oe.id,muted:(fe=ge.track)==null?void 0:fe.muted})}),console.log(" Audio and video tracks should be present above");const G=z.getSenders();console.log(`
 Total senders:`,G.length),G.forEach((ge,Pe)=>{var Me,rt,Fe,Oe;console.log(` Sender ${Pe}:`,{kind:(Me=ge.track)==null?void 0:Me.kind,enabled:(rt=ge.track)==null?void 0:rt.enabled,readyState:(Fe=ge.track)==null?void 0:Fe.readyState,id:(Oe=ge.track)==null?void 0:Oe.id})})},1e3)):z.connectionState==="disconnected"?(w(!1),console.log(" WebRTC connection DISCONNECTED")):z.connectionState==="failed"?(w(!1),console.log(" WebRTC connection FAILED")):z.connectionState==="closed"&&(w(!1),console.log(" WebRTC connection CLOSED"))},!re.current)throw console.error(" CRITICAL ERROR: localStreamRef.current is null/undefined in createPeerConnection!"),new Error("Local stream lost before createPeerConnection");return z};R.useEffect(()=>(console.log(`

 ===== SOCKET LISTENERS SETUP (COMPONENT MOUNT) =====`),console.log(" Setting up socket listeners - runs ONCE on component load"),console.log(" Socket ID:",ne.id),console.log(" Socket connected:",ne.connected),console.log("  Using userIdRef.current for ALL ID comparisons:",Vt.current),ne.off("partner_found"),ne.off("webrtc_offer"),ne.off("webrtc_answer"),ne.off("ice_candidate"),ne.off("receive_message"),ne.off("partner_disconnected"),ne.off("disconnect"),console.log(" Removed old listeners (if any existed)"),ne.on("partner_found",async M=>{var Me,rt,Fe,Oe;console.log(`

 ===== PARTNER FOUND EVENT RECEIVED =====`),console.log(" RAW DATA from server:",JSON.stringify(M,null,2)),console.log(" My socket ID:",ne.id),console.log(" currentUser object:",JSON.stringify(me,null,2)),console.log(" userIdRef.current (SHOULD USE THIS):",Vt.current),console.log(" currentUser.googleId:",me==null?void 0:me.googleId),console.log(" currentUser.id:",me==null?void 0:me.id),console.log(" data.socketId:",M.socketId),console.log(" data.partnerId:",M.partnerId),console.log(" data.userName:",M.userName),console.log(`
 SELF-MATCH CHECK - START`);const H=Vt.current,z=M.partnerId;if(console.log(" COMPARISON VALUES:"),console.log("   myUserId type:",typeof H,"value:",H),console.log("   partnerUserId type:",typeof z,"value:",z),console.log("   Are they EQUAL?",H===z),console.log("   String comparison:",String(H)===String(z)),H===z){console.error(`
 CRITICAL ERROR: SELF-MATCH DETECTED! `),console.error("   My user ID:",H,"type:",typeof H),console.error("   Partner user ID:",z,"type:",typeof z),console.error("   Match IDs:",H===z),console.error("   These should be DIFFERENT!"),dt(!0),console.error("   Emitting skip_user..."),ne.emit("skip_user",{partnerSocketId:M.socketId}),console.error("   Emitting find_partner..."),ne.emit("find_partner",{userId:Vt.current,userName:me.name||"Anonymous",userAge:me.age||18,userLocation:me.location||"Unknown"}),console.error("   Returning - match REJECTED");return}console.log(" SELF-MATCH CHECK PASSED - partner is different user"),console.log("   Accepting match and proceeding with WebRTC setup"),console.log(` SELF-MATCH CHECK - END
`),bt.current=M.socketId,console.log(" CRITICAL: Stored partner socket ID:",bt.current),console.log(" CRITICAL: Verification - partnerSocketIdRef.current is now:",bt.current),console.log(" ABOUT TO CALL setHasPartner(true)"),O(!0),console.log("  setHasPartner(true) CALLED - force attach effect should trigger");const Y={...M,picture:M.userPicture||M.picture||null,userName:M.userName||M.name||"Anonymous",userLocation:M.userLocation||M.location||"Unknown",userAge:M.userAge||M.age||18};j(Y),console.log("  setPartnerInfo CALLED with data:",Y);const G=ne.id,ge=M.socketId,Pe=G<ge;if(console.log(" SOCKET ID COMPARISON:"),console.log("   My socket ID:",G),console.log("   Partner socket ID:",ge),console.log("   Am I offerer? (myID < partnerID):",Pe),console.log(`
 ===== CRITICAL STREAM VERIFICATION =====`),console.log(" Checking localStreamRef.current status:"),console.log("   exists:",!!re.current),console.log("   tracks:",((Me=re.current)==null?void 0:Me.getTracks().length)||0),console.log("   video element srcObject:",!!((rt=te.current)!=null&&rt.srcObject)),!re.current){console.error("  CRITICAL: localStreamRef.current is NULL - cannot proceed to WebRTC"),console.error("   This means the camera stream was never acquired or was lost"),console.error("   Attempting emergency camera reacquisition...");try{const fe=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(re.current=fe,te.current){te.current.srcObject=fe,te.current.muted=!0;try{await te.current.play()}catch{console.warn(" Play error in emergency reacquisition")}}console.log("  EMERGENCY: Camera stream re-acquired")}catch(fe){console.error("  EMERGENCY FAILED: Could not reacquire camera -",fe.message),console.error("   User must allow camera permission to continue");return}}if(console.log(`  STREAM VERIFICATION PASSED - proceeding with WebRTC
`),!Pe){console.log(" I am the ANSWERER - waiting for offer from offerer");return}console.log(" I am the OFFERER - creating peer connection and sending offer");try{if(console.log(`
 OFFERER: Creating peer connection`),K.current){console.warn(" OFFERER: WARNING - Peer connection already exists! Not recreating."),console.warn("   Existing PC state:",{connectionState:K.current.connectionState,iceConnectionState:K.current.iceConnectionState,signalingState:K.current.signalingState});return}let fe;try{fe=await Cs()}catch(Ce){console.error(" OFFERER: Error creating peer connection:",Ce);return}if(K.current=fe,console.log(" OFFERER: Peer connection created"),console.log(" OFFERER Stream status after peer connection creation:",{exists:!!re.current,trackCount:(Fe=re.current)==null?void 0:Fe.getTracks().length,tracks:(Oe=re.current)==null?void 0:Oe.getTracks().map(Ce=>({kind:Ce.kind,enabled:Ce.enabled,state:Ce.readyState}))}),re.current){console.log(`
 OFFERER localStream:`,re.current);const Ce=re.current.getTracks();console.log(" OFFERER: All available tracks:",Ce),console.log(" OFFERER tracks detail:",Ce.map(ft=>({kind:ft.kind,id:ft.id,enabled:ft.enabled,state:ft.readyState})));const un=fe.getSenders();if(console.log(" OFFERER: Existing senders count:",un.length),un.length>0)console.warn(" OFFERER WARNING: Tracks already added! Senders:",un.map(ft=>{var Ve,dn;return{kind:(Ve=ft.track)==null?void 0:Ve.kind,id:(dn=ft.track)==null?void 0:dn.id}})),console.warn("   Not adding tracks again to avoid duplicates");else{console.log(`
 OFFERER: Adding ${Ce.length} local tracks to peer connection`),Ce.forEach((Ve,dn)=>{console.log(`  [${dn}] Adding ${Ve.kind} track (id: ${Ve.id}, enabled: ${Ve.enabled})`);try{const je=fe.addTrack(Ve,re.current);console.log(`  [${dn}]  addTrack succeeded, sender:`,je)}catch(je){console.error(`  [${dn}]  addTrack failed:`,je)}}),console.log(`
 OFFERER: All tracks added to peer connection`);const ft=fe.getSenders();console.log(" OFFERER senders count:",ft.length),console.log(" OFFERER senders after addTrack:",ft.map((Ve,dn)=>{var je,bs,or;return{index:dn,kind:(je=Ve.track)==null?void 0:je.kind,id:(bs=Ve.track)==null?void 0:bs.id,trackExists:!!Ve.track,trackEnabled:(or=Ve.track)==null?void 0:or.enabled}})),console.log(" OFFERER: Ready to send offer with",Ce.length,`tracks
`)}}else console.error(" OFFERER: No local stream available - TRACKS WILL NOT BE SENT!"),console.error(" OFFERER: localStreamRef.current is:",re.current);console.log(`
 ===== OFFERER CREATING AND SENDING OFFER =====`),console.log(" OFFERER: Creating WebRTC offer with offerToReceiveVideo/Audio");const cn=await fe.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0});console.log(" OFFERER: Offer created with receive constraints:",cn),console.log(" OFFERER SDP CHECK - Looking for a=sendrecv:");const Jt=cn.sdp.split(`
`).filter(Ce=>Ce.includes("sendrecv")||Ce.includes("recvonly")||Ce.includes("sendonly"));console.log("   Media direction lines:"),Jt.forEach(Ce=>console.log("   ",Ce)),console.log(" OFFERER: Setting local description (offer)"),await fe.setLocalDescription(cn),console.log(" OFFERER: Local description set"),console.log(`
 OFFERER: Sending offer with tracks:`,fe.getSenders().map(Ce=>{var un,ft,Ve;return{kind:(un=Ce.track)==null?void 0:un.kind,id:(ft=Ce.track)==null?void 0:ft.id,enabled:(Ve=Ce.track)==null?void 0:Ve.enabled}})),console.log(" OFFERER: Partner socket ID from data:",M.socketId),console.log(" OFFERER: partnerSocketIdRef.current value:",bt.current),console.log(" CRITICAL: About to emit webrtc_offer with to:",M.socketId),console.log(" CRITICAL: Is to value empty/null/undefined?",!M.socketId),ne.emit("webrtc_offer",{offer:K.current.localDescription,to:M.socketId}),console.log(" OFFERER: webrtc_offer emitted successfully"),console.log(" OFFERER: webrtc_offer sent to socket ID:",M.socketId),console.log(" OFFERER: webrtc_offer contains",K.current.getSenders().length,"senders"),console.log(" OFFERER: Sent to socket:",M.socketId)}catch(fe){console.error(" OFFERER: Error in partner_found handler:",fe),console.error(" OFFERER: Stack trace:",fe.stack)}}),ne.on("webrtc_offer",async M=>{console.log(`

`),console.log("  ANSWERER HANDLER FIRED  "),console.log(""),console.log(" ===== ANSWERER RECEIVED OFFER ====="),console.log(" ANSWERER: WEBRTC_OFFER EVENT FIRED - OFFER WAS RECEIVED"),console.log(" ANSWERER: Received WebRTC offer from offerer"),console.log(" ANSWERER: My socket ID:",ne.id),console.log(" ANSWERER: Offer from:",M.from),console.log(" ANSWERER: Full data:",M),console.log(" ANSWERER: data.from (offerer socket ID):",M.from),bt.current=M.from,console.log(" CRITICAL: Stored offerer socket ID:",bt.current);try{if(K.current)console.log(" ANSWERER: WARNING - peerConnectionRef already exists (should be null for answerer)");else{console.log(" ANSWERER: Creating new peer connection for the first time");let G;try{G=await Cs()}catch(ge){console.error(" ANSWERER: Error creating peer connection:",ge);return}K.current=G,console.log(" ANSWERER: Peer connection created")}if(console.log(`
 ANSWERER: ALWAYS executing track addition logic`),console.log(" ANSWERER: Checking localStreamRef.current..."),console.log(" ANSWERER localStreamRef.current:",re.current),console.log(" ANSWERER localStreamRef.current === null?",re.current===null),console.log(" ANSWERER localStreamRef.current === undefined?",re.current===void 0),!re.current){console.warn(" ANSWERER: localStreamRef.current is NULL - attempting emergency reacquisition");try{const G=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(re.current=G,te.current){te.current.srcObject=G,te.current.muted=!0;try{await te.current.play()}catch{console.warn(" Play error in answerer emergency reacquisition")}}console.log(" ANSWERER: Emergency stream acquisition successful")}catch(G){throw console.error(" ANSWERER: Emergency stream acquisition failed:",G.message),new Error("ANSWERER: Cannot reacquire camera stream - "+G.message)}}if(re.current){console.log(`
 ANSWERER: localStream EXISTS - will add tracks`),console.log(" ANSWERER localStream object:",re.current);const G=re.current.getTracks();console.log(" ANSWERER: getAllTracks() returned:",G),console.log(" ANSWERER: Track array length:",G.length),G.length>0?console.log(" ANSWERER: Tracks detail:",G.map(Pe=>({kind:Pe.kind,id:Pe.id,enabled:Pe.enabled,readyState:Pe.readyState}))):console.warn(" ANSWERER: WARNING - localStream exists but getTracks() returned empty array!");const ge=K.current.getSenders();if(console.log(" ANSWERER: Existing senders count:",ge.length),ge.length>0)console.warn(" ANSWERER WARNING: Tracks already added! Senders:",ge.map(Pe=>{var Me,rt;return{kind:(Me=Pe.track)==null?void 0:Me.kind,id:(rt=Pe.track)==null?void 0:rt.id}})),console.warn("   Not adding tracks again to avoid duplicates");else{console.log(`
 ANSWERER: Attempting to add ${G.length} local tracks to peer connection`);let Pe=0,Me=0;G.forEach((Fe,Oe)=>{console.log(`  [${Oe}] About to add ${Fe.kind} track (id: ${Fe.id}, enabled: ${Fe.enabled})`);try{const fe=K.current.addTrack(Fe,re.current);console.log(`  [${Oe}]  addTrack SUCCEEDED`),console.log(`  [${Oe}] Sender:`,fe),Pe++}catch(fe){console.error(`  [${Oe}]  addTrack FAILED`),console.error(`  [${Oe}] Error:`,fe.message),Me++}}),console.log(`
 ANSWERER: Track addition complete (${Pe} succeeded, ${Me} failed)`);const rt=K.current.getSenders();console.log(" ANSWERER: Final senders count:",rt.length),console.log(" ANSWERER: Senders:",rt.map((Fe,Oe)=>{var fe,cn,Jt;return{index:Oe,kind:(fe=Fe.track)==null?void 0:fe.kind,id:(cn=Fe.track)==null?void 0:cn.id,trackExists:!!Fe.track,trackEnabled:(Jt=Fe.track)==null?void 0:Jt.enabled}}))}}else throw console.error(`
 ANSWERER: CRITICAL ERROR - localStreamRef.current is NULL!`),console.error(" ANSWERER: Cannot add tracks - stream does not exist"),new Error("ANSWERER: No local stream - cannot add tracks");console.log(`
 ANSWERER: Setting remote description (offer from offerer)`),await K.current.setRemoteDescription(new RTCSessionDescription(M.offer)),console.log(" ANSWERER: Remote description set successfully"),console.log(" ANSWERER: Creating answer");const H=await K.current.createAnswer({offerToReceiveVideo:!0,offerToReceiveAudio:!0});console.log(" ANSWERER: Answer created with receive constraints"),console.log(" ANSWERER SDP CHECK - Looking for a=sendrecv:");const z=H.sdp.split(`
`).filter(G=>G.includes("sendrecv")||G.includes("recvonly")||G.includes("sendonly"));console.log("   Media direction lines:"),z.forEach(G=>console.log("   ",G)),console.log(" ANSWERER: Setting local description (answer)"),await K.current.setLocalDescription(H),console.log(" ANSWERER: Local description set successfully"),console.log(`
 ===== ANSWERER SENDING ANSWER =====`);const Y=K.current.getSenders();console.log(" ANSWERER: Final senders count:",Y.length),console.log(" ANSWERER: Sending answer with tracks:",Y.map(G=>{var ge,Pe,Me;return{kind:(ge=G.track)==null?void 0:ge.kind,id:(Pe=G.track)==null?void 0:Pe.id,enabled:(Me=G.track)==null?void 0:Me.enabled}})),console.log(" CRITICAL: Offerer socket ID from offer:",M.from),console.log(" SERVER sending ANSWER to:",M.from),ne.emit("webrtc_answer",{answer:K.current.localDescription,to:M.from}),console.log(" ANSWERER: Answer emitted to offerer via socket:",M.from),console.log(` ===== ANSWERER ANSWER SENT =====

`)}catch(H){console.error(`
 ANSWERER: ERROR in webrtc_offer handler:`,H),console.error(" ANSWERER: Error message:",H.message),console.error(" ANSWERER: Stack trace:",H.stack)}}),ne.on("webrtc_answer",async M=>{console.log(`

 ===== OFFERER RECEIVED ANSWER =====`),console.log(" OFFERER: Received WebRTC answer from answerer"),console.log(" OFFERER: data.from (answerer socket ID):",M.from),console.log(" OFFERER: Answer SDP:",M.answer),bt.current=M.from,console.log(" CRITICAL: Stored answerer socket ID:",bt.current);try{if(!K.current){console.error(" OFFERER: No peer connection available to handle answer");return}console.log(`
 OFFERER: Setting remote description (answer from answerer)`),console.log(" OFFERER: Current connection state before answer:",{connectionState:K.current.connectionState,iceConnectionState:K.current.iceConnectionState,signalingState:K.current.signalingState}),await K.current.setRemoteDescription(new RTCSessionDescription(M.answer)),console.log(" OFFERER: Remote description (answer) set successfully"),console.log(" OFFERER: Connection state after answer:",{connectionState:K.current.connectionState,iceConnectionState:K.current.iceConnectionState,signalingState:K.current.signalingState}),console.log(` ===== OFFERER ANSWER RECEIVED AND SET =====

`)}catch(H){console.error(" OFFERER: Error handling answer:",H),console.error(" OFFERER: Stack trace:",H.stack)}}),ne.on("ice_candidate",async M=>{if(console.log(`
 ICE candidate received from peer:`,{candidate:M.candidate,sdpMLineIndex:M.sdpMLineIndex,sdpMid:M.sdpMid}),!M.candidate||M.candidate.sdpMid==null&&M.candidate.sdpMLineIndex==null){console.warn(" Ignoring invalid ICE candidate (empty sdpMid and sdpMLineIndex)");return}try{K.current?(console.log(" Adding ICE candidate to peer connection"),await K.current.addIceCandidate(new RTCIceCandidate(M.candidate)),console.log(` ICE candidate added successfully
`)):console.warn(" No peer connection available for ICE candidate")}catch(H){console.error(" Error adding ICE candidate:",H)}}),ne.on("receive_message",M=>{X(H=>[...H,{id:Date.now(),sender:"partner",text:M.message,timestamp:new Date}])}),ne.on("partner_disconnected",M=>{console.log(`

 ===== PARTNER DISCONNECTED EVENT RECEIVED ===== `),console.log(" Event Data:",M),console.log(" Timestamp:",new Date().toISOString()),console.log(" Partner has closed the browser/tab"),console.log(" Cleaning up WebRTC connection..."),K.current?(console.log(" Closing peer connection"),console.log("   Current state:",K.current.connectionState),K.current.close(),K.current=null,console.log(" Peer connection closed successfully")):console.log(" WARNING: peerConnectionRef.current was null"),ht.current&&(console.log(" Clearing remote video ref"),ht.current.srcObject=null),console.log(" Calling endChat() to reset UI"),ha(),console.log(" Cleanup complete - ready for new partner")}),ne.on("disconnect",()=>{console.log("Socket disconnected"),Ye()}),console.log(`

 ===== ALL SOCKET LISTENERS REGISTERED =====`),console.log("  partner_found listener active"),console.log("  webrtc_offer listener active"),console.log("  webrtc_answer listener active"),console.log("  ice_candidate listener active"),console.log("  receive_message listener active"),console.log("  partner_disconnected listener active (CRITICAL FOR DISCONNECT)"),console.log("  disconnect listener active"),console.log(` Ready to receive WebRTC signaling messages

`),()=>{console.log(" Removing socket listeners on component unmount"),ne.off("partner_found"),ne.off("webrtc_offer"),ne.off("webrtc_answer"),ne.off("ice_candidate"),ne.off("receive_message"),ne.off("partner_disconnected"),ne.off("disconnect")}),[]),R.useEffect(()=>{const M=C,H=k;return()=>{console.log(`

   CHAT COMPONENT UNMOUNTING - CRITICAL CLEANUP   `),M&&!H&&(console.log(" User was still looking for partner - emitting cancel_matching"),ne.emit("cancel_matching",{userId:Vt.current,timestamp:new Date().toISOString()})),K.current&&(console.log(" Closing peer connection"),K.current.close(),K.current=null),console.log(" Chat component cleanup complete (tracks NOT stopped - will be reused)")}},[]),R.useEffect(()=>()=>{console.log(" Chat component unmounting - cleaning up peer connection only"),K.current&&(K.current.close(),K.current=null)},[]);const Jc=async()=>{var M;try{console.log(" Fetching TURN servers from Xirsys via backend API...");const z=await(await fetch("https://flinxx-backend.onrender.com/api/turn")).json();if(console.log(" Xirsys API Response:",z),(M=z==null?void 0:z.v)!=null&&M.iceServers&&Array.isArray(z.v.iceServers))return console.log(" TURN servers fetched from Xirsys API"),console.log(" iceServers is an array with",z.v.iceServers.length,"entries"),console.log(" ICE Servers:",z.v.iceServers),z.v.iceServers;throw console.warn(" Invalid Xirsys TURN response format"),console.log("   Expected: data.v.iceServers as array"),console.log("   Received:",z),new Error("Invalid Xirsys TURN response format")}catch(H){console.error(" Error fetching TURN servers from Xirsys:",H.message),console.log(" Falling back to static STUN/TURN configuration");const z=h2();return console.log(" Using fallback ICE servers:",z),z}},ks=async()=>{if(m)m&&!C&&(console.log(' [MATCHING] User clicked "Start Video Chat" again - starting matching'),console.log(" [MATCHING]  NOT reinitializing camera - stream already active"),console.log(" [MATCHING] Emitting find_partner event to server"),b(!0),dt(!0),ne.emit("find_partner",{userId:Vt.current,userName:me.name||"Anonymous",userAge:me.age||18,userLocation:me.location||"Unknown",userPicture:me.picture||null}),console.log(" [MATCHING]  find_partner event emitted - now waiting for a partner"));else{if(console.log(' [START] User clicked "Allow Camera & Continue" - requesting camera permission'),ln){console.warn(" Camera request already in progress");return}try{W(!0),dt(!0),console.log(" [INIT] Requesting camera permission from browser...");const M=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(re.current=M,console.log("[Camera]  Camera stream obtained"),console.log("[Camera] Stream tracks:",M.getTracks().map(H=>({kind:H.kind,id:H.id}))),te.current){te.current.srcObject=M,te.current.muted=!0;try{await te.current.play(),console.log(" Camera preview playing successfully")}catch(H){console.error(" Play error:",H)}}console.log(" [START] Setting cameraStarted = true (camera preview now showing)"),v(!0),W(!1),dt(!1),console.log(" [START]  Camera initialized - user is still on home screen, matching NOT started yet")}catch(M){console.error(" Error initializing camera:",M),W(!1),dt(!1),M.name==="NotAllowedError"?console.warn(" Camera permission denied by user"):M.name==="NotFoundError"?console.warn(" No camera device found"):M.name==="NotReadableError"&&console.warn(" Camera device is already in use by another application")}}},Si=()=>{if(pe.trim()===""||!k)return;const M={id:Date.now(),sender:"user",text:pe,timestamp:new Date};X(H=>[...H,M]),ne.emit("send_message",{message:pe}),he("")},ha=()=>{O(!1),w(!1),j(null),X([]),F(0),K.current&&(K.current.close(),K.current=null),ne.emit("find_partner",{userId:Vt.current,userName:me.name||"Anonymous",userAge:me.age||18,userLocation:me.location||"Unknown"})},Ye=()=>{console.log(" Cleaning up chat session"),K.current&&(K.current.close(),K.current=null),v(!1),O(!1),w(!1),X([]),F(0)},nt=()=>u.jsxs("div",{className:"intro-screen-container flex flex-row w-full max-w-[1500px] mx-auto gap-12 px-10 mt-20 items-start overflow-visible",style:{minHeight:"100vh",height:"auto",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx(v2,{currentUser:me,onProfileClick:()=>N(!0),onPremiumClick:()=>y(!0),onMatchHistoryClick:()=>Qe(!0),isFixedPosition:!0}),u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})}),u.jsx("div",{className:"right-panel flex-1 rounded-3xl shadow-xl p-12 pb-16 space-y-6 flex items-center justify-center",style:{height:"520px",minHeight:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f"},children:u.jsxs("div",{className:"w-full h-full rounded-3xl p-8 shadow-2xl flex flex-col items-center justify-between text-center",children:[u.jsxs("div",{className:"flex gap-3 justify-center",children:[u.jsx("button",{className:"text-white font-bold py-2 px-6 rounded-lg transition-all text-sm shadow-md hover:shadow-lg",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"SOLO"}),u.jsx("button",{className:"text-white font-bold py-2 px-6 rounded-lg transition-all text-sm",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"DUO"})]}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("img",{src:ca,alt:"Flinxx",className:"w-16 h-16"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black mb-2",style:{color:"#d9b85f"},children:"Flinxx"}),u.jsx("p",{className:"text-sm",style:{color:"#d9b85f"},children:"Meet new people in real time."})]}),u.jsx("button",{onClick:()=>S(!0),className:"rounded-full px-4 py-1 transition-all cursor-pointer text-xs",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:u.jsxs("span",{className:"font-semibold",children:[" ",Ft==="girls"?"Girls Only":Ft==="guys"?"Guys Only":"Both"]})})]}),u.jsx("button",{onClick:ks,disabled:Te,className:"w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 text-sm shadow-lg",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:Te?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin inline-block mr-2",children:""})," ",m?"Starting Match...":"Requesting Access..."]}):m?"Start Video Chat":"Allow Camera & Continue"})]})})]}),Ti=()=>(R.useEffect(()=>{console.log(`

 ===== WAITING SCREEN DIAGNOSTIC CHECK =====
`);const M=!!te.current;console.log(" CHECK 1: Video element found?",M?"YES":"NO",te.current);const H=!!re.current;if(console.log(" CHECK 2: Local stream valid?",H?"YES":"NO",re.current),H){const z=re.current.getVideoTracks();if(console.log(" CHECK 3: Does stream have video track?",z.length>0?"YES":"NO"),z.length>0){const Y=z[0];console.log("   - kind:",Y.kind),console.log("   - enabled:",Y.enabled),console.log("   - readyState:",Y.readyState),console.log("   - id:",Y.id)}}if(M&&H){const z=te.current.srcObject===re.current;console.log(" CHECK 4: Stream attached to video element?",z?"YES":"NO"),z||(console.log("    Attaching stream to video element NOW..."),te.current.srcObject=re.current,te.current.muted=!0,console.log("    Stream attached!"))}console.log(`
 ===== END DIAGNOSTIC CHECK =====

`)},[C]),u.jsxs("div",{className:"flex flex-row w-full max-w-[1500px] mx-auto gap-12 px-10 mt-20 items-start overflow-visible",style:{minHeight:"100vh",height:"auto",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})}),u.jsx("div",{className:"right-panel flex-1 rounded-3xl shadow-xl flex flex-col",style:{height:"520px",minHeight:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f",padding:0,overflow:"visible",position:"relative",zIndex:5},children:u.jsxs("div",{className:"flex flex-col items-center justify-center text-center gap-8 py-20",children:[u.jsx("div",{className:"animate-pulse text-6xl",children:""}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("h2",{className:"text-2xl font-bold",style:{color:"#d9b85f"},children:"Looking for a partner..."}),u.jsx("p",{className:"text-sm",style:{color:"#d9b85f"},children:"Matching you with someone nearby"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0.2s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0.4s"}})]}),u.jsx("button",{onClick:()=>{console.log(" Cancel matching - emitting cancel_matching event"),ne.emit("cancel_matching",{userId:Vt.current,timestamp:new Date().toISOString()}),b(!1),dt(!1)},className:"w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 text-sm shadow-lg mt-4",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"Cancel Search"})]})})]})),fa=()=>(console.log(" VideoChatScreen rendering - partnerInfo:",{exists:!!I,userName:I==null?void 0:I.userName,userLocation:I==null?void 0:I.userLocation,picture:!!(I!=null&&I.picture),fullObject:I}),console.log(" currentUser for comparison:",{name:me==null?void 0:me.name,location:me==null?void 0:me.location,picture:!!(me!=null&&me.picture)}),u.jsxs("div",{className:"video-chat-container flex flex-col md:flex-row w-full h-full gap-6 items-start overflow-visible",style:{minHeight:"100vh",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsxs("div",{className:"right-panel flex-1 rounded-3xl shadow-xl flex flex-col",style:{height:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f",padding:0,overflow:"visible"},children:[u.jsxs("div",{className:"w-full h-full bg-black rounded-3xl shadow-2xl flex flex-col overflow-visible",style:{backgroundColor:"#131313",overflow:"visible"},children:[u.jsxs("div",{className:"px-4 flex items-center justify-between backdrop-blur-sm flex-shrink-0",style:{height:"56px",paddingTop:"8px",paddingBottom:"8px",backgroundColor:"rgba(19, 19, 19, 0.8)",borderBottom:"1px solid #d9b85f"},children:[u.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg flex-shrink-0 overflow-hidden",children:k&&I&&I.picture?u.jsx("img",{src:I.picture,alt:"Partner",className:"w-full h-full object-cover"}):""}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-semibold text-sm leading-tight truncate",style:{color:"#d9b85f"},children:k&&I?I.userName:"Waiting..."}),u.jsx("p",{className:"text-xs truncate",style:{color:"#d9b85f"},children:k&&I?I.userLocation:"for a partner"})]})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[u.jsx("button",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""}),u.jsx("button",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""})]})]}),u.jsxs("div",{id:"main-container",className:"overflow-visible flex flex-col w-full flex-1",style:{zIndex:1,backgroundColor:"transparent",padding:0,overflow:"visible"},children:[u.jsxs("div",{id:"remote-video-wrapper",style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:1,overflow:"visible",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:[u.jsx("video",{id:"remote-video-singleton",ref:ht,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"black",display:k?"block":"none",zIndex:10}}),!k&&u.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000000",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:u.jsx("p",{style:{color:"#d9b85f",fontSize:"14px"},children:"Waiting for partner video..."})}),E&&k&&u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 text-xs font-semibold z-50 shadow-lg px-2 py-1 rounded-full",style:{backgroundColor:"rgba(217, 184, 95, 0.9)",color:"#0f0f0f"},children:[u.jsx("span",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:"#0f0f0f"}}),f2(L)]})]}),!k&&u.jsx("div",{className:"flex-1 w-full flex items-center justify-center flex-col bg-black rounded-2xl",style:{zIndex:1},children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin mb-4 text-5xl inline-block",children:""}),u.jsx("p",{className:"font-semibold text-base",style:{color:"#d9b85f"},children:"Looking for a partner..."}),u.jsx("p",{className:"text-xs mt-2",style:{color:"#d9b85f"},children:"This won't take long"})]})}),J.length>0&&k&&u.jsx("div",{className:"space-y-2 mt-3 px-4",style:{zIndex:10},children:J.map(M=>u.jsx("div",{className:`flex ${M.sender==="user"?"justify-end":"justify-start"}`,children:u.jsx("div",{className:`max-w-xs px-3 py-2 rounded-2xl text-xs ${M.sender==="user","text-white"}`,style:{backgroundColor:M.sender==="user"?"#d9b85f":"rgba(217, 184, 95, 0.6)",color:M.sender==="user"?"#0f0f0f":"#d9b85f"},children:M.text})},M.id))})]})]}),u.jsxs("div",{className:"px-4 flex items-center justify-between backdrop-blur-sm flex-shrink-0",style:{height:"56px",paddingTop:"8px",paddingBottom:"8px",backgroundColor:"rgba(19, 19, 19, 0.8)",borderTop:"1px solid #d9b85f"},children:[u.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"M"})}),u.jsxs("div",{className:"flex items-center gap-2 flex-1 ml-2 flex-shrink-0",children:[u.jsx("input",{type:"text",value:pe,onChange:M=>he(M.target.value),onKeyPress:M=>M.key==="Enter"&&Si(),placeholder:"Send Message",disabled:!k,className:"flex-1 px-3 py-2 rounded-lg focus:outline-none disabled:bg-gray-500/20 text-xs font-medium",style:{backgroundColor:"rgba(217, 184, 95, 0.1)",borderColor:"#d9b85f",border:"1px solid #d9b85f",color:"#d9b85f"}}),u.jsx("button",{onClick:Si,disabled:!k||pe.trim()==="",className:"w-8 h-8 font-bold rounded-lg transition-all disabled:cursor-not-allowed flex items-center justify-center text-sm shadow-md flex-shrink-0",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""})]})]})]}),u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})})]}));return u.jsxs(u.Fragment,{children:[r&&u.jsx(ep,{onCancel:da,onContinue:Yc}),s?u.jsxs("div",{className:"flex flex-col h-screen w-screen overflow-visible min-h-0",style:{backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx("video",{ref:te,id:"local-video-singleton",className:"local-video",autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#000",display:m?"block":"none",zIndex:1}}),k?u.jsx(fa,{}):C?u.jsx(Ti,{}):u.jsx(nt,{}),u.jsx(p2,{isOpen:_,onClose:()=>y(!1)}),u.jsx(g2,{isOpen:A,onClose:()=>N(!1),onOpenPremium:()=>y(!0),onReinitializeCamera:(As=Qt.current)==null?void 0:As.reinitializeCamera}),u.jsx(y2,{isOpen:T,onClose:()=>Qe(!1)}),u.jsx(m2,{isOpen:x,onClose:()=>S(!1),currentGender:Ft,onOpenPremium:()=>y(!0)}),ua&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-indigo-600 rounded-2xl p-8 max-w-md w-full border border-white/20 shadow-2xl",children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-center",children:" Time's Up!"}),u.jsx("p",{className:"text-white/90 text-center mb-4",children:"Your 2-minute guest preview has ended. Redirecting to login..."}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsx("div",{className:"animate-spin text-4xl",children:""})})]})})]}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center",children:u.jsx("div",{className:"text-center text-white",children:u.jsx("p",{children:"Loading..."})})})]})},_2=()=>{const t=Kt(),[e,n]=R.useState(5),[r,i]=R.useState(!0),[s,o]=R.useState([{id:1,username:"Alex_24",name:"Alex",age:24,country:"USA",avatar:"",status:"Online"},{id:2,username:"Jordan_22",name:"Jordan",age:22,country:"UK",avatar:"",status:"Online"},{id:3,username:"Casey_25",name:"Casey",age:25,country:"Canada",avatar:"",status:"Online"},{id:4,username:"Morgan_23",name:"Morgan",age:23,country:"Australia",avatar:"",status:"Online"},{id:5,username:"Taylor_26",name:"Taylor",age:26,country:"Germany",avatar:"",status:"Online"},{id:6,username:"Alex_27",name:"Alex",age:27,country:"France",avatar:"",status:"Online"},{id:7,username:"Sam_21",name:"Sam",age:21,country:"Canada",avatar:"",status:"Online"},{id:8,username:"Chris_28",name:"Chris",age:28,country:"Japan",avatar:"",status:"Online"}]),[l,c]=R.useState(0),h=R.useRef(null);R.useEffect(()=>(r&&e>0?h.current=setTimeout(()=>{n(k=>k-1)},1e3):r&&e===0&&(p(),n(5)),()=>clearTimeout(h.current)),[e,r]);const p=()=>{l<s.length-1?(c(k=>k+1),n(5),i(!0)):(c(0),n(5),i(!0))},m=()=>{p()},v=()=>{ne.emit("connect_user",{targetUserId:s[l].id}),t("/chat")},C=s[l],b=s[(l+1)%s.length];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex flex-col",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-6 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ca,alt:"Flinxx",className:"w-8 h-8"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:()=>t("/"),className:"text-white font-semibold hover:text-white/80 transition",children:" Back"})})]})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-8",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"relative h-[600px] mb-8",children:[u.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-md rounded-3xl border border-white/20 p-8 transform scale-95 translate-y-4 opacity-50",children:u.jsxs("div",{className:"h-full flex flex-col justify-between",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-white font-bold text-xl mb-2",children:[b.name,", ",b.age]}),u.jsxs("p",{className:"text-white/70 text-sm mb-6",children:[" ",b.country]})]}),u.jsx("div",{className:"text-center opacity-50",children:u.jsx("p",{className:"text-white/50 text-sm",children:"Next up..."})})]})}),u.jsxs("div",{className:"absolute inset-0 bg-gradient-to-b from-white/20 to-white/5 backdrop-blur-md rounded-3xl border-2 border-white/30 p-8 flex flex-col justify-between shadow-2xl hover:border-white/50 transition-all duration-300",children:[u.jsx("div",{className:"flex justify-center mb-6",children:u.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-5xl shadow-lg shadow-blue-600/50 border-4 border-white/40 text-white",children:C.avatar})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-white font-black text-3xl mb-1",children:C.name}),u.jsx("p",{className:"text-white/90 text-2xl font-bold mb-2",children:C.age}),u.jsxs("p",{className:"text-white/80 text-base mb-2",children:[" ",C.country]}),u.jsxs("p",{className:"text-white/70 text-sm mb-6",children:["@",C.username]}),u.jsx("div",{className:"space-y-3",children:u.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20",children:[u.jsx("p",{className:"text-white/70 text-xs",children:"Status"}),u.jsxs("p",{className:"text-white font-bold text-sm",children:[" ",C.status]})]})})]}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsxs("div",{className:"relative w-20 h-20",children:[u.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[u.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"white",strokeWidth:"2",opacity:"0.2"}),u.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"url(#gradient)",strokeWidth:"2",strokeDasharray:`${(5-e)/5*226.2} 226.2`,className:"transition-all duration-1000"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:"#fbbf24"}),u.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})]})})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-black text-2xl",children:e})})]})}),r&&u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-blue-400 text-sm font-semibold animate-pulse",children:[" Auto-next in ",e,"s"]})})]})]}),u.jsxs("div",{className:"flex gap-4 justify-center",children:[u.jsx("button",{onClick:m,className:"flex-1 px-6 py-4 bg-white/20 hover:bg-white/30 border-2 border-white/40 hover:border-white/60 rounded-full font-bold text-white transition-all transform hover:scale-105 backdrop-blur",children:" Skip"}),u.jsx("button",{onClick:v,className:"flex-1 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-2xl shadow-blue-600/30 transition-all transform hover:scale-105",children:" Connect"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx("button",{onClick:()=>i(!r),className:`px-6 py-2 rounded-full font-semibold text-sm transition-all ${r?"bg-blue-600/30 text-blue-200 border border-blue-400/50":"bg-white/10 text-white/70 border border-white/20"}`,children:r?" Auto-Next ON":" Auto-Next OFF"})}),u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("p",{className:"text-white/70 text-sm",children:["Showing ",l+1," of ",s.length," profiles"]})})]})})]})},x2=()=>{const t=Kt(),{user:e}=R.useContext(Es)||{},r=(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null)||e||{name:"Guest User",email:"guest@flinxx.local",picture:null,googleId:"N/A"};console.log(" Profile Component - Loaded User:",r);const[i,s]=R.useState({username:(r==null?void 0:r.name)||"User",age:(r==null?void 0:r.age)||24,country:(r==null?void 0:r.location)||"Unknown",bio:"Welcome to my profile",avatar:"",gender:"Not specified",status:"Looking to chat",email:(r==null?void 0:r.email)||"",displayName:(r==null?void 0:r.name)||"",photoURL:(r==null?void 0:r.picture)||"",googleId:(r==null?void 0:r.googleId)||"N/A"}),[o,l]=R.useState(!0);R.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.email)){console.log(" No user email found, using localStorage data only"),console.log(" Profile from localStorage:",{name:r==null?void 0:r.name,email:r==null?void 0:r.email,picture:r==null?void 0:r.picture,googleId:r==null?void 0:r.googleId}),l(!1);return}const O="https://flinxx-backend.onrender.com";console.log(` Profile Component - Fetching from: ${O}/api/user/profile?email=${r.email}`);const E=await fetch(`${O}/api/user/profile?email=${encodeURIComponent(r.email)}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!E.ok)throw new Error(`Failed to fetch profile: ${E.status}`);const w=await E.json();console.log(" Profile data fetched from backend:",w.profile),w.profile?s(I=>({...I,email:w.profile.email||r.email||I.email,displayName:w.profile.name||r.name||I.displayName,photoURL:w.profile.picture||r.picture||I.photoURL,googleId:r.googleId||w.profile.id||I.googleId})):s(I=>({...I,email:r.email||I.email,displayName:r.name||I.displayName,photoURL:r.picture||I.photoURL,googleId:r.googleId||I.googleId}))}catch(O){console.error(" Error fetching profile:",O),s(E=>({...E,email:r.email||E.email,displayName:r.name||E.displayName,photoURL:r.picture||E.photoURL,googleId:r.googleId||E.googleId}))}finally{l(!1)}})()},[r==null?void 0:r.email]);const[c,h]=R.useState(!1),[p,m]=R.useState(i),v=k=>{const{name:O,value:E}=k.target;m(w=>({...w,[O]:O==="age"?parseInt(E):E}))},C=()=>{s(p),h(!1),console.log("Profile saved:",p)},b=["","","","","","","","",""];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-6 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ca,alt:"Flinxx",className:"w-8 h-8"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:()=>t("/"),className:"text-white font-semibold hover:text-white/80 transition",children:" Back"})})]})}),u.jsx("div",{className:"flex-1 px-4 py-12",children:u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 mb-8",children:[u.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.photoURL&&!c?u.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center shadow-2xl shadow-yellow-400/50 mb-6 border-4 border-white/30 overflow-hidden",children:u.jsx("img",{src:i.photoURL,alt:"Profile",className:"w-full h-full object-cover"})}):u.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-7xl shadow-2xl shadow-blue-600/50 mb-6 border-4 border-white/30",children:c?u.jsx("div",{className:"grid grid-cols-3 gap-2 p-4",children:b.map(k=>u.jsx("button",{onClick:()=>m(O=>({...O,avatar:k})),className:`text-3xl p-2 rounded-lg transition-all ${p.avatar===k?"bg-white/30 border-2 border-white scale-110":"bg-white/10 hover:bg-white/20"}`,children:k},k))}):i.avatar}),!c&&u.jsx("p",{className:"text-white/70 text-sm",children:"Click Edit to change avatar"})]}),c?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Full Name"}),u.jsx("input",{type:"text",name:"displayName",value:p.displayName,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60",placeholder:"Enter your full name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:p.email,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60",placeholder:"Enter your email"})]}),p.googleId&&p.googleId!=="N/A"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Google ID (Read-only)"}),u.jsx("input",{type:"text",value:p.googleId,disabled:!0,className:"w-full mt-2 bg-white/5 border border-white/20 rounded-xl px-4 py-3 text-white/60 cursor-not-allowed"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Username"}),u.jsx("input",{type:"text",name:"username",value:p.username,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Age"}),u.jsx("input",{type:"number",name:"age",value:p.age,onChange:v,min:"18",max:"100",className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Country"}),u.jsx("input",{type:"text",name:"country",value:p.country,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Gender"}),u.jsxs("select",{name:"gender",value:p.gender,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/60",children:[u.jsx("option",{value:"Male",children:"Male"}),u.jsx("option",{value:"Female",children:"Female"}),u.jsx("option",{value:"Other",children:"Other"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Bio"}),u.jsx("textarea",{name:"bio",value:p.bio,onChange:v,rows:"4",className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60 resize-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Status"}),u.jsxs("select",{name:"status",value:p.status,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/60",children:[u.jsx("option",{value:"Looking to chat",children:"Looking to chat"}),u.jsx("option",{value:"Making friends",children:"Making friends"}),u.jsx("option",{value:"Just browsing",children:"Just browsing"})]})]}),u.jsxs("div",{className:"flex gap-4 pt-6",children:[u.jsx("button",{onClick:()=>{h(!1),m(i)},className:"flex-1 bg-white/20 hover:bg-white/30 text-white font-bold py-3 rounded-xl transition-all",children:"Cancel"}),u.jsx("button",{onClick:C,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105",children:"Save Profile"})]})]}):u.jsxs("div",{className:"space-y-6",children:[i.displayName&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Full Name"}),u.jsx("p",{className:"text-white font-bold text-2xl mt-2",children:i.displayName})]}),i.email&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Email"}),u.jsx("p",{className:"text-white font-normal text-base mt-2",children:i.email})]}),i.googleId&&i.googleId!=="N/A"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Google ID"}),u.jsx("p",{className:"text-white font-mono text-sm mt-2 break-all",children:i.googleId})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Username"}),u.jsx("p",{className:"text-white font-bold text-2xl mt-2",children:i.username})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Age"}),u.jsxs("p",{className:"text-white font-bold text-xl mt-2",children:[i.age," years old"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Country"}),u.jsxs("p",{className:"text-white font-bold text-xl mt-2",children:[" ",i.country]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Gender"}),u.jsx("p",{className:"text-white font-bold text-lg mt-2",children:i.gender})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Bio"}),u.jsx("p",{className:"text-white/90 text-base mt-2",children:i.bio})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Status"}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),u.jsx("p",{className:"text-white font-semibold",children:i.status})]})]}),u.jsx("button",{onClick:()=>h(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105",children:" Edit Profile"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Matches"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"24"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Chats"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"8"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Time Online"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"42h"})]})]})]})})]})},E2=({value:t,onChange:e,maxDate:n})=>{const r=n?`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`:null;return u.jsx("input",{type:"date",value:t||"",onChange:i=>e(i.target.value),max:r,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white text-gray-900",placeholder:"",required:!0})},op=({user:t,onProfileComplete:e,isOpen:n})=>{const[r,i]=R.useState(""),[s,o]=R.useState(""),[l,c]=R.useState(null),[h,p]=R.useState(null),[m,v]=R.useState(!1),C=Kt();R.useEffect(()=>{if(r){const[O,E,w]=r.split("-").map(Number),I=new Date(O,E-1,w),j=new Date;let L=j.getFullYear()-I.getFullYear();const F=j.getMonth()-I.getMonth();(F<0||F===0&&j.getDate()<I.getDate())&&L--,c(L)}else c(null)},[r]);const b=!r||!s||m,k=async O=>{if(O.preventDefault(),!r||!s){p("Please fill in all required fields");return}if(l&&l<18){p("You must be 18+ to use this app");return}v(!0),p(null);try{const E="https://flinxx-backend.onrender.com",w=t.id||t.uid||t.googleId;if(!w)throw new Error("Unable to determine user ID");const I=await fetch(`${E}/api/users/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:w,birthday:r||null,gender:s})}),j=await I.json();if(!I.ok){if(j.code==="UNDERAGE_USER"){p("You must be 18+ to use this app");return}p(j.error||"Failed to save profile");return}console.log(" Profile saved successfully:",j);const L={...t,id:j.user.id,birthday:j.user.birthday,gender:j.user.gender,age:j.user.age,profileCompleted:j.user.profileCompleted,isProfileCompleted:!0};localStorage.setItem("user",JSON.stringify(L)),e&&e(L),setTimeout(()=>{C("/chat?view=home")},500)}catch(E){console.error(" Error saving profile:",E),p(E.message||"Network error. Please try again.")}finally{v(!1)}};return!n||!t?null:u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:u.jsx("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 my-8",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Complete Your Profile"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Just a few more details to get started"})]}),u.jsx("div",{className:"flex justify-center mb-6",children:t.picture||t.photoURL?u.jsx("img",{src:t.picture||t.photoURL,alt:t.name||t.displayName,className:"w-20 h-20 rounded-full object-cover border-4 border-blue-500"}):u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center border-4 border-blue-500",children:u.jsx("span",{className:"text-gray-600 text-2xl",children:""})})}),h&&u.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:u.jsx("p",{className:"text-red-700 text-sm font-medium",children:h})}),u.jsxs("form",{onSubmit:k,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),u.jsx("input",{type:"text",value:t.name||t.displayName||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Birthday ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx(E2,{value:r,onChange:i,maxDate:new Date}),l!==null&&u.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Age: ",u.jsxs("span",{className:l<18?"text-red-600 font-bold":"text-green-600 font-bold",children:[l," years old"]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Gender ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{value:s,onChange:O=>o(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white text-gray-900 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},required:!0,children:[u.jsx("option",{value:"",disabled:!0,children:"Select gender"}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"})]})]}),u.jsx("button",{type:"submit",disabled:b,className:`w-full py-3 px-4 rounded-lg font-medium transition mt-6 ${b?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:m?u.jsxs("span",{className:"flex items-center justify-center",children:[u.jsx("span",{className:"inline-block animate-spin mr-2",children:""}),"Saving..."]}):"Save Profile"})]}),u.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Your birthday and gender cannot be changed after saving."})]})})})};function I2(){const t=Kt(),[e]=px(),[n,r]=R.useState(!1),[i,s]=R.useState(null);R.useEffect(()=>{try{const l=e.get("token"),c=e.get("user"),h=e.get("error");if(console.log(" Callback - Token:",l),console.log(" Callback - User:",c),h){console.error(" OAuth Error:",h),t("/login?error="+encodeURIComponent(h),{replace:!0});return}if(l&&c)try{const p=JSON.parse(c);localStorage.setItem("token",l),localStorage.setItem("authToken",l),localStorage.setItem("user",JSON.stringify(p)),localStorage.setItem("authProvider","google"),localStorage.setItem("userInfo",JSON.stringify(p)),console.log(" User data saved:",p),p.isProfileCompleted?(console.log(" Profile completed, redirecting to chat..."),setTimeout(()=>{t("/chat")},500)):(console.log(" Profile not completed, showing setup modal"),s(p),r(!0))}catch(p){console.error(" Error parsing user data:",p),t("/login?error=invalid_user_data",{replace:!0})}else console.error(" Missing token or user data"),t("/login?error=missing_data",{replace:!0})}catch(l){console.error(" Callback error:",l),t("/login?error="+encodeURIComponent(l.message),{replace:!0})}},[e,t]);const o=l=>{console.log(" Profile completed, redirecting to chat"),r(!1),setTimeout(()=>{t("/chat")},500)};return n&&i?u.jsx(op,{user:i,onProfileComplete:o,isOpen:!0}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Completing your login..."}),u.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Please wait while we set up your session"})]})})}function S2(){const t=Kt(),{setAuthToken:e,logout:n}=R.useContext(Es)||{},[r]=px(),[i,s]=R.useState(!1),[o,l]=R.useState(!1),[c,h]=R.useState(null),[p,m]=R.useState(!0),[v,C]=R.useState(null);R.useEffect(()=>{(async()=>{try{const w=r.get("token");if(!w){C("No authentication token received"),m(!1);return}console.log(" Auth Success - Token received:",w.substring(0,10)+"...");const j=await fetch(`https://flinxx-backend.onrender.com/auth-success?token=${w}`);if(!j.ok)throw new Error(`Failed to fetch user data: ${j.statusText}`);const L=await j.json();if(console.log(" User data received:",L.user.email),L.success&&L.user){const F=L.user;e?(console.log("[AuthSuccess] Storing token and user via AuthContext"),e(w,F)):(console.log("[AuthSuccess] AuthContext not available, saving to localStorage directly"),localStorage.setItem("token",w),localStorage.setItem("authToken",w),localStorage.setItem("user",JSON.stringify(F)),localStorage.setItem("authProvider","google"),localStorage.setItem("userInfo",JSON.stringify(F))),console.log(" User data saved to localStorage"),F.termsAccepted?F.profileCompleted?(console.log(" Profile completed and terms accepted, redirecting to chat"),setTimeout(()=>{t("/chat")},500)):(console.log(" Profile not completed, showing setup modal"),h(F),l(!0)):(console.log(" Terms not accepted, showing terms confirmation modal"),h(F),s(!0))}else C(L.error||"Failed to authenticate")}catch(w){console.error(" Auth Success Error:",w),C(w.message||"An error occurred during authentication")}finally{m(!1)}})()},[r,t,e]);const b=async()=>{try{console.log(" User accepted terms"),localStorage.setItem("termsAccepted","true");const w=await fetch("https://flinxx-backend.onrender.com/api/users/accept-terms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c.id})});if(!w.ok)throw new Error(`Failed to save terms acceptance: ${w.statusText}`);const I=await w.json();console.log(" Terms accepted and saved to backend");const j={...c,termsAccepted:!0};h(j),localStorage.setItem("user",JSON.stringify(j)),s(!1),j.profileCompleted?(console.log(" Profile already completed, redirecting to chat"),setTimeout(()=>{t("/chat")},500)):(console.log(" Showing profile setup modal"),l(!0))}catch(E){console.error(" Error accepting terms:",E),C(E.message||"Failed to accept terms")}},k=async()=>{try{console.log(" User cancelled terms - logging out"),n?n():(localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("authProvider"),localStorage.removeItem("userInfo")),setTimeout(()=>{t("/login",{replace:!0})},500)}catch(E){console.error(" Error cancelling terms:",E),t("/login")}},O=E=>{console.log(" Profile completed, redirecting to chat"),l(!1),setTimeout(()=>{t("/chat")},500)};return v?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white text-2xl font-bold mb-4",children:" Authentication Error"}),u.jsx("p",{className:"text-white/70 text-lg mb-6",children:v}),u.jsx("button",{onClick:()=>t("/login",{replace:!0}),className:"px-6 py-2 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100",children:"Back to Login"})]})}):i&&c?u.jsx(ep,{user:c,onContinue:b,onCancel:k}):o&&c?u.jsx(op,{user:c,onProfileComplete:O,isOpen:!0}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Completing your login..."}),u.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Please wait while we set up your session"})]})})}const Cy=()=>{const t=Kt();return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsx("div",{className:"px-6 py-4 flex justify-start items-center max-w-full",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ca,alt:"Flinxx",className:"w-10 h-10"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]})})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"w-full max-w-3xl",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-8",children:"Terms & Conditions"}),u.jsxs("div",{className:"max-h-[70vh] overflow-y-auto pr-4 space-y-6 text-white/90",children:[u.jsx("p",{className:"text-sm text-white/70 italic",children:"Last Updated: December 21, 2025"}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"1. Acceptance of Terms"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:'By accessing and using the Flinxx platform (the "Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"2. Use License"}),u.jsx("p",{className:"text-white/80 leading-relaxed mb-3",children:"Permission is granted to temporarily download one copy of the materials (information or software) on Flinxx for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:"}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-white/80",children:[u.jsx("li",{children:"Modifying or copying the materials"}),u.jsx("li",{children:"Using the materials for any commercial purpose or for any public display"}),u.jsx("li",{children:"Attempting to decompile or reverse engineer any software contained on the Service"}),u.jsx("li",{children:"Removing any copyright or other proprietary notations from the materials"}),u.jsx("li",{children:'Transferring the materials to another person or "mirroring" the materials on any other server'}),u.jsx("li",{children:"Violating any laws or regulations applicable to the Service"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"3. Age Restriction"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"You must be at least 18 years of age to use this Service. By using Flinxx, you represent and warrant that you are at least 18 years old and have the legal right to use the platform in your jurisdiction."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"4. Disclaimer"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"The materials on Flinxx are provided on an 'as is' basis. Flinxx makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"5. Limitations"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"In no event shall Flinxx or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on Flinxx, even if Flinxx or a Flinxx authorized representative has been notified orally or in writing of the possibility of such damage."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"6. Accuracy of Materials"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"The materials appearing on Flinxx could include technical, typographical, or photographic errors. Flinxx does not warrant that any of the materials on its Service are accurate, complete, or current. Flinxx may make changes to the materials contained on the Service at any time without notice."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"7. User Conduct"}),u.jsx("p",{className:"text-white/80 leading-relaxed mb-3",children:"You agree that you will not engage in any conduct that:"}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-white/80",children:[u.jsx("li",{children:"Violates any applicable law or regulation"}),u.jsx("li",{children:"Infringes upon or violates any intellectual property rights"}),u.jsx("li",{children:"Harasses, abuses, or threatens other users"}),u.jsx("li",{children:"Uploads malware, viruses, or other harmful code"}),u.jsx("li",{children:"Impersonates any person or entity"}),u.jsx("li",{children:"Shares non-consensual intimate content"}),u.jsx("li",{children:"Attempts to gain unauthorized access to the Service"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"8. Materials License"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"By posting materials to Flinxx, you grant Flinxx a worldwide, royalty-free license to use, reproduce, modify and publish that material in any form, in any media now known or hereafter discovered. However, this license does not extend to any materials posted by other users."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"9. Limitations of Liability"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"In no event shall Flinxx, its employees, agents, suppliers, or any other affiliated parties be liable to you or any third party for any direct, indirect, consequential, special, or punitive damages whatsoever, including without limitation, damages for loss of profits, loss of use, business interruption, or loss of data, even if Flinxx has been advised of the possibility of such damages."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"10. Privacy Policy"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Your use of Flinxx is also governed by our Privacy Policy. Please review our Privacy Policy to understand our practices regarding the collection and use of your personal information."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"11. Termination"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx may terminate or suspend your account and access to the Service at any time, for any reason, without notice. Upon termination, your right to use the Service will immediately cease. You remain liable for all charges incurred through the date of termination."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"12. Modifications to Terms"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx may revise these terms of service for the Service at any time without notice. By using this Service, you are agreeing to be bound by the then current version of these terms of service. If you do not agree to any of these terms, or any revised terms, please stop using the Service."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"13. Governing Law"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"These terms and conditions are governed by and construed in accordance with the laws of the jurisdiction in which Flinxx operates, and you irrevocably submit to the exclusive jurisdiction of the courts in that location."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"14. Contact Information"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"If you have any questions about these Terms & Conditions, please contact us at: support@flinxx.com"})]}),u.jsx("div",{className:"pt-6 border-t border-white/20",children:u.jsx("p",{className:"text-sm text-white/70",children:" 2025 Flinxx. All rights reserved."})})]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsx("button",{onClick:()=>t("/",{replace:!0}),className:"px-8 py-3 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100 transition-all",children:"Back to Home"})})]})})]})},T2=()=>{const t=Kt();return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsx("div",{className:"px-6 py-4 flex justify-start items-center max-w-full",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ca,alt:"Flinxx",className:"w-10 h-10"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]})})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"w-full max-w-3xl",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-8",children:"Privacy Policy"}),u.jsxs("div",{className:"max-h-[70vh] overflow-y-auto pr-4 space-y-6 text-white/90",children:[u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"By accessing or using Flinxx, you agree to this Privacy Policy."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx is a live interaction platform where users and streamers communicate in real time. Due to the nature of live content, complete privacy cannot be guaranteed."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx hosts multiple streamers and users. You understand that any user or streamer may record video, audio, or interactions without your consent and may upload or share such content on external platforms. You are solely responsible for your own privacy and actions. Flinxx provides no guarantee or control over such recordings or uploads."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Your video, audio, messages, and interactions may also be recorded, stored, reviewed, or used by Flinxx for safety, moderation, legal compliance, marketing, promotional, or platform improvement purposes. By continuing, you give your full consent."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx is not responsible or liable for screenshots, screen recordings, re-uploads, misuse, or distribution of content by users or streamers outside the platform. You agree that you use Flinxx at your own risk."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"We do not guarantee the behavior, conduct, or content of any user or streamer. Flinxx shall not be held liable for any loss, damage, harassment, or misuse arising from live interactions."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Basic information such as device data, usage activity, and login details may be collected to operate, secure, and improve the platform."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"If you do not agree with this Privacy Policy, please discontinue use of Flinxx immediately."})}),u.jsx("div",{className:"text-sm text-white/50 italic pt-6 border-t border-white/20",children:u.jsx("p",{children:" 2025 Flinxx. All rights reserved."})})]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsx("button",{onClick:()=>t("/",{replace:!0}),className:"px-8 py-3 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100 transition-all",children:"Back to Home"})})]})})]})},C2=({children:t})=>{const e=Kt(),n=R.useContext(Es),r=n==null?void 0:n.user,i=n==null?void 0:n.isLoading,[s,o]=R.useState(!1),[l,c]=R.useState(null),[h,p]=R.useState(!0);console.log(`
[ProtectedChatRoute]  RENDER CALLED`),console.log("[ProtectedChatRoute]   - isLoading:",h),console.log("[ProtectedChatRoute]   - showProfileSetup:",s),console.log("[ProtectedChatRoute]   - authLoading:",i),console.log("[ProtectedChatRoute]   - authUser:",r?r.email:"null"),R.useEffect(()=>{console.log(`

 [ProtectedChatRoute] `),console.log(" [ProtectedChatRoute] EFFECT RUNNING - PROFILE CHECK"),console.log(" [ProtectedChatRoute] "),console.log(" [ProtectedChatRoute] Effect dependencies changed:"),console.log(" [ProtectedChatRoute]   - authLoading:",i),console.log(" [ProtectedChatRoute]   - authUser:",r?r.email:"null");try{if(i===!0){console.log(" [ProtectedChatRoute]  WAITING - AuthContext is still initializing (isLoading=true)"),p(!0);return}if(i===void 0){console.log(" [ProtectedChatRoute]  WAITING - AuthContext loading state is undefined"),p(!0);return}if(console.log(" [ProtectedChatRoute]  AuthContext finished loading (isLoading=false)"),!r){console.log(" [ProtectedChatRoute]  AuthContext finished loading but NO USER found"),console.log(" [ProtectedChatRoute] Redirecting to /login"),p(!1),e("/login",{replace:!0});return}console.log(" [ProtectedChatRoute]  AuthContext loaded with user:",r.email),console.log(" [ProtectedChatRoute] authUser object:",{id:r.id,email:r.email,profileCompleted:r.profileCompleted,birthday:r.birthday,gender:r.gender}),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted type:",typeof r.profileCompleted),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted value:",r.profileCompleted),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted === true?",r.profileCompleted===!0);const v=localStorage.getItem("user");if(console.log(" [ProtectedChatRoute] Checking localStorage:"),console.log(" [ProtectedChatRoute]   - user key exists:",!!v),v)try{const O=JSON.parse(v);console.log(" [ProtectedChatRoute] localStorage user:",{id:O.id,email:O.email,profileCompleted:O.profileCompleted}),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted type:",typeof O.profileCompleted),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted value:",O.profileCompleted),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted === true?",O.profileCompleted===!0)}catch(O){console.error("[ProtectedChatRoute] Failed to parse localStorage user:",O)}else console.log("[ProtectedChatRoute]  No user in localStorage");c(r),console.log(`
 [ProtectedChatRoute] PROFILE COMPLETION CHECK:`);const C=r==null?void 0:r.profileCompleted;console.log(" [ProtectedChatRoute]   Source 1 (AuthContext):"),console.log(" [ProtectedChatRoute]     authUser.profileCompleted =",C),console.log(" [ProtectedChatRoute]     typeof =",typeof C),console.log(" [ProtectedChatRoute]     === true?",C===!0);let b=null;v?(b=JSON.parse(v).profileCompleted,console.log(" [ProtectedChatRoute]   Source 2 (localStorage):"),console.log(" [ProtectedChatRoute]     localStorage.profileCompleted =",b),console.log(" [ProtectedChatRoute]     typeof =",typeof b),console.log(" [ProtectedChatRoute]     === true?",b===!0)):console.log(" [ProtectedChatRoute]   Source 2 (localStorage): not available");const k=C===!0||b===!0;console.log(`
 [ProtectedChatRoute] FINAL DECISION:`),console.log(" [ProtectedChatRoute]   profileCompletedAuth === true?",C===!0),console.log(" [ProtectedChatRoute]   profileCompletedStorage === true?",b===!0),console.log(" [ProtectedChatRoute]   isProfileComplete (final):",k),k?(console.log(`
 [ProtectedChatRoute]  DECISION: Profile IS completed`),console.log(` [ProtectedChatRoute]  SHOWING Chat page
`)):(console.log(`
 [ProtectedChatRoute]  DECISION: Profile NOT completed`),console.log(` [ProtectedChatRoute]  SHOWING ProfileSetupModal
`),o(!0)),p(!1)}catch(v){console.error("[ProtectedChatRoute]  ERROR in profile check:",v),console.error("[ProtectedChatRoute] Stack:",v.stack),p(!1),e("/login",{replace:!0})}},[e,r,i]);const m=v=>{console.log("Profile completed:",v),o(!1),c(v)};return h?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Loading..."})]})}):u.jsxs(u.Fragment,{children:[s&&l&&u.jsx(op,{user:l,onProfileComplete:m,isOpen:!0}),!s&&t]})};function k2(){return u.jsx(hP,{children:u.jsx(c1,{children:u.jsx("div",{style:{width:"100%",minHeight:"100vh",display:"flex",flexDirection:"column"},children:u.jsxs(s1,{children:[u.jsx(Xt,{path:"/",element:u.jsx(h1,{})}),u.jsx(Xt,{path:"/login",element:u.jsx(y1,{})}),u.jsx(Xt,{path:"/terms",element:u.jsx(Cy,{})}),u.jsx(Xt,{path:"/terms-and-conditions",element:u.jsx(Cy,{})}),u.jsx(Xt,{path:"/privacy-policy",element:u.jsx(T2,{})}),u.jsx(Xt,{path:"/callback",element:u.jsx(I2,{})}),u.jsx(Xt,{path:"/auth-success",element:u.jsx(S2,{})}),u.jsx(Xt,{path:"/chat",element:u.jsx(C2,{children:u.jsx(w2,{})})}),u.jsx(Xt,{path:"/matching",element:u.jsx(_2,{})}),u.jsx(Xt,{path:"/profile",element:u.jsx(x2,{})}),u.jsx(Xt,{path:"*",element:u.jsx(A2,{})})]})})})})}const A2=()=>u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-5xl font-bold text-indigo-400 mb-4",children:"404"}),u.jsx("p",{className:"text-gray-300 mb-8",children:"Page not found"}),u.jsx("a",{href:"/",className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white font-semibold",children:"Go Home"})]})});function b2(){return u.jsx("div",{style:{width:"100%",height:"100vh"},children:u.jsx(k2,{})})}Zu.createRoot(document.getElementById("root")).render(u.jsx(Yo.StrictMode,{children:u.jsx(RS,{clientId:"373922547944-gm8fgpgjebnraruomkpajoa7s3nqups0.apps.googleusercontent.com",onScriptProps:{async:!0,defer:!0,nonce:"YOUR_NONCE_VALUE"},children:u.jsx(dP,{children:u.jsx(b2,{})})})}));
//# sourceMappingURL=index-BR4F3Gdv.js.map
