function eE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function tE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ay={exports:{}},mc={},Ry={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=Symbol.for("react.element"),nE=Symbol.for("react.portal"),rE=Symbol.for("react.fragment"),iE=Symbol.for("react.strict_mode"),sE=Symbol.for("react.profiler"),oE=Symbol.for("react.provider"),aE=Symbol.for("react.context"),lE=Symbol.for("react.forward_ref"),cE=Symbol.for("react.suspense"),uE=Symbol.for("react.memo"),dE=Symbol.for("react.lazy"),qp=Symbol.iterator;function hE(t){return t===null||typeof t!="object"?null:(t=qp&&t[qp]||t["@@iterator"],typeof t=="function"?t:null)}var by={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ny=Object.assign,Py={};function ps(t,e,n){this.props=t,this.context=e,this.refs=Py,this.updater=n||by}ps.prototype.isReactComponent={};ps.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ps.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Oy(){}Oy.prototype=ps.prototype;function Ih(t,e,n){this.props=t,this.context=e,this.refs=Py,this.updater=n||by}var Sh=Ih.prototype=new Oy;Sh.constructor=Ih;Ny(Sh,ps.prototype);Sh.isPureReactComponent=!0;var Kp=Array.isArray,jy=Object.prototype.hasOwnProperty,Th={current:null},Dy={key:!0,ref:!0,__self:!0,__source:!0};function Ly(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)jy.call(e,r)&&!Dy.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Yo,type:t,key:s,ref:o,props:i,_owner:Th.current}}function fE(t,e){return{$$typeof:Yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ch(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yo}function pE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qp=/\/+/g;function fu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pE(""+t.key):e.toString(36)}function tl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yo:case nE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+fu(o,0):r,Kp(i)?(n="",t!=null&&(n=t.replace(Qp,"$&/")+"/"),tl(i,e,n,"",function(h){return h})):i!=null&&(Ch(i)&&(i=fE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Qp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Kp(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+fu(s,l);o+=tl(s,e,n,c,i)}else if(c=hE(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+fu(s,l++),o+=tl(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ba(t,e,n){if(t==null)return t;var r=[],i=0;return tl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function mE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},nl={transition:null},gE={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:nl,ReactCurrentOwner:Th};function My(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:ba,forEach:function(t,e,n){ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ba(t,function(){e++}),e},toArray:function(t){return ba(t,function(e){return e})||[]},only:function(t){if(!Ch(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=ps;se.Fragment=rE;se.Profiler=sE;se.PureComponent=Ih;se.StrictMode=iE;se.Suspense=cE;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gE;se.act=My;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ny({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Th.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)jy.call(e,c)&&!Dy.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Yo,type:t.type,key:i,ref:s,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:aE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oE,_context:t},t.Consumer=t};se.createElement=Ly;se.createFactory=function(t){var e=Ly.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:lE,render:t}};se.isValidElement=Ch;se.lazy=function(t){return{$$typeof:dE,_payload:{_status:-1,_result:t},_init:mE}};se.memo=function(t,e){return{$$typeof:uE,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=nl.transition;nl.transition={};try{t()}finally{nl.transition=e}};se.unstable_act=My;se.useCallback=function(t,e){return At.current.useCallback(t,e)};se.useContext=function(t){return At.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return At.current.useDeferredValue(t)};se.useEffect=function(t,e){return At.current.useEffect(t,e)};se.useId=function(){return At.current.useId()};se.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return At.current.useMemo(t,e)};se.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};se.useRef=function(t){return At.current.useRef(t)};se.useState=function(t){return At.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return At.current.useTransition()};se.version="18.3.1";Ry.exports=se;var N=Ry.exports;const Jo=tE(N),yE=eE({__proto__:null,default:Jo},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE=N,wE=Symbol.for("react.element"),_E=Symbol.for("react.fragment"),xE=Object.prototype.hasOwnProperty,EE=vE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IE={key:!0,ref:!0,__self:!0,__source:!0};function Fy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xE.call(e,r)&&!IE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:wE,type:t,key:s,ref:o,props:i,_owner:EE.current}}mc.Fragment=_E;mc.jsx=Fy;mc.jsxs=Fy;Ay.exports=mc;var u=Ay.exports,nd={},Vy={exports:{}},Kt={},Uy={exports:{}},By={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,J){var ne=W.length;W.push(J);e:for(;0<ne;){var Se=ne-1>>>1,he=W[Se];if(0<i(he,J))W[Se]=J,W[ne]=he,ne=Se;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var J=W[0],ne=W.pop();if(ne!==J){W[0]=ne;e:for(var Se=0,he=W.length,Ae=he>>>1;Se<Ae;){var Nt=2*(Se+1)-1,It=W[Nt],Jt=Nt+1,Xt=W[Jt];if(0>i(It,ne))Jt<he&&0>i(Xt,It)?(W[Se]=Xt,W[Jt]=ne,Se=Jt):(W[Se]=It,W[Nt]=ne,Se=Nt);else if(Jt<he&&0>i(Xt,ne))W[Se]=Xt,W[Jt]=ne,Se=Jt;else break e}}return J}function i(W,J){var ne=W.sortIndex-J.sortIndex;return ne!==0?ne:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,v=3,T=!1,R=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=W)r(h),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(h)}}function j(W){if(k=!1,x(W),!R)if(n(c)!==null)R=!0,un(M);else{var J=n(h);J!==null&&bt(j,J.startTime-W)}}function M(W,J){R=!1,k&&(k=!1,E(g),g=-1),T=!0;var ne=v;try{for(x(J),m=n(c);m!==null&&(!(m.expirationTime>J)||W&&!A());){var Se=m.callback;if(typeof Se=="function"){m.callback=null,v=m.priorityLevel;var he=Se(m.expirationTime<=J);J=t.unstable_now(),typeof he=="function"?m.callback=he:m===n(c)&&r(c),x(J)}else r(c);m=n(c)}if(m!==null)var Ae=!0;else{var Nt=n(h);Nt!==null&&bt(j,Nt.startTime-J),Ae=!1}return Ae}finally{m=null,v=ne,T=!1}}var B=!1,S=null,g=-1,_=5,I=-1;function A(){return!(t.unstable_now()-I<_)}function b(){if(S!==null){var W=t.unstable_now();I=W;var J=!0;try{J=S(!0,W)}finally{J?C():(B=!1,S=null)}}else B=!1}var C;if(typeof w=="function")C=function(){w(b)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Bt=Ie.port2;Ie.port1.onmessage=b,C=function(){Bt.postMessage(null)}}else C=function(){P(b,0)};function un(W){S=W,B||(B=!0,C())}function bt(W,J){g=P(function(){W(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){R||T||(R=!0,un(M))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(W){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var ne=v;v=J;try{return W()}finally{v=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ne=v;v=W;try{return J()}finally{v=ne}},t.unstable_scheduleCallback=function(W,J,ne){var Se=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Se+ne:Se):ne=Se,W){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ne+he,W={id:p++,callback:J,priorityLevel:W,startTime:ne,expirationTime:he,sortIndex:-1},ne>Se?(W.sortIndex=ne,e(h,W),n(c)===null&&W===n(h)&&(k?(E(g),g=-1):k=!0,bt(j,ne-Se))):(W.sortIndex=he,e(c,W),R||T||(R=!0,un(M))),W},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(W){var J=v;return function(){var ne=v;v=J;try{return W.apply(this,arguments)}finally{v=ne}}}})(By);Uy.exports=By;var SE=Uy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE=N,qt=SE;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zy=new Set,wo={};function xi(t,e){ts(t,e),ts(t+"Capture",e)}function ts(t,e){for(wo[t]=e,t=0;t<e.length;t++)zy.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rd=Object.prototype.hasOwnProperty,CE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yp={},Jp={};function kE(t){return rd.call(Jp,t)?!0:rd.call(Yp,t)?!1:CE.test(t)?Jp[t]=!0:(Yp[t]=!0,!1)}function AE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RE(t,e,n,r){if(e===null||typeof e>"u"||AE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var kh=/[\-:]([a-z])/g;function Ah(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kh,Ah);ut[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kh,Ah);ut[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kh,Ah);ut[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rh(t,e,n,r){var i=ut.hasOwnProperty(e)?ut[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RE(e,n,i,r)&&(n=null),r||i===null?kE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=TE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Na=Symbol.for("react.element"),Pi=Symbol.for("react.portal"),Oi=Symbol.for("react.fragment"),bh=Symbol.for("react.strict_mode"),id=Symbol.for("react.profiler"),$y=Symbol.for("react.provider"),Wy=Symbol.for("react.context"),Nh=Symbol.for("react.forward_ref"),sd=Symbol.for("react.suspense"),od=Symbol.for("react.suspense_list"),Ph=Symbol.for("react.memo"),mr=Symbol.for("react.lazy"),Hy=Symbol.for("react.offscreen"),Xp=Symbol.iterator;function Us(t){return t===null||typeof t!="object"?null:(t=Xp&&t[Xp]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,pu;function Js(t){if(pu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pu=e&&e[1]||""}return`
`+pu+t}var mu=!1;function gu(t,e){if(!t||mu)return"";mu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{mu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Js(t):""}function bE(t){switch(t.tag){case 5:return Js(t.type);case 16:return Js("Lazy");case 13:return Js("Suspense");case 19:return Js("SuspenseList");case 0:case 2:case 15:return t=gu(t.type,!1),t;case 11:return t=gu(t.type.render,!1),t;case 1:return t=gu(t.type,!0),t;default:return""}}function ad(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oi:return"Fragment";case Pi:return"Portal";case id:return"Profiler";case bh:return"StrictMode";case sd:return"Suspense";case od:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Wy:return(t.displayName||"Context")+".Consumer";case $y:return(t._context.displayName||"Context")+".Provider";case Nh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ph:return e=t.displayName||null,e!==null?e:ad(t.type)||"Memo";case mr:e=t._payload,t=t._init;try{return ad(t(e))}catch{}}return null}function NE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ad(e);case 8:return e===bh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PE(t){var e=Gy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pa(t){t._valueTracker||(t._valueTracker=PE(t))}function qy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Gy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ld(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ky(t,e){e=e.checked,e!=null&&Rh(t,"checked",e,!1)}function cd(t,e){Ky(t,e);var n=Lr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ud(t,e.type,n):e.hasOwnProperty("defaultValue")&&ud(t,e.type,Lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function em(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ud(t,e,n){(e!=="number"||Tl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xs=Array.isArray;function Wi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(Xs(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lr(n)}}function Qy(t,e){var n=Lr(e.value),r=Lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oa,Jy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _o(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OE=["Webkit","ms","Moz","O"];Object.keys(ro).forEach(function(t){OE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ro[e]=ro[t]})});function Xy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ro.hasOwnProperty(t)&&ro[t]?(""+e).trim():e+"px"}function Zy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Xy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var jE=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fd(t,e){if(e){if(jE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function pd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=null;function Oh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gd=null,Hi=null,Gi=null;function rm(t){if(t=ea(t)){if(typeof gd!="function")throw Error(V(280));var e=t.stateNode;e&&(e=_c(e),gd(t.stateNode,t.type,e))}}function ev(t){Hi?Gi?Gi.push(t):Gi=[t]:Hi=t}function tv(){if(Hi){var t=Hi,e=Gi;if(Gi=Hi=null,rm(t),e)for(t=0;t<e.length;t++)rm(e[t])}}function nv(t,e){return t(e)}function rv(){}var yu=!1;function iv(t,e,n){if(yu)return t(e,n);yu=!0;try{return nv(t,e,n)}finally{yu=!1,(Hi!==null||Gi!==null)&&(rv(),tv())}}function xo(t,e){var n=t.stateNode;if(n===null)return null;var r=_c(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var yd=!1;if(tr)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){yd=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{yd=!1}function DE(t,e,n,r,i,s,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var io=!1,Cl=null,kl=!1,vd=null,LE={onError:function(t){io=!0,Cl=t}};function ME(t,e,n,r,i,s,o,l,c){io=!1,Cl=null,DE.apply(LE,arguments)}function FE(t,e,n,r,i,s,o,l,c){if(ME.apply(this,arguments),io){if(io){var h=Cl;io=!1,Cl=null}else throw Error(V(198));kl||(kl=!0,vd=h)}}function Ei(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function im(t){if(Ei(t)!==t)throw Error(V(188))}function VE(t){var e=t.alternate;if(!e){if(e=Ei(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return im(i),t;if(s===r)return im(i),e;s=s.sibling}throw Error(V(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function ov(t){return t=VE(t),t!==null?av(t):null}function av(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=av(t);if(e!==null)return e;t=t.sibling}return null}var lv=qt.unstable_scheduleCallback,sm=qt.unstable_cancelCallback,UE=qt.unstable_shouldYield,BE=qt.unstable_requestPaint,Ue=qt.unstable_now,zE=qt.unstable_getCurrentPriorityLevel,jh=qt.unstable_ImmediatePriority,cv=qt.unstable_UserBlockingPriority,Al=qt.unstable_NormalPriority,$E=qt.unstable_LowPriority,uv=qt.unstable_IdlePriority,gc=null,Pn=null;function WE(t){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(gc,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:qE,HE=Math.log,GE=Math.LN2;function qE(t){return t>>>=0,t===0?32:31-(HE(t)/GE|0)|0}var ja=64,Da=4194304;function Zs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Zs(l):(s&=o,s!==0&&(r=Zs(s)))}else o=n&~i,o!==0?r=Zs(o):s!==0&&(r=Zs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_n(e),i=1<<n,r|=t[n],e&=~i;return r}function KE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-_n(s),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=KE(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function wd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dv(){var t=ja;return ja<<=1,!(ja&4194240)&&(ja=64),t}function vu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_n(e),t[e]=n}function YE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_n(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Dh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_n(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ge=0;function hv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fv,Lh,pv,mv,gv,_d=!1,La=[],Sr=null,Tr=null,Cr=null,Eo=new Map,Io=new Map,yr=[],JE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function om(t,e){switch(t){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Eo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Io.delete(e.pointerId)}}function zs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ea(e),e!==null&&Lh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function XE(t,e,n,r,i){switch(e){case"focusin":return Sr=zs(Sr,t,e,n,r,i),!0;case"dragenter":return Tr=zs(Tr,t,e,n,r,i),!0;case"mouseover":return Cr=zs(Cr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Eo.set(s,zs(Eo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Io.set(s,zs(Io.get(s)||null,t,e,n,r,i)),!0}return!1}function yv(t){var e=Zr(t.target);if(e!==null){var n=Ei(e);if(n!==null){if(e=n.tag,e===13){if(e=sv(n),e!==null){t.blockedOn=e,gv(t.priority,function(){pv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);md=r,n.target.dispatchEvent(r),md=null}else return e=ea(n),e!==null&&Lh(e),t.blockedOn=n,!1;e.shift()}return!0}function am(t,e,n){rl(t)&&n.delete(e)}function ZE(){_d=!1,Sr!==null&&rl(Sr)&&(Sr=null),Tr!==null&&rl(Tr)&&(Tr=null),Cr!==null&&rl(Cr)&&(Cr=null),Eo.forEach(am),Io.forEach(am)}function $s(t,e){t.blockedOn===e&&(t.blockedOn=null,_d||(_d=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,ZE)))}function So(t){function e(i){return $s(i,t)}if(0<La.length){$s(La[0],t);for(var n=1;n<La.length;n++){var r=La[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Sr!==null&&$s(Sr,t),Tr!==null&&$s(Tr,t),Cr!==null&&$s(Cr,t),Eo.forEach(e),Io.forEach(e),n=0;n<yr.length;n++)r=yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)yv(n),n.blockedOn===null&&yr.shift()}var qi=ar.ReactCurrentBatchConfig,bl=!0;function eI(t,e,n,r){var i=ge,s=qi.transition;qi.transition=null;try{ge=1,Mh(t,e,n,r)}finally{ge=i,qi.transition=s}}function tI(t,e,n,r){var i=ge,s=qi.transition;qi.transition=null;try{ge=4,Mh(t,e,n,r)}finally{ge=i,qi.transition=s}}function Mh(t,e,n,r){if(bl){var i=xd(t,e,n,r);if(i===null)Au(t,e,r,Nl,n),om(t,r);else if(XE(i,t,e,n,r))r.stopPropagation();else if(om(t,r),e&4&&-1<JE.indexOf(t)){for(;i!==null;){var s=ea(i);if(s!==null&&fv(s),s=xd(t,e,n,r),s===null&&Au(t,e,r,Nl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Au(t,e,r,null,n)}}var Nl=null;function xd(t,e,n,r){if(Nl=null,t=Oh(r),t=Zr(t),t!==null)if(e=Ei(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nl=t,null}function vv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zE()){case jh:return 1;case cv:return 4;case Al:case $E:return 16;case uv:return 536870912;default:return 16}default:return 16}}var xr=null,Fh=null,il=null;function wv(){if(il)return il;var t,e=Fh,n=e.length,r,i="value"in xr?xr.value:xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return il=i.slice(t,1<r?1-r:void 0)}function sl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ma(){return!0}function lm(){return!1}function Qt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ma:lm,this.isPropagationStopped=lm,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),e}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vh=Qt(ms),Zo=je({},ms,{view:0,detail:0}),nI=Qt(Zo),wu,_u,Ws,yc=je({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ws&&(Ws&&t.type==="mousemove"?(wu=t.screenX-Ws.screenX,_u=t.screenY-Ws.screenY):_u=wu=0,Ws=t),wu)},movementY:function(t){return"movementY"in t?t.movementY:_u}}),cm=Qt(yc),rI=je({},yc,{dataTransfer:0}),iI=Qt(rI),sI=je({},Zo,{relatedTarget:0}),xu=Qt(sI),oI=je({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),aI=Qt(oI),lI=je({},ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cI=Qt(lI),uI=je({},ms,{data:0}),um=Qt(uI),dI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fI[t])?!!e[t]:!1}function Uh(){return pI}var mI=je({},Zo,{key:function(t){if(t.key){var e=dI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uh,charCode:function(t){return t.type==="keypress"?sl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gI=Qt(mI),yI=je({},yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=Qt(yI),vI=je({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uh}),wI=Qt(vI),_I=je({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),xI=Qt(_I),EI=je({},yc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),II=Qt(EI),SI=[9,13,27,32],Bh=tr&&"CompositionEvent"in window,so=null;tr&&"documentMode"in document&&(so=document.documentMode);var TI=tr&&"TextEvent"in window&&!so,_v=tr&&(!Bh||so&&8<so&&11>=so),hm=" ",fm=!1;function xv(t,e){switch(t){case"keyup":return SI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ev(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function CI(t,e){switch(t){case"compositionend":return Ev(e);case"keypress":return e.which!==32?null:(fm=!0,hm);case"textInput":return t=e.data,t===hm&&fm?null:t;default:return null}}function kI(t,e){if(ji)return t==="compositionend"||!Bh&&xv(t,e)?(t=wv(),il=Fh=xr=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _v&&e.locale!=="ko"?null:e.data;default:return null}}var AI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AI[t.type]:e==="textarea"}function Iv(t,e,n,r){ev(r),e=Pl(e,"onChange"),0<e.length&&(n=new Vh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oo=null,To=null;function RI(t){jv(t,0)}function vc(t){var e=Mi(t);if(qy(e))return t}function bI(t,e){if(t==="change")return e}var Sv=!1;if(tr){var Eu;if(tr){var Iu="oninput"in document;if(!Iu){var mm=document.createElement("div");mm.setAttribute("oninput","return;"),Iu=typeof mm.oninput=="function"}Eu=Iu}else Eu=!1;Sv=Eu&&(!document.documentMode||9<document.documentMode)}function gm(){oo&&(oo.detachEvent("onpropertychange",Tv),To=oo=null)}function Tv(t){if(t.propertyName==="value"&&vc(To)){var e=[];Iv(e,To,t,Oh(t)),iv(RI,e)}}function NI(t,e,n){t==="focusin"?(gm(),oo=e,To=n,oo.attachEvent("onpropertychange",Tv)):t==="focusout"&&gm()}function PI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vc(To)}function OI(t,e){if(t==="click")return vc(e)}function jI(t,e){if(t==="input"||t==="change")return vc(e)}function DI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:DI;function Co(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rd.call(e,i)||!In(t[i],e[i]))return!1}return!0}function ym(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vm(t,e){var n=ym(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ym(n)}}function Cv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kv(){for(var t=window,e=Tl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tl(t.document)}return e}function zh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LI(t){var e=kv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Cv(n.ownerDocument.documentElement,n)){if(r!==null&&zh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=vm(n,s);var o=vm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MI=tr&&"documentMode"in document&&11>=document.documentMode,Di=null,Ed=null,ao=null,Id=!1;function wm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Id||Di==null||Di!==Tl(r)||(r=Di,"selectionStart"in r&&zh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ao&&Co(ao,r)||(ao=r,r=Pl(Ed,"onSelect"),0<r.length&&(e=new Vh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Di)))}function Fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Li={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},Su={},Av={};tr&&(Av=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function wc(t){if(Su[t])return Su[t];if(!Li[t])return t;var e=Li[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Av)return Su[t]=e[n];return t}var Rv=wc("animationend"),bv=wc("animationiteration"),Nv=wc("animationstart"),Pv=wc("transitionend"),Ov=new Map,_m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){Ov.set(t,e),xi(e,[t])}for(var Tu=0;Tu<_m.length;Tu++){var Cu=_m[Tu],FI=Cu.toLowerCase(),VI=Cu[0].toUpperCase()+Cu.slice(1);Br(FI,"on"+VI)}Br(Rv,"onAnimationEnd");Br(bv,"onAnimationIteration");Br(Nv,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(Pv,"onTransitionEnd");ts("onMouseEnter",["mouseout","mouseover"]);ts("onMouseLeave",["mouseout","mouseover"]);ts("onPointerEnter",["pointerout","pointerover"]);ts("onPointerLeave",["pointerout","pointerover"]);xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UI=new Set("cancel close invalid load scroll toggle".split(" ").concat(eo));function xm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FE(r,e,void 0,t),t.currentTarget=null}function jv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;xm(i,l,h),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;xm(i,l,h),s=c}}}if(kl)throw t=vd,kl=!1,vd=null,t}function Ce(t,e){var n=e[Ad];n===void 0&&(n=e[Ad]=new Set);var r=t+"__bubble";n.has(r)||(Dv(e,t,2,!1),n.add(r))}function ku(t,e,n){var r=0;e&&(r|=4),Dv(n,t,r,e)}var Va="_reactListening"+Math.random().toString(36).slice(2);function ko(t){if(!t[Va]){t[Va]=!0,zy.forEach(function(n){n!=="selectionchange"&&(UI.has(n)||ku(n,!1,t),ku(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Va]||(e[Va]=!0,ku("selectionchange",!1,e))}}function Dv(t,e,n,r){switch(vv(e)){case 1:var i=eI;break;case 4:i=tI;break;default:i=Mh}n=i.bind(null,e,n,t),i=void 0,!yd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Au(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Zr(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}iv(function(){var h=s,p=Oh(n),m=[];e:{var v=Ov.get(t);if(v!==void 0){var T=Vh,R=t;switch(t){case"keypress":if(sl(n)===0)break e;case"keydown":case"keyup":T=gI;break;case"focusin":R="focus",T=xu;break;case"focusout":R="blur",T=xu;break;case"beforeblur":case"afterblur":T=xu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=iI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=wI;break;case Rv:case bv:case Nv:T=aI;break;case Pv:T=xI;break;case"scroll":T=nI;break;case"wheel":T=II;break;case"copy":case"cut":case"paste":T=cI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=dm}var k=(e&4)!==0,P=!k&&t==="scroll",E=k?v!==null?v+"Capture":null:v;k=[];for(var w=h,x;w!==null;){x=w;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,E!==null&&(j=xo(w,E),j!=null&&k.push(Ao(w,j,x)))),P)break;w=w.return}0<k.length&&(v=new T(v,R,null,n,p),m.push({event:v,listeners:k}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==md&&(R=n.relatedTarget||n.fromElement)&&(Zr(R)||R[nr]))break e;if((T||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,T?(R=n.relatedTarget||n.toElement,T=h,R=R?Zr(R):null,R!==null&&(P=Ei(R),R!==P||R.tag!==5&&R.tag!==6)&&(R=null)):(T=null,R=h),T!==R)){if(k=cm,j="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(k=dm,j="onPointerLeave",E="onPointerEnter",w="pointer"),P=T==null?v:Mi(T),x=R==null?v:Mi(R),v=new k(j,w+"leave",T,n,p),v.target=P,v.relatedTarget=x,j=null,Zr(p)===h&&(k=new k(E,w+"enter",R,n,p),k.target=x,k.relatedTarget=P,j=k),P=j,T&&R)t:{for(k=T,E=R,w=0,x=k;x;x=bi(x))w++;for(x=0,j=E;j;j=bi(j))x++;for(;0<w-x;)k=bi(k),w--;for(;0<x-w;)E=bi(E),x--;for(;w--;){if(k===E||E!==null&&k===E.alternate)break t;k=bi(k),E=bi(E)}k=null}else k=null;T!==null&&Em(m,v,T,k,!1),R!==null&&P!==null&&Em(m,P,R,k,!0)}}e:{if(v=h?Mi(h):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var M=bI;else if(pm(v))if(Sv)M=jI;else{M=PI;var B=NI}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(M=OI);if(M&&(M=M(t,h))){Iv(m,M,n,p);break e}B&&B(t,v,h),t==="focusout"&&(B=v._wrapperState)&&B.controlled&&v.type==="number"&&ud(v,"number",v.value)}switch(B=h?Mi(h):window,t){case"focusin":(pm(B)||B.contentEditable==="true")&&(Di=B,Ed=h,ao=null);break;case"focusout":ao=Ed=Di=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,wm(m,n,p);break;case"selectionchange":if(MI)break;case"keydown":case"keyup":wm(m,n,p)}var S;if(Bh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else ji?xv(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(_v&&n.locale!=="ko"&&(ji||g!=="onCompositionStart"?g==="onCompositionEnd"&&ji&&(S=wv()):(xr=p,Fh="value"in xr?xr.value:xr.textContent,ji=!0)),B=Pl(h,g),0<B.length&&(g=new um(g,t,null,n,p),m.push({event:g,listeners:B}),S?g.data=S:(S=Ev(n),S!==null&&(g.data=S)))),(S=TI?CI(t,n):kI(t,n))&&(h=Pl(h,"onBeforeInput"),0<h.length&&(p=new um("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=S))}jv(m,e)})}function Ao(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=xo(t,n),s!=null&&r.unshift(Ao(t,s,i)),s=xo(t,e),s!=null&&r.push(Ao(t,s,i))),t=t.return}return r}function bi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Em(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,i?(c=xo(n,s),c!=null&&o.unshift(Ao(n,c,l))):i||(c=xo(n,s),c!=null&&o.push(Ao(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var BI=/\r\n?/g,zI=/\u0000|\uFFFD/g;function Im(t){return(typeof t=="string"?t:""+t).replace(BI,`
`).replace(zI,"")}function Ua(t,e,n){if(e=Im(e),Im(t)!==e&&n)throw Error(V(425))}function Ol(){}var Sd=null,Td=null;function Cd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kd=typeof setTimeout=="function"?setTimeout:void 0,$I=typeof clearTimeout=="function"?clearTimeout:void 0,Sm=typeof Promise=="function"?Promise:void 0,WI=typeof queueMicrotask=="function"?queueMicrotask:typeof Sm<"u"?function(t){return Sm.resolve(null).then(t).catch(HI)}:kd;function HI(t){setTimeout(function(){throw t})}function Ru(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),So(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);So(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gs=Math.random().toString(36).slice(2),bn="__reactFiber$"+gs,Ro="__reactProps$"+gs,nr="__reactContainer$"+gs,Ad="__reactEvents$"+gs,GI="__reactListeners$"+gs,qI="__reactHandles$"+gs;function Zr(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tm(t);t!==null;){if(n=t[bn])return n;t=Tm(t)}return e}t=n,n=t.parentNode}return null}function ea(t){return t=t[bn]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function _c(t){return t[Ro]||null}var Rd=[],Fi=-1;function zr(t){return{current:t}}function ke(t){0>Fi||(t.current=Rd[Fi],Rd[Fi]=null,Fi--)}function xe(t,e){Fi++,Rd[Fi]=t.current,t.current=e}var Mr={},xt=zr(Mr),Dt=zr(!1),ui=Mr;function ns(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(t){return t=t.childContextTypes,t!=null}function jl(){ke(Dt),ke(xt)}function Cm(t,e,n){if(xt.current!==Mr)throw Error(V(168));xe(xt,e),xe(Dt,n)}function Lv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(V(108,NE(t)||"Unknown",i));return je({},n,r)}function Dl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,ui=xt.current,xe(xt,t),xe(Dt,Dt.current),!0}function km(t,e,n){var r=t.stateNode;if(!r)throw Error(V(169));n?(t=Lv(t,e,ui),r.__reactInternalMemoizedMergedChildContext=t,ke(Dt),ke(xt),xe(xt,t)):ke(Dt),xe(Dt,n)}var Wn=null,xc=!1,bu=!1;function Mv(t){Wn===null?Wn=[t]:Wn.push(t)}function KI(t){xc=!0,Mv(t)}function $r(){if(!bu&&Wn!==null){bu=!0;var t=0,e=ge;try{var n=Wn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,xc=!1}catch(i){throw Wn!==null&&(Wn=Wn.slice(t+1)),lv(jh,$r),i}finally{ge=e,bu=!1}}return null}var Vi=[],Ui=0,Ll=null,Ml=0,tn=[],nn=0,di=null,qn=1,Kn="";function Yr(t,e){Vi[Ui++]=Ml,Vi[Ui++]=Ll,Ll=t,Ml=e}function Fv(t,e,n){tn[nn++]=qn,tn[nn++]=Kn,tn[nn++]=di,di=t;var r=qn;t=Kn;var i=32-_n(r)-1;r&=~(1<<i),n+=1;var s=32-_n(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qn=1<<32-_n(e)+i|n<<i|r,Kn=s+t}else qn=1<<s|n<<i|r,Kn=t}function $h(t){t.return!==null&&(Yr(t,1),Fv(t,1,0))}function Wh(t){for(;t===Ll;)Ll=Vi[--Ui],Vi[Ui]=null,Ml=Vi[--Ui],Vi[Ui]=null;for(;t===di;)di=tn[--nn],tn[nn]=null,Kn=tn[--nn],tn[nn]=null,qn=tn[--nn],tn[nn]=null}var Ht=null,Wt=null,be=!1,gn=null;function Vv(t,e){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Am(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,Wt=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=di!==null?{id:qn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,Wt=null,!0):!1;default:return!1}}function bd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nd(t){if(be){var e=Wt;if(e){var n=e;if(!Am(t,e)){if(bd(t))throw Error(V(418));e=kr(n.nextSibling);var r=Ht;e&&Am(t,e)?Vv(r,n):(t.flags=t.flags&-4097|2,be=!1,Ht=t)}}else{if(bd(t))throw Error(V(418));t.flags=t.flags&-4097|2,be=!1,Ht=t}}}function Rm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function Ba(t){if(t!==Ht)return!1;if(!be)return Rm(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cd(t.type,t.memoizedProps)),e&&(e=Wt)){if(bd(t))throw Uv(),Error(V(418));for(;e;)Vv(t,e),e=kr(e.nextSibling)}if(Rm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=Ht?kr(t.stateNode.nextSibling):null;return!0}function Uv(){for(var t=Wt;t;)t=kr(t.nextSibling)}function rs(){Wt=Ht=null,be=!1}function Hh(t){gn===null?gn=[t]:gn.push(t)}var QI=ar.ReactCurrentBatchConfig;function Hs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function za(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bm(t){var e=t._init;return e(t._payload)}function Bv(t){function e(E,w){if(t){var x=E.deletions;x===null?(E.deletions=[w],E.flags|=16):x.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function i(E,w){return E=Nr(E,w),E.index=0,E.sibling=null,E}function s(E,w,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<w?(E.flags|=2,w):x):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,w,x,j){return w===null||w.tag!==6?(w=Mu(x,E.mode,j),w.return=E,w):(w=i(w,x),w.return=E,w)}function c(E,w,x,j){var M=x.type;return M===Oi?p(E,w,x.props.children,j,x.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===mr&&bm(M)===w.type)?(j=i(w,x.props),j.ref=Hs(E,w,x),j.return=E,j):(j=hl(x.type,x.key,x.props,null,E.mode,j),j.ref=Hs(E,w,x),j.return=E,j)}function h(E,w,x,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=Fu(x,E.mode,j),w.return=E,w):(w=i(w,x.children||[]),w.return=E,w)}function p(E,w,x,j,M){return w===null||w.tag!==7?(w=oi(x,E.mode,j,M),w.return=E,w):(w=i(w,x),w.return=E,w)}function m(E,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Mu(""+w,E.mode,x),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Na:return x=hl(w.type,w.key,w.props,null,E.mode,x),x.ref=Hs(E,null,w),x.return=E,x;case Pi:return w=Fu(w,E.mode,x),w.return=E,w;case mr:var j=w._init;return m(E,j(w._payload),x)}if(Xs(w)||Us(w))return w=oi(w,E.mode,x,null),w.return=E,w;za(E,w)}return null}function v(E,w,x,j){var M=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:l(E,w,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Na:return x.key===M?c(E,w,x,j):null;case Pi:return x.key===M?h(E,w,x,j):null;case mr:return M=x._init,v(E,w,M(x._payload),j)}if(Xs(x)||Us(x))return M!==null?null:p(E,w,x,j,null);za(E,x)}return null}function T(E,w,x,j,M){if(typeof j=="string"&&j!==""||typeof j=="number")return E=E.get(x)||null,l(w,E,""+j,M);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Na:return E=E.get(j.key===null?x:j.key)||null,c(w,E,j,M);case Pi:return E=E.get(j.key===null?x:j.key)||null,h(w,E,j,M);case mr:var B=j._init;return T(E,w,x,B(j._payload),M)}if(Xs(j)||Us(j))return E=E.get(x)||null,p(w,E,j,M,null);za(w,j)}return null}function R(E,w,x,j){for(var M=null,B=null,S=w,g=w=0,_=null;S!==null&&g<x.length;g++){S.index>g?(_=S,S=null):_=S.sibling;var I=v(E,S,x[g],j);if(I===null){S===null&&(S=_);break}t&&S&&I.alternate===null&&e(E,S),w=s(I,w,g),B===null?M=I:B.sibling=I,B=I,S=_}if(g===x.length)return n(E,S),be&&Yr(E,g),M;if(S===null){for(;g<x.length;g++)S=m(E,x[g],j),S!==null&&(w=s(S,w,g),B===null?M=S:B.sibling=S,B=S);return be&&Yr(E,g),M}for(S=r(E,S);g<x.length;g++)_=T(S,E,g,x[g],j),_!==null&&(t&&_.alternate!==null&&S.delete(_.key===null?g:_.key),w=s(_,w,g),B===null?M=_:B.sibling=_,B=_);return t&&S.forEach(function(A){return e(E,A)}),be&&Yr(E,g),M}function k(E,w,x,j){var M=Us(x);if(typeof M!="function")throw Error(V(150));if(x=M.call(x),x==null)throw Error(V(151));for(var B=M=null,S=w,g=w=0,_=null,I=x.next();S!==null&&!I.done;g++,I=x.next()){S.index>g?(_=S,S=null):_=S.sibling;var A=v(E,S,I.value,j);if(A===null){S===null&&(S=_);break}t&&S&&A.alternate===null&&e(E,S),w=s(A,w,g),B===null?M=A:B.sibling=A,B=A,S=_}if(I.done)return n(E,S),be&&Yr(E,g),M;if(S===null){for(;!I.done;g++,I=x.next())I=m(E,I.value,j),I!==null&&(w=s(I,w,g),B===null?M=I:B.sibling=I,B=I);return be&&Yr(E,g),M}for(S=r(E,S);!I.done;g++,I=x.next())I=T(S,E,g,I.value,j),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?g:I.key),w=s(I,w,g),B===null?M=I:B.sibling=I,B=I);return t&&S.forEach(function(b){return e(E,b)}),be&&Yr(E,g),M}function P(E,w,x,j){if(typeof x=="object"&&x!==null&&x.type===Oi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Na:e:{for(var M=x.key,B=w;B!==null;){if(B.key===M){if(M=x.type,M===Oi){if(B.tag===7){n(E,B.sibling),w=i(B,x.props.children),w.return=E,E=w;break e}}else if(B.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===mr&&bm(M)===B.type){n(E,B.sibling),w=i(B,x.props),w.ref=Hs(E,B,x),w.return=E,E=w;break e}n(E,B);break}else e(E,B);B=B.sibling}x.type===Oi?(w=oi(x.props.children,E.mode,j,x.key),w.return=E,E=w):(j=hl(x.type,x.key,x.props,null,E.mode,j),j.ref=Hs(E,w,x),j.return=E,E=j)}return o(E);case Pi:e:{for(B=x.key;w!==null;){if(w.key===B)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(E,w.sibling),w=i(w,x.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Fu(x,E.mode,j),w.return=E,E=w}return o(E);case mr:return B=x._init,P(E,w,B(x._payload),j)}if(Xs(x))return R(E,w,x,j);if(Us(x))return k(E,w,x,j);za(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(E,w.sibling),w=i(w,x),w.return=E,E=w):(n(E,w),w=Mu(x,E.mode,j),w.return=E,E=w),o(E)):n(E,w)}return P}var is=Bv(!0),zv=Bv(!1),Fl=zr(null),Vl=null,Bi=null,Gh=null;function qh(){Gh=Bi=Vl=null}function Kh(t){var e=Fl.current;ke(Fl),t._currentValue=e}function Pd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ki(t,e){Vl=t,Gh=Bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(Gh!==t)if(t={context:t,memoizedValue:e,next:null},Bi===null){if(Vl===null)throw Error(V(308));Bi=t,Vl.dependencies={lanes:0,firstContext:t}}else Bi=Bi.next=t;return e}var ei=null;function Qh(t){ei===null?ei=[t]:ei.push(t)}function $v(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Qh(e)):(n.next=i.next,i.next=n),e.interleaved=n,rr(t,r)}function rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gr=!1;function Yh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rr(t,n)}return i=r.interleaved,i===null?(e.next=e,Qh(r)):(e.next=i.next,i.next=e),r.interleaved=e,rr(t,n)}function ol(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dh(t,n)}}function Nm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ul(t,e,n,r){var i=t.updateQueue;gr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;o=0,p=h=c=null,l=s;do{var v=l.lane,T=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,k=l;switch(v=e,T=n,k.tag){case 1:if(R=k.payload,typeof R=="function"){m=R.call(T,m,v);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=k.payload,v=typeof R=="function"?R.call(T,m,v):R,v==null)break e;m=je({},m,v);break e;case 2:gr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else T={eventTime:T,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=T,c=m):p=p.next=T,o|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);fi|=o,t.lanes=o,t.memoizedState=m}}function Pm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(V(191,i));i.call(r)}}}var ta={},On=zr(ta),bo=zr(ta),No=zr(ta);function ti(t){if(t===ta)throw Error(V(174));return t}function Jh(t,e){switch(xe(No,e),xe(bo,t),xe(On,ta),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hd(e,t)}ke(On),xe(On,e)}function ss(){ke(On),ke(bo),ke(No)}function Hv(t){ti(No.current);var e=ti(On.current),n=hd(e,t.type);e!==n&&(xe(bo,t),xe(On,n))}function Xh(t){bo.current===t&&(ke(On),ke(bo))}var Pe=zr(0);function Bl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nu=[];function Zh(){for(var t=0;t<Nu.length;t++)Nu[t]._workInProgressVersionPrimary=null;Nu.length=0}var al=ar.ReactCurrentDispatcher,Pu=ar.ReactCurrentBatchConfig,hi=0,Oe=null,qe=null,Ze=null,zl=!1,lo=!1,Po=0,YI=0;function pt(){throw Error(V(321))}function ef(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!In(t[n],e[n]))return!1;return!0}function tf(t,e,n,r,i,s){if(hi=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,al.current=t===null||t.memoizedState===null?eS:tS,t=n(r,i),lo){s=0;do{if(lo=!1,Po=0,25<=s)throw Error(V(301));s+=1,Ze=qe=null,e.updateQueue=null,al.current=nS,t=n(r,i)}while(lo)}if(al.current=$l,e=qe!==null&&qe.next!==null,hi=0,Ze=qe=Oe=null,zl=!1,e)throw Error(V(300));return t}function nf(){var t=Po!==0;return Po=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Oe.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function cn(){if(qe===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ze===null?Oe.memoizedState:Ze.next;if(e!==null)Ze=e,qe=t;else{if(t===null)throw Error(V(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ze===null?Oe.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Oo(t,e){return typeof e=="function"?e(t):e}function Ou(t){var e=cn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,c=null,h=s;do{var p=h.lane;if((hi&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Oe.lanes|=p,fi|=p}h=h.next}while(h!==null&&h!==s);c===null?o=r:c.next=l,In(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Oe.lanes|=s,fi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ju(t){var e=cn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);In(s,e.memoizedState)||(jt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Gv(){}function qv(t,e){var n=Oe,r=cn(),i=e(),s=!In(r.memoizedState,i);if(s&&(r.memoizedState=i,jt=!0),r=r.queue,rf(Yv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,jo(9,Qv.bind(null,n,r,i,e),void 0,null),tt===null)throw Error(V(349));hi&30||Kv(n,e,i)}return i}function Kv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qv(t,e,n,r){e.value=n,e.getSnapshot=r,Jv(e)&&Xv(t)}function Yv(t,e,n){return n(function(){Jv(e)&&Xv(t)})}function Jv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!In(t,n)}catch{return!0}}function Xv(t){var e=rr(t,1);e!==null&&xn(e,t,1,-1)}function Om(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},e.queue=t,t=t.dispatch=ZI.bind(null,Oe,t),[e.memoizedState,t]}function jo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Zv(){return cn().memoizedState}function ll(t,e,n,r){var i=Rn();Oe.flags|=t,i.memoizedState=jo(1|e,n,void 0,r===void 0?null:r)}function Ec(t,e,n,r){var i=cn();r=r===void 0?null:r;var s=void 0;if(qe!==null){var o=qe.memoizedState;if(s=o.destroy,r!==null&&ef(r,o.deps)){i.memoizedState=jo(e,n,s,r);return}}Oe.flags|=t,i.memoizedState=jo(1|e,n,s,r)}function jm(t,e){return ll(8390656,8,t,e)}function rf(t,e){return Ec(2048,8,t,e)}function e0(t,e){return Ec(4,2,t,e)}function t0(t,e){return Ec(4,4,t,e)}function n0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function r0(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4,4,n0.bind(null,e,t),n)}function sf(){}function i0(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ef(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function s0(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ef(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function o0(t,e,n){return hi&21?(In(n,e)||(n=dv(),Oe.lanes|=n,fi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function JI(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Pu.transition;Pu.transition={};try{t(!1),e()}finally{ge=n,Pu.transition=r}}function a0(){return cn().memoizedState}function XI(t,e,n){var r=br(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},l0(t))c0(e,n);else if(n=$v(t,e,n,r),n!==null){var i=kt();xn(n,t,r,i),u0(n,e,r)}}function ZI(t,e,n){var r=br(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(l0(t))c0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,In(l,o)){var c=e.interleaved;c===null?(i.next=i,Qh(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=$v(t,e,i,r),n!==null&&(i=kt(),xn(n,t,r,i),u0(n,e,r))}}function l0(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function c0(t,e){lo=zl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function u0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dh(t,n)}}var $l={readContext:ln,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},eS={readContext:ln,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:jm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ll(4194308,4,n0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return ll(4,2,t,e)},useMemo:function(t,e){var n=Rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=XI.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:Om,useDebugValue:sf,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=Om(!1),e=t[0];return t=JI.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,i=Rn();if(be){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),tt===null)throw Error(V(349));hi&30||Kv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,jm(Yv.bind(null,r,s,t),[t]),r.flags|=2048,jo(9,Qv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rn(),e=tt.identifierPrefix;if(be){var n=Kn,r=qn;n=(r&~(1<<32-_n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Po++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tS={readContext:ln,useCallback:i0,useContext:ln,useEffect:rf,useImperativeHandle:r0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:s0,useReducer:Ou,useRef:Zv,useState:function(){return Ou(Oo)},useDebugValue:sf,useDeferredValue:function(t){var e=cn();return o0(e,qe.memoizedState,t)},useTransition:function(){var t=Ou(Oo)[0],e=cn().memoizedState;return[t,e]},useMutableSource:Gv,useSyncExternalStore:qv,useId:a0,unstable_isNewReconciler:!1},nS={readContext:ln,useCallback:i0,useContext:ln,useEffect:rf,useImperativeHandle:r0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:s0,useReducer:ju,useRef:Zv,useState:function(){return ju(Oo)},useDebugValue:sf,useDeferredValue:function(t){var e=cn();return qe===null?e.memoizedState=t:o0(e,qe.memoizedState,t)},useTransition:function(){var t=ju(Oo)[0],e=cn().memoizedState;return[t,e]},useMutableSource:Gv,useSyncExternalStore:qv,useId:a0,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Od(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ic={isMounted:function(t){return(t=t._reactInternals)?Ei(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kt(),i=br(t),s=Xn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ar(t,s,i),e!==null&&(xn(e,t,i,r),ol(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kt(),i=br(t),s=Xn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ar(t,s,i),e!==null&&(xn(e,t,i,r),ol(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),r=br(t),i=Xn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ar(t,i,r),e!==null&&(xn(e,t,r,n),ol(e,t,r))}};function Dm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Co(n,r)||!Co(i,s):!0}function d0(t,e,n){var r=!1,i=Mr,s=e.contextType;return typeof s=="object"&&s!==null?s=ln(s):(i=Lt(e)?ui:xt.current,r=e.contextTypes,s=(r=r!=null)?ns(t,i):Mr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ic,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Lm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ic.enqueueReplaceState(e,e.state,null)}function jd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Yh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ln(s):(s=Lt(e)?ui:xt.current,i.context=ns(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Od(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ic.enqueueReplaceState(i,i.state,null),Ul(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function os(t,e){try{var n="",r=e;do n+=bE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Du(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rS=typeof WeakMap=="function"?WeakMap:Map;function h0(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,Hd=r),Dd(t,e)},n}function f0(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Dd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Dd(t,e),typeof r!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Mm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=yS.bind(null,t,e,n),e.then(t,t))}function Fm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var iS=ar.ReactCurrentOwner,jt=!1;function Ct(t,e,n,r){e.child=t===null?zv(e,null,n,r):is(e,t.child,n,r)}function Um(t,e,n,r,i){n=n.render;var s=e.ref;return Ki(e,i),r=tf(t,e,n,r,s,i),n=nf(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(be&&n&&$h(e),e.flags|=1,Ct(t,e,r,i),e.child)}function Bm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ff(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,p0(t,e,s,r,i)):(t=hl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Co,n(o,r)&&t.ref===e.ref)return ir(t,e,i)}return e.flags|=1,t=Nr(s,r),t.ref=e.ref,t.return=e,e.child=t}function p0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Co(s,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,ir(t,e,i)}return Ld(t,e,n,r,i)}function m0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe($i,$t),$t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe($i,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xe($i,$t),$t|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,xe($i,$t),$t|=r;return Ct(t,e,i,n),e.child}function g0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ld(t,e,n,r,i){var s=Lt(n)?ui:xt.current;return s=ns(e,s),Ki(e,i),n=tf(t,e,n,r,s,i),r=nf(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(be&&r&&$h(e),e.flags|=1,Ct(t,e,n,i),e.child)}function zm(t,e,n,r,i){if(Lt(n)){var s=!0;Dl(e)}else s=!1;if(Ki(e,i),e.stateNode===null)cl(t,e),d0(e,n,r),jd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=ln(h):(h=Lt(n)?ui:xt.current,h=ns(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&Lm(e,o,r,h),gr=!1;var v=e.memoizedState;o.state=v,Ul(e,r,o,i),c=e.memoizedState,l!==r||v!==c||Dt.current||gr?(typeof p=="function"&&(Od(e,n,p,r),c=e.memoizedState),(l=gr||Dm(e,n,l,r,v,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Wv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:fn(e.type,l),o.props=h,m=e.pendingProps,v=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ln(c):(c=Lt(n)?ui:xt.current,c=ns(e,c));var T=n.getDerivedStateFromProps;(p=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||v!==c)&&Lm(e,o,r,c),gr=!1,v=e.memoizedState,o.state=v,Ul(e,r,o,i);var R=e.memoizedState;l!==m||v!==R||Dt.current||gr?(typeof T=="function"&&(Od(e,n,T,r),R=e.memoizedState),(h=gr||Dm(e,n,h,r,v,R,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Md(t,e,n,r,s,i)}function Md(t,e,n,r,i,s){g0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&km(e,n,!1),ir(t,e,s);r=e.stateNode,iS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=is(e,t.child,null,s),e.child=is(e,null,l,s)):Ct(t,e,l,s),e.memoizedState=r.state,i&&km(e,n,!0),e.child}function y0(t){var e=t.stateNode;e.pendingContext?Cm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cm(t,e.context,!1),Jh(t,e.containerInfo)}function $m(t,e,n,r,i){return rs(),Hh(i),e.flags|=256,Ct(t,e,n,r),e.child}var Fd={dehydrated:null,treeContext:null,retryLane:0};function Vd(t){return{baseLanes:t,cachePool:null,transitions:null}}function v0(t,e,n){var r=e.pendingProps,i=Pe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xe(Pe,i&1),t===null)return Nd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Cc(o,r,0,null),t=oi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Vd(n),e.memoizedState=Fd,t):of(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return sS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Nr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Nr(l,s):(s=oi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Vd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Fd,r}return s=t.child,t=s.sibling,r=Nr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function of(t,e){return e=Cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $a(t,e,n,r){return r!==null&&Hh(r),is(e,t.child,null,n),t=of(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Du(Error(V(422))),$a(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Cc({mode:"visible",children:r.children},i,0,null),s=oi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&is(e,t.child,null,o),e.child.memoizedState=Vd(o),e.memoizedState=Fd,s);if(!(e.mode&1))return $a(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(V(419)),r=Du(s,r,void 0),$a(t,e,o,r)}if(l=(o&t.childLanes)!==0,jt||l){if(r=tt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rr(t,i),xn(r,t,i,-1))}return hf(),r=Du(Error(V(421))),$a(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Wt=kr(i.nextSibling),Ht=e,be=!0,gn=null,t!==null&&(tn[nn++]=qn,tn[nn++]=Kn,tn[nn++]=di,qn=t.id,Kn=t.overflow,di=e),e=of(e,r.children),e.flags|=4096,e)}function Wm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pd(t.return,e,n)}function Lu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function w0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ct(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wm(t,n,e);else if(t.tag===19)Wm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Lu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Lu(e,!0,n,null,s);break;case"together":Lu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oS(t,e,n){switch(e.tag){case 3:y0(e),rs();break;case 5:Hv(e);break;case 1:Lt(e.type)&&Dl(e);break;case 4:Jh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xe(Fl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?v0(t,e,n):(xe(Pe,Pe.current&1),t=ir(t,e,n),t!==null?t.sibling:null);xe(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return w0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,m0(t,e,n)}return ir(t,e,n)}var _0,Ud,x0,E0;_0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ud=function(){};x0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ti(On.current);var s=null;switch(n){case"input":i=ld(t,i),r=ld(t,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=dd(t,i),r=dd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ol)}fd(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(wo.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(wo.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ce("scroll",t),s||l===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};E0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gs(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aS(t,e,n){var r=e.pendingProps;switch(Wh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Lt(e.type)&&jl(),mt(e),null;case 3:return r=e.stateNode,ss(),ke(Dt),ke(xt),Zh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ba(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(Kd(gn),gn=null))),Ud(t,e),mt(e),null;case 5:Xh(e);var i=ti(No.current);if(n=e.type,t!==null&&e.stateNode!=null)x0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(V(166));return mt(e),null}if(t=ti(On.current),Ba(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[bn]=e,r[Ro]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<eo.length;i++)Ce(eo[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Zp(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":tm(r,s),Ce("invalid",r)}fd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ua(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ua(r.textContent,l,t),i=["children",""+l]):wo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Pa(r),em(r,s,!0);break;case"textarea":Pa(r),nm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ol)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bn]=e,t[Ro]=r,_0(t,e,!1,!1),e.stateNode=t;e:{switch(o=pd(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<eo.length;i++)Ce(eo[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":Zp(t,r),i=ld(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":tm(t,r),i=dd(t,r),Ce("invalid",t);break;default:i=r}fd(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Zy(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Jy(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_o(t,c):typeof c=="number"&&_o(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wo.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ce("scroll",t):c!=null&&Rh(t,s,c,o))}switch(n){case"input":Pa(t),em(t,r,!1);break;case"textarea":Pa(t),nm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Wi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)E0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(V(166));if(n=ti(No.current),ti(On.current),Ba(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(s=r.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:Ua(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ua(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return mt(e),null;case 13:if(ke(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Wt!==null&&e.mode&1&&!(e.flags&128))Uv(),rs(),e.flags|=98560,s=!1;else if(s=Ba(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(V(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[bn]=e}else rs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),s=!1}else gn!==null&&(Kd(gn),gn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ke===0&&(Ke=3):hf())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return ss(),Ud(t,e),t===null&&ko(e.stateNode.containerInfo),mt(e),null;case 10:return Kh(e.type._context),mt(e),null;case 17:return Lt(e.type)&&jl(),mt(e),null;case 19:if(ke(Pe),s=e.memoizedState,s===null)return mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Gs(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bl(t),o!==null){for(e.flags|=128,Gs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Pe,Pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ue()>as&&(e.flags|=128,r=!0,Gs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Bl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!be)return mt(e),null}else 2*Ue()-s.renderingStartTime>as&&n!==1073741824&&(e.flags|=128,r=!0,Gs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ue(),e.sibling=null,n=Pe.current,xe(Pe,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return df(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function lS(t,e){switch(Wh(e),e.tag){case 1:return Lt(e.type)&&jl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ss(),ke(Dt),ke(xt),Zh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xh(e),null;case 13:if(ke(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));rs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Pe),null;case 4:return ss(),null;case 10:return Kh(e.type._context),null;case 22:case 23:return df(),null;case 24:return null;default:return null}}var Wa=!1,vt=!1,cS=typeof WeakSet=="function"?WeakSet:Set,q=null;function zi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function Bd(t,e,n){try{n()}catch(r){Me(t,e,r)}}var Hm=!1;function uS(t,e){if(Sd=bl,t=kv(),zh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,v=null;t:for(;;){for(var T;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(T=m.firstChild)!==null;)v=m,m=T;for(;;){if(m===t)break t;if(v===n&&++h===i&&(l=o),v===s&&++p===r&&(c=o),(T=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=T}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Td={focusedElem:t,selectionRange:n},bl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var k=R.memoizedProps,P=R.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?k:fn(e.type,k),P);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(j){Me(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return R=Hm,Hm=!1,R}function co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Bd(e,n,s)}i=i.next}while(i!==r)}}function Sc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function I0(t){var e=t.alternate;e!==null&&(t.alternate=null,I0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[Ro],delete e[Ad],delete e[GI],delete e[qI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S0(t){return t.tag===5||t.tag===3||t.tag===4}function Gm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $d(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ol));else if(r!==4&&(t=t.child,t!==null))for($d(t,e,n),t=t.sibling;t!==null;)$d(t,e,n),t=t.sibling}function Wd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wd(t,e,n),t=t.sibling;t!==null;)Wd(t,e,n),t=t.sibling}var st=null,pn=!1;function fr(t,e,n){for(n=n.child;n!==null;)T0(t,e,n),n=n.sibling}function T0(t,e,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(gc,n)}catch{}switch(n.tag){case 5:vt||zi(n,e);case 6:var r=st,i=pn;st=null,fr(t,e,n),st=r,pn=i,st!==null&&(pn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(pn?(t=st,n=n.stateNode,t.nodeType===8?Ru(t.parentNode,n):t.nodeType===1&&Ru(t,n),So(t)):Ru(st,n.stateNode));break;case 4:r=st,i=pn,st=n.stateNode.containerInfo,pn=!0,fr(t,e,n),st=r,pn=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Bd(n,e,o),i=i.next}while(i!==r)}fr(t,e,n);break;case 1:if(!vt&&(zi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Me(n,e,l)}fr(t,e,n);break;case 21:fr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,fr(t,e,n),vt=r):fr(t,e,n);break;default:fr(t,e,n)}}function qm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cS),e.forEach(function(r){var i=wS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,pn=!1;break e;case 3:st=l.stateNode.containerInfo,pn=!0;break e;case 4:st=l.stateNode.containerInfo,pn=!0;break e}l=l.return}if(st===null)throw Error(V(160));T0(s,o,i),st=null,pn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Me(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)C0(e,t),e=e.sibling}function C0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),An(t),r&4){try{co(3,t,t.return),Sc(3,t)}catch(k){Me(t,t.return,k)}try{co(5,t,t.return)}catch(k){Me(t,t.return,k)}}break;case 1:hn(e,t),An(t),r&512&&n!==null&&zi(n,n.return);break;case 5:if(hn(e,t),An(t),r&512&&n!==null&&zi(n,n.return),t.flags&32){var i=t.stateNode;try{_o(i,"")}catch(k){Me(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ky(i,s),pd(l,o);var h=pd(l,s);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?Zy(i,m):p==="dangerouslySetInnerHTML"?Jy(i,m):p==="children"?_o(i,m):Rh(i,p,m,h)}switch(l){case"input":cd(i,s);break;case"textarea":Qy(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?Wi(i,!!s.multiple,T,!1):v!==!!s.multiple&&(s.defaultValue!=null?Wi(i,!!s.multiple,s.defaultValue,!0):Wi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ro]=s}catch(k){Me(t,t.return,k)}}break;case 6:if(hn(e,t),An(t),r&4){if(t.stateNode===null)throw Error(V(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){Me(t,t.return,k)}}break;case 3:if(hn(e,t),An(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{So(e.containerInfo)}catch(k){Me(t,t.return,k)}break;case 4:hn(e,t),An(t);break;case 13:hn(e,t),An(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(cf=Ue())),r&4&&qm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(h=vt)||p,hn(e,t),vt=h):hn(e,t),An(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(q=t,p=t.child;p!==null;){for(m=q=p;q!==null;){switch(v=q,T=v.child,v.tag){case 0:case 11:case 14:case 15:co(4,v,v.return);break;case 1:zi(v,v.return);var R=v.stateNode;if(typeof R.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(k){Me(r,n,k)}}break;case 5:zi(v,v.return);break;case 22:if(v.memoizedState!==null){Qm(m);continue}}T!==null?(T.return=v,q=T):Qm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Xy("display",o))}catch(k){Me(t,t.return,k)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(k){Me(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:hn(e,t),An(t),r&4&&qm(t);break;case 21:break;default:hn(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(S0(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_o(i,""),r.flags&=-33);var s=Gm(t);Wd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Gm(t);$d(t,l,o);break;default:throw Error(V(161))}}catch(c){Me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dS(t,e,n){q=t,k0(t)}function k0(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Wa;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||vt;l=Wa;var h=vt;if(Wa=o,(vt=c)&&!h)for(q=i;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?Ym(i):c!==null?(c.return=o,q=c):Ym(i);for(;s!==null;)q=s,k0(s),s=s.sibling;q=i,Wa=l,vt=h}Km(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Km(t)}}function Km(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Sc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Pm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&So(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}vt||e.flags&512&&zd(e)}catch(v){Me(e,e.return,v)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Qm(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Ym(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sc(4,e)}catch(c){Me(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Me(e,i,c)}}var s=e.return;try{zd(e)}catch(c){Me(e,s,c)}break;case 5:var o=e.return;try{zd(e)}catch(c){Me(e,o,c)}}}catch(c){Me(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var hS=Math.ceil,Wl=ar.ReactCurrentDispatcher,af=ar.ReactCurrentOwner,on=ar.ReactCurrentBatchConfig,ue=0,tt=null,We=null,ct=0,$t=0,$i=zr(0),Ke=0,Do=null,fi=0,Tc=0,lf=0,uo=null,Ot=null,cf=0,as=1/0,$n=null,Hl=!1,Hd=null,Rr=null,Ha=!1,Er=null,Gl=0,ho=0,Gd=null,ul=-1,dl=0;function kt(){return ue&6?Ue():ul!==-1?ul:ul=Ue()}function br(t){return t.mode&1?ue&2&&ct!==0?ct&-ct:QI.transition!==null?(dl===0&&(dl=dv()),dl):(t=ge,t!==0||(t=window.event,t=t===void 0?16:vv(t.type)),t):1}function xn(t,e,n,r){if(50<ho)throw ho=0,Gd=null,Error(V(185));Xo(t,n,r),(!(ue&2)||t!==tt)&&(t===tt&&(!(ue&2)&&(Tc|=n),Ke===4&&vr(t,ct)),Mt(t,r),n===1&&ue===0&&!(e.mode&1)&&(as=Ue()+500,xc&&$r()))}function Mt(t,e){var n=t.callbackNode;QE(t,e);var r=Rl(t,t===tt?ct:0);if(r===0)n!==null&&sm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sm(n),e===1)t.tag===0?KI(Jm.bind(null,t)):Mv(Jm.bind(null,t)),WI(function(){!(ue&6)&&$r()}),n=null;else{switch(hv(r)){case 1:n=jh;break;case 4:n=cv;break;case 16:n=Al;break;case 536870912:n=uv;break;default:n=Al}n=D0(n,A0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function A0(t,e){if(ul=-1,dl=0,ue&6)throw Error(V(327));var n=t.callbackNode;if(Qi()&&t.callbackNode!==n)return null;var r=Rl(t,t===tt?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ql(t,r);else{e=r;var i=ue;ue|=2;var s=b0();(tt!==t||ct!==e)&&($n=null,as=Ue()+500,si(t,e));do try{mS();break}catch(l){R0(t,l)}while(!0);qh(),Wl.current=s,ue=i,We!==null?e=0:(tt=null,ct=0,e=Ke)}if(e!==0){if(e===2&&(i=wd(t),i!==0&&(r=i,e=qd(t,i))),e===1)throw n=Do,si(t,0),vr(t,r),Mt(t,Ue()),n;if(e===6)vr(t,r);else{if(i=t.current.alternate,!(r&30)&&!fS(i)&&(e=ql(t,r),e===2&&(s=wd(t),s!==0&&(r=s,e=qd(t,s))),e===1))throw n=Do,si(t,0),vr(t,r),Mt(t,Ue()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(V(345));case 2:Jr(t,Ot,$n);break;case 3:if(vr(t,r),(r&130023424)===r&&(e=cf+500-Ue(),10<e)){if(Rl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=kd(Jr.bind(null,t,Ot,$n),e);break}Jr(t,Ot,$n);break;case 4:if(vr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-_n(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hS(r/1960))-r,10<r){t.timeoutHandle=kd(Jr.bind(null,t,Ot,$n),r);break}Jr(t,Ot,$n);break;case 5:Jr(t,Ot,$n);break;default:throw Error(V(329))}}}return Mt(t,Ue()),t.callbackNode===n?A0.bind(null,t):null}function qd(t,e){var n=uo;return t.current.memoizedState.isDehydrated&&(si(t,e).flags|=256),t=ql(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&Kd(e)),t}function Kd(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function fS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!In(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vr(t,e){for(e&=~lf,e&=~Tc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_n(e),r=1<<n;t[n]=-1,e&=~r}}function Jm(t){if(ue&6)throw Error(V(327));Qi();var e=Rl(t,0);if(!(e&1))return Mt(t,Ue()),null;var n=ql(t,e);if(t.tag!==0&&n===2){var r=wd(t);r!==0&&(e=r,n=qd(t,r))}if(n===1)throw n=Do,si(t,0),vr(t,e),Mt(t,Ue()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jr(t,Ot,$n),Mt(t,Ue()),null}function uf(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(as=Ue()+500,xc&&$r())}}function pi(t){Er!==null&&Er.tag===0&&!(ue&6)&&Qi();var e=ue;ue|=1;var n=on.transition,r=ge;try{if(on.transition=null,ge=1,t)return t()}finally{ge=r,on.transition=n,ue=e,!(ue&6)&&$r()}}function df(){$t=$i.current,ke($i)}function si(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$I(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Wh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&jl();break;case 3:ss(),ke(Dt),ke(xt),Zh();break;case 5:Xh(r);break;case 4:ss();break;case 13:ke(Pe);break;case 19:ke(Pe);break;case 10:Kh(r.type._context);break;case 22:case 23:df()}n=n.return}if(tt=t,We=t=Nr(t.current,null),ct=$t=e,Ke=0,Do=null,lf=Tc=fi=0,Ot=uo=null,ei!==null){for(e=0;e<ei.length;e++)if(n=ei[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ei=null}return t}function R0(t,e){do{var n=We;try{if(qh(),al.current=$l,zl){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zl=!1}if(hi=0,Ze=qe=Oe=null,lo=!1,Po=0,af.current=null,n===null||n.return===null){Ke=1,Do=e,We=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=Fm(o);if(T!==null){T.flags&=-257,Vm(T,o,l,s,e),T.mode&1&&Mm(s,h,e),e=T,c=h;var R=e.updateQueue;if(R===null){var k=new Set;k.add(c),e.updateQueue=k}else R.add(c);break e}else{if(!(e&1)){Mm(s,h,e),hf();break e}c=Error(V(426))}}else if(be&&l.mode&1){var P=Fm(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Vm(P,o,l,s,e),Hh(os(c,l));break e}}s=c=os(c,l),Ke!==4&&(Ke=2),uo===null?uo=[s]:uo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=h0(s,c,e);Nm(s,E);break e;case 1:l=c;var w=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Rr===null||!Rr.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=f0(s,l,e);Nm(s,j);break e}}s=s.return}while(s!==null)}P0(n)}catch(M){e=M,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function b0(){var t=Wl.current;return Wl.current=$l,t===null?$l:t}function hf(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),tt===null||!(fi&268435455)&&!(Tc&268435455)||vr(tt,ct)}function ql(t,e){var n=ue;ue|=2;var r=b0();(tt!==t||ct!==e)&&($n=null,si(t,e));do try{pS();break}catch(i){R0(t,i)}while(!0);if(qh(),ue=n,Wl.current=r,We!==null)throw Error(V(261));return tt=null,ct=0,Ke}function pS(){for(;We!==null;)N0(We)}function mS(){for(;We!==null&&!UE();)N0(We)}function N0(t){var e=j0(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?P0(t):We=e,af.current=null}function P0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lS(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,We=null;return}}else if(n=aS(n,e,$t),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ke===0&&(Ke=5)}function Jr(t,e,n){var r=ge,i=on.transition;try{on.transition=null,ge=1,gS(t,e,n,r)}finally{on.transition=i,ge=r}return null}function gS(t,e,n,r){do Qi();while(Er!==null);if(ue&6)throw Error(V(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(YE(t,s),t===tt&&(We=tt=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ha||(Ha=!0,D0(Al,function(){return Qi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=on.transition,on.transition=null;var o=ge;ge=1;var l=ue;ue|=4,af.current=null,uS(t,n),C0(n,t),LI(Td),bl=!!Sd,Td=Sd=null,t.current=n,dS(n),BE(),ue=l,ge=o,on.transition=s}else t.current=n;if(Ha&&(Ha=!1,Er=t,Gl=i),s=t.pendingLanes,s===0&&(Rr=null),WE(n.stateNode),Mt(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,t=Hd,Hd=null,t;return Gl&1&&t.tag!==0&&Qi(),s=t.pendingLanes,s&1?t===Gd?ho++:(ho=0,Gd=t):ho=0,$r(),null}function Qi(){if(Er!==null){var t=hv(Gl),e=on.transition,n=ge;try{if(on.transition=null,ge=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,Gl=0,ue&6)throw Error(V(331));var i=ue;for(ue|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(q=h;q!==null;){var p=q;switch(p.tag){case 0:case 11:case 15:co(8,p,s)}var m=p.child;if(m!==null)m.return=p,q=m;else for(;q!==null;){p=q;var v=p.sibling,T=p.return;if(I0(p),p===h){q=null;break}if(v!==null){v.return=T,q=v;break}q=T}}}var R=s.alternate;if(R!==null){var k=R.child;if(k!==null){R.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:co(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,q=E;break e}q=s.return}}var w=t.current;for(q=w;q!==null;){o=q;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,q=x;else e:for(o=w;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Sc(9,l)}}catch(M){Me(l,l.return,M)}if(l===o){q=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,q=j;break e}q=l.return}}if(ue=i,$r(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(gc,t)}catch{}r=!0}return r}finally{ge=n,on.transition=e}}return!1}function Xm(t,e,n){e=os(n,e),e=h0(t,e,1),t=Ar(t,e,1),e=kt(),t!==null&&(Xo(t,1,e),Mt(t,e))}function Me(t,e,n){if(t.tag===3)Xm(t,t,n);else for(;e!==null;){if(e.tag===3){Xm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rr===null||!Rr.has(r))){t=os(n,t),t=f0(e,t,1),e=Ar(e,t,1),t=kt(),e!==null&&(Xo(e,1,t),Mt(e,t));break}}e=e.return}}function yS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(ct&n)===n&&(Ke===4||Ke===3&&(ct&130023424)===ct&&500>Ue()-cf?si(t,0):lf|=n),Mt(t,e)}function O0(t,e){e===0&&(t.mode&1?(e=Da,Da<<=1,!(Da&130023424)&&(Da=4194304)):e=1);var n=kt();t=rr(t,e),t!==null&&(Xo(t,e,n),Mt(t,n))}function vS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),O0(t,n)}function wS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(e),O0(t,n)}var j0;j0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,oS(t,e,n);jt=!!(t.flags&131072)}else jt=!1,be&&e.flags&1048576&&Fv(e,Ml,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cl(t,e),t=e.pendingProps;var i=ns(e,xt.current);Ki(e,n),i=tf(null,e,r,t,i,n);var s=nf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(s=!0,Dl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yh(e),i.updater=Ic,e.stateNode=i,i._reactInternals=e,jd(e,r,t,n),e=Md(null,e,r,!0,s,n)):(e.tag=0,be&&s&&$h(e),Ct(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=xS(r),t=fn(r,t),i){case 0:e=Ld(null,e,r,t,n);break e;case 1:e=zm(null,e,r,t,n);break e;case 11:e=Um(null,e,r,t,n);break e;case 14:e=Bm(null,e,r,fn(r.type,t),n);break e}throw Error(V(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),Ld(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),zm(t,e,r,i,n);case 3:e:{if(y0(e),t===null)throw Error(V(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Wv(t,e),Ul(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=os(Error(V(423)),e),e=$m(t,e,r,n,i);break e}else if(r!==i){i=os(Error(V(424)),e),e=$m(t,e,r,n,i);break e}else for(Wt=kr(e.stateNode.containerInfo.firstChild),Ht=e,be=!0,gn=null,n=zv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rs(),r===i){e=ir(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return Hv(e),t===null&&Nd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Cd(r,i)?o=null:s!==null&&Cd(r,s)&&(e.flags|=32),g0(t,e),Ct(t,e,o,n),e.child;case 6:return t===null&&Nd(e),null;case 13:return v0(t,e,n);case 4:return Jh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=is(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),Um(t,e,r,i,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xe(Fl,r._currentValue),r._currentValue=o,s!==null)if(In(s.value,o)){if(s.children===i.children&&!Dt.current){e=ir(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Xn(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Pd(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(V(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Pd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ct(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ki(e,n),i=ln(i),r=r(i),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,i=fn(r,e.pendingProps),i=fn(r.type,i),Bm(t,e,r,i,n);case 15:return p0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),cl(t,e),e.tag=1,Lt(r)?(t=!0,Dl(e)):t=!1,Ki(e,n),d0(e,r,i),jd(e,r,i,n),Md(null,e,r,!0,t,n);case 19:return w0(t,e,n);case 22:return m0(t,e,n)}throw Error(V(156,e.tag))};function D0(t,e){return lv(t,e)}function _S(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,r){return new _S(t,e,n,r)}function ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xS(t){if(typeof t=="function")return ff(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nh)return 11;if(t===Ph)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ff(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oi:return oi(n.children,i,s,e);case bh:o=8,i|=8;break;case id:return t=sn(12,n,e,i|2),t.elementType=id,t.lanes=s,t;case sd:return t=sn(13,n,e,i),t.elementType=sd,t.lanes=s,t;case od:return t=sn(19,n,e,i),t.elementType=od,t.lanes=s,t;case Hy:return Cc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $y:o=10;break e;case Wy:o=9;break e;case Nh:o=11;break e;case Ph:o=14;break e;case mr:o=16,r=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=sn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function oi(t,e,n,r){return t=sn(7,t,r,e),t.lanes=n,t}function Cc(t,e,n,r){return t=sn(22,t,r,e),t.elementType=Hy,t.lanes=n,t.stateNode={isHidden:!1},t}function Mu(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function Fu(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ES(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vu(0),this.expirationTimes=vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pf(t,e,n,r,i,s,o,l,c){return t=new ES(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=sn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yh(s),t}function IS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function L0(t){if(!t)return Mr;t=t._reactInternals;e:{if(Ei(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(Lt(n))return Lv(t,n,e)}return e}function M0(t,e,n,r,i,s,o,l,c){return t=pf(n,r,!0,t,i,s,o,l,c),t.context=L0(null),n=t.current,r=kt(),i=br(n),s=Xn(r,i),s.callback=e??null,Ar(n,s,i),t.current.lanes=i,Xo(t,i,r),Mt(t,r),t}function kc(t,e,n,r){var i=e.current,s=kt(),o=br(i);return n=L0(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ar(i,e,o),t!==null&&(xn(t,i,o,s),ol(t,i,o)),o}function Kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mf(t,e){Zm(t,e),(t=t.alternate)&&Zm(t,e)}function SS(){return null}var F0=typeof reportError=="function"?reportError:function(t){console.error(t)};function gf(t){this._internalRoot=t}Ac.prototype.render=gf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));kc(t,e,null,null)};Ac.prototype.unmount=gf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pi(function(){kc(null,t,null,null)}),e[nr]=null}};function Ac(t){this._internalRoot=t}Ac.prototype.unstable_scheduleHydration=function(t){if(t){var e=mv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yr.length&&e!==0&&e<yr[n].priority;n++);yr.splice(n,0,t),n===0&&yv(t)}};function yf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eg(){}function TS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Kl(o);s.call(h)}}var o=M0(e,r,t,0,null,!1,!1,"",eg);return t._reactRootContainer=o,t[nr]=o.current,ko(t.nodeType===8?t.parentNode:t),pi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Kl(c);l.call(h)}}var c=pf(t,0,!1,null,null,!1,!1,"",eg);return t._reactRootContainer=c,t[nr]=c.current,ko(t.nodeType===8?t.parentNode:t),pi(function(){kc(e,c,n,r)}),c}function bc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=Kl(o);l.call(c)}}kc(e,o,t,i)}else o=TS(n,e,t,i,r);return Kl(o)}fv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zs(e.pendingLanes);n!==0&&(Dh(e,n|1),Mt(e,Ue()),!(ue&6)&&(as=Ue()+500,$r()))}break;case 13:pi(function(){var r=rr(t,1);if(r!==null){var i=kt();xn(r,t,1,i)}}),mf(t,1)}};Lh=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var n=kt();xn(e,t,134217728,n)}mf(t,134217728)}};pv=function(t){if(t.tag===13){var e=br(t),n=rr(t,e);if(n!==null){var r=kt();xn(n,t,e,r)}mf(t,e)}};mv=function(){return ge};gv=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};gd=function(t,e,n){switch(e){case"input":if(cd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_c(r);if(!i)throw Error(V(90));qy(r),cd(r,i)}}}break;case"textarea":Qy(t,n);break;case"select":e=n.value,e!=null&&Wi(t,!!n.multiple,e,!1)}};nv=uf;rv=pi;var CS={usingClientEntryPoint:!1,Events:[ea,Mi,_c,ev,tv,uf]},qs={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kS={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ov(t),t===null?null:t.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||SS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ga.isDisabled&&Ga.supportsFiber)try{gc=Ga.inject(kS),Pn=Ga}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CS;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yf(e))throw Error(V(200));return IS(t,e,null,n)};Kt.createRoot=function(t,e){if(!yf(t))throw Error(V(299));var n=!1,r="",i=F0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=pf(t,1,!1,null,null,n,!1,r,i),t[nr]=e.current,ko(t.nodeType===8?t.parentNode:t),new gf(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=ov(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return pi(t)};Kt.hydrate=function(t,e,n){if(!Rc(e))throw Error(V(200));return bc(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!yf(t))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=F0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=M0(e,null,t,1,n??null,i,!1,s,o),t[nr]=e.current,ko(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ac(e)};Kt.render=function(t,e,n){if(!Rc(e))throw Error(V(200));return bc(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!Rc(t))throw Error(V(40));return t._reactRootContainer?(pi(function(){bc(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};Kt.unstable_batchedUpdates=uf;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rc(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return bc(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function V0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V0)}catch(t){console.error(t)}}V0(),Vy.exports=Kt;var AS=Vy.exports,tg=AS;nd.createRoot=tg.createRoot,nd.hydrateRoot=tg.hydrateRoot;function RS(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[i,s]=N.useState(!1),o=N.useRef(n);o.current=n;const l=N.useRef(r);return l.current=r,N.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var h;s(!0),(h=o.current)===null||h===void 0||h.call(o)},c.onerror=()=>{var h;s(!1),(h=l.current)===null||h===void 0||h.call(l)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),i}const bS=N.createContext(null);function NS({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:i}){const s=RS({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),o=N.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return Jo.createElement(bS.Provider,{value:o},i)}var ng={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},PS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},B0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let v=(l&15)<<2|h>>6,T=h&63;c||(T=64,o||(v=64)),r.push(n[p],n[m],n[v],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(U0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new OS;const v=s<<2|l>>4;if(r.push(v),h!==64){const T=l<<4&240|h>>2;if(r.push(T),m!==64){const R=h<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jS=function(t){const e=U0(t);return B0.encodeByteArray(e,!0)},Ql=function(t){return jS(t).replace(/\./g,"")},z0=function(t){try{return B0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=()=>DS().__FIREBASE_DEFAULTS__,MS=()=>{if(typeof process>"u"||typeof ng>"u")return;const t=ng.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&z0(t[1]);return e&&JSON.parse(e)},Nc=()=>{try{return LS()||MS()||FS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$0=t=>{var e,n;return(n=(e=Nc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VS=t=>{const e=$0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},W0=()=>{var t;return(t=Nc())===null||t===void 0?void 0:t.config},H0=t=>{var e;return(e=Nc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ql(JSON.stringify(n)),Ql(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function $S(){var t;const e=(t=Nc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GS(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qS(){return!$S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q0(){try{return typeof indexedDB=="object"}catch{return!1}}function K0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function KS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="FirebaseError";class Tn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QS,Object.setPrototypeOf(this,Tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ii.prototype.create)}}class Ii{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?YS(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Tn(i,l,r)}}function YS(t,e){return t.replace(JS,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const JS=/\{\$([^}]+)}/g;function XS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(rg(s)&&rg(o)){if(!Lo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ZS(t,e){const n=new eT(t,e);return n.subscribe.bind(n)}class eT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Vu),i.error===void 0&&(i.error=Vu),i.complete===void 0&&(i.complete=Vu);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vu(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=1e3,rT=2,iT=4*60*60*1e3,sT=.5;function ig(t,e=nT,n=rT){const r=e*Math.pow(n,t),i=Math.round(sT*r*(Math.random()-.5)*2);return Math.min(iT,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class Sn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new US;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lT(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aT(t){return t===Xr?void 0:t}function lT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const uT={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},dT=ae.INFO,hT={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},fT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=hT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pc{constructor(e){this.name=e,this._logLevel=dT,this._logHandler=fT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const pT=(t,e)=>e.some(n=>t instanceof n);let sg,og;function mT(){return sg||(sg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gT(){return og||(og=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Q0=new WeakMap,Qd=new WeakMap,Y0=new WeakMap,Uu=new WeakMap,vf=new WeakMap;function yT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Pr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Q0.set(n,t)}).catch(()=>{}),vf.set(e,t),e}function vT(t){if(Qd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qd.set(t,e)}let Yd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Y0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wT(t){Yd=t(Yd)}function _T(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bu(this),e,...n);return Y0.set(r,e.sort?e.sort():[e]),Pr(r)}:gT().includes(t)?function(...e){return t.apply(Bu(this),e),Pr(Q0.get(this))}:function(...e){return Pr(t.apply(Bu(this),e))}}function xT(t){return typeof t=="function"?_T(t):(t instanceof IDBTransaction&&vT(t),pT(t,mT())?new Proxy(t,Yd):t)}function Pr(t){if(t instanceof IDBRequest)return yT(t);if(Uu.has(t))return Uu.get(t);const e=xT(t);return e!==t&&(Uu.set(t,e),vf.set(e,t)),e}const Bu=t=>vf.get(t);function J0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Pr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Pr(o.result),c.oldVersion,c.newVersion,Pr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const ET=["get","getKey","getAll","getAllKeys","count"],IT=["put","add","delete","clear"],zu=new Map;function ag(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zu.get(e))return zu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=IT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ET.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&c.done]))[0]};return zu.set(e,s),s}wT(t=>({...t,get:(e,n,r)=>ag(e,n)||t.get(e,n,r),has:(e,n)=>!!ag(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function TT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jd="@firebase/app",lg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new Pc("@firebase/app"),CT="@firebase/app-compat",kT="@firebase/analytics-compat",AT="@firebase/analytics",RT="@firebase/app-check-compat",bT="@firebase/app-check",NT="@firebase/auth",PT="@firebase/auth-compat",OT="@firebase/database",jT="@firebase/data-connect",DT="@firebase/database-compat",LT="@firebase/functions",MT="@firebase/functions-compat",FT="@firebase/installations",VT="@firebase/installations-compat",UT="@firebase/messaging",BT="@firebase/messaging-compat",zT="@firebase/performance",$T="@firebase/performance-compat",WT="@firebase/remote-config",HT="@firebase/remote-config-compat",GT="@firebase/storage",qT="@firebase/storage-compat",KT="@firebase/firestore",QT="@firebase/vertexai-preview",YT="@firebase/firestore-compat",JT="firebase",XT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="[DEFAULT]",ZT={[Jd]:"fire-core",[CT]:"fire-core-compat",[AT]:"fire-analytics",[kT]:"fire-analytics-compat",[bT]:"fire-app-check",[RT]:"fire-app-check-compat",[NT]:"fire-auth",[PT]:"fire-auth-compat",[OT]:"fire-rtdb",[jT]:"fire-data-connect",[DT]:"fire-rtdb-compat",[LT]:"fire-fn",[MT]:"fire-fn-compat",[FT]:"fire-iid",[VT]:"fire-iid-compat",[UT]:"fire-fcm",[BT]:"fire-fcm-compat",[zT]:"fire-perf",[$T]:"fire-perf-compat",[WT]:"fire-rc",[HT]:"fire-rc-compat",[GT]:"fire-gcs",[qT]:"fire-gcs-compat",[KT]:"fire-fst",[YT]:"fire-fst-compat",[QT]:"fire-vertex","fire-js":"fire-js",[JT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new Map,eC=new Map,Zd=new Map;function cg(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dn(t){const e=t.name;if(Zd.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Zd.set(e,t);for(const n of Yl.values())cg(n,t);for(const n of eC.values())cg(n,t);return!0}function Si(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new Ii("app","Firebase",tC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=XT;function X0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Or.create("bad-app-name",{appName:String(i)});if(n||(n=W0()),!n)throw Or.create("no-options");const s=Yl.get(i);if(s){if(Lo(n,s.options)&&Lo(r,s.config))return s;throw Or.create("duplicate-app",{appName:i})}const o=new cT(i);for(const c of Zd.values())o.addComponent(c);const l=new nC(n,r,o);return Yl.set(i,l),l}function wf(t=Xd){const e=Yl.get(t);if(!e&&t===Xd&&W0())return X0();if(!e)throw Or.create("no-app",{appName:t});return e}function an(t,e,n){var r;let i=(r=ZT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(l.join(" "));return}Dn(new Sn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="firebase-heartbeat-database",iC=1,Mo="firebase-heartbeat-store";let $u=null;function Z0(){return $u||($u=J0(rC,iC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Or.create("idb-open",{originalErrorMessage:t.message})})),$u}async function sC(t){try{const n=(await Z0()).transaction(Mo),r=await n.objectStore(Mo).get(ew(t));return await n.done,r}catch(e){if(e instanceof Tn)sr.warn(e.message);else{const n=Or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}async function ug(t,e){try{const r=(await Z0()).transaction(Mo,"readwrite");await r.objectStore(Mo).put(e,ew(t)),await r.done}catch(n){if(n instanceof Tn)sr.warn(n.message);else{const r=Or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sr.warn(r.message)}}}function ew(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=1024,aC=30*24*60*60*1e3;class lC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=aC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dg(),{heartbeatsToSend:r,unsentEntries:i}=cC(this._heartbeatsCache.heartbeats),s=Ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return sr.warn(n),""}}}function dg(){return new Date().toISOString().substring(0,10)}function cC(t,e=oC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),hg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return q0()?K0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ug(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ug(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function hg(t){return Ql(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){Dn(new Sn("platform-logger",e=>new ST(e),"PRIVATE")),Dn(new Sn("heartbeat",e=>new lC(e),"PRIVATE")),an(Jd,lg,t),an(Jd,lg,"esm2017"),an("fire-js","")}dC("");function _f(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function tw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hC=tw,nw=new Ii("auth","Firebase",tw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Pc("@firebase/auth");function fC(t,...e){Jl.logLevel<=ae.WARN&&Jl.warn(`Auth (${ys}): ${t}`,...e)}function fl(t,...e){Jl.logLevel<=ae.ERROR&&Jl.error(`Auth (${ys}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,...e){throw Ef(t,...e)}function En(t,...e){return Ef(t,...e)}function xf(t,e,n){const r=Object.assign(Object.assign({},hC()),{[e]:n});return new Ii("auth","Firebase",r).create(e,{appName:t.name})}function jr(t){return xf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rw(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ln(t,"argument-error"),xf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ef(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nw.create(t,...e)}function X(t,e,...n){if(!t)throw Ef(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fl(e),new Error(e)}function or(t,e){t||Qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function pC(){return fg()==="http:"||fg()==="https:"}function fg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pC()||G0()||"connection"in navigator)?navigator.onLine:!0}function gC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.shortDelay=e,this.longDelay=n,or(n>e,"Short delay should be less than long delay!"),this.isMobile=zS()||HS()}get(){return mC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t,e){or(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new ra(3e4,6e4);function Sf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vs(t,e,n,r,i={}){return sw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=na(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},s);return WS()||(h.referrerPolicy="no-referrer"),iw.fetch()(ow(t,t.config.apiHost,n,l),h)})}async function sw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},yC),e);try{const i=new _C(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw qa(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qa(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qa(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw qa(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw xf(t,p,h);Ln(t,p)}}catch(i){if(i instanceof Tn)throw i;Ln(t,"network-request-failed",{message:String(i)})}}async function wC(t,e,n,r,i={}){const s=await vs(t,e,n,r,i);return"mfaPendingCredential"in s&&Ln(t,"multi-factor-auth-required",{_serverResponse:s}),s}function ow(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?If(t.config,i):`${t.config.apiScheme}://${i}`}class _C{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),vC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=En(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t,e){return vs(t,"POST","/v1/accounts:delete",e)}async function aw(t,e){return vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EC(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),i=Tf(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:fo(Wu(i.auth_time)),issuedAtTime:fo(Wu(i.iat)),expirationTime:fo(Wu(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Wu(t){return Number(t)*1e3}function Tf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fl("JWT malformed, contained fewer than 3 sections"),null;try{const i=z0(n);return i?JSON.parse(i):(fl("Failed to decode base64 JWT payload"),null)}catch(i){return fl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function pg(t){const e=Tf(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Tn&&IC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function IC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fo(this.lastLoginAt),this.creationTime=fo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Fo(t,aw(n,{idToken:r}));X(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?lw(s.providerUserInfo):[],l=CC(t.providerData,o),c=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new th(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function TC(t){const e=Vt(t);await Xl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CC(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lw(t){return t.map(e=>{var{providerId:n}=e,r=_f(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(t,e){const n=await sw(t,{},async()=>{const r=na({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ow(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",iw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AC(t,e){return vs(t,"POST","/v2/accounts:revokeToken",Sf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=pg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await kC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Yi;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yi,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=_f(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new th(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Fo(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EC(this,e)}reload(){return TC(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(jr(this.auth));const e=await this.getIdToken();return await Fo(this,xC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,T=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(l=n.tenantId)!==null&&l!==void 0?l:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:x,emailVerified:j,isAnonymous:M,providerData:B,stsTokenManager:S}=n;X(x&&S,e,"internal-error");const g=Yi.fromJSON(this.name,S);X(typeof x=="string",e,"internal-error"),pr(m,e.name),pr(v,e.name),X(typeof j=="boolean",e,"internal-error"),X(typeof M=="boolean",e,"internal-error"),pr(T,e.name),pr(R,e.name),pr(k,e.name),pr(P,e.name),pr(E,e.name),pr(w,e.name);const _=new Yn({uid:x,auth:e,email:v,emailVerified:j,displayName:m,isAnonymous:M,photoURL:R,phoneNumber:T,tenantId:k,stsTokenManager:g,createdAt:E,lastLoginAt:w});return B&&Array.isArray(B)&&(_.providerData=B.map(I=>Object.assign({},I))),P&&(_._redirectEventId=P),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new Yi;i.updateFromServerResponse(n);const s=new Yn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xl(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];X(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?lw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Yi;l.updateFromIdToken(r);const c=new Yn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new th(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=new Map;function Jn(t){or(t instanceof Function,"Expected a class definition");let e=mg.get(t);return e?(or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cw.type="NONE";const gg=cw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ji{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=pl(this.userKey,i.apiKey,s),this.fullPersistenceKey=pl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ji(Jn(gg),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Jn(gg);const o=pl(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Yn._fromJSON(e,p);h!==s&&(l=m),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ji(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Ji(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mw(e))return"Blackberry";if(gw(e))return"Webos";if(dw(e))return"Safari";if((e.includes("chrome/")||hw(e))&&!e.includes("edge/"))return"Chrome";if(pw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uw(t=Et()){return/firefox\//i.test(t)}function dw(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hw(t=Et()){return/crios\//i.test(t)}function fw(t=Et()){return/iemobile/i.test(t)}function pw(t=Et()){return/android/i.test(t)}function mw(t=Et()){return/blackberry/i.test(t)}function gw(t=Et()){return/webos/i.test(t)}function Cf(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RC(t=Et()){var e;return Cf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bC(){return GS()&&document.documentMode===10}function yw(t=Et()){return Cf(t)||pw(t)||gw(t)||mw(t)||/windows phone/i.test(t)||fw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e=[]){let n;switch(t){case"Browser":n=yg(Et());break;case"Worker":n=`${yg(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ys}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(t,e={}){return vs(t,"GET","/v2/passwordPolicy",Sf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=6;class jC{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:OC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vg(this),this.idTokenSubscription=new vg(this),this.beforeStateQueue=new NC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ji.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await aw(this,{idToken:e}),r=await Yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(jr(this));const n=e?Vt(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PC(this),n=new jC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ii("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await AC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Ji.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&fC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ws(t){return Vt(t)}class vg{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZS(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LC(t){kf=t}function MC(t){return kf.loadJS(t)}function FC(){return kf.gapiScript}function VC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t,e){const n=Si(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Lo(s,e??{}))return i;Ln(i,"already-initialized")}return n.initialize({options:e})}function BC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zC(t,e,n){const r=ws(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=ww(e),{host:o,port:l}=$C(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),WC()}function ww(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $C(t){const e=ww(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wg(o)}}}function wg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(t,e){return wC(t,"POST","/v1/accounts:signInWithIdp",Sf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="http://localhost";class mi extends _w{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new mi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=_f(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new mi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xi(e,n)}buildRequest(){const e={requestUri:HC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=na(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Oc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends ia{constructor(){super("facebook.com")}static credential(e){return mi._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hn.credential(e.oauthAccessToken)}catch{return null}}}Hn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends ia{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return mi._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gn.credential(n,r)}catch{return null}}}Gn.GOOGLE_SIGN_IN_METHOD="google.com";Gn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends ia{constructor(){super("github.com")}static credential(e){return mi._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.GITHUB_SIGN_IN_METHOD="github.com";wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends ia{constructor(){super("twitter.com")}static credential(e,n){return mi._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Yn._fromIdTokenResponse(e,r,i),o=_g(r);return new ls({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_g(r);return new ls({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _g(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends Tn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Zl.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Zl(e,n,r,i)}}function xw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Zl._fromErrorAndOperation(t,s,e,r):s})}async function GC(t,e,n=!1){const r=await Fo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ls._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t,e,n=!1){const{auth:r}=t;if(Nn(r.app))return Promise.reject(jr(r));const i="reauthenticate";try{const s=await Fo(t,xw(r,i,e,t),n);X(s.idToken,r,"internal-error");const o=Tf(s.idToken);X(o,r,"internal-error");const{sub:l}=o;return X(t.uid===l,r,"user-mismatch"),ls._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ln(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(t,e,n=!1){if(Nn(t.app))return Promise.reject(jr(t));const r="signIn",i=await xw(t,r,e),s=await ls._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function QC(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function YC(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function JC(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function XC(t){return Vt(t).signOut()}const ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ec,"1"),this.storage.removeItem(ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=1e3,ek=10;class Iw extends Ew{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ek):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Iw.type="LOCAL";const tk=Iw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw extends Ew{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Sw.type="SESSION";const Tw=Sw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new jc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(n.origin,s)),c=await nk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const h=Af("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const v=m;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(v.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return window}function ik(t){jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(){return typeof jn().WorkerGlobalScope<"u"&&typeof jn().importScripts=="function"}async function sk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ok(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ak(){return Cw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firebaseLocalStorageDb",lk=1,tc="firebaseLocalStorage",Aw="fbase_key";class sa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dc(t,e){return t.transaction([tc],e?"readwrite":"readonly").objectStore(tc)}function ck(){const t=indexedDB.deleteDatabase(kw);return new sa(t).toPromise()}function nh(){const t=indexedDB.open(kw,lk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(tc,{keyPath:Aw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(tc)?e(r):(r.close(),await ck(),e(await nh()))})})}async function xg(t,e,n){const r=Dc(t,!0).put({[Aw]:e,value:n});return new sa(r).toPromise()}async function uk(t,e){const n=Dc(t,!1).get(e),r=await new sa(n).toPromise();return r===void 0?null:r.value}function Eg(t,e){const n=Dc(t,!0).delete(e);return new sa(n).toPromise()}const dk=800,hk=3;class Rw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jc._getInstance(ak()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sk(),!this.activeServiceWorker)return;this.sender=new rk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ok()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nh();return await xg(e,ec,"1"),await Eg(e,ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Eg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Dc(i,!1).getAll();return new sa(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Rw.type="LOCAL";const fk=Rw;new ra(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e){return e?Jn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends _w{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pk(t){return KC(t.auth,new bf(t),t.bypassAuthState)}function mk(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),qC(n,new bf(t),t.bypassAuthState)}async function gk(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),GC(n,new bf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pk;case"linkViaPopup":case"linkViaRedirect":return gk;case"reauthViaPopup":case"reauthViaRedirect":return mk;default:Ln(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new ra(2e3,1e4);async function vk(t,e,n){if(Nn(t.app))return Promise.reject(En(t,"operation-not-supported-in-this-environment"));const r=ws(t);rw(t,e,Oc);const i=Rf(r,n);return new ni(r,"signInViaPopup",e,i).executeNotNull()}class ni extends bw{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ni.currentPopupAction&&ni.currentPopupAction.cancel(),ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const e=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yk.get())};e()}}ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="pendingRedirect",ml=new Map;class _k extends bw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ml.get(this.auth._key());if(!e){try{const r=await xk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ml.set(this.auth._key(),e)}return this.bypassAuthState||ml.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xk(t,e){const n=Pw(e),r=Nw(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Ek(t,e){return Nw(t)._set(Pw(e),"true")}function Ik(t,e){ml.set(t._key(),e)}function Nw(t){return Jn(t._redirectPersistence)}function Pw(t){return pl(wk,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t,e,n){return Tk(t,e,n)}async function Tk(t,e,n){if(Nn(t.app))return Promise.reject(jr(t));const r=ws(t);rw(t,e,Oc),await r._initializationPromise;const i=Rf(r,n);return await Ek(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Ck(t,e){return await ws(t)._initializationPromise,Ow(t,e,!1)}async function Ow(t,e,n=!1){if(Nn(t.app))return Promise.reject(jr(t));const r=ws(t),i=Rf(r,e),o=await new _k(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=10*60*1e3;class Ak{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jw(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(En(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ig(e))}saveEventToCache(e){this.cachedEventUids.add(Ig(e)),this.lastProcessedEventTime=Date.now()}}function Ig(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Rk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,e={}){return vs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pk=/^https?/;async function Ok(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bk(t);for(const n of e)try{if(jk(n))return}catch{}Ln(t,"unauthorized-domain")}function jk(t){const e=eh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Pk.test(n))return!1;if(Nk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=new ra(3e4,6e4);function Sg(){const t=jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Lk(t){return new Promise((e,n)=>{var r,i,s;function o(){Sg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sg(),n(En(t,"network-request-failed"))},timeout:Dk.get()})}if(!((i=(r=jn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=jn().gapi)===null||s===void 0)&&s.load)o();else{const l=VC("iframefcb");return jn()[l]=()=>{gapi.load?o():n(En(t,"network-request-failed"))},MC(`${FC()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw gl=null,e})}let gl=null;function Mk(t){return gl=gl||Lk(t),gl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new ra(5e3,15e3),Vk="__/auth/iframe",Uk="emulator/auth/iframe",Bk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $k(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?If(e,Uk):`https://${t.config.authDomain}/${Vk}`,r={apiKey:e.apiKey,appName:t.name,v:ys},i=zk.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${na(r).slice(1)}`}async function Wk(t){const e=await Mk(t),n=jn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:$k(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bk,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=En(t,"network-request-failed"),l=jn().setTimeout(()=>{s(o)},Fk.get());function c(){jn().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gk=500,qk=600,Kk="_blank",Qk="http://localhost";class Tg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Yk(t,e,n,r=Gk,i=qk){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Hk),{width:r.toString(),height:i.toString(),top:s,left:o}),h=Et().toLowerCase();n&&(l=hw(h)?Kk:n),uw(h)&&(e=e||Qk,c.scrollbars="yes");const p=Object.entries(c).reduce((v,[T,R])=>`${v}${T}=${R},`,"");if(RC(h)&&l!=="_self")return Jk(e||"",l),new Tg(null);const m=window.open(e||"",l,p);X(m,t,"popup-blocked");try{m.focus()}catch{}return new Tg(m)}function Jk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="__/auth/handler",Zk="emulator/auth/handler",eA=encodeURIComponent("fac");async function Cg(t,e,n,r,i,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ys,eventId:i};if(e instanceof Oc){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",XS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof ia){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${eA}=${encodeURIComponent(c)}`:"";return`${tA(t)}?${na(l).slice(1)}${h}`}function tA({config:t}){return t.emulator?If(t,Zk):`https://${t.authDomain}/${Xk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu="webStorageSupport";class nA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tw,this._completeRedirectFn=Ow,this._overrideRedirectResult=Ik}async _openPopup(e,n,r,i){var s;or((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Cg(e,n,r,eh(),i);return Yk(e,o,Af())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Cg(e,n,r,eh(),i);return ik(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(or(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Wk(e),r=new Ak(e);return n.register("authEvent",i=>(X(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hu,{type:Hu},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Hu];o!==void 0&&n(!!o),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ok(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yw()||dw()||Cf()}}const rA=nA;var kg="@firebase/auth",Ag="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oA(t){Dn(new Sn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vw(t)},h=new DC(r,i,s,c);return BC(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new Sn("auth-internal",e=>{const n=ws(e.getProvider("auth").getImmediate());return(r=>new iA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),an(kg,Ag,sA(t)),an(kg,Ag,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=5*60,lA=H0("authIdTokenMaxAge")||aA;let Rg=null;const cA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lA)return;const i=n==null?void 0:n.token;Rg!==i&&(Rg=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uA(t=wf()){const e=Si(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UC(t,{popupRedirectResolver:rA,persistence:[fk,tk,Tw]}),r=H0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=cA(s.toString());YC(n,o,()=>o(n.currentUser)),QC(n,l=>o(l))}}const i=$0("auth");return i&&zC(n,`http://${i}`),n}function dA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}LC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=En("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",dA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oA("Browser");var hA="firebase",fA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an(hA,fA,"app");var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,g){function _(){}_.prototype=g.prototype,S.D=g.prototype,S.prototype=new _,S.prototype.constructor=S,S.C=function(I,A,b){for(var C=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)C[Ie-2]=arguments[Ie];return g.prototype[A].apply(I,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,g,_){_||(_=0);var I=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)I[A]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(A=0;16>A;++A)I[A]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=S.g[0],_=S.g[1],A=S.g[2];var b=S.g[3],C=g+(b^_&(A^b))+I[0]+3614090360&4294967295;g=_+(C<<7&4294967295|C>>>25),C=b+(A^g&(_^A))+I[1]+3905402710&4294967295,b=g+(C<<12&4294967295|C>>>20),C=A+(_^b&(g^_))+I[2]+606105819&4294967295,A=b+(C<<17&4294967295|C>>>15),C=_+(g^A&(b^g))+I[3]+3250441966&4294967295,_=A+(C<<22&4294967295|C>>>10),C=g+(b^_&(A^b))+I[4]+4118548399&4294967295,g=_+(C<<7&4294967295|C>>>25),C=b+(A^g&(_^A))+I[5]+1200080426&4294967295,b=g+(C<<12&4294967295|C>>>20),C=A+(_^b&(g^_))+I[6]+2821735955&4294967295,A=b+(C<<17&4294967295|C>>>15),C=_+(g^A&(b^g))+I[7]+4249261313&4294967295,_=A+(C<<22&4294967295|C>>>10),C=g+(b^_&(A^b))+I[8]+1770035416&4294967295,g=_+(C<<7&4294967295|C>>>25),C=b+(A^g&(_^A))+I[9]+2336552879&4294967295,b=g+(C<<12&4294967295|C>>>20),C=A+(_^b&(g^_))+I[10]+4294925233&4294967295,A=b+(C<<17&4294967295|C>>>15),C=_+(g^A&(b^g))+I[11]+2304563134&4294967295,_=A+(C<<22&4294967295|C>>>10),C=g+(b^_&(A^b))+I[12]+1804603682&4294967295,g=_+(C<<7&4294967295|C>>>25),C=b+(A^g&(_^A))+I[13]+4254626195&4294967295,b=g+(C<<12&4294967295|C>>>20),C=A+(_^b&(g^_))+I[14]+2792965006&4294967295,A=b+(C<<17&4294967295|C>>>15),C=_+(g^A&(b^g))+I[15]+1236535329&4294967295,_=A+(C<<22&4294967295|C>>>10),C=g+(A^b&(_^A))+I[1]+4129170786&4294967295,g=_+(C<<5&4294967295|C>>>27),C=b+(_^A&(g^_))+I[6]+3225465664&4294967295,b=g+(C<<9&4294967295|C>>>23),C=A+(g^_&(b^g))+I[11]+643717713&4294967295,A=b+(C<<14&4294967295|C>>>18),C=_+(b^g&(A^b))+I[0]+3921069994&4294967295,_=A+(C<<20&4294967295|C>>>12),C=g+(A^b&(_^A))+I[5]+3593408605&4294967295,g=_+(C<<5&4294967295|C>>>27),C=b+(_^A&(g^_))+I[10]+38016083&4294967295,b=g+(C<<9&4294967295|C>>>23),C=A+(g^_&(b^g))+I[15]+3634488961&4294967295,A=b+(C<<14&4294967295|C>>>18),C=_+(b^g&(A^b))+I[4]+3889429448&4294967295,_=A+(C<<20&4294967295|C>>>12),C=g+(A^b&(_^A))+I[9]+568446438&4294967295,g=_+(C<<5&4294967295|C>>>27),C=b+(_^A&(g^_))+I[14]+3275163606&4294967295,b=g+(C<<9&4294967295|C>>>23),C=A+(g^_&(b^g))+I[3]+4107603335&4294967295,A=b+(C<<14&4294967295|C>>>18),C=_+(b^g&(A^b))+I[8]+1163531501&4294967295,_=A+(C<<20&4294967295|C>>>12),C=g+(A^b&(_^A))+I[13]+2850285829&4294967295,g=_+(C<<5&4294967295|C>>>27),C=b+(_^A&(g^_))+I[2]+4243563512&4294967295,b=g+(C<<9&4294967295|C>>>23),C=A+(g^_&(b^g))+I[7]+1735328473&4294967295,A=b+(C<<14&4294967295|C>>>18),C=_+(b^g&(A^b))+I[12]+2368359562&4294967295,_=A+(C<<20&4294967295|C>>>12),C=g+(_^A^b)+I[5]+4294588738&4294967295,g=_+(C<<4&4294967295|C>>>28),C=b+(g^_^A)+I[8]+2272392833&4294967295,b=g+(C<<11&4294967295|C>>>21),C=A+(b^g^_)+I[11]+1839030562&4294967295,A=b+(C<<16&4294967295|C>>>16),C=_+(A^b^g)+I[14]+4259657740&4294967295,_=A+(C<<23&4294967295|C>>>9),C=g+(_^A^b)+I[1]+2763975236&4294967295,g=_+(C<<4&4294967295|C>>>28),C=b+(g^_^A)+I[4]+1272893353&4294967295,b=g+(C<<11&4294967295|C>>>21),C=A+(b^g^_)+I[7]+4139469664&4294967295,A=b+(C<<16&4294967295|C>>>16),C=_+(A^b^g)+I[10]+3200236656&4294967295,_=A+(C<<23&4294967295|C>>>9),C=g+(_^A^b)+I[13]+681279174&4294967295,g=_+(C<<4&4294967295|C>>>28),C=b+(g^_^A)+I[0]+3936430074&4294967295,b=g+(C<<11&4294967295|C>>>21),C=A+(b^g^_)+I[3]+3572445317&4294967295,A=b+(C<<16&4294967295|C>>>16),C=_+(A^b^g)+I[6]+76029189&4294967295,_=A+(C<<23&4294967295|C>>>9),C=g+(_^A^b)+I[9]+3654602809&4294967295,g=_+(C<<4&4294967295|C>>>28),C=b+(g^_^A)+I[12]+3873151461&4294967295,b=g+(C<<11&4294967295|C>>>21),C=A+(b^g^_)+I[15]+530742520&4294967295,A=b+(C<<16&4294967295|C>>>16),C=_+(A^b^g)+I[2]+3299628645&4294967295,_=A+(C<<23&4294967295|C>>>9),C=g+(A^(_|~b))+I[0]+4096336452&4294967295,g=_+(C<<6&4294967295|C>>>26),C=b+(_^(g|~A))+I[7]+1126891415&4294967295,b=g+(C<<10&4294967295|C>>>22),C=A+(g^(b|~_))+I[14]+2878612391&4294967295,A=b+(C<<15&4294967295|C>>>17),C=_+(b^(A|~g))+I[5]+4237533241&4294967295,_=A+(C<<21&4294967295|C>>>11),C=g+(A^(_|~b))+I[12]+1700485571&4294967295,g=_+(C<<6&4294967295|C>>>26),C=b+(_^(g|~A))+I[3]+2399980690&4294967295,b=g+(C<<10&4294967295|C>>>22),C=A+(g^(b|~_))+I[10]+4293915773&4294967295,A=b+(C<<15&4294967295|C>>>17),C=_+(b^(A|~g))+I[1]+2240044497&4294967295,_=A+(C<<21&4294967295|C>>>11),C=g+(A^(_|~b))+I[8]+1873313359&4294967295,g=_+(C<<6&4294967295|C>>>26),C=b+(_^(g|~A))+I[15]+4264355552&4294967295,b=g+(C<<10&4294967295|C>>>22),C=A+(g^(b|~_))+I[6]+2734768916&4294967295,A=b+(C<<15&4294967295|C>>>17),C=_+(b^(A|~g))+I[13]+1309151649&4294967295,_=A+(C<<21&4294967295|C>>>11),C=g+(A^(_|~b))+I[4]+4149444226&4294967295,g=_+(C<<6&4294967295|C>>>26),C=b+(_^(g|~A))+I[11]+3174756917&4294967295,b=g+(C<<10&4294967295|C>>>22),C=A+(g^(b|~_))+I[2]+718787259&4294967295,A=b+(C<<15&4294967295|C>>>17),C=_+(b^(A|~g))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+g&4294967295,S.g[1]=S.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+b&4294967295}r.prototype.u=function(S,g){g===void 0&&(g=S.length);for(var _=g-this.blockSize,I=this.B,A=this.h,b=0;b<g;){if(A==0)for(;b<=_;)i(this,S,b),b+=this.blockSize;if(typeof S=="string"){for(;b<g;)if(I[A++]=S.charCodeAt(b++),A==this.blockSize){i(this,I),A=0;break}}else for(;b<g;)if(I[A++]=S[b++],A==this.blockSize){i(this,I),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var g=1;g<S.length-8;++g)S[g]=0;var _=8*this.o;for(g=S.length-8;g<S.length;++g)S[g]=_&255,_/=256;for(this.u(S),S=Array(16),g=_=0;4>g;++g)for(var I=0;32>I;I+=8)S[_++]=this.g[g]>>>I&255;return S};function s(S,g){var _=l;return Object.prototype.hasOwnProperty.call(_,S)?_[S]:_[S]=g(S)}function o(S,g){this.h=g;for(var _=[],I=!0,A=S.length-1;0<=A;A--){var b=S[A]|0;I&&b==g||(_[A]=b,I=!1)}this.g=_}var l={};function c(S){return-128<=S&&128>S?s(S,function(g){return new o([g|0],0>g?-1:0)}):new o([S|0],0>S?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return P(h(-S));for(var g=[],_=1,I=0;S>=_;I++)g[I]=S/_|0,_*=4294967296;return new o(g,0)}function p(S,g){if(S.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(S.charAt(0)=="-")return P(p(S.substring(1),g));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=h(Math.pow(g,8)),I=m,A=0;A<S.length;A+=8){var b=Math.min(8,S.length-A),C=parseInt(S.substring(A,A+b),g);8>b?(b=h(Math.pow(g,b)),I=I.j(b).add(h(C))):(I=I.j(_),I=I.add(h(C)))}return I}var m=c(0),v=c(1),T=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var S=0,g=1,_=0;_<this.g.length;_++){var I=this.i(_);S+=(0<=I?I:4294967296+I)*g,g*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R(this))return"0";if(k(this))return"-"+P(this).toString(S);for(var g=h(Math.pow(S,6)),_=this,I="";;){var A=j(_,g).g;_=E(_,A.j(g));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(S);if(_=A,R(_))return b+I;for(;6>b.length;)b="0"+b;I=b+I}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function R(S){if(S.h!=0)return!1;for(var g=0;g<S.g.length;g++)if(S.g[g]!=0)return!1;return!0}function k(S){return S.h==-1}t.l=function(S){return S=E(this,S),k(S)?-1:R(S)?0:1};function P(S){for(var g=S.g.length,_=[],I=0;I<g;I++)_[I]=~S.g[I];return new o(_,~S.h).add(v)}t.abs=function(){return k(this)?P(this):this},t.add=function(S){for(var g=Math.max(this.g.length,S.g.length),_=[],I=0,A=0;A<=g;A++){var b=I+(this.i(A)&65535)+(S.i(A)&65535),C=(b>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);I=C>>>16,b&=65535,C&=65535,_[A]=C<<16|b}return new o(_,_[_.length-1]&-2147483648?-1:0)};function E(S,g){return S.add(P(g))}t.j=function(S){if(R(this)||R(S))return m;if(k(this))return k(S)?P(this).j(P(S)):P(P(this).j(S));if(k(S))return P(this.j(P(S)));if(0>this.l(T)&&0>S.l(T))return h(this.m()*S.m());for(var g=this.g.length+S.g.length,_=[],I=0;I<2*g;I++)_[I]=0;for(I=0;I<this.g.length;I++)for(var A=0;A<S.g.length;A++){var b=this.i(I)>>>16,C=this.i(I)&65535,Ie=S.i(A)>>>16,Bt=S.i(A)&65535;_[2*I+2*A]+=C*Bt,w(_,2*I+2*A),_[2*I+2*A+1]+=b*Bt,w(_,2*I+2*A+1),_[2*I+2*A+1]+=C*Ie,w(_,2*I+2*A+1),_[2*I+2*A+2]+=b*Ie,w(_,2*I+2*A+2)}for(I=0;I<g;I++)_[I]=_[2*I+1]<<16|_[2*I];for(I=g;I<2*g;I++)_[I]=0;return new o(_,0)};function w(S,g){for(;(S[g]&65535)!=S[g];)S[g+1]+=S[g]>>>16,S[g]&=65535,g++}function x(S,g){this.g=S,this.h=g}function j(S,g){if(R(g))throw Error("division by zero");if(R(S))return new x(m,m);if(k(S))return g=j(P(S),g),new x(P(g.g),P(g.h));if(k(g))return g=j(S,P(g)),new x(P(g.g),g.h);if(30<S.g.length){if(k(S)||k(g))throw Error("slowDivide_ only works with positive integers.");for(var _=v,I=g;0>=I.l(S);)_=M(_),I=M(I);var A=B(_,1),b=B(I,1);for(I=B(I,2),_=B(_,2);!R(I);){var C=b.add(I);0>=C.l(S)&&(A=A.add(_),b=C),I=B(I,1),_=B(_,1)}return g=E(S,A.j(g)),new x(A,g)}for(A=m;0<=S.l(g);){for(_=Math.max(1,Math.floor(S.m()/g.m())),I=Math.ceil(Math.log(_)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),b=h(_),C=b.j(g);k(C)||0<C.l(S);)_-=I,b=h(_),C=b.j(g);R(b)&&(b=v),A=A.add(b),S=E(S,C)}return new x(A,S)}t.A=function(S){return j(this,S).h},t.and=function(S){for(var g=Math.max(this.g.length,S.g.length),_=[],I=0;I<g;I++)_[I]=this.i(I)&S.i(I);return new o(_,this.h&S.h)},t.or=function(S){for(var g=Math.max(this.g.length,S.g.length),_=[],I=0;I<g;I++)_[I]=this.i(I)|S.i(I);return new o(_,this.h|S.h)},t.xor=function(S){for(var g=Math.max(this.g.length,S.g.length),_=[],I=0;I<g;I++)_[I]=this.i(I)^S.i(I);return new o(_,this.h^S.h)};function M(S){for(var g=S.g.length+1,_=[],I=0;I<g;I++)_[I]=S.i(I)<<1|S.i(I-1)>>>31;return new o(_,S.h)}function B(S,g){var _=g>>5;g%=32;for(var I=S.g.length-_,A=[],b=0;b<I;b++)A[b]=0<g?S.i(b+_)>>>g|S.i(b+_+1)<<32-g:S.i(b+_);return new o(A,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Dw=o}).apply(typeof bg<"u"?bg:typeof self<"u"?self:typeof window<"u"?window:{});var Ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lw,to,Mw,yl,rh,Fw,Vw,Uw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ka=="object"&&Ka];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var O=a[y];if(!(O in f))break e;f=f[O]}a=a[a.length-1],y=f[a],d=d(y),d!=y&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,y=!1,O={next:function(){if(!y&&f<a.length){var D=f++;return{value:d(D,a[D]),done:!1}}return y=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,y),a.apply(d,O)}}return function(){return a.apply(d,arguments)}}function v(a,d,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,v.apply(null,arguments)}function T(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function R(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,O,D){for(var $=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)$[ye-2]=arguments[ye];return d.prototype[O].apply(y,$)}}function k(a){const d=a.length;if(0<d){const f=Array(d);for(let y=0;y<d;y++)f[y]=a[y];return f}return[]}function P(a,d){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(c(y)){const O=a.length||0,D=y.length||0;a.length=O+D;for(let $=0;$<D;$++)a[O+$]=y[$]}else a.push(y)}}class E{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var M=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function B(a,d,f){for(const y in a)d.call(f,a[y],y,a)}function S(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function g(a){const d={};for(const f in a)d[f]=a[f];return d}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,d){let f,y;for(let O=1;O<arguments.length;O++){y=arguments[O];for(f in y)a[f]=y[f];for(let D=0;D<_.length;D++)f=_[D],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function A(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function b(a){l.setTimeout(()=>{throw a},0)}function C(){var a=J;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Ie{constructor(){this.h=this.g=null}add(d,f){const y=Bt.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var Bt=new E(()=>new un,a=>a.reset());class un{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let bt,W=!1,J=new Ie,ne=()=>{const a=l.Promise.resolve(void 0);bt=()=>{a.then(Se)}};var Se=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){b(f)}var d=Bt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}W=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Nt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function It(a,d){if(Ae.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(M){e:{try{j(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Jt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&It.aa.h.call(this)}}R(It,Ae);var Jt={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Xt="closure_listenable_"+(1e6*Math.random()|0),lr=0;function da(a,d,f,y,O){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=O,this.key=++lr,this.da=this.fa=!1}function Y(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Wr(a){this.src=a,this.g={},this.h=0}Wr.prototype.add=function(a,d,f,y,O){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var $=fe(a,d,y,O);return-1<$?(d=a[$],f||(d.fa=!1)):(d=new da(d,this.src,D,!!y,O),d.fa=f,a.push(d)),d};function St(a,d){var f=d.type;if(f in a.g){var y=a.g[f],O=Array.prototype.indexOf.call(y,d,void 0),D;(D=0<=O)&&Array.prototype.splice.call(y,O,1),D&&(Y(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function fe(a,d,f,y){for(var O=0;O<a.length;++O){var D=a[O];if(!D.da&&D.listener==d&&D.capture==!!f&&D.ha==y)return O}return-1}var Cs="closure_lm_"+(1e6*Math.random()|0),te={};function Tt(a,d,f,y,O){if(Array.isArray(d)){for(var D=0;D<d.length;D++)Tt(a,d[D],f,y,O);return null}return f=bs(f),a&&a[Xt]?a.K(d,f,h(y)?!!y.capture:!1,O):re(a,d,f,!1,y,O)}function re(a,d,f,y,O,D){if(!d)throw Error("Invalid event type");var $=h(O)?!!O.capture:!!O,ye=Rs(a);if(ye||(a[Cs]=ye=new Wr(a)),f=ye.add(d,f,y,$,D),f.proxy)return f;if(y=Zt(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)Nt||(O=$),O===void 0&&(O=!1),a.addEventListener(d.toString(),y,O);else if(a.attachEvent)a.attachEvent(Xc(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Zt(){function a(f){return d.call(a.src,a.listener,f)}const d=Zc;return a}function ks(a,d,f,y,O){if(Array.isArray(d))for(var D=0;D<d.length;D++)ks(a,d[D],f,y,O);else y=h(y)?!!y.capture:!!y,f=bs(f),a&&a[Xt]?(a=a.i,d=String(d).toString(),d in a.g&&(D=a.g[d],f=fe(D,f,y,O),-1<f&&(Y(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete a.g[d],a.h--)))):a&&(a=Rs(a))&&(d=a.g[d.toString()],a=-1,d&&(a=fe(d,f,y,O)),(f=-1<a?d[a]:null)&&As(f))}function As(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Xt])St(d.i,a);else{var f=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(f,y,a.capture):d.detachEvent?d.detachEvent(Xc(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=Rs(d))?(St(f,a),f.h==0&&(f.src=null,d[Cs]=null)):Y(a)}}}function Xc(a){return a in te?te[a]:te[a]="on"+a}function Zc(a,d){if(a.da)a=!0;else{d=new It(d,this);var f=a.listener,y=a.ha||a.src;a.fa&&As(a),a=f.call(y,d)}return a}function Rs(a){return a=a[Cs],a instanceof Wr?a:null}var Ci="__closure_events_fn_"+(1e9*Math.random()>>>0);function bs(a){return typeof a=="function"?a:(a[Ci]||(a[Ci]=function(d){return a.handleEvent(d)}),a[Ci])}function Ye(){he.call(this),this.i=new Wr(this),this.M=this,this.F=null}R(Ye,he),Ye.prototype[Xt]=!0,Ye.prototype.removeEventListener=function(a,d,f,y){ks(this,a,d,f,y)};function rt(a,d){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new Ae(d,a);else if(d instanceof Ae)d.target=d.target||a;else{var O=d;d=new Ae(y,a),I(d,O)}if(O=!0,f)for(var D=f.length-1;0<=D;D--){var $=d.g=f[D];O=Hr($,y,!0,d)&&O}if($=d.g=a,O=Hr($,y,!0,d)&&O,O=Hr($,y,!1,d)&&O,f)for(D=0;D<f.length;D++)$=d.g=f[D],O=Hr($,y,!1,d)&&O}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],y=0;y<f.length;y++)Y(f[y]);delete a.g[d],a.h--}}this.F=null},Ye.prototype.K=function(a,d,f,y){return this.i.add(String(a),d,!1,f,y)},Ye.prototype.L=function(a,d,f,y){return this.i.add(String(a),d,!0,f,y)};function Hr(a,d,f,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,D=0;D<d.length;++D){var $=d[D];if($&&!$.da&&$.capture==f){var ye=$.listener,it=$.ha||$.src;$.fa&&St(a.i,$),O=ye.call(it,y)!==!1&&O}}return O&&!y.defaultPrevented}function ha(a,d,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function fa(a){a.g=ha(()=>{a.g=null,a.i&&(a.i=!1,fa(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class eu extends he{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:fa(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(a){he.call(this),this.h=a,this.g={}}R(Gr,he);var pa=[];function Ns(a){B(a.g,function(d,f){this.g.hasOwnProperty(f)&&As(d)},a),a.g={}}Gr.prototype.N=function(){Gr.aa.N.call(this),Ns(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var L=l.JSON.stringify,H=l.JSON.parse,z=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Q(){}Q.prototype.h=null;function G(a){return a.h||(a.h=a.i())}function me(){}var we={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fe(){Ae.call(this,"d")}R(Fe,Ae);function Je(){Ae.call(this,"c")}R(Je,Ae);var _e={},Ge=null;function pe(){return Ge=Ge||new Ye}_e.La="serverreachability";function Cn(a){Ae.call(this,_e.La,a)}R(Cn,Ae);function kn(a){const d=pe();rt(d,new Cn(d))}_e.STAT_EVENT="statevent";function Re(a,d){Ae.call(this,_e.STAT_EVENT,a),this.stat=d}R(Re,Ae);function De(a){const d=pe();rt(d,new Re(d,a))}_e.Ma="timingevent";function dt(a,d){Ae.call(this,_e.Ma,a),this.size=d}R(dt,Ae);function Ve(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Pt(){this.g=!0}Pt.prototype.xa=function(){this.g=!1};function cr(a,d,f,y,O,D){a.info(function(){if(a.g)if(D)for(var $="",ye=D.split("&"),it=0;it<ye.length;it++){var de=ye[it].split("=");if(1<de.length){var ht=de[0];de=de[1];var ft=ht.split("_");$=2<=ft.length&&ft[1]=="type"?$+(ht+"="+de+"&"):$+(ht+"=redacted&")}}else $=null;else $=D;return"XMLHTTP REQ ("+y+") [attempt "+O+"]: "+d+`
`+f+`
`+$})}function ma(a,d,f,y,O,D,$){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+O+"]: "+d+`
`+f+`
`+D+" "+$})}function Un(a,d,f,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+jx(a,f)+(y?" "+y:"")})}function Ox(a,d){a.info(function(){return"TIMEOUT: "+d})}Pt.prototype.info=function(){};function jx(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var O=y[1];if(Array.isArray(O)&&!(1>O.length)){var D=O[0];if(D!="noop"&&D!="stop"&&D!="close")for(var $=1;$<O.length;$++)O[$]=""}}}}return L(f)}catch{return d}}var ga={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tu;function ya(){}R(ya,Q),ya.prototype.g=function(){return new XMLHttpRequest},ya.prototype.i=function(){return{}},tu=new ya;function ur(a,d,f,y){this.j=a,this.i=d,this.l=f,this.R=y||1,this.U=new Gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cp}function cp(){this.i=null,this.g="",this.h=!1}var up={},nu={};function ru(a,d,f){a.L=1,a.v=xa(Bn(d)),a.m=f,a.P=!0,dp(a,null)}function dp(a,d){a.F=Date.now(),va(a),a.A=Bn(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Tp(f.i,"t",y),a.C=0,f=a.j.J,a.h=new cp,a.g=$p(a.j,f?d:null,!a.m),0<a.O&&(a.M=new eu(v(a.Y,a,a.g),a.O)),d=a.U,f=a.g,y=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(pa[0]=O.toString()),O=pa);for(var D=0;D<O.length;D++){var $=Tt(f,O[D],y||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),kn(),cr(a.i,a.u,a.A,a.l,a.R,a.m)}ur.prototype.ca=function(a){a=a.target;const d=this.M;d&&zn(a)==3?d.j():this.Y(a)},ur.prototype.Y=function(a){try{if(a==this.g)e:{const ft=zn(this.g);var d=this.g.Ba();const Ri=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Pp(this.g)))){this.J||ft!=4||d==7||(d==8||0>=Ri?kn(3):kn(2)),iu(this);var f=this.g.Z();this.X=f;t:if(hp(this)){var y=Pp(this.g);a="";var O=y.length,D=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),Ps(this);var $="";break t}this.h.i=new l.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,a+=this.h.i.decode(y[d],{stream:!(D&&d==O-1)});y.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,ma(this.i,this.u,this.A,this.l,this.R,ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,it=this.g;if((ye=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ye)){var de=ye;break t}}de=null}if(f=de)Un(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,su(this,f);else{this.o=!1,this.s=3,De(12),qr(this),Ps(this);break e}}if(this.P){f=!0;let dn;for(;!this.J&&this.C<$.length;)if(dn=Dx(this,$),dn==nu){ft==4&&(this.s=4,De(14),f=!1),Un(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==up){this.s=4,De(15),Un(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else Un(this.i,this.l,dn,null),su(this,dn);if(hp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||$.length!=0||this.h.h||(this.s=1,De(16),f=!1),this.o=this.o&&f,!f)Un(this.i,this.l,$,"[Invalid Chunked Response]"),qr(this),Ps(this);else if(0<$.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),du(ht),ht.M=!0,De(11))}}else Un(this.i,this.l,$,null),su(this,$);ft==4&&qr(this),this.o&&!this.J&&(ft==4?Vp(this.j,this):(this.o=!1,va(this)))}else Xx(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),qr(this),Ps(this)}}}catch{}finally{}};function hp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Dx(a,d){var f=a.C,y=d.indexOf(`
`,f);return y==-1?nu:(f=Number(d.substring(f,y)),isNaN(f)?up:(y+=1,y+f>d.length?nu:(d=d.slice(y,y+f),a.C=y+f,d)))}ur.prototype.cancel=function(){this.J=!0,qr(this)};function va(a){a.S=Date.now()+a.I,fp(a,a.I)}function fp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ve(v(a.ba,a),d)}function iu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ur.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Ox(this.i,this.A),this.L!=2&&(kn(),De(17)),qr(this),this.s=2,Ps(this)):fp(this,this.S-a)};function Ps(a){a.j.G==0||a.J||Vp(a.j,a)}function qr(a){iu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ns(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function su(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||ou(f.h,a))){if(!a.K&&ou(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var O=y;if(O[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ka(f),Ta(f);else break e;uu(f),De(18)}}else f.za=O[1],0<f.za-f.T&&37500>O[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ve(v(f.Za,f),6e3));if(1>=gp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Qr(f,11)}else if((a.K||f.g==a)&&ka(f),!w(d))for(O=f.Da.g.parse(d),d=0;d<O.length;d++){let de=O[d];if(f.T=de[0],de=de[1],f.G==2)if(de[0]=="c"){f.K=de[1],f.ia=de[2];const ht=de[3];ht!=null&&(f.la=ht,f.j.info("VER="+f.la));const ft=de[4];ft!=null&&(f.Aa=ft,f.j.info("SVER="+f.Aa));const Ri=de[5];Ri!=null&&typeof Ri=="number"&&0<Ri&&(y=1.5*Ri,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const dn=a.g;if(dn){const Ra=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ra){var D=y.h;D.g||Ra.indexOf("spdy")==-1&&Ra.indexOf("quic")==-1&&Ra.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(au(D,D.h),D.h=null))}if(y.D){const hu=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;hu&&(y.ya=hu,Te(y.I,y.D,hu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var $=a;if(y.qa=zp(y,y.J?y.ia:null,y.W),$.K){yp(y.h,$);var ye=$,it=y.L;it&&(ye.I=it),ye.B&&(iu(ye),va(ye)),y.g=$}else Mp(y);0<f.i.length&&Ca(f)}else de[0]!="stop"&&de[0]!="close"||Qr(f,7);else f.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Qr(f,7):cu(f):de[0]!="noop"&&f.l&&f.l.ta(de),f.v=0)}}kn(4)}catch{}}var Lx=class{constructor(a,d){this.g=a,this.map=d}};function pp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function gp(a){return a.h?1:a.g?a.g.size:0}function ou(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function au(a,d){a.g?a.g.add(d):a.h=d}function yp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}pp.prototype.cancel=function(){if(this.i=vp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function vp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return k(a.i)}function Mx(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,y=0;y<f;y++)d.push(a[y]);return d}d=[],f=0;for(y in a)d[f++]=a[y];return d}function Fx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const y in a)d[f++]=y;return d}}}function wp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Fx(a),y=Mx(a),O=y.length,D=0;D<O;D++)d.call(void 0,y[D],f&&f[D],a)}var _p=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vx(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),O=null;if(0<=y){var D=a[f].substring(0,y);O=a[f].substring(y+1)}else D=a[f];d(D,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Kr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Kr){this.h=a.h,wa(this,a.j),this.o=a.o,this.g=a.g,_a(this,a.s),this.l=a.l;var d=a.i,f=new Ds;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),xp(this,f),this.m=a.m}else a&&(d=String(a).match(_p))?(this.h=!1,wa(this,d[1]||"",!0),this.o=Os(d[2]||""),this.g=Os(d[3]||"",!0),_a(this,d[4]),this.l=Os(d[5]||"",!0),xp(this,d[6]||"",!0),this.m=Os(d[7]||"")):(this.h=!1,this.i=new Ds(null,this.h))}Kr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(js(d,Ep,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(js(d,Ep,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(js(f,f.charAt(0)=="/"?zx:Bx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",js(f,Wx)),a.join("")};function Bn(a){return new Kr(a)}function wa(a,d,f){a.j=f?Os(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function _a(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function xp(a,d,f){d instanceof Ds?(a.i=d,Hx(a.i,a.h)):(f||(d=js(d,$x)),a.i=new Ds(d,a.h))}function Te(a,d,f){a.i.set(d,f)}function xa(a){return Te(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Os(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function js(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Ux),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ux(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ep=/[#\/\?@]/g,Bx=/[#\?:]/g,zx=/[#\?]/g,$x=/[#\?@]/g,Wx=/#/g;function Ds(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function dr(a){a.g||(a.g=new Map,a.h=0,a.i&&Vx(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ds.prototype,t.add=function(a,d){dr(this),this.i=null,a=ki(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Ip(a,d){dr(a),d=ki(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Sp(a,d){return dr(a),d=ki(a,d),a.g.has(d)}t.forEach=function(a,d){dr(this),this.g.forEach(function(f,y){f.forEach(function(O){a.call(d,O,y,this)},this)},this)},t.na=function(){dr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let y=0;y<d.length;y++){const O=a[y];for(let D=0;D<O.length;D++)f.push(d[y])}return f},t.V=function(a){dr(this);let d=[];if(typeof a=="string")Sp(this,a)&&(d=d.concat(this.g.get(ki(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return dr(this),this.i=null,a=ki(this,a),Sp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Tp(a,d,f){Ip(a,d),0<f.length&&(a.i=null,a.g.set(ki(a,d),k(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var y=d[f];const D=encodeURIComponent(String(y)),$=this.V(y);for(y=0;y<$.length;y++){var O=D;$[y]!==""&&(O+="="+encodeURIComponent(String($[y]))),a.push(O)}}return this.i=a.join("&")};function ki(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Hx(a,d){d&&!a.j&&(dr(a),a.i=null,a.g.forEach(function(f,y){var O=y.toLowerCase();y!=O&&(Ip(this,y),Tp(this,O,f))},a)),a.j=d}function Gx(a,d){const f=new Pt;if(l.Image){const y=new Image;y.onload=T(hr,f,"TestLoadImage: loaded",!0,d,y),y.onerror=T(hr,f,"TestLoadImage: error",!1,d,y),y.onabort=T(hr,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=T(hr,f,"TestLoadImage: timeout",!1,d,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function qx(a,d){const f=new Pt,y=new AbortController,O=setTimeout(()=>{y.abort(),hr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(D=>{clearTimeout(O),D.ok?hr(f,"TestPingServer: ok",!0,d):hr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),hr(f,"TestPingServer: error",!1,d)})}function hr(a,d,f,y,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),y(f)}catch{}}function Kx(){this.g=new z}function Qx(a,d,f){const y=f||"";try{wp(a,function(O,D){let $=O;h(O)&&($=L(O)),d.push(y+D+"="+encodeURIComponent($))})}catch(O){throw d.push(y+"type="+encodeURIComponent("_badmap")),O}}function Ea(a){this.l=a.Ub||null,this.j=a.eb||!1}R(Ea,Q),Ea.prototype.g=function(){return new Ia(this.l,this.j)},Ea.prototype.i=function(a){return function(){return a}}({});function Ia(a,d){Ye.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Ia,Ye),t=Ia.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ms(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ms(this)),this.g&&(this.readyState=3,Ms(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ls(this):Ms(this),this.readyState==3&&Cp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ls(this))},t.Qa=function(a){this.g&&(this.response=a,Ls(this))},t.ga=function(){this.g&&Ls(this)};function Ls(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ms(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ms(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function kp(a){let d="";return B(a,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function lu(a,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=kp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Te(a,d,f))}function Le(a){Ye.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Le,Ye);var Yx=/^https?$/i,Jx=["POST","PUT"];t=Le.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tu.g(),this.v=this.o?G(this.o):G(tu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(D){Ap(this,D);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var O in y)f.set(O,y[O]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const D of y.keys())f.set(D,y.get(D));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),O=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Jx,d,void 0))||y||O||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,$]of f)this.g.setRequestHeader(D,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Np(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Ap(this,D)}};function Ap(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Rp(a),Sa(a)}function Rp(a){a.A||(a.A=!0,rt(a,"complete"),rt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,rt(this,"complete"),rt(this,"abort"),Sa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sa(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bp(this):this.bb())},t.bb=function(){bp(this)};function bp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||zn(a)!=4||a.Z()!=2)){if(a.u&&zn(a)==4)ha(a.Ea,0,a);else if(rt(a,"readystatechange"),zn(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=$===0){var O=String(a.D).match(_p)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),y=!Yx.test(O?O.toLowerCase():"")}f=y}if(f)rt(a,"complete"),rt(a,"success");else{a.m=6;try{var D=2<zn(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",Rp(a)}}finally{Sa(a)}}}}function Sa(a,d){if(a.g){Np(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||rt(a,"ready");try{f.onreadystatechange=y}catch{}}}function Np(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function zn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),H(d)}};function Pp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Xx(a){const d={};a=(a.g&&2<=zn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(w(a[y]))continue;var f=A(a[y]);const O=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=d[O]||[];d[O]=D,D.push(f)}S(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Op(a){this.Aa=0,this.i=[],this.j=new Pt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fs("baseRetryDelayMs",5e3,a),this.cb=Fs("retryDelaySeedMs",1e4,a),this.Wa=Fs("forwardChannelMaxRetries",2,a),this.wa=Fs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new pp(a&&a.concurrentRequestLimit),this.Da=new Kx,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Op.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,y){De(0),this.W=a,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=zp(this,null,this.W),Ca(this)};function cu(a){if(jp(a),a.G==3){var d=a.U++,f=Bn(a.I);if(Te(f,"SID",a.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),Vs(a,f),d=new ur(a,a.j,d),d.L=2,d.v=xa(Bn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=$p(d.j,null),d.g.ea(d.v)),d.F=Date.now(),va(d)}Bp(a)}function Ta(a){a.g&&(du(a),a.g.cancel(),a.g=null)}function jp(a){Ta(a),a.u&&(l.clearTimeout(a.u),a.u=null),ka(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ca(a){if(!mp(a.h)&&!a.s){a.s=!0;var d=a.Ga;bt||ne(),W||(bt(),W=!0),J.add(d,a),a.B=0}}function Zx(a,d){return gp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ve(v(a.Ga,a,d),Up(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new ur(this,this.j,a);let D=this.o;if(this.S&&(D?(D=g(D),I(D,this.S)):D=this.S),this.m!==null||this.O||(O.H=D,D=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Lp(this,O,d),f=Bn(this.I),Te(f,"RID",a),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),Vs(this,f),D&&(this.O?d="headers="+encodeURIComponent(String(kp(D)))+"&"+d:this.m&&lu(f,this.m,D)),au(this.h,O),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),O.T=!0,ru(O,f,null)):ru(O,f,d),this.G=2}}else this.G==3&&(a?Dp(this,a):this.i.length==0||mp(this.h)||Dp(this))};function Dp(a,d){var f;d?f=d.l:f=a.U++;const y=Bn(a.I);Te(y,"SID",a.K),Te(y,"RID",f),Te(y,"AID",a.T),Vs(a,y),a.m&&a.o&&lu(y,a.m,a.o),f=new ur(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Lp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),au(a.h,f),ru(f,y,d)}function Vs(a,d){a.H&&B(a.H,function(f,y){Te(d,y,f)}),a.l&&wp({},function(f,y){Te(d,y,f)})}function Lp(a,d,f){f=Math.min(a.i.length,f);var y=a.l?v(a.l.Na,a.l,a):null;e:{var O=a.i;let D=-1;for(;;){const $=["count="+f];D==-1?0<f?(D=O[0].g,$.push("ofs="+D)):D=0:$.push("ofs="+D);let ye=!0;for(let it=0;it<f;it++){let de=O[it].g;const ht=O[it].map;if(de-=D,0>de)D=Math.max(0,O[it].g-100),ye=!1;else try{Qx(ht,$,"req"+de+"_")}catch{y&&y(ht)}}if(ye){y=$.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,y}function Mp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;bt||ne(),W||(bt(),W=!0),J.add(d,a),a.v=0}}function uu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ve(v(a.Fa,a),Up(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Fp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ve(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),Ta(this),Fp(this))};function du(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Fp(a){a.g=new ur(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Bn(a.qa);Te(d,"RID","rpc"),Te(d,"SID",a.K),Te(d,"AID",a.T),Te(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Te(d,"TO",a.ja),Te(d,"TYPE","xmlhttp"),Vs(a,d),a.m&&a.o&&lu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=xa(Bn(d)),f.m=null,f.P=!0,dp(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Ta(this),uu(this),De(19))};function ka(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Vp(a,d){var f=null;if(a.g==d){ka(a),du(a),a.g=null;var y=2}else if(ou(a.h,d))f=d.D,yp(a.h,d),y=1;else return;if(a.G!=0){if(d.o)if(y==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var O=a.B;y=pe(),rt(y,new dt(y,f)),Ca(a)}else Mp(a);else if(O=d.s,O==3||O==0&&0<d.X||!(y==1&&Zx(a,d)||y==2&&uu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),O){case 1:Qr(a,5);break;case 4:Qr(a,10);break;case 3:Qr(a,6);break;default:Qr(a,2)}}}function Up(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Qr(a,d){if(a.j.info("Error code "+d),d==2){var f=v(a.fb,a),y=a.Xa;const O=!y;y=new Kr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||wa(y,"https"),xa(y),O?Gx(y.toString(),f):qx(y.toString(),f)}else De(2);a.G=0,a.l&&a.l.sa(d),Bp(a),jp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function Bp(a){if(a.G=0,a.ka=[],a.l){const d=vp(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ka,d),P(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function zp(a,d,f){var y=f instanceof Kr?Bn(f):new Kr(f);if(y.g!="")d&&(y.g=d+"."+y.g),_a(y,y.s);else{var O=l.location;y=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var D=new Kr(null);y&&wa(D,y),d&&(D.g=d),O&&_a(D,O),f&&(D.l=f),y=D}return f=a.D,d=a.ya,f&&d&&Te(y,f,d),Te(y,"VER",a.la),Vs(a,y),y}function $p(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Le(new Ea({eb:f})):new Le(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wp(){}t=Wp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Aa(){}Aa.prototype.g=function(a,d){return new zt(a,d)};function zt(a,d){Ye.call(this),this.g=new Op(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ai(this)}R(zt,Ye),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){cu(this.g)},zt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=L(a),a=f);d.i.push(new Lx(d.Ya++,a)),d.G==3&&Ca(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,cu(this.g),delete this.g,zt.aa.N.call(this)};function Hp(a){Fe.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}R(Hp,Fe);function Gp(){Je.call(this),this.status=1}R(Gp,Je);function Ai(a){this.g=a}R(Ai,Wp),Ai.prototype.ua=function(){rt(this.g,"a")},Ai.prototype.ta=function(a){rt(this.g,new Hp(a))},Ai.prototype.sa=function(a){rt(this.g,new Gp)},Ai.prototype.ra=function(){rt(this.g,"b")},Aa.prototype.createWebChannel=Aa.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Uw=function(){return new Aa},Vw=function(){return pe()},Fw=_e,rh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ga.NO_ERROR=0,ga.TIMEOUT=8,ga.HTTP_ERROR=6,yl=ga,lp.COMPLETE="complete",Mw=lp,me.EventType=we,we.OPEN="a",we.CLOSE="b",we.ERROR="c",we.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,to=me,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,Lw=Le}).apply(typeof Ka<"u"?Ka:typeof self<"u"?self:typeof window<"u"?window:{});const Ng="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _s="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Pc("@firebase/firestore");function Ks(){return gi.logLevel}function K(t,...e){if(gi.logLevel<=ae.DEBUG){const n=e.map(Nf);gi.debug(`Firestore (${_s}): ${t}`,...n)}}function yi(t,...e){if(gi.logLevel<=ae.ERROR){const n=e.map(Nf);gi.error(`Firestore (${_s}): ${t}`,...n)}}function nc(t,...e){if(gi.logLevel<=ae.WARN){const n=e.map(Nf);gi.warn(`Firestore (${_s}): ${t}`,...n)}}function Nf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${_s}) INTERNAL ASSERTION FAILED: `+t;throw yi(e),new Error(e)}function Be(t,e){t||le()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Tn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class mA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gA{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ai,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ai)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string"),new Bw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new yt(e)}}class yA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _A{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Be(this.o===void 0);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new wA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=xA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function cs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new nt(0,0))}static max(){return new Ne(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $e extends Vo{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const EA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Vo{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return EA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Z(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Z(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Z(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie($e.fromString(e))}static fromName(e){return new ie($e.fromString(e).popFirst(5))}static empty(){return new ie($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new $e(e.slice()))}}function IA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new Fr(i,ie.empty(),e)}function SA(t){return new Fr(t.readTime,t.key,-1)}class Fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fr(Ne.min(),ie.empty(),-1)}static max(){return new Fr(Ne.max(),ie.empty(),-1)}}function TA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $w(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==CA)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function AA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ww.oe=-1;function Pf(t){return t==null}function rc(t){return t===0&&1/t==-1/0}function RA(t){return typeof t=="number"&&Number.isInteger(t)&&!rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new Ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qa(this.root,e,this.comparator,!0)}}class Qa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ot.RED,this.left=i??ot.EMPTY,this.right=s??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ot(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ot.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Og(this.data.getIterator())}getIteratorFrom(e){return new Og(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class Og{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new _t(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bA("Invalid base64 string: "+s):s}}(e);return new Mn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Mn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const NA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(t){if(Be(!!t),typeof t=="string"){let e=0;const n=NA.exec(t);if(Be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Uo(t){return typeof t=="string"?Mn.fromBase64String(t):Mn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gw(t){const e=t.mapValue.fields.__previous_value__;return Of(e)?Gw(e):e}function ic(t){const e=vi(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r,i,s,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class sc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya={mapValue:{}};function us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Of(t)?4:jA(t)?9007199254740991:OA(t)?10:11:le()}function Fn(t,e){if(t===e)return!0;const n=us(t);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ic(t).isEqual(ic(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=vi(i.timestampValue),l=vi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Uo(i.bytesValue).isEqual(Uo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return at(i.geoPointValue.latitude)===at(s.geoPointValue.latitude)&&at(i.geoPointValue.longitude)===at(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return at(i.integerValue)===at(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=at(i.doubleValue),l=at(s.doubleValue);return o===l?rc(o)===rc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return cs(t.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Pg(o)!==Pg(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Fn(o[c],l[c])))return!1;return!0}(t,e);default:return le()}}function Bo(t,e){return(t.values||[]).find(n=>Fn(n,e))!==void 0}function ds(t,e){if(t===e)return 0;const n=us(t),r=us(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=at(s.integerValue||s.doubleValue),c=at(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return jg(t.timestampValue,e.timestampValue);case 4:return jg(ic(t),ic(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Uo(s),c=Uo(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=ve(l[h],c[h]);if(p!==0)return p}return ve(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ve(at(s.latitude),at(o.latitude));return l!==0?l:ve(at(s.longitude),at(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,h,p;const m=s.fields||{},v=o.fields||{},T=(l=m.value)===null||l===void 0?void 0:l.arrayValue,R=(c=v.value)===null||c===void 0?void 0:c.arrayValue,k=ve(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:Dg(T,R)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ya.mapValue&&o===Ya.mapValue)return 0;if(s===Ya.mapValue)return 1;if(o===Ya.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const v=ve(c[m],p[m]);if(v!==0)return v;const T=ds(l[c[m]],h[p[m]]);if(T!==0)return T}return ve(c.length,p.length)}(t.mapValue,e.mapValue);default:throw le()}}function jg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=vi(t),r=vi(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function Dg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ds(n[i],r[i]);if(s)return s}return ve(n.length,r.length)}function hs(t){return ih(t)}function ih(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Uo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ih(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ih(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function sh(t){return!!t&&"integerValue"in t}function jf(t){return!!t&&"arrayValue"in t}function vl(t){return!!t&&"mapValue"in t}function OA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function po(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return oa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=po(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=po(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=po(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=po(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());vl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){oa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new vn(po(this.value))}}function qw(t){const e=[];return oa(t.fields,(n,r)=>{const i=new lt([n]);if(vl(r)){const s=qw(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new yn(e,0,Ne.min(),Ne.min(),Ne.min(),vn.empty(),0)}static newFoundDocument(e,n,r,i){return new yn(e,1,n,Ne.min(),r,i,0)}static newNoDocument(e,n){return new yn(e,2,n,Ne.min(),Ne.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new yn(e,3,n,Ne.min(),Ne.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.position=e,this.inclusive=n}}function Lg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=ds(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n="asc"){this.field=e,this.dir=n}}function DA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{}class et extends Kw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MA(e,n,r):n==="array-contains"?new UA(e,r):n==="in"?new BA(e,r):n==="not-in"?new zA(e,r):n==="array-contains-any"?new $A(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FA(e,r):new VA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ds(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(ds(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vr extends Kw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Vr(e,n)}matches(e){return Qw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qw(t){return t.op==="and"}function Yw(t){return LA(t)&&Qw(t)}function LA(t){for(const e of t.filters)if(e instanceof Vr)return!1;return!0}function oh(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+hs(t.value);if(Yw(t))return t.filters.map(e=>oh(e)).join(",");{const e=t.filters.map(n=>oh(n)).join(",");return`${t.op}(${e})`}}function Jw(t,e){return t instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(t,e):t instanceof Vr?function(r,i){return i instanceof Vr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&Jw(o,i.filters[l]),!0):!1}(t,e):void le()}function Xw(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${hs(n.value)}`}(t):t instanceof Vr?function(n){return n.op.toString()+" {"+n.getFilters().map(Xw).join(" ,")+"}"}(t):"Filter"}class MA extends et{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class FA extends et{constructor(e,n){super(e,"in",n),this.keys=Zw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VA extends et{constructor(e,n){super(e,"not-in",n),this.keys=Zw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Zw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class UA extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jf(n)&&Bo(n.arrayValue,this.value)}}class BA extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bo(this.value.arrayValue,n)}}class zA extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bo(this.value.arrayValue,n)}}class $A extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Fg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new WA(t,e,n,r,i,s,o)}function Df(t){const e=Ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>oh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hs(r)).join(",")),e.ue=n}return e.ue}function Lf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Jw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mg(t.startAt,e.startAt)&&Mg(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HA(t,e,n,r,i,s,o,l){return new Mc(t,e,n,r,i,s,o,l)}function GA(t){return new Mc(t)}function Vg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qA(t){return t.collectionGroup!==null}function mo(t){const e=Ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new _t(lt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ac(s,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new ac(lt.keyField(),r))}return e.ce}function li(t){const e=Ee(t);return e.le||(e.le=KA(e,mo(t))),e.le}function KA(t,e){if(t.limitType==="F")return Fg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ac(i.field,s)});const n=t.endAt?new oc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new oc(t.startAt.position,t.startAt.inclusive):null;return Fg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ah(t,e,n){return new Mc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function e_(t,e){return Lf(li(t),li(e))&&t.limitType===e.limitType}function t_(t){return`${Df(li(t))}|lt:${t.limitType}`}function Qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Xw(i)).join(", ")}]`),Pf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>hs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>hs(i)).join(",")),`Target(${r})`}(li(t))}; limitType=${t.limitType})`}function Mf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of mo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const h=Lg(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,mo(r),i)||r.endAt&&!function(o,l,c){const h=Lg(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,mo(r),i))}(t,e)}function QA(t){return(e,n)=>{let r=!1;for(const i of mo(t)){const s=YA(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function YA(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,o,l){const c=o.data.field(s),h=l.data.field(s);return c!==null&&h!==null?ds(c,h):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Hw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new Ut(ie.comparator);function lc(){return JA}const n_=new Ut(ie.comparator);function Ja(...t){let e=n_;for(const n of t)e=e.insert(n.key,n);return e}function r_(t){let e=n_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ri(){return go()}function i_(){return go()}function go(){return new xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const XA=new Ut(ie.comparator),ZA=new _t(ie.comparator);function wt(...t){let e=ZA;for(const n of t)e=e.add(n);return e}const eR=new _t(ve);function tR(){return eR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function s_(t){return{integerValue:""+t}}function nR(t,e){return RA(e)?s_(e):Ff(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this._=void 0}}function rR(t,e,n){return t instanceof cc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Of(s)&&(s=Gw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof zo?a_(t,e):t instanceof $o?l_(t,e):function(i,s){const o=o_(i,s),l=Ug(o)+Ug(i.Pe);return sh(o)&&sh(i.Pe)?s_(l):Ff(i.serializer,l)}(t,e)}function iR(t,e,n){return t instanceof zo?a_(t,e):t instanceof $o?l_(t,e):n}function o_(t,e){return t instanceof uc?function(r){return sh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class cc extends Fc{}class zo extends Fc{constructor(e){super(),this.elements=e}}function a_(t,e){const n=c_(e);for(const r of t.elements)n.some(i=>Fn(i,r))||n.push(r);return{arrayValue:{values:n}}}class $o extends Fc{constructor(e){super(),this.elements=e}}function l_(t,e){let n=c_(e);for(const r of t.elements)n=n.filter(i=>!Fn(i,r));return{arrayValue:{values:n}}}class uc extends Fc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ug(t){return at(t.integerValue||t.doubleValue)}function c_(t){return jf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function sR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof zo&&i instanceof zo||r instanceof $o&&i instanceof $o?cs(r.elements,i.elements,Fn):r instanceof uc&&i instanceof uc?Fn(r.Pe,i.Pe):r instanceof cc&&i instanceof cc}(t.transform,e.transform)}class oR{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vc{}function u_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new h_(t.key,Zn.none()):new aa(t.key,t.data,Zn.none());{const n=t.data,r=vn.empty();let i=new _t(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ti(t.key,r,new wn(i.toArray()),Zn.none())}}function aR(t,e,n){t instanceof aa?function(i,s,o){const l=i.value.clone(),c=zg(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ti?function(i,s,o){if(!wl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=zg(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(d_(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function yo(t,e,n,r){return t instanceof aa?function(s,o,l,c){if(!wl(s.precondition,o))return l;const h=s.value.clone(),p=$g(s.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ti?function(s,o,l,c){if(!wl(s.precondition,o))return l;const h=$g(s.fieldTransforms,c,o),p=o.data;return p.setAll(d_(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return wl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function lR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=o_(r.transform,i||null);s!=null&&(n===null&&(n=vn.empty()),n.set(r.field,s))}return n||null}function Bg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cs(r,i,(s,o)=>sR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class aa extends Vc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ti extends Vc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function d_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zg(t,e,n){const r=new Map;Be(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,iR(o,l,n[i]))}return r}function $g(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,rR(s,o,e))}return r}class h_ extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cR extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=yo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=yo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=i_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const c=u_(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),wt())}isEqual(e){return this.batchId===e.batchId&&cs(this.mutations,e.mutations,(n,r)=>Bg(n,r))&&cs(this.baseMutations,e.baseMutations,(n,r)=>Bg(n,r))}}class Vf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Be(e.mutations.length===r.length);let i=function(){return XA}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Vf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,ce;function hR(t){switch(t){default:return le();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function fR(t){if(t===void 0)return yi("GRPC error has no .code"),U.UNKNOWN;switch(t){case ze.OK:return U.OK;case ze.CANCELLED:return U.CANCELLED;case ze.UNKNOWN:return U.UNKNOWN;case ze.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ze.INTERNAL:return U.INTERNAL;case ze.UNAVAILABLE:return U.UNAVAILABLE;case ze.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ze.NOT_FOUND:return U.NOT_FOUND;case ze.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ze.ABORTED:return U.ABORTED;case ze.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ze.DATA_LOSS:return U.DATA_LOSS;default:return le()}}(ce=ze||(ze={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Dw([4294967295,4294967295],0);class pR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gR(t,e){return lh(t,e.toTimestamp())}function Zi(t){return Be(!!t),Ne.fromTimestamp(function(n){const r=vi(n);return new nt(r.seconds,r.nanos)}(t))}function f_(t,e){return ch(t,e).canonicalString()}function ch(t,e){const n=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yR(t){const e=$e.fromString(t);return Be(TR(e)),e}function uh(t,e){return f_(t.databaseId,e.path)}function vR(t){const e=yR(t);return e.length===4?$e.emptyPath():_R(e)}function wR(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _R(t){return Be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Wg(t,e,n){return{name:uh(t,e),fields:n.value.mapValue.fields}}function xR(t,e){let n;if(e instanceof aa)n={update:Wg(t,e.key,e.value)};else if(e instanceof h_)n={delete:uh(t,e.key)};else if(e instanceof Ti)n={update:Wg(t,e.key,e.data),updateMask:SR(e.fieldMask)};else{if(!(e instanceof cR))return le();n={verify:uh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof cc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof $o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof uc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:gR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function ER(t,e){return t&&t.length>0?(Be(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Zi(i.updateTime):Zi(s);return o.isEqual(Ne.min())&&(o=Zi(s)),new oR(o,i.transformResults||[])}(n,e))):[]}function IR(t){let e=vR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Be(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const v=p_(m);return v instanceof Vr&&Yw(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(v=>function(R){return new ac(Ni(R.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,Pf(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(m){const v=!!m.before,T=m.values||[];return new oc(T,v)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const v=!m.before,T=m.values||[];return new oc(T,v)}(n.endAt)),HA(e,i,o,s,l,"F",c,h)}function p_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ni(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ni(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ni(n.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ni(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return et.create(Ni(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vr.create(n.compositeFilter.filters.map(r=>p_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function Ni(t){return lt.fromServerFormat(t.fieldPath)}function SR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.ct=e}}function kR(t){const e=IR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ah(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.un=new RR}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Fr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class RR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new _t($e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _t($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fs(0)}static kn(){return new fs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.changes=new xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&yo(r.mutation,i,wn.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,wt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=wt()){const i=ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ja();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,wt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=lc();const o=go(),l=function(){return go()}();return n.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Ti)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),yo(p.mutation,h,p.mutation.getFieldMask(),nt.now())):o.set(h.key,wn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new NR(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=go();let i=new Ut((o,l)=>o-l),s=wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||wn.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(i.get(l.batchId)||wt()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=i_();p.forEach(v=>{if(!s.has(v)){const T=u_(n.get(v),r.get(v));T!==null&&m.set(v,T),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(ri());let l=-1,c=s;return o.next(h=>F.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{c=c.insert(p,v)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,wt())).next(p=>({batchId:l,changes:r_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=Ja();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ja();return this.indexManager.getCollectionParents(e,s).next(l=>F.forEach(l,c=>{const h=function(m,v){return new Mc(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,yn.newInvalidDocument(p)))});let l=Ja();return o.forEach((c,h)=>{const p=s.get(c);p!==void 0&&yo(p.mutation,h,wn.empty(),nt.now()),Mf(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zi(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:kR(i.bundledQuery),readTime:Zi(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.overlays=new Ut(ie.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ri();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=ri(),s=n.length+1,o=new ie(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ut((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=ri(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=ri(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return F.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dR(n,r));let s=this.Ir.get(n);s===void 0&&(s=wt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this.Tr=new _t(Xe.Er),this.dr=new _t(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Xe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new $e([])),r=new Xe(n,e),i=new Xe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new $e([])),r=new Xe(n,e),i=new Xe(n,e+1);let s=wt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Xe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new _t(Xe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uR(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Xe(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(ve);return n.forEach(i=>{const s=new Xe(i,0),o=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const o=new Xe(new ie(s),0);let l=new _t(ve);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new Xe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Xe(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.Mr=e,this.docs=function(){return new Ut(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(n))}getEntries(e,n){let r=lc();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yn.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=lc();const o=n.path,l=new ie(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||TA(SA(p),r)<=0||(i.has(p.key)||Mf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FR(this)}getSize(e){return F.resolve(this.size)}}class FR extends bR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.persistence=e,this.Nr=new xs(n=>Df(n),Lf),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Uf,this.targetCount=0,this.kr=fs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ww(0),this.Kr=!1,this.Kr=!0,this.$r=new DR,this.referenceDelegate=e(this),this.Ur=new VR(this),this.indexManager=new AR,this.remoteDocumentCache=function(i){return new MR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new CR(n),this.Gr=new OR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new LR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new BR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class BR extends kA{constructor(e){super(),this.currentSequenceNumber=e}}class Bf{constructor(e){this.persistence=e,this.Jr=new Uf,this.Yr=null}static Zr(e){return new Bf(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=wt(),i=wt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new zf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qS()?8:AA(Et())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new zR;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ks()<=ae.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Ks()<=ae.DEBUG&&K("QueryEngine","Query:",Qs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ks()<=ae.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(n))):F.resolve())}Yi(e,n){if(Vg(n))return F.resolve(null);let r=li(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ah(n,null,"F"),r=li(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=wt(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,ah(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,i){return Vg(n)||i.isEqual(Ne.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(Ks()<=ae.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qs(n)),this.rs(e,o,n,IA(i,-1)).next(l=>l))})}ts(e,n){let r=new _t(QA(e));return n.forEach((i,s)=>{Mf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ks()<=ae.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Qs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ut(ve),this._s=new xs(s=>Df(s),Lf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function HR(t,e,n,r){return new WR(t,e,n,r)}async function m_(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=wt();for(const h of i){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function GR(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,v=m.keys();let T=F.resolve();return v.forEach(R=>{T=T.next(()=>p.getEntry(c,R)).next(k=>{const P=h.docVersions.get(R);Be(P!==null),k.version.compareTo(P)<0&&(m.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),p.addEntry(k)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=wt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qR(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function KR(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class Hg{constructor(){this.activeTargetIds=tR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QR{constructor(){this.so=new Hg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Hg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa=null;function Gu(){return Xa===null?Xa=function(){return 268435456+Math.round(2147483648*Math.random())}():Xa++,"0x"+Xa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class ZR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Gu(),c=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,c,h,i).then(p=>(K("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw nc("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",i),p})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_s}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=JR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Gu();return new Promise((o,l)=>{const c=new Lw;c.setWithCredentials(!0),c.listenOnce(Mw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case yl.NO_ERROR:const p=c.getResponseJson();K(gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case yl.TIMEOUT:K(gt,`RPC '${e}' ${s} timed out`),l(new Z(U.DEADLINE_EXCEEDED,"Request time out"));break;case yl.HTTP_ERROR:const m=c.getStatus();if(K(gt,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v==null?void 0:v.error;if(T&&T.status&&T.message){const R=function(P){const E=P.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(E)>=0?E:U.UNKNOWN}(T.status);l(new Z(R,T.message))}else l(new Z(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Z(U.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{K(gt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);K(gt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Gu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Uw(),l=Vw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");K(gt,`Creating RPC '${e}' stream ${i}: ${p}`,c);const m=o.createWebChannel(p,c);let v=!1,T=!1;const R=new XR({Io:P=>{T?K(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(v||(K(gt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),K(gt,`RPC '${e}' stream ${i} sending:`,P),m.send(P))},To:()=>m.close()}),k=(P,E,w)=>{P.listen(E,x=>{try{w(x)}catch(j){setTimeout(()=>{throw j},0)}})};return k(m,to.EventType.OPEN,()=>{T||(K(gt,`RPC '${e}' stream ${i} transport opened.`),R.yo())}),k(m,to.EventType.CLOSE,()=>{T||(T=!0,K(gt,`RPC '${e}' stream ${i} transport closed`),R.So())}),k(m,to.EventType.ERROR,P=>{T||(T=!0,nc(gt,`RPC '${e}' stream ${i} transport errored:`,P),R.So(new Z(U.UNAVAILABLE,"The operation could not be completed")))}),k(m,to.EventType.MESSAGE,P=>{var E;if(!T){const w=P.data[0];Be(!!w);const x=w,j=x.error||((E=x[0])===null||E===void 0?void 0:E.error);if(j){K(gt,`RPC '${e}' stream ${i} received error:`,j);const M=j.status;let B=function(_){const I=ze[_];if(I!==void 0)return fR(I)}(M),S=j.message;B===void 0&&(B=U.INTERNAL,S="Unknown error status: "+M+" with message "+j.message),T=!0,R.So(new Z(B,S)),m.close()}else K(gt,`RPC '${e}' stream ${i} received:`,w),R.bo(w)}}),k(l,Fw.STAT_EVENT,P=>{P.stat===rh.PROXY?K(gt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===rh.NOPROXY&&K(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){return new pR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,r,i,s,o,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new g_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(yi(n.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Z(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tb extends eb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ER(e.writeResults,e.commitTime),r=Zi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=wR(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>xR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Z(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ch(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(U.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,ch(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class rb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yi(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ca(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=Ee(c);h.L_.add(4),await la(h),h.q_.set("Unknown"),h.L_.delete(4),await Bc(h)}(this))})}),this.q_=new rb(r,i)}}async function Bc(t){if(ca(t))for(const e of t.B_)await e(!0)}async function la(t){for(const e of t.B_)await e(!1)}function ca(t){return Ee(t).L_.size===0}async function y_(t,e,n){if(!Lc(e))throw e;t.L_.add(1),await la(t),t.q_.set("Offline"),n||(n=()=>qR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Bc(t)})}function v_(t,e){return e().catch(n=>y_(t,n,e))}async function zc(t){const e=Ee(t),n=Ur(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sb(e);)try{const i=await KR(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,ob(e,i)}catch(i){await y_(e,i)}w_(e)&&__(e)}function sb(t){return ca(t)&&t.O_.length<10}function ob(t,e){t.O_.push(e);const n=Ur(t);n.r_()&&n.V_&&n.m_(e.mutations)}function w_(t){return ca(t)&&!Ur(t).n_()&&t.O_.length>0}function __(t){Ur(t).start()}async function ab(t){Ur(t).p_()}async function lb(t){const e=Ur(t);for(const n of t.O_)e.m_(n.mutations)}async function cb(t,e,n){const r=t.O_.shift(),i=Vf.from(r,e,n);await v_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await zc(t)}async function ub(t,e){e&&Ur(t).V_&&await async function(r,i){if(function(o){return hR(o)&&o!==U.ABORTED}(i.code)){const s=r.O_.shift();Ur(r).s_(),await v_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await zc(r)}}(t,e),w_(t)&&__(t)}async function qg(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=ca(n);n.L_.add(3),await la(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bc(n)}async function db(t,e){const n=Ee(t);e?(n.L_.delete(2),await Bc(n)):e||(n.L_.add(2),await la(n),n.q_.set("Unknown"))}function Ur(t){return t.U_||(t.U_=function(n,r,i){const s=Ee(n);return s.w_(),new tb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ab.bind(null,t),mo:ub.bind(null,t),f_:lb.bind(null,t),g_:cb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await zc(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new $f(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x_(t,e){if(yi("AsyncQueue",`${e}: ${t}`),Lc(t))return new Z(U.UNAVAILABLE,`${e}: ${t}`);throw t}class hb{constructor(){this.queries=Kg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ee(n),s=i.queries;i.queries=Kg(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new Z(U.ABORTED,"Firestore shutting down"))}}function Kg(){return new xs(t=>t_(t),e_)}function fb(t){t.Y_.forEach(e=>{e.next()})}var Qg,Yg;(Yg=Qg||(Qg={})).ea="default",Yg.Cache="cache";class pb{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xs(l=>t_(l),e_),this.Ma=new Map,this.xa=new Set,this.Oa=new Ut(ie.comparator),this.Na=new Map,this.La=new Uf,this.Ba={},this.ka=new Map,this.qa=fs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function mb(t,e,n){const r=wb(t);try{const i=await function(o,l){const c=Ee(o),h=nt.now(),p=l.reduce((T,R)=>T.add(R.key),wt());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let R=lc(),k=wt();return c.cs.getEntries(T,p).next(P=>{R=P,R.forEach((E,w)=>{w.isValidDocument()||(k=k.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,R)).next(P=>{m=P;const E=[];for(const w of l){const x=lR(w,m.get(w.key).overlayedDocument);x!=null&&E.push(new Ti(w.key,x,qw(x.value.mapValue),Zn.exists(!0)))}return c.mutationQueue.addMutationBatch(T,h,E,l)}).next(P=>{v=P;const E=P.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(T,P.batchId,E)})}).then(()=>({batchId:v.batchId,changes:r_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ut(ve)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await $c(r,i.changes),await zc(r.remoteStore)}catch(i){const s=x_(i,"Failed to persist write");n.reject(s)}}function Jg(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=Ee(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const v of m.j_)v.Z_(l)&&(h=!0)}),h&&fb(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gb(t,e){const n=Ee(t),r=e.batch.batchId;try{const i=await GR(n.localStore,e);I_(n,r,null),E_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $c(n,i)}catch(i){await $w(i)}}async function yb(t,e,n){const r=Ee(t);try{const i=await function(o,l){const c=Ee(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(Be(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);I_(r,e,n),E_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $c(r,i)}catch(i){await $w(i)}}function E_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function I_(t,e,n){const r=Ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}async function $c(t,e,n){const r=Ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=void 0)===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=zf.Wi(c.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,h){const p=Ee(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(h,v=>F.forEach(v.$i,T=>p.persistence.referenceDelegate.addReference(m,v.targetId,T)).next(()=>F.forEach(v.Ui,T=>p.persistence.referenceDelegate.removeReference(m,v.targetId,T)))))}catch(m){if(!Lc(m))throw m;K("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const T=p.os.get(v),R=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(R);p.os=p.os.insert(v,k)}}}(r.localStore,s))}async function vb(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await m_(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new Z(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $c(n,r.hs)}}function wb(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yb.bind(null,e),e}class dc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return HR(this.persistence,new $R,e.initialUser,this.serializer)}Ga(e){return new UR(Bf.Zr,this.serializer)}Wa(e){return new QR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dc.provider={build:()=>new dc};class dh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vb.bind(null,this.syncEngine),await db(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hb}()}createDatastore(e){const n=Uc(e.databaseInfo.databaseId),r=function(s){return new ZR(s)}(e.databaseInfo);return function(s,o,l,c){return new nb(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new ib(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Jg(this.syncEngine,n,0),function(){return Gg.D()?new Gg:new YR}())}createSyncEngine(e,n){return function(i,s,o,l,c,h,p){const m=new pb(i,s,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ee(i);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await la(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}dh.provider={build:()=>new dh};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=zw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=x_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ku(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await m_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xb(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>qg(e.remoteStore,i)),t._onlineComponents=e}async function xb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ku(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;nc("Error using user provided cache. Falling back to memory cache: "+n),await Ku(t,new dc)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Ku(t,new dc);return t._offlineComponents}async function Eb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Xg(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Xg(t,new dh))),t._onlineComponents}function Ib(t){return Eb(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t,e,n){if(!n)throw new Z(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Tb(t,e,n,r){if(e===!0&&r===!0)throw new Z(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ey(t){if(!ie.isDocumentKey(t))throw new Z(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function hh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wf(t);throw new Z(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Tb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ty({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ty(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pA;switch(r.type){case"firstParty":return new vA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Zg.get(n);r&&(K("ComponentProvider","Removing Datastore"),Zg.delete(n),r.terminate())}(this),Promise.resolve()}}function Cb(t,e,n,r={}){var i;const s=(t=hh(t,Hf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&nc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=yt.MOCK_USER;else{l=BS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Z(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yt(h)}t._authCredentials=new mA(new Bw(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gf(this.firestore,e,this._query)}}class er{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}}class Wo extends Gf{constructor(e,n,r){super(e,n,GA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new ie(e))}withConverter(e){return new Wo(this.firestore,e,this._path)}}function kb(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=zw.newId()),Sb("doc","path",e),t instanceof Hf){const r=$e.fromString(e,...n);return ey(r),new er(t,null,new ie(r))}{if(!(t instanceof er||t instanceof Wo))throw new Z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return ey(r),new er(t.firestore,t instanceof Wo?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new g_(this,"async_queue_retry"),this.Vu=()=>{const r=qu();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=qu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=qu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ai;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Lc(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw yi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=$f.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&le()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class T_ extends Hf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ny,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ny(e),this._firestoreClient=void 0,await e}}}function Ab(t,e){const n=typeof t=="object"?t:wf(),r=typeof t=="string"?t:"(default)",i=Si(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=VS("firestore");s&&Cb(i,...s)}return i}function Rb(t){if(t._terminated)throw new Z(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bb(t),t._firestoreClient}function bb(t){var e,n,r;const i=t._freezeSettings(),s=function(l,c,h,p){return new PA(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,S_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new _b(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ho(Mn.fromBase64String(e))}catch(n){throw new Z(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ho(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=/^__.*__$/;class Pb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new aa(e,this.data,n,this.fieldTransforms)}}function b_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class qf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(b_(this.Cu)&&Nb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Ob{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uc(e)}Qu(e,n,r,i=!1){return new qf({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jb(t){const e=t._freezeSettings(),n=Uc(t._databaseId);return new Ob(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Db(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);j_("Data must be an object, but it was:",o,r);const l=P_(r,o);let c,h;if(s.merge)c=new wn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const v=Lb(e,m,n);if(!o.contains(v))throw new Z(U.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Vb(p,v)||p.push(v)}c=new wn(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new Pb(new vn(l),c,h)}function N_(t,e){if(O_(t=Vt(t)))return j_("Unsupported field value:",e,t),P_(t,e);if(t instanceof k_)return function(r,i){if(!b_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=N_(l,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:lh(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lh(i.serializer,s)}}if(r instanceof A_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ho)return{bytesValue:mR(i.serializer,r._byteString)};if(r instanceof er){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:f_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof R_)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Ff(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Wf(r)}`)}(t,e)}function P_(t,e){const n={};return Hw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(t,(r,i)=>{const s=N_(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function O_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof A_||t instanceof Ho||t instanceof er||t instanceof k_||t instanceof R_)}function j_(t,e,n){if(!O_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Wf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Lb(t,e,n){if((e=Vt(e))instanceof C_)return e._internalPath;if(typeof e=="string")return Fb(t,e);throw hc("Field path arguments must be of type string or ",t,!1,void 0,n)}const Mb=new RegExp("[~\\*/\\[\\]]");function Fb(t,e,n){if(e.search(Mb)>=0)throw hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new C_(...e.split("."))._internalPath}catch{throw hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Z(U.INVALID_ARGUMENT,l+t+c)}function Vb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function Bb(t,e,n){t=hh(t,er);const r=hh(t.firestore,T_),i=Ub(t.converter,e,n);return zb(r,[Db(jb(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zn.none())])}function zb(t,e){return function(r,i){const s=new ai;return r.asyncQueue.enqueueAndForget(async()=>mb(await Ib(r),i,s)),s.promise}(Rb(t),e)}(function(e,n=!0){(function(i){_s=i})(ys),Dn(new Sn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new T_(new gA(r.getProvider("auth-internal")),new _A(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Z(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sc(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),an(Ng,"4.7.3",e),an(Ng,"4.7.3","esm2017")})();const D_="@firebase/installations",Kf="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=1e4,M_=`w:${Kf}`,F_="FIS_v2",$b="https://firebaseinstallations.googleapis.com/v1",Wb=60*60*1e3,Hb="installations",Gb="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wi=new Ii(Hb,Gb,qb);function V_(t){return t instanceof Tn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_({projectId:t}){return`${$b}/projects/${t}/installations`}function B_(t){return{token:t.token,requestStatus:2,expiresIn:Qb(t.expiresIn),creationTime:Date.now()}}async function z_(t,e){const r=(await e.json()).error;return wi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function $_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Kb(t,{refreshToken:e}){const n=$_(t);return n.append("Authorization",Yb(e)),n}async function W_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Qb(t){return Number(t.replace("s","000"))}function Yb(t){return`${F_} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=U_(t),i=$_(t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:n,authVersion:F_,appId:t.appId,sdkVersion:M_},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await W_(()=>fetch(r,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:B_(h.authToken)}}else throw await z_("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=/^[cdef][\w-]{21}$/,fh="";function eN(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=tN(t);return Zb.test(n)?n:fh}catch{return fh}}function tN(t){return Xb(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=new Map;function q_(t,e){const n=Wc(t);K_(n,e),nN(n,e)}function K_(t,e){const n=G_.get(t);if(n)for(const r of n)r(e)}function nN(t,e){const n=rN();n&&n.postMessage({key:t,fid:e}),iN()}let ii=null;function rN(){return!ii&&"BroadcastChannel"in self&&(ii=new BroadcastChannel("[Firebase] FID Change"),ii.onmessage=t=>{K_(t.data.key,t.data.fid)}),ii}function iN(){G_.size===0&&ii&&(ii.close(),ii=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="firebase-installations-database",oN=1,_i="firebase-installations-store";let Qu=null;function Qf(){return Qu||(Qu=J0(sN,oN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_i)}}})),Qu}async function fc(t,e){const n=Wc(t),i=(await Qf()).transaction(_i,"readwrite"),s=i.objectStore(_i),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&q_(t,e.fid),e}async function Q_(t){const e=Wc(t),r=(await Qf()).transaction(_i,"readwrite");await r.objectStore(_i).delete(e),await r.done}async function Hc(t,e){const n=Wc(t),i=(await Qf()).transaction(_i,"readwrite"),s=i.objectStore(_i),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&q_(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yf(t){let e;const n=await Hc(t.appConfig,r=>{const i=aN(r),s=lN(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===fh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function aN(t){const e=t||{fid:eN(),registrationStatus:0};return Y_(e)}function lN(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(wi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=cN(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uN(t)}:{installationEntry:e}}async function cN(t,e){try{const n=await Jb(t,e);return fc(t.appConfig,n)}catch(n){throw V_(n)&&n.customData.serverCode===409?await Q_(t.appConfig):await fc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function uN(t){let e=await ry(t.appConfig);for(;e.registrationStatus===1;)await H_(100),e=await ry(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Yf(t);return r||n}return e}function ry(t){return Hc(t,e=>{if(!e)throw wi.create("installation-not-found");return Y_(e)})}function Y_(t){return dN(t)?{fid:t.fid,registrationStatus:0}:t}function dN(t){return t.registrationStatus===1&&t.registrationTime+L_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN({appConfig:t,heartbeatServiceProvider:e},n){const r=fN(t,n),i=Kb(t,n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:M_,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await W_(()=>fetch(r,l));if(c.ok){const h=await c.json();return B_(h)}else throw await z_("Generate Auth Token",c)}function fN(t,{fid:e}){return`${U_(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jf(t,e=!1){let n;const r=await Hc(t.appConfig,s=>{if(!J_(s))throw wi.create("not-registered");const o=s.authToken;if(!e&&gN(o))return s;if(o.requestStatus===1)return n=pN(t,e),s;{if(!navigator.onLine)throw wi.create("app-offline");const l=vN(s);return n=mN(t,l),l}});return n?await n:r.authToken}async function pN(t,e){let n=await iy(t.appConfig);for(;n.authToken.requestStatus===1;)await H_(100),n=await iy(t.appConfig);const r=n.authToken;return r.requestStatus===0?Jf(t,e):r}function iy(t){return Hc(t,e=>{if(!J_(e))throw wi.create("not-registered");const n=e.authToken;return wN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function mN(t,e){try{const n=await hN(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await fc(t.appConfig,r),n}catch(n){if(V_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Q_(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await fc(t.appConfig,r)}throw n}}function J_(t){return t!==void 0&&t.registrationStatus===2}function gN(t){return t.requestStatus===2&&!yN(t)}function yN(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Wb}function vN(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function wN(t){return t.requestStatus===1&&t.requestTime+L_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(t){const e=t,{installationEntry:n,registrationPromise:r}=await Yf(e);return r?r.catch(console.error):Jf(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t,e=!1){const n=t;return await EN(n),(await Jf(n,e)).token}async function EN(t){const{registrationPromise:e}=await Yf(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t){if(!t||!t.options)throw Yu("App Configuration");if(!t.name)throw Yu("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Yu(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Yu(t){return wi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="installations",SN="installations-internal",TN=t=>{const e=t.getProvider("app").getImmediate(),n=IN(e),r=Si(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},CN=t=>{const e=t.getProvider("app").getImmediate(),n=Si(e,X_).getImmediate();return{getId:()=>_N(n),getToken:i=>xN(n,i)}};function kN(){Dn(new Sn(X_,TN,"PUBLIC")),Dn(new Sn(SN,CN,"PRIVATE"))}kN();an(D_,Kf);an(D_,Kf,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc="analytics",AN="firebase_id",RN="origin",bN=60*1e3,NN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=new Pc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Gt=new Ii("analytics","Analytics",PN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){if(!t.startsWith(Xf)){const e=Gt.create("invalid-gtag-resource",{gtagURL:t});return Ft.warn(e.message),""}return t}function Z_(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function jN(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function DN(t,e){const n=jN("firebase-js-sdk-policy",{createScriptURL:ON}),r=document.createElement("script"),i=`${Xf}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function LN(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function MN(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await Z_(n)).find(h=>h.measurementId===i);c&&await e[c.appId]}}catch(l){Ft.error(l)}t("config",i,s)}async function FN(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await Z_(n);for(const c of o){const h=l.find(m=>m.measurementId===c),p=h&&e[h.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Ft.error(s)}}function VN(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,c]=o;await FN(t,e,n,l,c)}else if(s==="config"){const[l,c]=o;await MN(t,e,n,r,l,c)}else if(s==="consent"){const[l,c]=o;t("consent",l,c)}else if(s==="get"){const[l,c,h]=o;t("get",l,c,h)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Ft.error(l)}}return i}function UN(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=VN(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function BN(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Xf)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=30,$N=1e3;class WN{constructor(e={},n=$N){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ex=new WN;function HN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function GN(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:HN(r)},s=NN.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw Gt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function qN(t,e=ex,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Gt.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Gt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new YN;return setTimeout(async()=>{l.abort()},bN),tx({appId:r,apiKey:i,measurementId:s},o,l,e)}async function tx(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ex){var s;const{appId:o,measurementId:l}=t;try{await KN(r,e)}catch(c){if(l)return Ft.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await GN(t);return i.deleteThrottleMetadata(o),c}catch(c){const h=c;if(!QN(h)){if(i.deleteThrottleMetadata(o),l)return Ft.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:l};throw c}const p=Number((s=h==null?void 0:h.customData)===null||s===void 0?void 0:s.httpStatus)===503?ig(n,i.intervalMillis,zN):ig(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return i.setThrottleMetadata(o,m),Ft.debug(`Calling attemptFetch again in ${p} millis`),tx(t,m,r,i)}}function KN(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Gt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function QN(t){if(!(t instanceof Tn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class YN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function JN(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(){if(q0())try{await K0()}catch(t){return Ft.warn(Gt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ft.warn(Gt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ZN(t,e,n,r,i,s,o){var l;const c=qN(t);c.then(T=>{n[T.measurementId]=T.appId,t.options.measurementId&&T.measurementId!==t.options.measurementId&&Ft.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>Ft.error(T)),e.push(c);const h=XN().then(T=>{if(T)return r.getId()}),[p,m]=await Promise.all([c,h]);BN(s)||DN(s,p.measurementId),i("js",new Date);const v=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return v[RN]="firebase",v.update=!0,m!=null&&(v[AN]=m),i("config",p.measurementId,v),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.app=e}_delete(){return delete vo[this.app.options.appId],Promise.resolve()}}let vo={},sy=[];const oy={};let Ju="dataLayer",tP="gtag",ay,nx,ly=!1;function nP(){const t=[];if(G0()&&t.push("This is a browser extension environment."),KS()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Gt.create("invalid-analytics-context",{errorInfo:e});Ft.warn(n.message)}}function rP(t,e,n){nP();const r=t.options.appId;if(!r)throw Gt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ft.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Gt.create("no-api-key");if(vo[r]!=null)throw Gt.create("already-exists",{id:r});if(!ly){LN(Ju);const{wrappedGtag:s,gtagCore:o}=UN(vo,sy,oy,Ju,tP);nx=s,ay=o,ly=!0}return vo[r]=ZN(t,sy,oy,e,ay,Ju,n),new eP(t)}function iP(t=wf()){t=Vt(t);const e=Si(t,pc);return e.isInitialized()?e.getImmediate():sP(t)}function sP(t,e={}){const n=Si(t,pc);if(n.isInitialized()){const i=n.getImmediate();if(Lo(e,n.getOptions()))return i;throw Gt.create("already-initialized")}return n.initialize({options:e})}function oP(t,e,n,r){t=Vt(t),JN(nx,vo[t.app.options.appId],e,n,r).catch(i=>Ft.error(i))}const cy="@firebase/analytics",uy="0.10.8";function aP(){Dn(new Sn(pc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return rP(r,i,n)},"PUBLIC")),Dn(new Sn("analytics-internal",t,"PRIVATE")),an(cy,uy),an(cy,uy,"esm2017");function t(e){try{const n=e.getProvider(pc).getImmediate();return{logEvent:(r,i,s)=>oP(n,r,i,s)}}catch(n){throw Gt.create("interop-component-reg-failed",{reason:n})}}}aP();const lP={apiKey:"AIzaSyCIqpOl5nT3VH149xISPqyLgkjyIiMWPb8",authDomain:"flinx-8a05e.firebaseapp.com",projectId:"flinx-8a05e",storageBucket:"flinx-8a05e.firebasestorage.app",messagingSenderId:"977393893446",appId:"1:977393893446:web:308db5f232f7c5558cca47",measurementId:"G-N0LW13KMNJ"},Zf=X0(lP);let cP;if(typeof window<"u")try{cP=iP(Zf)}catch{console.log("Analytics initialization skipped (local development)")}const Go=uA(Zf),uP=Ab(Zf),ep=new Gn;ep.addScope("profile");ep.addScope("email");ep.addScope("openid");const qo=new Hn,rx="863917229498555";console.log(" Configuring Facebook Auth Provider:");console.log("   - App ID:",rx);console.log("   - Redirect URL:","https://flinx-8a05e.firebaseapp.com/__/auth/handler");qo.setCustomParameters({app_id:rx,display:"popup",auth_type:"rerequest",scope:"public_profile,email"});qo.addScope("public_profile");qo.addScope("email");console.log(" Facebook Auth Provider initialized with:");console.log("   - Public Profile scope: ");console.log("   - Email scope: ");console.log("   - Web OAuth redirect enabled: ");const ix=async(t,e)=>{var o,l,c;console.log(` Processing ${e} login for user:`,t.email);let n=null;e==="facebook"&&((o=t.providerData[0])!=null&&o.uid)&&(n=t.providerData[0].uid);const r={uid:t.uid,email:t.email,name:t.displayName||"User",picture:t.photoURL||null,authProvider:e,googleId:e==="google"?(l=t.providerData[0])==null?void 0:l.uid:null,facebookId:e==="facebook"?n:null,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};console.log(" User info extracted:",{email:r.email,name:r.name,authProvider:r.authProvider});try{const h=await t.getIdToken();localStorage.setItem("idToken",h),console.log(" Firebase ID token stored for Socket.IO")}catch(h){console.error(" Failed to get Firebase ID token:",h)}try{const p=await fetch("https://flinxx-backend.onrender.com/api/users/save",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({uid:t.uid,email:t.email,displayName:t.displayName||"User",photoURL:t.photoURL||null,authProvider:e})});if(!p.ok)throw new Error(`Failed to save user: ${p.status}`);const m=await p.json();console.log(" User saved to Neon PostgreSQL:",m.user),m.user&&(r.profileCompleted=m.user.profileCompleted,r.isProfileCompleted=m.user.profileCompleted,r.id=m.user.id,console.log("[FIREBASE]  Updated userInfo with profileCompleted:",m.user.profileCompleted)),localStorage.setItem("dbUserId",m.user.id)}catch(h){console.error(" Error saving user to backend database:",h)}try{await Bb(kb(uP,"users",t.uid),{email:t.email,displayName:t.displayName,photoURL:t.photoURL,authProvider:e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()},{merge:!0}),console.log(" User saved to Firestore")}catch(h){console.error(" Error saving user to Firestore:",h)}console.log(`
 [firebase] handleLoginSuccess storing to localStorage`),console.log(" [firebase]   - userInfo.profileCompleted =",r.profileCompleted),console.log(" [firebase]   - userInfo.isProfileCompleted =",r.isProfileCompleted);const i={id:r.id,uid:r.uid,name:t.displayName,email:t.email,picture:t.photoURL,googleId:e==="google"?(c=t.providerData[0])==null?void 0:c.uid:null,facebookId:e==="facebook"?n:null,profileCompleted:r.profileCompleted||!1,isProfileCompleted:r.profileCompleted||!1,authProvider:e};console.log(" [firebase] userToStore object:",i),localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("authProvider",e),localStorage.setItem("userInfo",JSON.stringify(r)),console.log(" [firebase]  Stored to localStorage, verifying...");const s=JSON.parse(localStorage.getItem("user"));return console.log(" [firebase]   - Verified profileCompleted:",s.profileCompleted),console.log(" [firebase]  User data stored in localStorage with profileCompleted:",r.profileCompleted||!1),r},dy=async()=>{var t;try{console.log(" Starting Facebook login via popup...");const e=await vk(Go,qo);console.log(" Facebook popup login successful:",e.user.email);const n=(t=e.user.providerData[0])==null?void 0:t.providerId;let r="facebook";return n==="facebook.com"&&(r="facebook"),ix(e.user,r)}catch(e){console.warn(" Facebook popup login failed, trying redirect method:",e.code);try{return console.log(" Starting Facebook login via redirect..."),await Sk(Go,qo),null}catch(n){throw console.error(" Facebook login failed:",n),n}}},dP=async()=>{var t;try{const e=await Ck(Go);if(e!=null&&e.user){console.log(" Redirect login successful:",e.user.email);const n=(t=e.user.providerData[0])==null?void 0:t.providerId;console.log("Provider:",n);let r="unknown";return n==="google.com"?r="google":n==="facebook.com"&&(r="facebook"),ix(e.user,r)}}catch(e){console.error("Redirect result error:",e),e.code==="auth/account-exists-with-different-credential"?console.error("Account exists with different credential"):e.code==="auth/auth-domain-config-required"&&console.error("Auth domain config required")}return null},Es=N.createContext(),hP=({children:t})=>{const[e,n]=N.useState(null),[r,i]=N.useState(!0),[s,o]=N.useState(!1),[l,c]=N.useState(!1);N.useEffect(()=>{(async()=>{try{console.log(`

 [AuthContext] `),console.log(" [AuthContext] INITIALIZATION STARTED"),console.log(" [AuthContext] ");const v=localStorage.getItem("token"),T=localStorage.getItem("user");if(console.log(" [AuthContext] STEP 1: Check localStorage"),console.log(" [AuthContext]   - token:",v?" Found":" Not found"),console.log(" [AuthContext]   - user:",T?" Found":" Not found"),v&&T)try{console.log(`
 [AuthContext] STEP 2: Parse localStorage user`);const k=JSON.parse(T);console.log(" [AuthContext]   - Parsed user email:",k.email),console.log(" [AuthContext]   - profileCompleted from localStorage:",k.profileCompleted,"(type:",typeof k.profileCompleted+")"),console.log(" [AuthContext]  Attempting to restore Google OAuth user from localStorage:",k.email),console.log(" [AuthContext] User data from localStorage:",{id:k.id,email:k.email,profileCompleted:k.profileCompleted,isProfileCompleted:k.isProfileCompleted});const P="https://flinxx-backend.onrender.com";console.log(`
 [AuthContext] STEP 3: Validate token with backend`),console.log(" [AuthContext]   - Backend URL:",P),console.log(" [AuthContext]   - Making request to /api/profile...");const E=await fetch(`${P}/api/profile`,{method:"GET",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(console.log(" [AuthContext]   - Response status:",E.status),E.ok){const w=await E.json();if(console.log(" [AuthContext]   - Response OK, parsing data..."),console.log(" [AuthContext]   - data.success:",w.success),console.log(" [AuthContext]   - data.user available:",!!w.user),w.success&&w.user){console.log(" [AuthContext]  Token validated, user restored from backend"),console.log(" [AuthContext] Backend user data:",{id:w.user.id,email:w.user.email,profileCompleted:w.user.profileCompleted,birthday:w.user.birthday,gender:w.user.gender}),console.log(" [AuthContext] Setting user state with:",{email:w.user.email,profileCompleted:w.user.profileCompleted});const x={...w.user,id:w.user.id||w.user.public_id};n(x),o(!0),i(!1),console.log(" [AuthContext]  COMPLETE - Returning from token validation path");return}else console.log(" [AuthContext]   Response OK but data.success or data.user missing")}else{console.log(" [AuthContext]  Token validation response not OK:",E.status);const w=await E.text();console.log(" [AuthContext] Error response:",w)}}catch(k){console.error(" [AuthContext]  Error validating token:",k)}else console.log(`
 [AuthContext] STEP 2: Skip token validation (missing token or user)`),console.log(" [AuthContext]   - Skipping /api/profile call");if(T)try{console.log(`
 [AuthContext] STEP 3: Restore from localStorage (no token validation)`);const k=JSON.parse(T);console.log(" [AuthContext]   - Email:",k.email),console.log(" [AuthContext]   - profileCompleted:",k.profileCompleted,"(type:",typeof k.profileCompleted+")"),console.log(" [AuthContext]  User loaded from localStorage (no token validation):",k.email),console.log(" [AuthContext] User data from localStorage:",{id:k.id,email:k.email,profileCompleted:k.profileCompleted,isProfileCompleted:k.isProfileCompleted}),console.log(" [AuthContext] Setting user state with profileCompleted:",k.profileCompleted);const P={...k,id:k.id||k.public_id};n(P),o(!0),i(!1),console.log(" [AuthContext]  COMPLETE - Returning from localStorage fallback path");return}catch(k){console.error("[AuthContext] Error parsing saved user:",k)}return console.log(`
 [AuthContext] STEP 3: No stored token or user, checking Firebase...`),JC(Go,async k=>{var P,E;if(console.log(`
 [AuthContext] Firebase onAuthStateChanged fired`),console.log(" [AuthContext]   - firebaseUser:",k?k.email:"null"),k){const w=((P=k.providerData[0])==null?void 0:P.providerId)||"unknown";console.log(" [AuthContext] User authenticated via Firebase"),console.log(" [AuthContext]   - Email:",k.email),console.log(" [AuthContext]   - Provider:",w);try{console.log(" [AuthContext] Getting Firebase ID token...");const M=await k.getIdToken();console.log(" [AuthContext]  ID token obtained"),localStorage.setItem("idToken",M),console.log(" Firebase ID token stored for Socket.IO");const B="https://flinxx-backend.onrender.com";console.log(" [AuthContext] Calling /api/profile with ID token...");const S=await fetch(`${B}/api/profile`,{method:"GET",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}});if(console.log(" [AuthContext] /api/profile response status:",S.status),S.ok){const g=await S.json();if(console.log(" [AuthContext] /api/profile response OK"),console.log(" [AuthContext]   - success:",g.success),console.log(" [AuthContext]   - user.profileCompleted:",(E=g.user)==null?void 0:E.profileCompleted),g.success&&g.user){console.log(" [AuthContext]  Fetched full user profile from database:",{email:g.user.email,profileCompleted:g.user.profileCompleted}),console.log(" [AuthContext] Setting user state with profileCompleted:",g.user.profileCompleted);const _={...g.user,id:g.user.id||g.user.public_id};n(_),o(!0),i(!1);return}}else console.log(" [AuthContext]  /api/profile response not OK:",S.status)}catch(M){console.warn("[AuthContext]  Failed to fetch profile from database:",M)}const x={uid:k.uid,email:k.email,displayName:k.displayName,photoURL:k.photoURL,authProvider:w,profileCompleted:!1};console.log("[AuthContext] Using fallback userInfo (database fetch failed):",x.email),console.log("[AuthContext]  WARNING: profileCompleted not loaded from database, defaulting to false");const j={...x,id:x.id||x.uid};n(j),o(!0),localStorage.setItem("userInfo",JSON.stringify(j)),localStorage.setItem("authProvider",w)}else{console.log(" [AuthContext] Firebase user is null/logged out");const w=localStorage.getItem("authToken"),x=localStorage.getItem("authProvider");if(console.log(" [AuthContext]   - authToken:",w?"Found":"Not found"),console.log(" [AuthContext]   - authProvider:",x),w&&x==="guest"){const j=JSON.parse(localStorage.getItem("userInfo")||"{}");console.log(" [AuthContext] Restoring guest login");const M={...j,id:j.id||j.public_id};n(M),o(!0)}else console.log(" [AuthContext]  No authentication found, user will be redirected to login"),n(null),o(!1)}console.log(" [AuthContext] "),console.log(" [AuthContext] INITIALIZATION COMPLETE - Setting isLoading=false"),console.log(` [AuthContext] 
`),i(!1)})}catch(v){console.error("[AuthContext] Error initializing auth:",v),i(!1)}})()},[]);const h=()=>{n(null),o(!1),localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),localStorage.removeItem("authProvider"),localStorage.removeItem("token"),localStorage.removeItem("user")},p=(m,v)=>{console.log("[AuthContext] Storing token and user data:",v==null?void 0:v.email),localStorage.setItem("token",m),localStorage.setItem("user",JSON.stringify(v)),localStorage.setItem("authProvider","google");const T={...v,id:v.id||v.public_id};n(T),o(!0)};return u.jsx(Es.Provider,{value:{user:e,isAuthenticated:s,isLoading:r,logout:h,authPending:l,setAuthPending:c,setAuthToken:p},children:t})};class fP extends Jo.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){var e;return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-bold text-red-500 mb-4",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-300 mb-8",children:(e=this.state.error)==null?void 0:e.message}),u.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg font-semibold text-white",children:"Reload Page"})]})}):this.props.children}}/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ko.apply(this,arguments)}var Ir;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ir||(Ir={}));const hy="popstate";function pP(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return ph("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:sx(i)}return gP(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mP(){return Math.random().toString(36).substr(2,8)}function fy(t,e){return{usr:t.state,key:t.key,idx:e}}function ph(t,e,n,r){return n===void 0&&(n=null),Ko({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Is(e):e,{state:n,key:e&&e.key||r||mP()})}function sx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Is(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function gP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Ir.Pop,c=null,h=p();h==null&&(h=0,o.replaceState(Ko({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=Ir.Pop;let P=p(),E=P==null?null:P-h;h=P,c&&c({action:l,location:k.location,delta:E})}function v(P,E){l=Ir.Push;let w=ph(k.location,P,E);h=p()+1;let x=fy(w,h),j=k.createHref(w);try{o.pushState(x,"",j)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(j)}s&&c&&c({action:l,location:k.location,delta:1})}function T(P,E){l=Ir.Replace;let w=ph(k.location,P,E);h=p();let x=fy(w,h),j=k.createHref(w);o.replaceState(x,"",j),s&&c&&c({action:l,location:k.location,delta:0})}function R(P){let E=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof P=="string"?P:sx(P);return w=w.replace(/ $/,"%20"),Qe(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let k={get action(){return l},get location(){return t(i,o)},listen(P){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(hy,m),c=P,()=>{i.removeEventListener(hy,m),c=null}},createHref(P){return e(i,P)},createURL:R,encodeLocation(P){let E=R(P);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:T,go(P){return o.go(P)}};return k}var py;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(py||(py={}));function yP(t,e,n){return n===void 0&&(n="/"),vP(t,e,n)}function vP(t,e,n,r){let i=typeof e=="string"?Is(e):e,s=lx(i.pathname||"/",n);if(s==null)return null;let o=ox(t);wP(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let h=NP(s);l=AP(o[c],h)}return l}function ox(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Qe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=ci([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(Qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),ox(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:CP(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of ax(s.path))i(s,o,c)}),e}function ax(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ax(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function wP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _P=/^:[\w-]+$/,xP=3,EP=2,IP=1,SP=10,TP=-2,my=t=>t==="*";function CP(t,e){let n=t.split("/"),r=n.length;return n.some(my)&&(r+=TP),e&&(r+=EP),n.filter(i=>!my(i)).reduce((i,s)=>i+(_P.test(s)?xP:s===""?IP:SP),r)}function kP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function AP(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=RP({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),v=c.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:ci([s,m.pathname]),pathnameBase:FP(ci([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=ci([s,m.pathnameBase]))}return o}function RP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:v,isOptional:T}=p;if(v==="*"){let k=l[m]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const R=l[m];return T&&!R?h[v]=void 0:h[v]=(R||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function bP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),tp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function NP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function lx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const PP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OP=t=>PP.test(t);function jP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Is(t):t,s;if(n)if(OP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),tp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=gy(n.substring(1),"/"):s=gy(n,e)}else s=e;return{pathname:s,search:VP(r),hash:UP(i)}}function gy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Xu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function LP(t,e){let n=DP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function MP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Is(t):(i=Ko({},t),Qe(!i.pathname||!i.pathname.includes("?"),Xu("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),Xu("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),Xu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}l=m>=0?e[m]:"/"}let c=jP(i,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const ci=t=>t.join("/").replace(/\/\/+/g,"/"),FP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const cx=["post","put","patch","delete"];new Set(cx);const zP=["get",...cx];new Set(zP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qo(){return Qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qo.apply(this,arguments)}const np=N.createContext(null),$P=N.createContext(null),Gc=N.createContext(null),qc=N.createContext(null),Ss=N.createContext({outlet:null,matches:[],isDataRoute:!1}),ux=N.createContext(null);function Kc(){return N.useContext(qc)!=null}function Qc(){return Kc()||Qe(!1),N.useContext(qc).location}function dx(t){N.useContext(Gc).static||N.useLayoutEffect(t)}function Yt(){let{isDataRoute:t}=N.useContext(Ss);return t?n1():WP()}function WP(){Kc()||Qe(!1);let t=N.useContext(np),{basename:e,future:n,navigator:r}=N.useContext(Gc),{matches:i}=N.useContext(Ss),{pathname:s}=Qc(),o=JSON.stringify(LP(i,n.v7_relativeSplatPath)),l=N.useRef(!1);return dx(()=>{l.current=!0}),N.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=MP(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ci([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,s,t])}function HP(t,e){return GP(t,e)}function GP(t,e,n,r){Kc()||Qe(!1);let{navigator:i}=N.useContext(Gc),{matches:s}=N.useContext(Ss),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Qc(),p;if(e){var m;let P=typeof e=="string"?Is(e):e;c==="/"||(m=P.pathname)!=null&&m.startsWith(c)||Qe(!1),p=P}else p=h;let v=p.pathname||"/",T=v;if(c!=="/"){let P=c.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(P.length).join("/")}let R=yP(t,{pathname:T}),k=JP(R&&R.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:ci([c,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?c:ci([c,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r);return e&&k?N.createElement(qc.Provider,{value:{location:Qo({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ir.Pop}},k):k}function qP(){let t=t1(),e=BP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const KP=N.createElement(qP,null);class QP extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Ss.Provider,{value:this.props.routeContext},N.createElement(ux.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YP(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(np);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Ss.Provider,{value:e},r)}function JP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Qe(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:v,errors:T}=n,R=m.route.loader&&v[m.route.id]===void 0&&(!T||T[m.route.id]===void 0);if(m.route.lazy||R){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,v)=>{let T,R=!1,k=null,P=null;n&&(T=l&&m.route.id?l[m.route.id]:void 0,k=m.route.errorElement||KP,c&&(h<0&&v===0?(r1("route-fallback"),R=!0,P=null):h===v&&(R=!0,P=m.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,v+1)),w=()=>{let x;return T?x=k:R?x=P:m.route.Component?x=N.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=p,N.createElement(YP,{match:m,routeContext:{outlet:p,matches:E,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?N.createElement(QP,{location:n.location,revalidation:n.revalidation,component:k,error:T,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var hx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hx||{}),fx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fx||{});function XP(t){let e=N.useContext(np);return e||Qe(!1),e}function ZP(t){let e=N.useContext($P);return e||Qe(!1),e}function e1(t){let e=N.useContext(Ss);return e||Qe(!1),e}function px(t){let e=e1(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function t1(){var t;let e=N.useContext(ux),n=ZP(),r=px();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function n1(){let{router:t}=XP(hx.UseNavigateStable),e=px(fx.UseNavigateStable),n=N.useRef(!1);return dx(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Qo({fromRouteId:e},s)))},[t,e])}const yy={};function r1(t,e,n){yy[t]||(yy[t]=!0)}function i1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function en(t){Qe(!1)}function s1(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ir.Pop,navigator:s,static:o=!1,future:l}=t;Kc()&&Qe(!1);let c=e.replace(/^\/*/,"/"),h=N.useMemo(()=>({basename:c,navigator:s,static:o,future:Qo({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=Is(r));let{pathname:p="/",search:m="",hash:v="",state:T=null,key:R="default"}=r,k=N.useMemo(()=>{let P=lx(p,c);return P==null?null:{location:{pathname:P,search:m,hash:v,state:T,key:R},navigationType:i}},[c,p,m,v,T,R,i]);return k==null?null:N.createElement(Gc.Provider,{value:h},N.createElement(qc.Provider,{children:n,value:k}))}function o1(t){let{children:e,location:n}=t;return HP(mh(e),n)}new Promise(()=>{});function mh(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,mh(r.props.children,s));return}r.type!==en&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mh(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function a1(t,e){let n=gh(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const l1="6";try{window.__reactRouterVersion=l1}catch{}const c1="startTransition",vy=yE[c1];function u1(t){let{basename:e,children:n,future:r,window:i}=t,s=N.useRef();s.current==null&&(s.current=pP({window:i,v5Compat:!0}));let o=s.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},p=N.useCallback(m=>{h&&vy?vy(()=>c(m)):c(m)},[c,h]);return N.useLayoutEffect(()=>o.listen(p),[o,p]),N.useEffect(()=>i1(r),[r]),N.createElement(s1,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var wy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wy||(wy={}));var _y;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_y||(_y={}));function mx(t){let e=N.useRef(gh(t)),n=N.useRef(!1),r=Qc(),i=N.useMemo(()=>a1(r.search,n.current?null:e.current),[r.search]),s=Yt(),o=N.useCallback((l,c)=>{const h=gh(typeof l=="function"?l(i):l);n.current=!0,s("?"+h,c)},[s,i]);return[i,o]}const d1="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMjgwIDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8IS0tIFB1cnBsZSBSb3VuZGVkLVNxdWFyZSBJY29uIChleGFjdCBmcm9tIGJyYW5kaW5nKSAtLT4NCiAgPGc+DQogICAgPCEtLSBHcmFkaWVudCBkZWZpbml0aW9ucyAtLT4NCiAgICA8ZGVmcz4NCiAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icHVycGxlR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPg0KICAgICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojOUQ0RUREO3N0b3Atb3BhY2l0eToxIiAvPg0KICAgICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3MjA5Qjc7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgDQogICAgICA8bGluZWFyR3JhZGllbnQgaWQ9Imdsb3dHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+DQogICAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDA7c3RvcC1vcGFjaXR5OjAuOCIgLz4NCiAgICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZBNTAwO3N0b3Atb3BhY2l0eTowLjQiIC8+DQogICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgDQogICAgICA8ZmlsdGVyIGlkPSJwcmVtaXVtU2hhZG93Ij4NCiAgICAgICAgPGZlRHJvcFNoYWRvdyBkeD0iMCIgZHk9IjQiIHN0ZERldmlhdGlvbj0iNiIgZmxvb2Qtb3BhY2l0eT0iMC4zNSIvPg0KICAgICAgPC9maWx0ZXI+DQogICAgPC9kZWZzPg0KICAgIA0KICAgIDwhLS0gR29sZGVuIGdsb3cvaGFsbyBiZWhpbmQgaWNvbiAtLT4NCiAgICA8Y2lyY2xlIGN4PSIzNiIgY3k9IjM2IiByPSIzNCIgZmlsbD0idXJsKCNnbG93R3JhZGllbnQpIiBvcGFjaXR5PSIwLjUiLz4NCiAgICANCiAgICA8IS0tIE1haW4gcHVycGxlIHJvdW5kZWQtc3F1YXJlIGJhY2tncm91bmQgLS0+DQogICAgPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iMTYiIGZpbGw9InVybCgjcHVycGxlR3JhZGllbnQpIiBmaWx0ZXI9InVybCgjcHJlbWl1bVNoYWRvdykiLz4NCiAgICANCiAgICA8IS0tIENhbWVyYSBib2R5ICh3aGl0ZSBvdXRsaW5lIHN0eWxlKSAtLT4NCiAgICA8cmVjdCB4PSIxNiIgeT0iMjIiIHdpZHRoPSIyNCIgaGVpZ2h0PSIxOCIgcng9IjIiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMi41Ii8+DQogICAgDQogICAgPCEtLSBDYW1lcmEgbGVucyAoY2lyY3VsYXIpIC0tPg0KICAgIDxjaXJjbGUgY3g9IjQ0IiBjeT0iMzEiIHI9IjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxjaXJjbGUgY3g9IjQ0IiBjeT0iMzEiIHI9IjMuNSIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuNSIvPg0KICAgIA0KICAgIDwhLS0gTGlnaHRuaW5nIGJvbHQgYWNjZW50ICh0b3AgcmlnaHQpIC0tPg0KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ2LCAxMCkiPg0KICAgICAgPCEtLSBNYWluIGxpZ2h0bmluZyBzaGFwZSAtLT4NCiAgICAgIDxwYXRoIGQ9Ik0gNiAwIEwgMiA2IEwgNiA2IEwgMCAxNCBMIDggOCBMIDQgOCBaIiBmaWxsPSIjRkZENzAwIiBzdHJva2U9IiNGRjhBMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogICAgICA8IS0tIElubmVyIGhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgICA8cGF0aCBkPSJNIDQgMSBMIDMgNCBMIDUgNCBMIDEgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRUIzQiIgc3Ryb2tlLXdpZHRoPSIwLjgiIG9wYWNpdHk9IjAuNyIvPg0KICAgIDwvZz4NCiAgICANCiAgICA8IS0tIEdvbGRlbiBzcGFya2xlIGFjY2VudHMgLS0+DQogICAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMS41IiBmaWxsPSIjRkZENzAwIiBvcGFjaXR5PSIwLjkiLz4NCiAgICA8Y2lyY2xlIGN4PSI1OCIgY3k9IjE4IiByPSIxLjUiIGZpbGw9IiNGRkQ3MDAiIG9wYWNpdHk9IjAuOCIvPg0KICAgIDxjaXJjbGUgY3g9IjE2IiBjeT0iNTYiIHI9IjEiIGZpbGw9IiNGRkIzMUEiIG9wYWNpdHk9IjAuNyIvPg0KICA8L2c+DQogIA0KICA8IS0tIEZMSU5YWCBUZXh0IC0tPg0KICA8dGV4dCB4PSI4MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSI0MiIgZm9udC13ZWlnaHQ9IjkwMCIgZmlsbD0idXJsKCN0ZXh0R3JhZGllbnQpIiBsZXR0ZXItc3BhY2luZz0iMSI+DQogICAgRkxJTlhYDQogIDwvdGV4dD4NCiAgDQogIDwhLS0gVGV4dCBHcmFkaWVudCAtLT4NCiAgPGRlZnM+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJ0ZXh0R3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDA7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQjMxQTtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGOEEwMDtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICA8L2xpbmVhckdyYWRpZW50Pg0KICA8L2RlZnM+DQo8L3N2Zz4NCg==",h1=({isOpen:t,onClose:e})=>{const[n,r]=N.useState([{id:1,text:"Hi, this is our virtual assistant. Tell us how we can help.",sender:"assistant",timestamp:new Date}]),[i,s]=N.useState(""),o=N.useRef(null),l=()=>{var p;(p=o.current)==null||p.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{l()},[n]);const c=()=>{if(i.trim()==="")return;const p={id:n.length+1,text:i,sender:"user",timestamp:new Date};r([...n,p]),s(""),setTimeout(()=>{const m={id:n.length+2,text:"Thanks for reaching out! Our team will get back to you shortly.",sender:"assistant",timestamp:new Date};r(v=>[...v,m])},500)},h=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),c())};return t?u.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:u.jsxs("div",{className:"w-96 bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-gray-200",style:{maxHeight:"600px"},children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"Contact Us"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We typically reply in minutes"})]}),u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors text-2xl leading-none","aria-label":"Close chat",children:""})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 bg-gray-50 space-y-4",children:[n.map(p=>u.jsx("div",{className:`flex ${p.sender==="user"?"justify-end":"justify-start"}`,children:u.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-lg ${p.sender==="user"?"bg-blue-600 text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"}`,children:[u.jsx("p",{className:"text-sm break-words",children:p.text}),u.jsx("span",{className:`text-xs mt-1 block ${p.sender==="user"?"text-blue-100":"text-gray-500"}`,children:p.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},p.id)),u.jsx("div",{ref:o})]}),u.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:i,onChange:p=>s(p.target.value),onKeyPress:h,placeholder:"Type message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-sm"}),u.jsx("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors font-semibold","aria-label":"Send message",children:"Send"})]})})]})}):null},f1=()=>{const t=Yt(),[e,n]=N.useState(!1),[r,i]=N.useState(!1),s=()=>{n(!0),setTimeout(()=>{t("/login",{replace:!0})},500)};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-4 flex justify-between items-center max-w-full",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:d1,alt:"Flinxx",className:"h-12",style:{width:"auto"}}),u.jsx("span",{className:"text-sm text-white/90 ml-2",children:" 3,247 online"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:s,className:"text-white font-bold px-6 py-2 rounded-lg transition transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 20px rgba(255, 139, 0, 0.3)"},onMouseEnter:o=>o.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)",onMouseLeave:o=>o.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)",children:"Start Now"})})]})}),u.jsx("div",{className:"relative z-10 min-h-[500px] flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"text-center max-w-3xl",children:[u.jsxs("h1",{className:"text-6xl md:text-7xl font-black text-white mb-6 leading-tight",children:["Meet New People",u.jsx("br",{}),"Around the World"]}),u.jsx("p",{className:"text-xl text-white/90 mb-10",children:"Connect instantly with strangers through video chat"}),u.jsx("div",{className:"flex items-center justify-center gap-4 mb-12",children:u.jsx("button",{onClick:s,disabled:e,className:`inline-flex items-center gap-2 px-8 py-4 text-lg font-bold rounded-lg transition-all transform hover:scale-105 ${e?"cursor-not-allowed text-gray-700":"text-white"}`,style:e?{backgroundColor:"#9CA3AF"}:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 30px rgba(255, 139, 0, 0.4)"},onMouseEnter:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)"),onMouseLeave:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)"),children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""})," Starting Chat..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Start Chatting Now"]})})}),u.jsx("p",{className:"text-white/80 text-sm",children:"Fast, simple video chats  Real users, real time"})]})}),u.jsx("div",{className:"relative z-10 px-4 py-16 bg-gradient-to-b from-transparent via-purple-600/50 to-purple-700",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0 shadow-lg",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Instant Connection"}),u.jsx("p",{className:"text-white/80 text-base",children:"Connect with random strangers in seconds. No waiting, no hassle."})]})]})}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-pink-400 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Global Community"}),u.jsx("p",{className:"text-white/80 text-base",children:"Meet people from all over the world. Make international friends."})]})]})}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-cyan-400 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Safe & Verified"}),u.jsx("p",{className:"text-white/80 text-base",children:"Verified users, moderated content, and privacy protection."})]})]})})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-b from-purple-700 via-purple-600 to-purple-500",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-black text-white text-center mb-16",children:"How It Works"}),u.jsx("div",{className:"relative bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"1"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Sign Up"}),u.jsx("p",{className:"text-white/80 text-base",children:"Create your free account in seconds"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"2"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Start Video Chat"}),u.jsx("p",{className:"text-white/80 text-base",children:"Get matched with random strangers instantly"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"3"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Make Friends"}),u.jsx("p",{className:"text-white/80 text-base",children:"Chat, connect, and meet awesome people"})]})]})})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-b from-purple-500 via-purple-600 to-purple-700",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-black text-white text-center mb-16",children:"Smart Matching Features"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-3xl mb-6 shadow-lg",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"One-Click Connect"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Connect with strangers instantly with just one click. No complicated setup needed."}),u.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-200 px-4 py-1 rounded-full text-sm font-semibold",children:"Free"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-3xl mb-6 shadow-lg",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"Auto-Matching"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Our intelligent algorithm matches you with compatible users based on interests and preferences."}),u.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-200 px-4 py-1 rounded-full text-sm font-semibold",children:"Free"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all md:col-span-2",children:[u.jsx("div",{className:"w-14 h-14 bg-purple-400 rounded-xl flex items-center justify-center text-3xl mb-6",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"Gender Preference Filter"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Fine-tune your matching experience with optional gender preferences. Available in Premium."}),u.jsx("div",{className:"inline-block bg-purple-400/30 text-purple-200 px-4 py-1 rounded-full text-sm font-semibold border border-purple-400/50",children:" Premium Feature"})]})]})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:u.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[u.jsx("h2",{className:"text-5xl md:text-6xl font-black text-white mb-6",children:"Ready to Meet New People?"}),u.jsx("p",{className:"text-xl text-white/90 mb-10",children:"Join thousands of users connecting right now"}),u.jsx("button",{onClick:s,disabled:e,className:`inline-flex items-center gap-3 px-10 py-4 text-xl font-bold rounded-lg transition-all transform hover:scale-105 ${e?"cursor-not-allowed text-gray-700":"text-white"}`,style:e?{backgroundColor:"#9CA3AF"}:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 30px rgba(255, 139, 0, 0.4)"},onMouseEnter:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)"),onMouseLeave:o=>!e&&(o.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)"),children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""})," Starting Chat..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Get Started Free"]})})]})}),!r&&u.jsxs("button",{onClick:()=>i(!0),className:"fixed bottom-6 right-6 inline-flex items-center gap-2 px-6 py-3 bg-white text-gray-800 font-bold rounded-full shadow-lg transition-all transform hover:scale-110 hover:shadow-2xl",style:{zIndex:9999},children:[u.jsx("span",{className:"text-lg",children:""}),"Contact Us"]}),u.jsx(h1,{isOpen:r,onClose:()=>i(!1)})]})};class p1 extends Error{}p1.prototype.name="InvalidTokenError";const ua="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Orange%20gradient%20background%20--%3e%3crect%20width='40'%20height='40'%20rx='8'%20fill='url(%23gradient)'%20/%3e%3c!--%20Video%20camera%20icon%20--%3e%3cg%20transform='translate(8,%208)'%3e%3c!--%20Camera%20body%20--%3e%3crect%20x='1'%20y='6'%20width='16'%20height='12'%20rx='1'%20fill='white'%20stroke='white'%20stroke-width='0.5'/%3e%3c!--%20Camera%20lens%20--%3e%3ccircle%20cx='17'%20cy='12'%20r='4'%20fill='none'%20stroke='white'%20stroke-width='1'/%3e%3ccircle%20cx='17'%20cy='12'%20r='2.5'%20fill='white'%20opacity='0.8'/%3e%3c!--%20Recording%20indicator%20dot%20--%3e%3ccircle%20cx='3'%20cy='3'%20r='1.5'%20fill='%23FF4444'/%3e%3c/g%3e%3c!--%20Gradient%20definition%20--%3e%3cdefs%3e%3clinearGradient%20id='gradient'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%23FF8C42;stop-opacity:1'%20/%3e%3cstop%20offset='100%25'%20style='stop-color:%23FF6B35;stop-opacity:1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",m1="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%3e%3cpath%20fill='%234285F4'%20d='M22.56%2012.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26%201.37-1.04%202.53-2.21%203.31v2.77h3.57c2.08-1.92%203.28-4.74%203.28-8.09z'/%3e%3cpath%20fill='%2334A853'%20d='M12%2023c2.97%200%205.46-.98%207.28-2.66l-3.57-2.77c-.98.66-2.23%201.06-3.71%201.06-2.86%200-5.29-1.93-6.16-4.53H2.18v2.84C3.99%2020.53%207.7%2023%2012%2023z'/%3e%3cpath%20fill='%23FBBC05'%20d='M5.84%2014.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43%208.55%201%2010.22%201%2012s.43%203.45%201.18%204.93l2.85-2.22.81-.62z'/%3e%3cpath%20fill='%23EA4335'%20d='M12%205.38c1.62%200%203.06.56%204.21%201.64l3.15-3.15C17.45%202.09%2014.97%201%2012%201%207.7%201%203.99%203.47%202.18%207.07l3.66%202.84c.87-2.6%203.3-4.53%206.16-4.53z'/%3e%3c/svg%3e",gx=({onContinue:t,onCancel:e})=>{N.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),N.useEffect(()=>{const r=i=>{i.key==="Escape"&&i.preventDefault()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[]),N.useEffect(()=>{window.history.pushState(null,"",window.location.href);const r=i=>{i.preventDefault(),window.history.pushState(null,"",window.location.href)};return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[]);const n=()=>{localStorage.setItem("termsAccepted","true"),t==null||t()};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 p-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Before you continue"}),u.jsxs("p",{className:"text-gray-700 text-center text-sm",children:["By continuing, you confirm that you are 18 years or older and agree to Flinxx's"," ",u.jsx("a",{href:"/terms-and-conditions",className:"text-blue-600 underline",children:"Terms & Conditions"})," ","and"," ",u.jsx("a",{href:"/privacy-policy",className:"text-blue-600 underline",children:"Privacy Policy"}),"."]}),u.jsx("p",{className:"text-gray-700 text-center text-sm mt-4",children:"You understand that Flinxx is a live interaction platform and you use it at your own responsibility."}),u.jsxs("div",{className:"flex gap-4 mt-6",children:[u.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-900 font-semibold rounded-lg hover:bg-gray-300 transition-colors",children:"Decline"}),u.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-colors",children:"Accept & Proceed"})]})]})})},yx=()=>{try{return localStorage.getItem("termsAccepted")==="true"}catch(t){return console.error(" Error checking terms acceptance:",t),!1}},g1=()=>{try{localStorage.setItem("termsAccepted","true"),console.log(" Terms accepted and saved to localStorage")}catch(t){console.error(" Error saving terms acceptance:",t)}},y1=({isSigningIn:t,onShowTermsModal:e})=>{const n=()=>{console.log(" Google login clicked - checking terms acceptance"),yx()?(console.log(" Terms already accepted - proceeding with Google login"),r()):(console.log(" Terms not accepted - showing modal first"),e("google"))},r=()=>{const i="https://flinxx-backend.onrender.com";console.log(" Redirecting to Google OAuth:",`${i}/auth/google`),window.location.href=`${i}/auth/google`};return u.jsxs("button",{onClick:n,disabled:t,className:`w-full py-3 px-6 rounded-full transition-all text-lg font-bold flex items-center justify-center gap-3 ${t?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-white hover:bg-gray-50 text-black shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:[u.jsx("img",{src:m1,alt:"Google",className:"w-6 h-6"}),"Continue with Google"]})},v1=()=>{const t=Yt(),[e,n]=N.useState(!1),[r,i]=N.useState(null),[s,o]=N.useState(!1),[l,c]=N.useState(null);N.useEffect(()=>{(async()=>{try{const R=await dP();R&&(console.log(" Login successful:",R.email),t("/chat"))}catch(R){console.error(" Login check failed:",R)}})()},[t]);const h=T=>{console.log(` Showing Terms modal for ${T}`),c(T),o(!0)},p=()=>{console.log(" User cancelled terms modal"),o(!1),c(null)},m=async()=>{if(console.log(" User accepted terms"),g1(),o(!1),l==="google"){console.log(" Proceeding with Google login after terms acceptance");const T="https://flinxx-backend.onrender.com";window.location.href=`${T}/auth/google`}else if(l==="facebook"){console.log(" Proceeding with Facebook login after terms acceptance");try{await dy()}catch(T){console.error(" Facebook login error:",T),i("Facebook login failed. Please try again.")}}c(null)},v=async()=>{if(console.log(" Facebook login clicked - checking terms acceptance"),yx()){console.log(" Terms already accepted - proceeding with Facebook login"),n(!0),i(null);try{console.log(" Starting Facebook login..."),console.log("Facebook App ID:","863917229498555"),console.log("Redirect URL:","https://flinx-8a05e.firebaseapp.com/__/auth/handler"),await dy()}catch(T){console.error(" Facebook login error:",T),i("Facebook login failed. Please try again."),n(!1)}}else console.log(" Terms not accepted - showing modal first"),h("facebook")};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:[u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"Welcome to Flinxx"}),u.jsx("p",{className:"text-lg text-white/80",children:"Connect with strangers instantly"}),u.jsx("p",{className:"text-sm text-white/70 mt-2",children:"Sign up to get started"})]}),r&&u.jsx("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg",children:u.jsx("p",{className:"text-red-200 text-sm",children:r})}),u.jsxs("div",{className:"space-y-4",children:[e&&u.jsxs("button",{disabled:!0,className:"w-full bg-gray-400 cursor-not-allowed text-gray-700 font-bold py-3 px-6 rounded-full transition-all text-lg flex items-center justify-center gap-2",children:[u.jsx("span",{className:"animate-spin",children:""})," Signing in..."]}),u.jsx(y1,{isSigningIn:e,onShowTermsModal:h}),u.jsxs("button",{onClick:v,disabled:e,className:`w-full py-3 px-6 rounded-full transition-all text-lg font-bold flex items-center justify-center gap-3 ${e?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:[u.jsx("span",{className:"text-xl",children:"f"})," Continue with Facebook"]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsxs("p",{className:"text-xs text-white/60",children:["By signing in, you agree to our"," ",u.jsx("a",{href:"/terms",className:"text-white/80 hover:text-white underline",children:"TERMS & CONDITIONS"})," ","and"," ",u.jsx("a",{href:"/privacy-policy",className:"text-white/80 hover:text-white underline",children:"Privacy Policy"})]})}),u.jsxs("div",{className:"mt-10 flex flex-col items-center gap-3 text-white/80 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"Instant connection with strangers"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"100% Anonymous & Safe"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"High-quality Video Chat"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"Connect Worldwide"})]})]})]}),s&&u.jsx(gx,{onCancel:p,onContinue:m})]})},Vn=Object.create(null);Vn.open="0";Vn.close="1";Vn.ping="2";Vn.pong="3";Vn.message="4";Vn.upgrade="5";Vn.noop="6";const _l=Object.create(null);Object.keys(Vn).forEach(t=>{_l[Vn[t]]=t});const yh={type:"error",data:"parser error"},vx=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",wx=typeof ArrayBuffer=="function",_x=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,rp=({type:t,data:e},n,r)=>vx&&e instanceof Blob?n?r(e):xy(e,r):wx&&(e instanceof ArrayBuffer||_x(e))?n?r(e):xy(new Blob([e]),r):r(Vn[t]+(e||"")),xy=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Ey(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Zu;function w1(t,e){if(vx&&t.data instanceof Blob)return t.data.arrayBuffer().then(Ey).then(e);if(wx&&(t.data instanceof ArrayBuffer||_x(t.data)))return e(Ey(t.data));rp(t,!1,n=>{Zu||(Zu=new TextEncoder),e(Zu.encode(n))})}const Iy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",no=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Iy.length;t++)no[Iy.charCodeAt(t)]=t;const _1=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),p=new Uint8Array(h);for(r=0;r<n;r+=4)s=no[t.charCodeAt(r)],o=no[t.charCodeAt(r+1)],l=no[t.charCodeAt(r+2)],c=no[t.charCodeAt(r+3)],p[i++]=s<<2|o>>4,p[i++]=(o&15)<<4|l>>2,p[i++]=(l&3)<<6|c&63;return h},x1=typeof ArrayBuffer=="function",ip=(t,e)=>{if(typeof t!="string")return{type:"message",data:xx(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:E1(t.substring(1),e)}:_l[n]?t.length>1?{type:_l[n],data:t.substring(1)}:{type:_l[n]}:yh},E1=(t,e)=>{if(x1){const n=_1(t);return xx(n,e)}else return{base64:!0,data:t}},xx=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Ex="",I1=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{rp(s,!1,l=>{r[o]=l,++i===n&&e(r.join(Ex))})})},S1=(t,e)=>{const n=t.split(Ex),r=[];for(let i=0;i<n.length;i++){const s=ip(n[i],e);if(r.push(s),s.type==="error")break}return r};function T1(){return new TransformStream({transform(t,e){w1(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let ed;function Za(t){return t.reduce((e,n)=>e+n.length,0)}function el(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function C1(t,e){ed||(ed=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Za(n)<1)break;const c=el(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Za(n)<2)break;const c=el(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Za(n)<8)break;const c=el(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),p=h.getUint32(0);if(p>Math.pow(2,21)-1){l.enqueue(yh);break}i=p*Math.pow(2,32)+h.getUint32(4),r=3}else{if(Za(n)<i)break;const c=el(n,i);l.enqueue(ip(s?c:ed.decode(c),e)),r=0}if(i===0||i>t){l.enqueue(yh);break}}}})}const Ix=4;function He(t){if(t)return k1(t)}function k1(t){for(var e in He.prototype)t[e]=He.prototype[e];return t}He.prototype.on=He.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};He.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};He.prototype.off=He.prototype.removeListener=He.prototype.removeAllListeners=He.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};He.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};He.prototype.emitReserved=He.prototype.emit;He.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};He.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Yc=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),rn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),A1="arraybuffer";function Sx(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const R1=rn.setTimeout,b1=rn.clearTimeout;function Jc(t,e){e.useNativeTimers?(t.setTimeoutFn=R1.bind(rn),t.clearTimeoutFn=b1.bind(rn)):(t.setTimeoutFn=rn.setTimeout.bind(rn),t.clearTimeoutFn=rn.clearTimeout.bind(rn))}const N1=1.33;function P1(t){return typeof t=="string"?O1(t):Math.ceil((t.byteLength||t.size)*N1)}function O1(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Tx(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function j1(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function D1(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class L1 extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class sp extends He{constructor(e){super(),this.writable=!1,Jc(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new L1(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=ip(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=j1(e);return n.length?"?"+n:""}}class M1 extends sp{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};S1(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,I1(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Tx()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Cx=!1;try{Cx=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const F1=Cx;function V1(){}class U1 extends M1{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let es=class xl extends He{constructor(e,n,r){super(),this.createRequest=e,Jc(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Sx(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=xl.requestsCount++,xl.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=V1,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete xl.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};es.requestsCount=0;es.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Sy);else if(typeof addEventListener=="function"){const t="onpagehide"in rn?"pagehide":"unload";addEventListener(t,Sy,!1)}}function Sy(){for(let t in es.requests)es.requests.hasOwnProperty(t)&&es.requests[t].abort()}const B1=function(){const t=kx({xdomain:!1});return t&&t.responseType!==null}();class z1 extends U1{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=B1&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new es(kx,this.uri(),e)}}function kx(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||F1))return new XMLHttpRequest}catch{}if(!e)try{return new rn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ax=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class $1 extends sp{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Ax?{}:Sx(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;rp(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Yc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Tx()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const td=rn.WebSocket||rn.MozWebSocket;class W1 extends $1{createSocket(e,n,r){return Ax?new td(e,n,r):n?new td(e,n):new td(e)}doWrite(e,n){this.ws.send(n)}}class H1 extends sp{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=C1(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=T1();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Yc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const G1={websocket:W1,webtransport:H1,polling:z1},q1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,K1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function vh(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=q1.exec(t||""),s={},o=14;for(;o--;)s[K1[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Q1(s,s.path),s.queryKey=Y1(s,s.query),s}function Q1(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Y1(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const wh=typeof addEventListener=="function"&&typeof removeEventListener=="function",El=[];wh&&addEventListener("offline",()=>{El.forEach(t=>t())},!1);class Dr extends He{constructor(e,n){if(super(),this.binaryType=A1,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=vh(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=vh(n.host).host);Jc(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=D1(this.opts.query)),wh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},El.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Ix,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Dr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Dr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=P1(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Yc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Dr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),wh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=El.indexOf(this._offlineEventListener);r!==-1&&El.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Dr.protocol=Ix;class J1 extends Dr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Dr.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",m=>{if(!r)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Dr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=n.name,this.emitReserved("upgradeError",v)}}))};function s(){r||(r=!0,p(),n.close(),n=null)}const o=m=>{const v=new Error("probe error: "+m);v.transport=n.name,s(),this.emitReserved("upgradeError",v)};function l(){o("transport closed")}function c(){o("socket closed")}function h(m){n&&m.name!==n.name&&s()}const p=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",h)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let X1=class extends J1{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>G1[i]).filter(i=>!!i)),super(e,r)}};function Z1(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=vh(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const e2=typeof ArrayBuffer=="function",t2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Rx=Object.prototype.toString,n2=typeof Blob=="function"||typeof Blob<"u"&&Rx.call(Blob)==="[object BlobConstructor]",r2=typeof File=="function"||typeof File<"u"&&Rx.call(File)==="[object FileConstructor]";function op(t){return e2&&(t instanceof ArrayBuffer||t2(t))||n2&&t instanceof Blob||r2&&t instanceof File}function Il(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Il(t[n]))return!0;return!1}if(op(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Il(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Il(t[n]))return!0;return!1}function i2(t){const e=[],n=t.data,r=t;return r.data=_h(n,e),r.attachments=e.length,{packet:r,buffers:e}}function _h(t,e){if(!t)return t;if(op(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=_h(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=_h(t[r],e));return n}return t}function s2(t,e){return t.data=xh(t.data,e),delete t.attachments,t}function xh(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=xh(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=xh(t[n],e));return t}const o2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],a2=5;var oe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(oe||(oe={}));class l2{constructor(e){this.replacer=e}encode(e){return(e.type===oe.EVENT||e.type===oe.ACK)&&Il(e)?this.encodeAsBinary({type:e.type===oe.EVENT?oe.BINARY_EVENT:oe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===oe.BINARY_EVENT||e.type===oe.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=i2(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Ty(t){return Object.prototype.toString.call(t)==="[object Object]"}class ap extends He{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===oe.BINARY_EVENT;r||n.type===oe.BINARY_ACK?(n.type=r?oe.EVENT:oe.ACK,this.reconstructor=new c2(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(op(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(oe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===oe.BINARY_EVENT||r.type===oe.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(ap.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case oe.CONNECT:return Ty(n);case oe.DISCONNECT:return n===void 0;case oe.CONNECT_ERROR:return typeof n=="string"||Ty(n);case oe.EVENT:case oe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&o2.indexOf(n[0])===-1);case oe.ACK:case oe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class c2{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=s2(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const u2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ap,Encoder:l2,get PacketType(){return oe},protocol:a2},Symbol.toStringTag,{value:"Module"}));function mn(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const d2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class bx extends He{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[mn(e,"open",this.onopen.bind(this)),mn(e,"packet",this.onpacket.bind(this)),mn(e,"error",this.onerror.bind(this)),mn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(d2.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:oe.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const p=this.ids++,m=n.pop();this._registerAckCallback(p,m),o.id=p}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:oe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case oe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case oe.EVENT:case oe.BINARY_EVENT:this.onevent(e);break;case oe.ACK:case oe.BINARY_ACK:this.onack(e);break;case oe.DISCONNECT:this.ondisconnect();break;case oe.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:oe.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:oe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Ts(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ts.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Ts.prototype.reset=function(){this.attempts=0};Ts.prototype.setMin=function(t){this.ms=t};Ts.prototype.setMax=function(t){this.max=t};Ts.prototype.setJitter=function(t){this.jitter=t};class Eh extends He{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Jc(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ts({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||u2;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new X1(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=mn(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=mn(n,"error",s);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(mn(e,"ping",this.onping.bind(this)),mn(e,"data",this.ondata.bind(this)),mn(e,"error",this.onerror.bind(this)),mn(e,"close",this.onclose.bind(this)),mn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Yc(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new bx(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ys={};function Sl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Z1(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Ys[i]&&s in Ys[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return l?c=new Eh(r,e):(Ys[i]||(Ys[i]=new Eh(r,e)),c=Ys[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Sl,{Manager:Eh,Socket:bx,io:Sl,connect:Sl});const Nx="https://flinxx-backend.onrender.com";console.log(" Socket.IO connecting to:",Nx);const ee=Sl(Nx,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:10,transports:["websocket","polling"],secure:!1,rejectUnauthorized:!1,forceNew:!1,withCredentials:!0,upgrade:!0,rememberUpgrade:!1,multiplex:!0,timeout:6e4,extraHeaders:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}});ee.on("connect",()=>{console.log(" Socket connected successfully! ID:",ee.id),console.log(" Transport method:",ee.io.engine.transport.name)});ee.on("connect_error",t=>{console.error(" Socket connection error:",t.message||t),console.error(" Error details:",t),ee.io.engine.transport.name==="polling"&&console.log(" Retrying with websocket...")});ee.on("error",t=>{console.error(" Socket error:",t)});ee.on("disconnect",t=>{console.log(" Socket disconnected. Reason:",t),console.log(" Attempting to reconnect...")});ee.on("connect_timeout",()=>{console.error(" Socket connection timeout")});const h2=()=>{console.log(`
 `),console.log(" [ICE SERVERS CONFIGURATION]"),console.log(" "),console.log(" STUN Server:"),console.log("   - stun:global.xirsys.net"),console.log("     Purpose: NAT detection, find public IP"),console.log("     Status: Should work on all networks"),console.log(" "),console.log(" TURN Servers (for relaying if P2P blocked):"),console.log("   - turn:global.xirsys.net:3478?transport=udp"),console.log("     Status: Blocked if ISP blocks UDP port 3478"),console.log("   - turn:global.xirsys.net:3478?transport=tcp"),console.log("     Status: Blocked if ISP blocks TCP port 3478"),console.log("   - turns:global.xirsys.net:5349?transport=tcp"),console.log("     Status: Blocked if ISP blocks TLS port 5349"),console.log(" "),console.log(" Credentials:"),console.log("   - Username: nkhlydv"),console.log("   - Credential: a8e244b8-cf5b-11f0-8771-0242ac140002"),console.log(" "),console.log(" If all TURN candidates fail with error 701:"),console.log("    Configuration is CORRECT"),console.log("    STUN works (can find your IP)"),console.log("    ISP/Network is blocking TURN ports"),console.log("    Try VPN or different network to test"),console.log(` 
`)},f2=()=>[{urls:["stun:global.xirsys.net"]},{urls:["turn:global.xirsys.net:3478?transport=udp","turn:global.xirsys.net:3478?transport=tcp","turns:global.xirsys.net:5349?transport=tcp"],username:"nkhlydv",credential:"a8e244b8-cf5b-11f0-8771-0242ac140002"}],p2=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}h ${n}m ${r}s`:n>0?`${n}m ${r}s`:`${r}s`},m2=({isOpen:t,onClose:e})=>{const[n,r]=N.useState("flex"),[i,s]=N.useState("lite");if(!t)return null;const o=[{id:"lite",name:"LITE",emoji:"",price:"69",duration:"1 Day",features:["Unlimited Filters","Gender Filter: 50/day","10 Match Preferences","Ads Enabled","No Boost"]},{id:"prime",name:"PRIME",emoji:"",price:"199",duration:"15 Days",features:["Unlimited Filters","Gender Filter: 150/day","Full Match Preferences","No Ads","2x Profile Boost","Priority Match Queue"]},{id:"ultra",name:"ULTRA",emoji:"",price:"399",duration:"30 Days",features:["Unlimited Filters","Unlimited Gender Filter","Full Match Preferences","No Ads","5x Profile Boost","Ultra Priority Queue","Ultra Badge","Double Visibility"]}],l=[{id:"blue-tick",name:"Blue Tick",emoji:"",price:"69",features:["Verification badge","Trust boost","Status indicator"]},{id:"chat-themes",name:"Chat Themes",emoji:"",price:"49",features:["Unlock themes","Custom colors","Personal style"]},{id:"match-boost",name:"Match Boost",emoji:"",price:"39",features:["30 min visibility boost","Increased reach","More matches"]},{id:"profile-ring",name:"Profile Ring",emoji:"",price:"79",features:["Colored profile ring","Stand out","Eye-catching design"]},{id:"profile-highlight",name:"Profile Highlight",emoji:"",price:"99",features:["24h highlight","Top search visibility","Premium placement"]}];return o.find(c=>c.id===i),u.jsx("div",{className:"premium-overlay",onClick:e,children:u.jsxs("div",{className:"premium-box",onClick:c=>c.stopPropagation(),children:[u.jsx("button",{className:"close-btn",onClick:e,children:""}),u.jsx("h2",{className:"premium-title",children:"Flinxx Subscriptions"}),u.jsxs("div",{className:"main-tabs-container",children:[!1,u.jsx("button",{className:`main-tab ${n==="flex"?"active":""}`,onClick:()=>r("flex"),children:"Flex Plans"})]}),!1,n==="flex"&&u.jsxs("div",{className:"tab-content",children:[u.jsx("p",{className:"flex-subtitle",children:"Choose individual features"}),u.jsx("div",{className:"flex-section flex-wrapper",children:u.jsx("div",{className:"flex-plans-box",children:u.jsx("div",{className:"flex-plans-container",children:l.map(c=>u.jsxs("div",{className:"flex-card",children:[u.jsxs("div",{className:"flex-item-header",children:[u.jsx("span",{className:"flex-emoji",children:c.emoji}),u.jsx("h4",{children:c.name})]}),u.jsx("div",{className:"flex-item-price",children:c.price}),u.jsx("ul",{className:"flex-item-features",children:c.features.map((h,p)=>u.jsxs("li",{children:[u.jsx("span",{className:"flex-check",children:""}),u.jsx("span",{children:h})]},p))}),u.jsx("button",{className:"flex-item-btn",children:"Add Now"})]},c.id))})})})]}),u.jsx("div",{className:"premium-footer",children:u.jsx("p",{children:"Recurring billing. Cancel anytime. No hidden charges."})})]})})},g2=({isOpen:t,onClose:e,currentGender:n="both",onOpenPremium:r})=>{const[i,s]=N.useState(n);if(!t)return null;const o=()=>{console.log("Gender filter saved:",i),e()},l=()=>{console.log("Join clicked - opening premium modal"),r(),e()};return u.jsx("div",{className:"gender-filter-overlay",onClick:e,children:u.jsxs("div",{className:"gender-filter-modal",onClick:c=>c.stopPropagation(),children:[u.jsx("button",{className:"gender-close-btn",onClick:e,children:""}),u.jsxs("div",{className:"gender-premium-section",children:[u.jsx("div",{className:"premium-icon",children:""}),u.jsxs("div",{className:"premium-content",children:[u.jsx("h3",{children:"Flinxx Prime"}),u.jsx("p",{children:"Get More Gender Filters"})]}),u.jsx("button",{className:"join-btn",onClick:l,children:"Join"})]}),u.jsxs("div",{className:"gender-section",children:[u.jsx("div",{className:"gender-icon",children:""}),u.jsx("h2",{children:"Gender"}),u.jsxs("div",{className:"gender-options",children:[u.jsxs("button",{className:`gender-option ${i==="girls"?"selected":""}`,onClick:()=>s("girls"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Girls Only"})]}),u.jsxs("button",{className:`gender-option ${i==="guys"?"selected":""}`,onClick:()=>s("guys"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Guys Only"})]}),!1]})]}),u.jsxs("div",{className:"gender-footer",children:[u.jsx("button",{className:"save-btn",onClick:o,children:"Save"}),u.jsx("button",{className:"filter-btn",children:""})]})]})})},y2=({isOpen:t,onClose:e,onOpenPremium:n,onReinitializeCamera:r})=>{const i=Yt(),{user:s}=N.useContext(Es)||{},[o,l]=N.useState(!1),[c,h]=N.useState({id:"",name:"",email:"",picture:"",googleId:"",location:"",gender:"",birthday:"",tokens:0,gems:0}),[p,m]=N.useState(!1),[v,T]=N.useState(null),[R,k]=N.useState(!1),P=g=>{g&&(navigator.clipboard.writeText(g),k(!0),setTimeout(()=>k(!1),2e3))};N.useEffect(()=>{t&&s&&x()},[t,s]),N.useEffect(()=>{!v&&t&&E()},[t]);const E=async()=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async g=>{var A,b,C;const{latitude:_,longitude:I}=g.coords;try{const Bt=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${_}&lon=${I}`)).json(),un=((A=Bt.address)==null?void 0:A.city)||((b=Bt.address)==null?void 0:b.town)||"Unknown",bt=((C=Bt.address)==null?void 0:C.country)||"Unknown";T(`${un}, ${bt}`),h(W=>({...W,location:`${un}, ${bt}`}))}catch(Ie){console.log("Reverse geocoding error:",Ie)}},g=>{console.log("Geolocation error:",g),w()}):w()}catch(g){console.log("Location detection error:",g)}},w=async()=>{try{const _=await(await fetch("https://ipapi.co/json/")).json(),I=`${_.city}, ${_.country_name}`;T(I),h(A=>({...A,location:I}))}catch(g){console.log("IP API error:",g)}},x=async()=>{var g;if(s)try{h(I=>({...I,id:s.id||"",name:s.name||"User",email:s.email||"",picture:s.picture||"",googleId:s.googleId||""}));const _=localStorage.getItem("token");if(_){console.log("[ProfileModal] Fetching fresh user profile from backend");const A=await fetch("https://flinxx-backend.onrender.com/api/profile",{method:"GET",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}});if(A.ok){const b=await A.json();console.log("[ProfileModal]  Fetched profile data from backend:",(g=b.user)==null?void 0:g.email),b.success&&b.user&&h(C=>({...C,id:b.user.id||b.user.userId||"",name:b.user.name||"User",email:b.user.email||"",picture:b.user.picture||"",googleId:b.user.googleId||"",gender:b.user.gender||"Not set",birthday:b.user.birthday||"Not set"}))}else console.warn("[ProfileModal]  Failed to fetch profile from backend:",A.status)}else console.log("[ProfileModal]  No token found in localStorage")}catch(_){console.error("[ProfileModal]  Error loading user profile:",_)}},j=g=>{const{name:_,value:I}=g.target;h(A=>({...A,[_]:I}))},M=g=>{var I;const _=(I=g.target.files)==null?void 0:I[0];if(_){const A=new FileReader;A.onloadend=()=>{h(b=>({...b,picture:A.result}))},A.readAsDataURL(_)}},B=async()=>{m(!0);try{console.log("[PROFILE SAVE] Starting profile save process"),console.log("[PROFILE SAVE] Profile data:",c);const g=(s==null?void 0:s.googleId)||localStorage.getItem("userId");if(console.log("[PROFILE SAVE] User ID:",g),!g){console.error("[PROFILE SAVE] Error: No user ID found"),alert("Error: User ID not found. Please login again."),m(!1);return}const _={userId:g,birthday:c.birthday||new Date().toISOString().split("T")[0],gender:c.gender||"Not set"};console.log("[PROFILE SAVE] Request body:",JSON.stringify(_)),console.log("[PROFILE SAVE] Required fields check:"),console.log("  - userId:",!!_.userId),console.log("  - birthday:",!!_.birthday),console.log("  - gender:",!!_.gender);const I=localStorage.getItem("token");console.log("[PROFILE SAVE] Token present:",!!I),I||console.warn("[PROFILE SAVE] Warning: No auth token found");const A="https://flinxx-backend.onrender.com";console.log("[PROFILE SAVE] Backend URL:",A),console.log("[PROFILE SAVE] Making API call to /api/users/complete-profile");const b=await fetch(`${A}/api/users/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json",...I&&{Authorization:`Bearer ${I}`}},body:JSON.stringify(_)});if(console.log("[PROFILE SAVE] Response status:",b.status),!b.ok){const Ie=await b.json();console.error("[PROFILE SAVE] Error response:",Ie),alert(`Failed to save profile: ${Ie.error||"Unknown error"}`),m(!1);return}const C=await b.json();console.log("[PROFILE SAVE]  Profile saved successfully:",C),localStorage.setItem("userProfile",JSON.stringify(_)),l(!1),console.log("[PROFILE SAVE] Profile saved successfully"),console.log("[PROFILE SAVE] Closing ProfileModal..."),e(),alert("Profile updated successfully!"),console.log(" [ProfileModal] Scheduling camera re-init with 500ms delay to allow modal unmount"),typeof r=="function"?setTimeout(()=>{console.log(`
 [ProfileModal] 500ms delay complete, reinitializing camera now`),console.log(" [ProfileModal] Calling onReinitializeCamera()"),r().then(Ie=>{Ie?console.log(" [ProfileModal]  Camera reinitialized successfully after profile save"):console.warn(" [ProfileModal]  Camera reinitialization returned false")}).catch(Ie=>{console.error(" [ProfileModal]  Error calling reinitializeCamera:",Ie)})},500):console.warn(" [ProfileModal]  onReinitializeCamera callback not provided")}catch(g){console.error("[PROFILE SAVE] Error:",g),console.error("[PROFILE SAVE] Error message:",g.message),console.error("[PROFILE SAVE] Error stack:",g.stack),alert("Failed to save profile: "+g.message)}finally{m(!1)}},S=async()=>{try{await XC(Go),localStorage.removeItem("userInfo"),localStorage.removeItem("userProfile"),i("/login",{replace:!0})}catch(g){console.error("Sign out error:",g)}};return t?u.jsx("div",{className:"profile-modal-overlay",onClick:e,children:u.jsxs("div",{className:"profile-modal-container",onClick:g=>g.stopPropagation(),children:[u.jsx("button",{className:"profile-modal-close",onClick:e,children:""}),u.jsxs("div",{className:"profile-header",children:[u.jsxs("div",{className:"profile-picture-container",children:[u.jsx("img",{src:c.picture||"https://via.placeholder.com/120",alt:"Profile",className:"profile-picture"}),o&&u.jsxs("label",{className:"photo-upload-label",children:[u.jsx("input",{type:"file",accept:"image/*",onChange:M,style:{display:"none"}}),""]})]}),o?u.jsx("input",{type:"text",name:"name",value:c.name,onChange:j,className:"profile-input-name",placeholder:"Name"}):u.jsx("h2",{className:"profile-name",children:c.name}),u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:"6px",opacity:.8},children:[u.jsxs("span",{children:["ID: ",c.id||"N/A"]}),c.id&&u.jsx("button",{onClick:()=>P(c.id),style:{background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center"},title:"Copy ID",children:""})]})]}),u.jsxs("div",{className:"profile-premium-section",onClick:n,style:{cursor:"pointer"},children:[u.jsx("div",{className:"premium-badge",children:" Flinxx Premium"}),u.jsx("p",{className:"premium-description",children:"Unlock premium features"})]}),u.jsxs("div",{className:"profile-details",children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Tokens"}),u.jsx("span",{className:"detail-value",children:c.tokens})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gems"}),u.jsx("span",{className:"detail-value",children:c.gems})]}),o?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Location"}),u.jsx("input",{type:"text",name:"location",value:c.location,onChange:j,className:"profile-input-small"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gender"}),u.jsxs("select",{name:"gender",value:c.gender,onChange:j,className:"profile-input-small",children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Birthday"}),u.jsx("input",{type:"date",name:"birthday",value:c.birthday?c.birthday.slice(0,10):"",onChange:j,className:"profile-input-small text-black focus:text-black !text-black [&::-webkit-datetime-edit]:text-black [&::-webkit-datetime-edit-year-field]:text-black [&::-webkit-datetime-edit-month-field]:text-black [&::-webkit-datetime-edit-day-field]:text-black"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Location"}),u.jsx("span",{className:"detail-value",children:c.location||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gender"}),u.jsx("span",{className:"detail-value",children:c.gender||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Birthday"}),u.jsx("span",{className:"detail-value",children:c.birthday||"Not set"})]})]})]}),u.jsx("div",{className:"profile-actions",children:o?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-save",onClick:B,disabled:p,children:p?"Saving...":"Save Changes"}),u.jsx("button",{className:"btn-cancel",onClick:()=>{l(!1),x()},children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-edit",onClick:()=>l(!0),children:" Edit Profile"}),u.jsx("button",{className:"btn-more",children:" More"})]})}),u.jsx("button",{className:"btn-sign-out",onClick:S,children:"Sign Out"})]})}):null},v2=({isOpen:t,onClose:e})=>{const[n,r]=N.useState([{id:1,username:"Up ke ",name:"Up ke",location:"National Capital Territory of Delhi",duration:"00:05",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:2,username:"Loup ",name:"Loup",location:"Algeria",duration:"00:06",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:3,username:"Nish ",name:"Nish",location:"Maharashtra",duration:"00:04",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:4,username:"Priya ",name:"Priya",location:"Gujarat",duration:"00:02",date:"11/27/2025",time:"9:23PM",avatar:"M",liked:!1},{id:5,username:"pagbigyamnmako ",name:"pagbigyamnmako",location:"Philippines",duration:"00:08",date:"11/27/2025",time:"9:23PM",avatar:"",liked:!1}]),i=o=>{r(n.map(l=>l.id===o?{...l,liked:!l.liked}:l))},s=o=>{r(n.filter(l=>l.id!==o))};return t?u.jsx("div",{className:"match-history-overlay",onClick:e,children:u.jsxs("div",{className:"match-history-container",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"match-history-header",children:[u.jsx("h2",{children:"Match History"}),u.jsx("button",{className:"match-history-close",onClick:e,children:""})]}),u.jsx("div",{className:"match-history-list",children:n.length===0?u.jsxs("div",{className:"match-history-empty",children:[u.jsx("p",{children:"No match history yet"}),u.jsx("p",{className:"match-history-empty-sub",children:"Start video chatting to build your history!"})]}):n.map(o=>u.jsxs("div",{className:"match-card",children:[u.jsxs("div",{className:"match-card-date",children:[u.jsxs("div",{className:"match-card-datetime",children:[u.jsx("span",{className:"match-date",children:o.date}),u.jsx("span",{className:"match-time",children:o.time})]}),u.jsxs("div",{className:"match-duration",children:[" ",o.duration]})]}),u.jsxs("div",{className:"match-card-user",children:[u.jsx("div",{className:"match-card-avatar",children:o.avatar==="M"?u.jsx("div",{className:"avatar-initial",children:"M"}):u.jsx("span",{children:o.avatar})}),u.jsxs("div",{className:"match-card-info",children:[u.jsx("p",{className:"match-card-name",children:o.name}),u.jsxs("p",{className:"match-card-location",children:[" ",o.location]})]})]}),u.jsxs("div",{className:"match-card-actions",children:[u.jsx("button",{className:`action-btn like-btn ${o.liked?"liked":""}`,onClick:()=>i(o.id),title:"Like this match",children:""}),u.jsx("button",{className:"action-btn delete-btn",onClick:()=>s(o.id),title:"Delete from history",children:""})]})]},o.id))})]})}):null},Cy=({isOpen:t,onClose:e,onUserSelect:n,mode:r="search"})=>{const[i,s]=N.useState(""),[o,l]=N.useState([]),[c,h]=N.useState(!1),p=r==="notifications";if(!t)return null;const m=async T=>{if(s(T),!T.trim()){l([]);return}h(!0);try{const k=await fetch(`https://flinxx-backend.onrender.com/api/search-user?q=${encodeURIComponent(T)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!k.ok){console.error("Search error:",k.status),l([]);return}const P=await k.json();l(Array.isArray(P)?P:[])}catch(R){console.error("Search error:",R),l([])}finally{h(!1)}},v=T=>{console.log("Friend request sent to:",T)};return u.jsx("div",{className:"search-friends-overlay",onClick:e,children:u.jsxs("div",{className:"search-friends-modal",onClick:T=>T.stopPropagation(),children:[u.jsxs("div",{className:"search-friends-header",children:[u.jsx("h2",{children:p?"Notifications":"Search Friends"}),u.jsx("button",{className:"search-close-btn",onClick:e,children:""})]}),!p&&u.jsxs("div",{className:"search-input-container",children:[u.jsx("input",{type:"text",placeholder:"Search a friend by ID",value:i,onChange:T=>m(T.target.value),className:"search-input",autoFocus:!0}),u.jsx("span",{className:"search-icon",children:""})]}),!p&&u.jsx("div",{className:"search-results",children:o.length===0?u.jsx("div",{className:"search-empty-state",children:u.jsx("p",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.6)",marginTop:"40px"},children:i?"No users found":"Start typing to search"})}):o.map((T,R)=>u.jsxs("div",{className:"search-result-item",onClick:()=>{n&&n(T),e()},children:[u.jsx("div",{className:"result-avatar",children:T.avatar&&T.avatar.startsWith("http")?u.jsx("img",{src:T.avatar,alt:"avatar",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):""}),u.jsxs("div",{className:"result-info",children:[u.jsx("p",{className:"result-name",children:T.name}),u.jsxs("div",{className:"result-id-container",children:[u.jsxs("p",{className:"result-id",children:["ID: ",T.publicId]}),u.jsxs("button",{className:"friend-badge-btn",title:"Send Friend Request",onClick:k=>{k.stopPropagation(),v(T.id||T.publicId)},children:[u.jsx("span",{className:"friend-emoji",children:""}),u.jsx("span",{className:"friend-text",children:"FRIEND"})]})]})]})]},`user-${T.shortId}-${R}`))})]})})},w2=({currentUser:t,onProfileClick:e,onPremiumClick:n,onMatchHistoryClick:r,onSearchClick:i,onRequestsClick:s,isFixedPosition:o=!1})=>{const l=o?{position:"fixed",top:"12px",right:"24px",zIndex:999999}:{},c=o?"flex items-center gap-4":"top-right-icons";return u.jsxs("div",{className:c,style:l,children:[u.jsx("div",{className:"icon-circle",title:"Profile",onClick:e,style:{cursor:"pointer"},children:t!=null&&t.picture?u.jsx("img",{src:t.picture,alt:"Profile"}):""}),u.jsx("div",{className:"icon-circle",title:"Search",onClick:i,style:{cursor:"pointer"},children:""}),u.jsx("div",{className:"icon-circle",title:"Requests",onClick:s,style:{cursor:"pointer"},children:""}),u.jsx("div",{className:"icon-circle",title:"Messages",onClick:()=>console.log("Messages clicked"),children:""}),u.jsx("div",{className:"icon-circle",title:"Flinx Premium",onClick:n,children:""}),u.jsx("div",{className:"icon-circle",title:"Match History",onClick:r,children:""})]})};console.log(" CHAT BUILD: 2025-12-20T00:00:00Z - WebRTC stable remote stream handling");const _2=()=>{var Ns;console.log("RENDER START");const t=Yt(),e=Qc(),{user:n}=N.useContext(Es)||{},[r,i]=N.useState(!1),[s,o]=N.useState(!1),[l,c]=N.useState(null),[h,p]=N.useState(!1),[m,v]=N.useState(!1),[T,R]=N.useState(!1),[k,P]=N.useState(!1),[E,w]=N.useState(!1),[x,j]=N.useState(null),[M,B]=N.useState(0),[S,g]=N.useState(!1),[_,I]=N.useState(!1),[A,b]=N.useState(!1),[C,Ie]=N.useState(!1),[Bt,un]=N.useState(!1),[bt,W]=N.useState(!1),[J,ne]=N.useState("both"),[Se,he]=N.useState(!1),[Ae,Nt]=N.useState([]),[It,Jt]=N.useState(""),[Xt,lr]=N.useState(!1),da=N.useRef(null),Y=N.useRef(null),Wr=N.useRef(null),St=N.useRef(null),[fe,Cs]=N.useState(null),te=N.useRef(null),Tt=N.useRef(null),re=N.useRef(null),Zt=N.useRef(null),ks=N.useRef(null),[As,Xc]=N.useState(!1);console.log("HOOKS DONE"),console.log(" CHAT COMPONENT LOADED - BUILD: 895cedd (temporal deadzone fix - move hooks to top)"),N.useEffect(()=>{console.log(" [TERMS CHECK] Checking if terms are accepted...");try{const L=localStorage.getItem("termsAccepted")==="true";console.log(" [TERMS CHECK] termsAccepted from localStorage:",L),L?(console.log(" [TERMS CHECK] User has accepted terms - allowing access"),o(!0)):(console.log(" [TERMS CHECK] User has not accepted terms - showing modal"),i(!0))}catch(L){console.error(" [TERMS CHECK] Error checking terms:",L),o(!0)}},[]);const Zc=()=>{console.log(" User accepted terms on dashboard"),localStorage.setItem("termsAccepted","true"),i(!1),o(!0)},Rs=()=>{console.log(" User cancelled terms on dashboard - redirecting to login"),i(!1),t("/login",{replace:!0})};N.useEffect(()=>{const H=new URLSearchParams(e.search).get("view");c(H),p(H==="home"),console.log("[Chat] Location search params:",e.search),console.log("[Chat] view parameter:",H),console.log("[Chat] shouldStartAsIntro:",H==="home")},[e.search]),N.useEffect(()=>{const L=n||{googleId:"guest_"+Math.random().toString(36).substring(2,9),name:"Guest User",email:"guest@flinxx.local",picture:null};Cs(L),St.current||(St.current=L.googleId||L.id,console.log(" USER ID INITIALIZED (ONE TIME):",St.current)),Wr.current||(Wr.current=L)},[n]),N.useEffect(()=>()=>{ks.current&&clearInterval(ks.current)},[]),N.useEffect(()=>{var L;console.log(" Refs initialized:"),console.log("   localVideoRef.current exists:",!!te.current),console.log("   localVideoRef.current in DOM:",(L=te.current)!=null&&L.parentElement?"YES":"NO"),console.log("   remoteVideoRef.current exists:",!!Tt.current),console.log("   localStreamRef.current exists:",!!re.current)},[]),N.useEffect(()=>{const L=setInterval(()=>{var Q,G;const H=!!Tt.current,z=!!((Q=Tt.current)!=null&&Q.parentElement);(G=Tt.current)!=null&&G.srcObject,H&&z?console.log(" remoteVideoRef is AVAILABLE in DOM and ready for ontrack"):H&&!z?console.warn(" remoteVideoRef exists but NOT in DOM - ontrack may fail!"):console.log(" Waiting for remoteVideoRef to be mounted...")},2e3);return()=>clearInterval(L)},[]),N.useEffect(()=>{if(console.log(`
 [POSITIONING] Local video positioning effect triggered`),console.log("   cameraStarted:",m),console.log("   hasPartner:",k),console.log("   isMatchingStarted:",T),!m){console.log("   [POSITIONING] Camera not started yet, skipping positioning");return}const L=te.current;if(!L){console.warn(" [POSITIONING] Persistent video ref is null - element not yet rendered");return}console.log(" [POSITIONING] Video element ref found:",L);const H=document.querySelectorAll(".left-panel");console.log(`   Found ${H.length} left-panel containers`);for(let z=0;z<H.length;z++){const Q=H[z];if(Q.offsetParent!==null){console.log(`   [POSITIONING] Visible left-panel found at index ${z}`),L.parentElement!==Q?(console.log(`   [POSITIONING] Moving video into left-panel ${z}`),Q.insertBefore(L,Q.firstChild),L.style.display="block",console.log(`    [POSITIONING] Video positioned in left-panel ${z}`)):(console.log("    [POSITIONING] Video already in correct panel"),L.style.display="block");return}}},[m,k,T]);const Ci=Jo.useCallback(async()=>{console.log(`

 ===== CAMERA RE-INITIALIZATION STARTED =====`),console.log(" [REINIT] Camera re-initialization requested"),console.log(" [REINIT] Current state:"),console.log("  - localStreamRef.current exists:",!!re.current),console.log("  - localVideoRef.current exists:",!!te.current),console.log("  - cameraStarted:",m);try{if(!te.current)return console.error(" [REINIT]  CRITICAL: localVideoRef.current is null/undefined - video element not in DOM"),!1;if(!te.current.parentElement)return console.error(" [REINIT]  CRITICAL: Video element is not attached to DOM"),!1;if(console.log(" [REINIT]  Video element exists in DOM"),re.current){console.log(" [REINIT] Stream exists, checking if tracks are active...");const H=re.current.getTracks();if(console.log(" [REINIT] Stream has",H.length,"tracks"),H.forEach((z,Q)=>{console.log(`  Track ${Q}:`,{kind:z.kind,enabled:z.enabled,readyState:z.readyState})}),H.length===0)console.warn(" [REINIT]  Stream exists but has no active tracks - will request new stream"),re.current=null;else{console.log(" [REINIT]  Stream has active tracks, reattaching to video element"),te.current.srcObject=re.current,te.current.muted=!0,console.log(" [REINIT] srcObject set, waiting for play()...");try{const z=te.current.play();return z!==void 0&&await z,console.log(" [REINIT]  Camera preview reattached and playing"),console.log(` ===== CAMERA RE-INITIALIZATION SUCCESSFUL =====

`),!0}catch(z){return console.error(" [REINIT]  Error playing video:",z),console.error(" [REINIT] Error name:",z.name),console.error(" [REINIT] Error message:",z.message),!1}}}console.log(" [REINIT] No existing stream or tracks inactive, requesting new preview stream");const L=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});return re.current=L,console.log(" [REINIT]  New camera stream obtained:",L),console.log(" [REINIT] New stream tracks:",L.getTracks().map(H=>({kind:H.kind,id:H.id}))),te.current.srcObject=L,te.current.muted=!0,console.log(" [REINIT] srcObject set to new stream, calling play()..."),requestAnimationFrame(()=>{var H;(H=te.current)==null||H.play().catch(z=>{console.log(" [REINIT] Video play blocked:",z)}),console.log(" [REINIT]  New camera preview play command dispatched")}),v(!0),console.log(` ===== CAMERA RE-INITIALIZATION SUCCESSFUL =====

`),!0}catch(L){return console.error(" [REINIT]  Error reinitializing camera:",L),console.error(" [REINIT] Error name:",L.name),console.error(" [REINIT] Error message:",L.message),console.error(` ===== CAMERA RE-INITIALIZATION FAILED =====

`),!1}},[m]);N.useEffect(()=>{da.current={reinitializeCamera:Ci}},[Ci]),N.useEffect(()=>{if(!E)return;const L=setInterval(()=>{B(H=>H+1)},1e3);return()=>clearInterval(L)},[E]),N.useEffect(()=>{k&&m&&console.log(" [PARTNER FOUND] Transitioning to video chat screen")},[k,m]),N.useEffect(()=>{if(h){console.log("[Camera]  Skipping auto camera init - user just completed profile (view=home)"),console.log('[Camera] Camera will start when user clicks "Start Video Chat" button');return}async function L(){try{if(console.log(" Starting camera preview..."),console.log(" [INIT] Chat component mounted, attempting to initialize camera"),!te.current){console.error(" [INIT]  Video element not in DOM yet, cannot initialize camera");return}console.log(" [INIT]  Video element found in DOM, requesting camera permissions");const z=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(re.current=z,console.log("[Camera]  Camera stream obtained"),console.log("[Camera] Stream tracks:",z.getTracks().map(Q=>({kind:Q.kind,id:Q.id}))),te.current){te.current.srcObject=z,te.current.muted=!0;try{await te.current.play(),console.log(" Camera preview playing successfully"),v(!0)}catch(Q){console.error(" Preview play error:",Q)}}}catch(z){console.log(" Camera preview error (this is OK, user may deny permission):",z.message),console.log(" Error name:",z.name),console.log(" Error code:",z.code)}}console.log("[Camera] Chat component useEffect triggered, scheduling camera init with delay");const H=setTimeout(()=>{console.log("[Camera] Delay complete, now calling startPreview()"),L()},100);return()=>{console.log("[Camera] Chat component unmounting, clearing camera init timer"),clearTimeout(H)}},[h]);const bs=async()=>{if(console.log(" createPeerConnection called"),console.log("   Current localStreamRef:",re.current),!re.current){console.warn(" CRITICAL: localStreamRef.current is null - attempting to reacquire camera stream");try{const Q=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(re.current=Q,te.current){te.current.srcObject=Q,te.current.muted=!0;try{await te.current.play()}catch(G){console.warn(" Play error during reacquisition:",G)}}console.log(" LOCAL STREAM RE-ACQUIRED SUCCESSFULLY"),console.log("   Tracks:",Q.getTracks().map(G=>({kind:G.kind,id:G.id})))}catch(Q){throw console.error(" FATAL: Could not reacquire camera stream:",Q.message),new Error("Cannot proceed: local camera stream unavailable - "+Q.message)}}h2();const L=await Ye(),H=[{urls:["stun:global.xirsys.net","turn:global.xirsys.net:3478?transport=udp","turn:global.xirsys.net:3478?transport=tcp"],username:"nkhlvdv",credential:"a8e244b8-cf5b-11f0-8771-0242ac140002"},...L];console.log(" ICE Servers Configuration:",{count:H.length,servers:H.map(Q=>({urls:Q.urls,username:Q.username?"***":void 0,credential:Q.credential?"***":void 0}))});const z=new RTCPeerConnection({iceServers:H,iceTransportPolicy:"all"});if(Y.current=z,console.log(" RTCPeerConnection created with iceTransportPolicy: all"),z.onicecandidate=Q=>{if(Q.candidate){const G=Q.candidate;console.log(" ICE candidate generated:",{candidate:G.candidate,protocol:G.protocol,port:G.port,address:G.address,type:G.type,priority:G.priority,sdpMLineIndex:G.sdpMLineIndex,sdpMId:G.sdpMid}),G.type==="relay"?(console.log(" RELAY (TURN) candidate generated - TURN server is reachable"),console.log("   Protocol:",G.protocol,"Port:",G.port)):G.type==="srflx"?(console.log(" SRFLX (server reflexive) candidate - STUN working"),console.log("   Found public address via STUN")):G.type==="host"&&console.log(" HOST candidate - direct LAN connection possible"),console.log(" Sending ICE candidate to partner socket:",Zt.current),ee.emit("ice_candidate",{candidate:G,to:Zt.current}),console.log(" ICE candidate sent to peer")}else console.log(" ICE gathering complete (null candidate received)"),console.log(" ICE gathering summary:"),console.log("   Connection State:",z.connectionState),console.log("   ICE Connection State:",z.iceConnectionState),console.log("   ICE Gathering State:",z.iceGatheringState)},z.oniceconnectionstatechange=()=>{const Q=z.iceConnectionState;switch(console.log(`
 ===== ICE CONNECTION STATE CHANGED =====`),console.log(" New ICE Connection State:",Q),Q){case"new":console.log(" State: NEW - Gathering ICE candidates");break;case"checking":console.log(" State: CHECKING - Testing ICE candidate pairs"),console.log(" Connection in progress - waiting for connectivity");break;case"connected":console.log(" State: CONNECTED - Found working ICE candidate pair"),console.log(" Peer-to-peer communication established");break;case"completed":console.log(" State: COMPLETED - ICE checks completed, ready for media"),console.log(" All connectivity checks passed");break;case"failed":console.error(" State: FAILED - All ICE candidate pairs failed"),console.error(" Could not establish peer-to-peer connection"),console.error(" TURN server may be unreachable or blocked by ISP"),console.error(" Troubleshooting:"),console.error("   - Check console for TURN error details"),console.error("   - TURN error 701 = Network/ISP blocking ports 3478, 5349"),console.error("   - Solutions: Try VPN, different WiFi, or mobile hotspot"),console.error("   - User can retry with a retry button (do NOT auto-restart ICE)");break;case"disconnected":console.warn(" State: DISCONNECTED - Lost connection to peer"),console.warn("   Note: ICE restart is manual only to prevent stream loss");break;case"closed":console.log(" State: CLOSED - Connection closed");break}console.log(" Full connection states:"),console.log("   Signaling State:",z.signalingState),console.log("   Connection State:",z.connectionState),console.log("   ICE Gathering State:",z.iceGatheringState)},Y.current._remoteStream||(Y.current._remoteStream=new MediaStream,console.log(" PERSISTENT REMOTE STREAM CREATED - will accumulate all incoming tracks")),z.ontrack=Q=>{console.log(`

 ===== CRITICAL: ONTRACK HANDLER FIRING! =====`),console.log(" ONTRACK CALLED AT:",new Date().toISOString()),console.log(" Track received:",{kind:Q.track.kind,id:Q.track.id,enabled:Q.track.enabled});const G=Y.current._remoteStream;if(console.log(" Using persistent remote stream ID:",G.id),G.addTrack(Q.track),console.log(" Track added to persistent remote stream"),console.log(" Remote stream now has",G.getTracks().length,"track(s)"),console.log(" Tracks:",G.getTracks().map(me=>({kind:me.kind,id:me.id,enabled:me.enabled}))),!Tt.current){console.error(" CRITICAL ERROR: remoteVideoRef.current is NULL!"),console.error("   Cannot attach remote track - video element not available");return}Tt.current.srcObject!==G?(console.log(" ATTACHING PERSISTENT STREAM to remoteVideoRef"),Tt.current.srcObject=G,Tt.current.muted=!1,console.log(" srcObject attached, attempting play()..."),Tt.current.play().catch(()=>{console.log(" Autoplay blocked - will play on user interaction")})):(console.log(" STREAM ALREADY ATTACHED - skipping re-attachment"),console.log("   Stream has",G.getTracks().length,"tracks now")),console.log(`   ONTRACK COMPLETE - Remote stream persisted and attached

`)},z.onconnectionstatechange=()=>{console.log(`
 ===== CONNECTION STATE CHANGED =====`),console.log(" New Connection State:",z.connectionState),console.log("   ICE Connection State:",z.iceConnectionState),console.log("   ICE Gathering State:",z.iceGatheringState),console.log("   Signaling State:",z.signalingState),z.connectionState==="connected"?(w(!0),console.log(" WebRTC connection ESTABLISHED"),setTimeout(()=>{console.log(`
 ===== RECEIVER DEBUG CHECK (after connected) =====`);const Q=z.getReceivers();console.log(" Total receivers:",Q.length),Q.forEach((me,we)=>{var Fe,Je,_e,Ge,pe;console.log(` Receiver ${we}:`,{kind:(Fe=me.track)==null?void 0:Fe.kind,enabled:(Je=me.track)==null?void 0:Je.enabled,readyState:(_e=me.track)==null?void 0:_e.readyState,id:(Ge=me.track)==null?void 0:Ge.id,muted:(pe=me.track)==null?void 0:pe.muted})}),console.log(" Audio and video tracks should be present above");const G=z.getSenders();console.log(`
 Total senders:`,G.length),G.forEach((me,we)=>{var Fe,Je,_e,Ge;console.log(` Sender ${we}:`,{kind:(Fe=me.track)==null?void 0:Fe.kind,enabled:(Je=me.track)==null?void 0:Je.enabled,readyState:(_e=me.track)==null?void 0:_e.readyState,id:(Ge=me.track)==null?void 0:Ge.id})})},1e3)):z.connectionState==="disconnected"?(w(!1),console.log(" WebRTC connection DISCONNECTED")):z.connectionState==="failed"?(w(!1),console.log(" WebRTC connection FAILED")):z.connectionState==="closed"&&(w(!1),console.log(" WebRTC connection CLOSED"))},!re.current)throw console.error(" CRITICAL ERROR: localStreamRef.current is null/undefined in createPeerConnection!"),new Error("Local stream lost before createPeerConnection");return z};N.useEffect(()=>(console.log(`

 ===== SOCKET LISTENERS SETUP (COMPONENT MOUNT) =====`),console.log(" Setting up socket listeners - runs ONCE on component load"),console.log(" Socket ID:",ee.id),console.log(" Socket connected:",ee.connected),console.log("  Using userIdRef.current for ALL ID comparisons:",St.current),ee.off("partner_found"),ee.off("webrtc_offer"),ee.off("webrtc_answer"),ee.off("ice_candidate"),ee.off("receive_message"),ee.off("partner_disconnected"),ee.off("disconnect"),console.log(" Removed old listeners (if any existed)"),ee.on("partner_found",async L=>{var Fe,Je,_e,Ge;console.log(`

 ===== PARTNER FOUND EVENT RECEIVED =====`),console.log(" RAW DATA from server:",JSON.stringify(L,null,2)),console.log(" My socket ID:",ee.id),console.log(" currentUser object:",JSON.stringify(fe,null,2)),console.log(" userIdRef.current (SHOULD USE THIS):",St.current),console.log(" currentUser.googleId:",fe==null?void 0:fe.googleId),console.log(" currentUser.id:",fe==null?void 0:fe.id),console.log(" data.socketId:",L.socketId),console.log(" data.partnerId:",L.partnerId),console.log(" data.userName:",L.userName),console.log(`
 SELF-MATCH CHECK - START`);const H=St.current,z=L.partnerId;if(console.log(" COMPARISON VALUES:"),console.log("   myUserId type:",typeof H,"value:",H),console.log("   partnerUserId type:",typeof z,"value:",z),console.log("   Are they EQUAL?",H===z),console.log("   String comparison:",String(H)===String(z)),H===z){console.error(`
 CRITICAL ERROR: SELF-MATCH DETECTED! `),console.error("   My user ID:",H,"type:",typeof H),console.error("   Partner user ID:",z,"type:",typeof z),console.error("   Match IDs:",H===z),console.error("   These should be DIFFERENT!"),lr(!0),console.error("   Emitting skip_user..."),ee.emit("skip_user",{partnerSocketId:L.socketId}),console.error("   Emitting find_partner..."),ee.emit("find_partner",{userId:St.current,userName:fe.name||"Anonymous",userAge:fe.age||18,userLocation:fe.location||"Unknown"}),console.error("   Returning - match REJECTED");return}console.log(" SELF-MATCH CHECK PASSED - partner is different user"),console.log("   Accepting match and proceeding with WebRTC setup"),console.log(` SELF-MATCH CHECK - END
`),Zt.current=L.socketId,console.log(" CRITICAL: Stored partner socket ID:",Zt.current),console.log(" CRITICAL: Verification - partnerSocketIdRef.current is now:",Zt.current),console.log(" ABOUT TO CALL setHasPartner(true)"),P(!0),console.log("  setHasPartner(true) CALLED - force attach effect should trigger");const Q={...L,picture:L.userPicture||L.picture||null,userName:L.userName||L.name||"Anonymous",userLocation:L.userLocation||L.location||"Unknown",userAge:L.userAge||L.age||18};j(Q),console.log("  setPartnerInfo CALLED with data:",Q);const G=ee.id,me=L.socketId,we=G<me;if(console.log(" SOCKET ID COMPARISON:"),console.log("   My socket ID:",G),console.log("   Partner socket ID:",me),console.log("   Am I offerer? (myID < partnerID):",we),console.log(`
 ===== CRITICAL STREAM VERIFICATION =====`),console.log(" Checking localStreamRef.current status:"),console.log("   exists:",!!re.current),console.log("   tracks:",((Fe=re.current)==null?void 0:Fe.getTracks().length)||0),console.log("   video element srcObject:",!!((Je=te.current)!=null&&Je.srcObject)),!re.current){console.error("  CRITICAL: localStreamRef.current is NULL - cannot proceed to WebRTC"),console.error("   This means the camera stream was never acquired or was lost"),console.error("   Attempting emergency camera reacquisition...");try{const pe=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(re.current=pe,te.current){te.current.srcObject=pe,te.current.muted=!0;try{await te.current.play()}catch{console.warn(" Play error in emergency reacquisition")}}console.log("  EMERGENCY: Camera stream re-acquired")}catch(pe){console.error("  EMERGENCY FAILED: Could not reacquire camera -",pe.message),console.error("   User must allow camera permission to continue");return}}if(console.log(`  STREAM VERIFICATION PASSED - proceeding with WebRTC
`),!we){console.log(" I am the ANSWERER - waiting for offer from offerer");return}console.log(" I am the OFFERER - creating peer connection and sending offer");try{if(console.log(`
 OFFERER: Creating peer connection`),Y.current){console.warn(" OFFERER: WARNING - Peer connection already exists! Not recreating."),console.warn("   Existing PC state:",{connectionState:Y.current.connectionState,iceConnectionState:Y.current.iceConnectionState,signalingState:Y.current.signalingState});return}let pe;try{pe=await bs()}catch(Re){console.error(" OFFERER: Error creating peer connection:",Re);return}if(Y.current=pe,console.log(" OFFERER: Peer connection created"),console.log(" OFFERER Stream status after peer connection creation:",{exists:!!re.current,trackCount:(_e=re.current)==null?void 0:_e.getTracks().length,tracks:(Ge=re.current)==null?void 0:Ge.getTracks().map(Re=>({kind:Re.kind,enabled:Re.enabled,state:Re.readyState}))}),re.current){console.log(`
 OFFERER localStream:`,re.current);const Re=re.current.getTracks();console.log(" OFFERER: All available tracks:",Re),console.log(" OFFERER tracks detail:",Re.map(dt=>({kind:dt.kind,id:dt.id,enabled:dt.enabled,state:dt.readyState})));const De=pe.getSenders();if(console.log(" OFFERER: Existing senders count:",De.length),De.length>0)console.warn(" OFFERER WARNING: Tracks already added! Senders:",De.map(dt=>{var Ve,Pt;return{kind:(Ve=dt.track)==null?void 0:Ve.kind,id:(Pt=dt.track)==null?void 0:Pt.id}})),console.warn("   Not adding tracks again to avoid duplicates");else{console.log(`
 OFFERER: Adding ${Re.length} local tracks to peer connection`),Re.forEach((Ve,Pt)=>{console.log(`  [${Pt}] Adding ${Ve.kind} track (id: ${Ve.id}, enabled: ${Ve.enabled})`);try{const cr=pe.addTrack(Ve,re.current);console.log(`  [${Pt}]  addTrack succeeded, sender:`,cr)}catch(cr){console.error(`  [${Pt}]  addTrack failed:`,cr)}}),console.log(`
 OFFERER: All tracks added to peer connection`);const dt=pe.getSenders();console.log(" OFFERER senders count:",dt.length),console.log(" OFFERER senders after addTrack:",dt.map((Ve,Pt)=>{var cr,ma,Un;return{index:Pt,kind:(cr=Ve.track)==null?void 0:cr.kind,id:(ma=Ve.track)==null?void 0:ma.id,trackExists:!!Ve.track,trackEnabled:(Un=Ve.track)==null?void 0:Un.enabled}})),console.log(" OFFERER: Ready to send offer with",Re.length,`tracks
`)}}else console.error(" OFFERER: No local stream available - TRACKS WILL NOT BE SENT!"),console.error(" OFFERER: localStreamRef.current is:",re.current);console.log(`
 ===== OFFERER CREATING AND SENDING OFFER =====`),console.log(" OFFERER: Creating WebRTC offer with offerToReceiveVideo/Audio");const Cn=await pe.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0});console.log(" OFFERER: Offer created with receive constraints:",Cn),console.log(" OFFERER SDP CHECK - Looking for a=sendrecv:");const kn=Cn.sdp.split(`
`).filter(Re=>Re.includes("sendrecv")||Re.includes("recvonly")||Re.includes("sendonly"));console.log("   Media direction lines:"),kn.forEach(Re=>console.log("   ",Re)),console.log(" OFFERER: Setting local description (offer)"),await pe.setLocalDescription(Cn),console.log(" OFFERER: Local description set"),console.log(`
 OFFERER: Sending offer with tracks:`,pe.getSenders().map(Re=>{var De,dt,Ve;return{kind:(De=Re.track)==null?void 0:De.kind,id:(dt=Re.track)==null?void 0:dt.id,enabled:(Ve=Re.track)==null?void 0:Ve.enabled}})),console.log(" OFFERER: Partner socket ID from data:",L.socketId),console.log(" OFFERER: partnerSocketIdRef.current value:",Zt.current),console.log(" CRITICAL: About to emit webrtc_offer with to:",L.socketId),console.log(" CRITICAL: Is to value empty/null/undefined?",!L.socketId),ee.emit("webrtc_offer",{offer:Y.current.localDescription,to:L.socketId}),console.log(" OFFERER: webrtc_offer emitted successfully"),console.log(" OFFERER: webrtc_offer sent to socket ID:",L.socketId),console.log(" OFFERER: webrtc_offer contains",Y.current.getSenders().length,"senders"),console.log(" OFFERER: Sent to socket:",L.socketId)}catch(pe){console.error(" OFFERER: Error in partner_found handler:",pe),console.error(" OFFERER: Stack trace:",pe.stack)}}),ee.on("webrtc_offer",async L=>{console.log(`

`),console.log("  ANSWERER HANDLER FIRED  "),console.log(""),console.log(" ===== ANSWERER RECEIVED OFFER ====="),console.log(" ANSWERER: WEBRTC_OFFER EVENT FIRED - OFFER WAS RECEIVED"),console.log(" ANSWERER: Received WebRTC offer from offerer"),console.log(" ANSWERER: My socket ID:",ee.id),console.log(" ANSWERER: Offer from:",L.from),console.log(" ANSWERER: Full data:",L),console.log(" ANSWERER: data.from (offerer socket ID):",L.from),Zt.current=L.from,console.log(" CRITICAL: Stored offerer socket ID:",Zt.current);try{if(Y.current)console.log(" ANSWERER: WARNING - peerConnectionRef already exists (should be null for answerer)");else{console.log(" ANSWERER: Creating new peer connection for the first time");let G;try{G=await bs()}catch(me){console.error(" ANSWERER: Error creating peer connection:",me);return}Y.current=G,console.log(" ANSWERER: Peer connection created")}if(console.log(`
 ANSWERER: ALWAYS executing track addition logic`),console.log(" ANSWERER: Checking localStreamRef.current..."),console.log(" ANSWERER localStreamRef.current:",re.current),console.log(" ANSWERER localStreamRef.current === null?",re.current===null),console.log(" ANSWERER localStreamRef.current === undefined?",re.current===void 0),!re.current){console.warn(" ANSWERER: localStreamRef.current is NULL - attempting emergency reacquisition");try{const G=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(re.current=G,te.current){te.current.srcObject=G,te.current.muted=!0;try{await te.current.play()}catch{console.warn(" Play error in answerer emergency reacquisition")}}console.log(" ANSWERER: Emergency stream acquisition successful")}catch(G){throw console.error(" ANSWERER: Emergency stream acquisition failed:",G.message),new Error("ANSWERER: Cannot reacquire camera stream - "+G.message)}}if(re.current){console.log(`
 ANSWERER: localStream EXISTS - will add tracks`),console.log(" ANSWERER localStream object:",re.current);const G=re.current.getTracks();console.log(" ANSWERER: getAllTracks() returned:",G),console.log(" ANSWERER: Track array length:",G.length),G.length>0?console.log(" ANSWERER: Tracks detail:",G.map(we=>({kind:we.kind,id:we.id,enabled:we.enabled,readyState:we.readyState}))):console.warn(" ANSWERER: WARNING - localStream exists but getTracks() returned empty array!");const me=Y.current.getSenders();if(console.log(" ANSWERER: Existing senders count:",me.length),me.length>0)console.warn(" ANSWERER WARNING: Tracks already added! Senders:",me.map(we=>{var Fe,Je;return{kind:(Fe=we.track)==null?void 0:Fe.kind,id:(Je=we.track)==null?void 0:Je.id}})),console.warn("   Not adding tracks again to avoid duplicates");else{console.log(`
 ANSWERER: Attempting to add ${G.length} local tracks to peer connection`);let we=0,Fe=0;G.forEach((_e,Ge)=>{console.log(`  [${Ge}] About to add ${_e.kind} track (id: ${_e.id}, enabled: ${_e.enabled})`);try{const pe=Y.current.addTrack(_e,re.current);console.log(`  [${Ge}]  addTrack SUCCEEDED`),console.log(`  [${Ge}] Sender:`,pe),we++}catch(pe){console.error(`  [${Ge}]  addTrack FAILED`),console.error(`  [${Ge}] Error:`,pe.message),Fe++}}),console.log(`
 ANSWERER: Track addition complete (${we} succeeded, ${Fe} failed)`);const Je=Y.current.getSenders();console.log(" ANSWERER: Final senders count:",Je.length),console.log(" ANSWERER: Senders:",Je.map((_e,Ge)=>{var pe,Cn,kn;return{index:Ge,kind:(pe=_e.track)==null?void 0:pe.kind,id:(Cn=_e.track)==null?void 0:Cn.id,trackExists:!!_e.track,trackEnabled:(kn=_e.track)==null?void 0:kn.enabled}}))}}else throw console.error(`
 ANSWERER: CRITICAL ERROR - localStreamRef.current is NULL!`),console.error(" ANSWERER: Cannot add tracks - stream does not exist"),new Error("ANSWERER: No local stream - cannot add tracks");console.log(`
 ANSWERER: Setting remote description (offer from offerer)`),await Y.current.setRemoteDescription(new RTCSessionDescription(L.offer)),console.log(" ANSWERER: Remote description set successfully"),console.log(" ANSWERER: Creating answer");const H=await Y.current.createAnswer({offerToReceiveVideo:!0,offerToReceiveAudio:!0});console.log(" ANSWERER: Answer created with receive constraints"),console.log(" ANSWERER SDP CHECK - Looking for a=sendrecv:");const z=H.sdp.split(`
`).filter(G=>G.includes("sendrecv")||G.includes("recvonly")||G.includes("sendonly"));console.log("   Media direction lines:"),z.forEach(G=>console.log("   ",G)),console.log(" ANSWERER: Setting local description (answer)"),await Y.current.setLocalDescription(H),console.log(" ANSWERER: Local description set successfully"),console.log(`
 ===== ANSWERER SENDING ANSWER =====`);const Q=Y.current.getSenders();console.log(" ANSWERER: Final senders count:",Q.length),console.log(" ANSWERER: Sending answer with tracks:",Q.map(G=>{var me,we,Fe;return{kind:(me=G.track)==null?void 0:me.kind,id:(we=G.track)==null?void 0:we.id,enabled:(Fe=G.track)==null?void 0:Fe.enabled}})),console.log(" CRITICAL: Offerer socket ID from offer:",L.from),console.log(" SERVER sending ANSWER to:",L.from),ee.emit("webrtc_answer",{answer:Y.current.localDescription,to:L.from}),console.log(" ANSWERER: Answer emitted to offerer via socket:",L.from),console.log(` ===== ANSWERER ANSWER SENT =====

`)}catch(H){console.error(`
 ANSWERER: ERROR in webrtc_offer handler:`,H),console.error(" ANSWERER: Error message:",H.message),console.error(" ANSWERER: Stack trace:",H.stack)}}),ee.on("webrtc_answer",async L=>{console.log(`

 ===== OFFERER RECEIVED ANSWER =====`),console.log(" OFFERER: Received WebRTC answer from answerer"),console.log(" OFFERER: data.from (answerer socket ID):",L.from),console.log(" OFFERER: Answer SDP:",L.answer),Zt.current=L.from,console.log(" CRITICAL: Stored answerer socket ID:",Zt.current);try{if(!Y.current){console.error(" OFFERER: No peer connection available to handle answer");return}console.log(`
 OFFERER: Setting remote description (answer from answerer)`),console.log(" OFFERER: Current connection state before answer:",{connectionState:Y.current.connectionState,iceConnectionState:Y.current.iceConnectionState,signalingState:Y.current.signalingState}),await Y.current.setRemoteDescription(new RTCSessionDescription(L.answer)),console.log(" OFFERER: Remote description (answer) set successfully"),console.log(" OFFERER: Connection state after answer:",{connectionState:Y.current.connectionState,iceConnectionState:Y.current.iceConnectionState,signalingState:Y.current.signalingState}),console.log(` ===== OFFERER ANSWER RECEIVED AND SET =====

`)}catch(H){console.error(" OFFERER: Error handling answer:",H),console.error(" OFFERER: Stack trace:",H.stack)}}),ee.on("ice_candidate",async L=>{if(console.log(`
 ICE candidate received from peer:`,{candidate:L.candidate,sdpMLineIndex:L.sdpMLineIndex,sdpMid:L.sdpMid}),!L.candidate||L.candidate.sdpMid==null&&L.candidate.sdpMLineIndex==null){console.warn(" Ignoring invalid ICE candidate (empty sdpMid and sdpMLineIndex)");return}try{Y.current?(console.log(" Adding ICE candidate to peer connection"),await Y.current.addIceCandidate(new RTCIceCandidate(L.candidate)),console.log(` ICE candidate added successfully
`)):console.warn(" No peer connection available for ICE candidate")}catch(H){console.error(" Error adding ICE candidate:",H)}}),ee.on("receive_message",L=>{Nt(H=>[...H,{id:Date.now(),sender:"partner",text:L.message,timestamp:new Date}])}),ee.on("partner_disconnected",L=>{console.log(`

 ===== PARTNER DISCONNECTED EVENT RECEIVED ===== `),console.log(" Event Data:",L),console.log(" Timestamp:",new Date().toISOString()),console.log(" Partner has closed the browser/tab"),console.log(" Cleaning up WebRTC connection..."),Y.current?(console.log(" Closing peer connection"),console.log("   Current state:",Y.current.connectionState),Y.current.close(),Y.current=null,console.log(" Peer connection closed successfully")):console.log(" WARNING: peerConnectionRef.current was null"),Tt.current&&(console.log(" Clearing remote video ref"),Tt.current.srcObject=null),console.log(" Calling endChat() to reset UI"),ha(),console.log(" Cleanup complete - ready for new partner")}),ee.on("disconnect",()=>{console.log("Socket disconnected"),fa()}),console.log(`

 ===== ALL SOCKET LISTENERS REGISTERED =====`),console.log("  partner_found listener active"),console.log("  webrtc_offer listener active"),console.log("  webrtc_answer listener active"),console.log("  ice_candidate listener active"),console.log("  receive_message listener active"),console.log("  partner_disconnected listener active (CRITICAL FOR DISCONNECT)"),console.log("  disconnect listener active"),console.log(` Ready to receive WebRTC signaling messages

`),()=>{console.log(" Removing socket listeners on component unmount"),ee.off("partner_found"),ee.off("webrtc_offer"),ee.off("webrtc_answer"),ee.off("ice_candidate"),ee.off("receive_message"),ee.off("partner_disconnected"),ee.off("disconnect")}),[]),N.useEffect(()=>{const L=T,H=k;return()=>{console.log(`

   CHAT COMPONENT UNMOUNTING - CRITICAL CLEANUP   `),L&&!H&&(console.log(" User was still looking for partner - emitting cancel_matching"),ee.emit("cancel_matching",{userId:St.current,timestamp:new Date().toISOString()})),Y.current&&(console.log(" Closing peer connection"),Y.current.close(),Y.current=null),console.log(" Chat component cleanup complete (tracks NOT stopped - will be reused)")}},[]),N.useEffect(()=>()=>{console.log(" Chat component unmounting - cleaning up peer connection only"),Y.current&&(Y.current.close(),Y.current=null)},[]);const Ye=async()=>{var L;try{console.log(" Fetching TURN servers from Xirsys via backend API...");const z=await(await fetch("https://flinxx-backend.onrender.com/api/turn")).json();if(console.log(" Xirsys API Response:",z),(L=z==null?void 0:z.v)!=null&&L.iceServers&&Array.isArray(z.v.iceServers))return console.log(" TURN servers fetched from Xirsys API"),console.log(" iceServers is an array with",z.v.iceServers.length,"entries"),console.log(" ICE Servers:",z.v.iceServers),z.v.iceServers;throw console.warn(" Invalid Xirsys TURN response format"),console.log("   Expected: data.v.iceServers as array"),console.log("   Received:",z),new Error("Invalid Xirsys TURN response format")}catch(H){console.error(" Error fetching TURN servers from Xirsys:",H.message),console.log(" Falling back to static STUN/TURN configuration");const z=f2();return console.log(" Using fallback ICE servers:",z),z}},rt=async()=>{if(m)m&&!T&&(console.log(' [MATCHING] User clicked "Start Video Chat" again - starting matching'),console.log(" [MATCHING]  NOT reinitializing camera - stream already active"),console.log(" [MATCHING] Emitting find_partner event to server"),R(!0),lr(!0),ee.emit("find_partner",{userId:St.current,userName:fe.name||"Anonymous",userAge:fe.age||18,userLocation:fe.location||"Unknown",userPicture:fe.picture||null}),console.log(" [MATCHING]  find_partner event emitted - now waiting for a partner"));else{if(console.log(' [START] User clicked "Allow Camera & Continue" - requesting camera permission'),Se){console.warn(" Camera request already in progress");return}try{he(!0),lr(!0),console.log(" [INIT] Requesting camera permission from browser...");const L=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(re.current=L,console.log("[Camera]  Camera stream obtained"),console.log("[Camera] Stream tracks:",L.getTracks().map(H=>({kind:H.kind,id:H.id}))),te.current){te.current.srcObject=L,te.current.muted=!0;try{await te.current.play(),console.log(" Camera preview playing successfully")}catch(H){console.error(" Play error:",H)}}console.log(" [START] Setting cameraStarted = true (camera preview now showing)"),v(!0),he(!1),lr(!1),console.log(" [START]  Camera initialized - user is still on home screen, matching NOT started yet")}catch(L){console.error(" Error initializing camera:",L),he(!1),lr(!1),L.name==="NotAllowedError"?console.warn(" Camera permission denied by user"):L.name==="NotFoundError"?console.warn(" No camera device found"):L.name==="NotReadableError"&&console.warn(" Camera device is already in use by another application")}}},Hr=()=>{if(It.trim()===""||!k)return;const L={id:Date.now(),sender:"user",text:It,timestamp:new Date};Nt(H=>[...H,L]),ee.emit("send_message",{message:It}),Jt("")},ha=()=>{P(!1),w(!1),j(null),Nt([]),B(0),Y.current&&(Y.current.close(),Y.current=null),ee.emit("find_partner",{userId:St.current,userName:fe.name||"Anonymous",userAge:fe.age||18,userLocation:fe.location||"Unknown"})},fa=()=>{console.log(" Cleaning up chat session"),Y.current&&(Y.current.close(),Y.current=null),v(!1),P(!1),w(!1),Nt([]),B(0)},eu=()=>u.jsxs("div",{className:"intro-screen-container flex flex-row w-full max-w-[1500px] mx-auto gap-12 px-10 mt-20 items-start overflow-visible",style:{minHeight:"100vh",height:"auto",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx(w2,{currentUser:fe,onProfileClick:()=>b(!0),onPremiumClick:()=>g(!0),onMatchHistoryClick:()=>Ie(!0),onSearchClick:()=>un(!0),onRequestsClick:()=>W(!0),isFixedPosition:!0}),u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})}),u.jsx("div",{className:"right-panel flex-1 rounded-3xl shadow-xl p-12 pb-16 space-y-6 flex items-center justify-center",style:{height:"520px",minHeight:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f"},children:u.jsxs("div",{className:"w-full h-full rounded-3xl p-8 shadow-2xl flex flex-col items-center justify-between text-center",children:[u.jsxs("div",{className:"flex gap-3 justify-center",children:[u.jsx("button",{className:"text-white font-bold py-2 px-6 rounded-lg transition-all text-sm shadow-md hover:shadow-lg",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"SoloX"}),u.jsx("button",{className:"text-white font-bold py-2 px-6 rounded-lg transition-all text-sm",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"DuoX"})]}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("img",{src:ua,alt:"Flinxx",className:"w-16 h-16"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black mb-2",style:{color:"#d9b85f"},children:"Flinxx"}),u.jsx("p",{className:"text-sm",style:{color:"#d9b85f"},children:"Meet new people in real time."})]}),J!=="both"&&u.jsx("button",{onClick:()=>I(!0),className:"rounded-full px-4 py-1 transition-all cursor-pointer text-xs",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:u.jsxs("span",{className:"font-semibold",children:[" ",J==="girls"?"Girls Only":J==="guys"?"Guys Only":"Both"]})})]}),u.jsx("button",{onClick:rt,disabled:Xt,className:"w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 text-sm shadow-lg",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:Xt?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin inline-block mr-2",children:""})," ",m?"Starting Match...":"Requesting Access..."]}):m?"Start Video Chat":"Allow Camera & Continue"})]})})]}),Gr=()=>(N.useEffect(()=>{console.log(`

 ===== WAITING SCREEN DIAGNOSTIC CHECK =====
`);const L=!!te.current;console.log(" CHECK 1: Video element found?",L?"YES":"NO",te.current);const H=!!re.current;if(console.log(" CHECK 2: Local stream valid?",H?"YES":"NO",re.current),H){const z=re.current.getVideoTracks();if(console.log(" CHECK 3: Does stream have video track?",z.length>0?"YES":"NO"),z.length>0){const Q=z[0];console.log("   - kind:",Q.kind),console.log("   - enabled:",Q.enabled),console.log("   - readyState:",Q.readyState),console.log("   - id:",Q.id)}}if(L&&H){const z=te.current.srcObject===re.current;console.log(" CHECK 4: Stream attached to video element?",z?"YES":"NO"),z||(console.log("    Attaching stream to video element NOW..."),te.current.srcObject=re.current,te.current.muted=!0,console.log("    Stream attached!"))}console.log(`
 ===== END DIAGNOSTIC CHECK =====

`)},[T]),u.jsxs("div",{className:"flex flex-row w-full max-w-[1500px] mx-auto gap-12 px-10 mt-20 items-start overflow-visible",style:{minHeight:"100vh",height:"auto",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})}),u.jsx("div",{className:"right-panel flex-1 rounded-3xl shadow-xl flex flex-col",style:{height:"520px",minHeight:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f",padding:0,overflow:"visible",position:"relative",zIndex:5},children:u.jsxs("div",{className:"flex flex-col items-center justify-center text-center gap-8 py-20",children:[u.jsx("div",{className:"animate-pulse text-6xl",children:""}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("h2",{className:"text-2xl font-bold",style:{color:"#d9b85f"},children:"Looking for a partner..."}),u.jsx("p",{className:"text-sm",style:{color:"#d9b85f"},children:"Matching you with someone nearby"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0.2s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0.4s"}})]}),u.jsx("button",{onClick:()=>{console.log(" Cancel matching - emitting cancel_matching event"),ee.emit("cancel_matching",{userId:St.current,timestamp:new Date().toISOString()}),R(!1),lr(!1)},className:"w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 text-sm shadow-lg mt-4",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"Cancel Search"})]})})]})),pa=()=>(console.log(" VideoChatScreen rendering - partnerInfo:",{exists:!!x,userName:x==null?void 0:x.userName,userLocation:x==null?void 0:x.userLocation,picture:!!(x!=null&&x.picture),fullObject:x}),console.log(" currentUser for comparison:",{name:fe==null?void 0:fe.name,location:fe==null?void 0:fe.location,picture:!!(fe!=null&&fe.picture)}),u.jsxs("div",{className:"video-chat-container flex flex-col md:flex-row w-full h-full gap-6 items-start overflow-visible",style:{minHeight:"100vh",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsxs("div",{className:"right-panel flex-1 rounded-3xl shadow-xl flex flex-col",style:{height:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f",padding:0,overflow:"visible"},children:[u.jsxs("div",{className:"w-full h-full bg-black rounded-3xl shadow-2xl flex flex-col overflow-visible",style:{backgroundColor:"#131313",overflow:"visible"},children:[u.jsxs("div",{className:"px-4 flex items-center justify-between backdrop-blur-sm flex-shrink-0",style:{height:"56px",paddingTop:"8px",paddingBottom:"8px",backgroundColor:"rgba(19, 19, 19, 0.8)",borderBottom:"1px solid #d9b85f"},children:[u.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg flex-shrink-0 overflow-hidden",children:k&&x&&x.picture?u.jsx("img",{src:x.picture,alt:"Partner",className:"w-full h-full object-cover"}):""}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-semibold text-sm leading-tight truncate",style:{color:"#d9b85f"},children:k&&x?x.userName:"Waiting..."}),u.jsx("p",{className:"text-xs truncate",style:{color:"#d9b85f"},children:k&&x?x.userLocation:"for a partner"})]})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[u.jsx("button",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""}),u.jsx("button",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""})]})]}),u.jsxs("div",{id:"main-container",className:"overflow-visible flex flex-col w-full flex-1",style:{zIndex:1,backgroundColor:"transparent",padding:0,overflow:"visible"},children:[u.jsxs("div",{id:"remote-video-wrapper",style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:1,overflow:"visible",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:[u.jsx("video",{id:"remote-video-singleton",ref:Tt,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"black",display:k?"block":"none",zIndex:10}}),!k&&u.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000000",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:u.jsx("p",{style:{color:"#d9b85f",fontSize:"14px"},children:"Waiting for partner video..."})}),E&&k&&u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 text-xs font-semibold z-50 shadow-lg px-2 py-1 rounded-full",style:{backgroundColor:"rgba(217, 184, 95, 0.9)",color:"#0f0f0f"},children:[u.jsx("span",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:"#0f0f0f"}}),p2(M)]})]}),!k&&u.jsx("div",{className:"flex-1 w-full flex items-center justify-center flex-col bg-black rounded-2xl",style:{zIndex:1},children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin mb-4 text-5xl inline-block",children:""}),u.jsx("p",{className:"font-semibold text-base",style:{color:"#d9b85f"},children:"Looking for a partner..."}),u.jsx("p",{className:"text-xs mt-2",style:{color:"#d9b85f"},children:"This won't take long"})]})}),Ae.length>0&&k&&u.jsx("div",{className:"space-y-2 mt-3 px-4",style:{zIndex:10},children:Ae.map(L=>u.jsx("div",{className:`flex ${L.sender==="user"?"justify-end":"justify-start"}`,children:u.jsx("div",{className:`max-w-xs px-3 py-2 rounded-2xl text-xs ${L.sender==="user","text-white"}`,style:{backgroundColor:L.sender==="user"?"#d9b85f":"rgba(217, 184, 95, 0.6)",color:L.sender==="user"?"#0f0f0f":"#d9b85f"},children:L.text})},L.id))})]})]}),u.jsxs("div",{className:"px-4 flex items-center justify-between backdrop-blur-sm flex-shrink-0",style:{height:"56px",paddingTop:"8px",paddingBottom:"8px",backgroundColor:"rgba(19, 19, 19, 0.8)",borderTop:"1px solid #d9b85f"},children:[u.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"M"})}),u.jsxs("div",{className:"flex items-center gap-2 flex-1 ml-2 flex-shrink-0",children:[u.jsx("input",{type:"text",value:It,onChange:L=>Jt(L.target.value),onKeyPress:L=>L.key==="Enter"&&Hr(),placeholder:"Send Message",disabled:!k,className:"flex-1 px-3 py-2 rounded-lg focus:outline-none disabled:bg-gray-500/20 text-xs font-medium",style:{backgroundColor:"rgba(217, 184, 95, 0.1)",borderColor:"#d9b85f",border:"1px solid #d9b85f",color:"#d9b85f"}}),u.jsx("button",{onClick:Hr,disabled:!k||It.trim()==="",className:"w-8 h-8 font-bold rounded-lg transition-all disabled:cursor-not-allowed flex items-center justify-center text-sm shadow-md flex-shrink-0",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""})]})]})]}),u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})})]}));return u.jsxs(u.Fragment,{children:[r&&u.jsx(gx,{onCancel:Rs,onContinue:Zc}),s?u.jsxs("div",{className:"flex flex-col h-screen w-screen overflow-visible min-h-0",style:{backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx("video",{ref:te,id:"local-video-singleton",className:"local-video",autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#000",display:m?"block":"none",zIndex:1}}),k?u.jsx(pa,{}):T?u.jsx(Gr,{}):u.jsx(eu,{}),u.jsx(m2,{isOpen:S,onClose:()=>g(!1)}),u.jsx(y2,{isOpen:A,onClose:()=>b(!1),onOpenPremium:()=>g(!0),onReinitializeCamera:(Ns=da.current)==null?void 0:Ns.reinitializeCamera}),u.jsx(v2,{isOpen:C,onClose:()=>Ie(!1)}),u.jsx(Cy,{isOpen:Bt,onClose:()=>un(!1),mode:"search",onUserSelect:L=>{console.log("Selected user from search:",L)}}),u.jsx(Cy,{isOpen:bt,onClose:()=>W(!1),mode:"notifications"}),u.jsx(g2,{isOpen:_,onClose:()=>I(!1),currentGender:J,onOpenPremium:()=>g(!0)}),As&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-indigo-600 rounded-2xl p-8 max-w-md w-full border border-white/20 shadow-2xl",children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-center",children:" Time's Up!"}),u.jsx("p",{className:"text-white/90 text-center mb-4",children:"Your 2-minute guest preview has ended. Redirecting to login..."}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsx("div",{className:"animate-spin text-4xl",children:""})})]})})]}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center",children:u.jsx("div",{className:"text-center text-white",children:u.jsx("p",{children:"Loading..."})})})]})},x2=()=>{const t=Yt(),[e,n]=N.useState(5),[r,i]=N.useState(!0),[s,o]=N.useState([{id:1,username:"Alex_24",name:"Alex",age:24,country:"USA",avatar:"",status:"Online"},{id:2,username:"Jordan_22",name:"Jordan",age:22,country:"UK",avatar:"",status:"Online"},{id:3,username:"Casey_25",name:"Casey",age:25,country:"Canada",avatar:"",status:"Online"},{id:4,username:"Morgan_23",name:"Morgan",age:23,country:"Australia",avatar:"",status:"Online"},{id:5,username:"Taylor_26",name:"Taylor",age:26,country:"Germany",avatar:"",status:"Online"},{id:6,username:"Alex_27",name:"Alex",age:27,country:"France",avatar:"",status:"Online"},{id:7,username:"Sam_21",name:"Sam",age:21,country:"Canada",avatar:"",status:"Online"},{id:8,username:"Chris_28",name:"Chris",age:28,country:"Japan",avatar:"",status:"Online"}]),[l,c]=N.useState(0),h=N.useRef(null);N.useEffect(()=>(r&&e>0?h.current=setTimeout(()=>{n(k=>k-1)},1e3):r&&e===0&&(p(),n(5)),()=>clearTimeout(h.current)),[e,r]);const p=()=>{l<s.length-1?(c(k=>k+1),n(5),i(!0)):(c(0),n(5),i(!0))},m=()=>{p()},v=()=>{ee.emit("connect_user",{targetUserId:s[l].id}),t("/chat")},T=s[l],R=s[(l+1)%s.length];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex flex-col",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-6 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ua,alt:"Flinxx",className:"w-8 h-8"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:()=>t("/"),className:"text-white font-semibold hover:text-white/80 transition",children:" Back"})})]})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-8",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"relative h-[600px] mb-8",children:[u.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-md rounded-3xl border border-white/20 p-8 transform scale-95 translate-y-4 opacity-50",children:u.jsxs("div",{className:"h-full flex flex-col justify-between",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-white font-bold text-xl mb-2",children:[R.name,", ",R.age]}),u.jsxs("p",{className:"text-white/70 text-sm mb-6",children:[" ",R.country]})]}),u.jsx("div",{className:"text-center opacity-50",children:u.jsx("p",{className:"text-white/50 text-sm",children:"Next up..."})})]})}),u.jsxs("div",{className:"absolute inset-0 bg-gradient-to-b from-white/20 to-white/5 backdrop-blur-md rounded-3xl border-2 border-white/30 p-8 flex flex-col justify-between shadow-2xl hover:border-white/50 transition-all duration-300",children:[u.jsx("div",{className:"flex justify-center mb-6",children:u.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-5xl shadow-lg shadow-blue-600/50 border-4 border-white/40 text-white",children:T.avatar})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-white font-black text-3xl mb-1",children:T.name}),u.jsx("p",{className:"text-white/90 text-2xl font-bold mb-2",children:T.age}),u.jsxs("p",{className:"text-white/80 text-base mb-2",children:[" ",T.country]}),u.jsxs("p",{className:"text-white/70 text-sm mb-6",children:["@",T.username]}),u.jsx("div",{className:"space-y-3",children:u.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20",children:[u.jsx("p",{className:"text-white/70 text-xs",children:"Status"}),u.jsxs("p",{className:"text-white font-bold text-sm",children:[" ",T.status]})]})})]}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsxs("div",{className:"relative w-20 h-20",children:[u.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[u.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"white",strokeWidth:"2",opacity:"0.2"}),u.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"url(#gradient)",strokeWidth:"2",strokeDasharray:`${(5-e)/5*226.2} 226.2`,className:"transition-all duration-1000"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:"#fbbf24"}),u.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})]})})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-black text-2xl",children:e})})]})}),r&&u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-blue-400 text-sm font-semibold animate-pulse",children:[" Auto-next in ",e,"s"]})})]})]}),u.jsxs("div",{className:"flex gap-4 justify-center",children:[u.jsx("button",{onClick:m,className:"flex-1 px-6 py-4 bg-white/20 hover:bg-white/30 border-2 border-white/40 hover:border-white/60 rounded-full font-bold text-white transition-all transform hover:scale-105 backdrop-blur",children:" Skip"}),u.jsx("button",{onClick:v,className:"flex-1 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-2xl shadow-blue-600/30 transition-all transform hover:scale-105",children:" Connect"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx("button",{onClick:()=>i(!r),className:`px-6 py-2 rounded-full font-semibold text-sm transition-all ${r?"bg-blue-600/30 text-blue-200 border border-blue-400/50":"bg-white/10 text-white/70 border border-white/20"}`,children:r?" Auto-Next ON":" Auto-Next OFF"})}),u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("p",{className:"text-white/70 text-sm",children:["Showing ",l+1," of ",s.length," profiles"]})})]})})]})},E2=()=>{const t=Yt(),{user:e}=N.useContext(Es)||{},r=(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null)||e||{name:"Guest User",email:"guest@flinxx.local",picture:null,googleId:"N/A"};console.log(" Profile Component - Loaded User:",r);const[i,s]=N.useState({username:(r==null?void 0:r.name)||"User",age:(r==null?void 0:r.age)||24,country:(r==null?void 0:r.location)||"Unknown",bio:"Welcome to my profile",avatar:"",gender:"Not specified",status:"Looking to chat",email:(r==null?void 0:r.email)||"",displayName:(r==null?void 0:r.name)||"",photoURL:(r==null?void 0:r.picture)||"",userId:(r==null?void 0:r.userId)||"N/A"}),[o,l]=N.useState(!0);N.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.email)){console.log(" No user email found, using localStorage data only"),console.log(" Profile from localStorage:",{name:r==null?void 0:r.name,email:r==null?void 0:r.email,picture:r==null?void 0:r.picture,googleId:r==null?void 0:r.googleId}),l(!1);return}const P="https://flinxx-backend.onrender.com";console.log(` Profile Component - Fetching from: ${P}/api/user/profile?email=${r.email}`);const E=await fetch(`${P}/api/user/profile?email=${encodeURIComponent(r.email)}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!E.ok)throw new Error(`Failed to fetch profile: ${E.status}`);const w=await E.json();console.log(" Profile data fetched from backend:",w.profile),w.profile?s(x=>({...x,email:w.profile.email||r.email||x.email,displayName:w.profile.name||r.name||x.displayName,photoURL:w.profile.picture||r.picture||x.photoURL,userId:w.profile.id||x.userId})):s(x=>({...x,email:r.email||x.email,displayName:r.name||x.displayName,photoURL:r.picture||x.photoURL,userId:r.userId||x.userId}))}catch(P){console.error(" Error fetching profile:",P),s(E=>({...E,email:r.email||E.email,displayName:r.name||E.displayName,photoURL:r.picture||E.photoURL,userId:r.userId||E.userId}))}finally{l(!1)}})()},[r==null?void 0:r.email]);const[c,h]=N.useState(!1),[p,m]=N.useState(i),v=k=>{const{name:P,value:E}=k.target;m(w=>({...w,[P]:P==="age"?parseInt(E):E}))},T=()=>{s(p),h(!1),console.log("Profile saved:",p)},R=["","","","","","","","",""];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-6 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ua,alt:"Flinxx",className:"w-8 h-8"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:()=>t("/"),className:"text-white font-semibold hover:text-white/80 transition",children:" Back"})})]})}),u.jsx("div",{className:"flex-1 px-4 py-12",children:u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 mb-8",children:[u.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.photoURL&&!c?u.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center shadow-2xl shadow-yellow-400/50 mb-6 border-4 border-white/30 overflow-hidden",children:u.jsx("img",{src:i.photoURL,alt:"Profile",className:"w-full h-full object-cover"})}):u.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-7xl shadow-2xl shadow-blue-600/50 mb-6 border-4 border-white/30",children:c?u.jsx("div",{className:"grid grid-cols-3 gap-2 p-4",children:R.map(k=>u.jsx("button",{onClick:()=>m(P=>({...P,avatar:k})),className:`text-3xl p-2 rounded-lg transition-all ${p.avatar===k?"bg-white/30 border-2 border-white scale-110":"bg-white/10 hover:bg-white/20"}`,children:k},k))}):i.avatar}),!c&&u.jsx("p",{className:"text-white/70 text-sm",children:"Click Edit to change avatar"})]}),c?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Full Name"}),u.jsx("input",{type:"text",name:"displayName",value:p.displayName,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60",placeholder:"Enter your full name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:p.email,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60",placeholder:"Enter your email"})]}),p.userId&&p.userId!=="N/A"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"User ID (Read-only)"}),u.jsx("input",{type:"text",value:p.userId,disabled:!0,className:"w-full mt-2 bg-white/5 border border-white/20 rounded-xl px-4 py-3 text-white/60 cursor-not-allowed"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Username"}),u.jsx("input",{type:"text",name:"username",value:p.username,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Age"}),u.jsx("input",{type:"number",name:"age",value:p.age,onChange:v,min:"18",max:"100",className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Country"}),u.jsx("input",{type:"text",name:"country",value:p.country,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Gender"}),u.jsxs("select",{name:"gender",value:p.gender,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/60",children:[u.jsx("option",{value:"Male",children:"Male"}),u.jsx("option",{value:"Female",children:"Female"}),u.jsx("option",{value:"Other",children:"Other"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Bio"}),u.jsx("textarea",{name:"bio",value:p.bio,onChange:v,rows:"4",className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60 resize-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Status"}),u.jsxs("select",{name:"status",value:p.status,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/60",children:[u.jsx("option",{value:"Looking to chat",children:"Looking to chat"}),u.jsx("option",{value:"Making friends",children:"Making friends"}),u.jsx("option",{value:"Just browsing",children:"Just browsing"})]})]}),u.jsxs("div",{className:"flex gap-4 pt-6",children:[u.jsx("button",{onClick:()=>{h(!1),m(i)},className:"flex-1 bg-white/20 hover:bg-white/30 text-white font-bold py-3 rounded-xl transition-all",children:"Cancel"}),u.jsx("button",{onClick:T,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105",children:"Save Profile"})]})]}):u.jsxs("div",{className:"space-y-6",children:[i.displayName&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Full Name"}),u.jsx("p",{className:"text-white font-bold text-2xl mt-2",children:i.displayName})]}),i.email&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Email"}),u.jsx("p",{className:"text-white font-normal text-base mt-2",children:i.email})]}),i.userId&&i.userId!=="N/A"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"User ID"}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("p",{className:"text-white font-mono text-sm",children:i.userId}),u.jsx("button",{onClick:()=>navigator.clipboard.writeText(i.userId),className:"text-white/70 hover:text-white transition",title:"Copy ID",children:""})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Username"}),u.jsx("p",{className:"text-white font-bold text-2xl mt-2",children:i.username})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Age"}),u.jsxs("p",{className:"text-white font-bold text-xl mt-2",children:[i.age," years old"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Country"}),u.jsxs("p",{className:"text-white font-bold text-xl mt-2",children:[" ",i.country]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Gender"}),u.jsx("p",{className:"text-white font-bold text-lg mt-2",children:i.gender})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Bio"}),u.jsx("p",{className:"text-white/90 text-base mt-2",children:i.bio})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Status"}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),u.jsx("p",{className:"text-white font-semibold",children:i.status})]})]}),u.jsx("button",{onClick:()=>h(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105",children:" Edit Profile"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Matches"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"24"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Chats"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"8"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Time Online"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"42h"})]})]})]})})]})},I2=({value:t,onChange:e,maxDate:n})=>{const r=n?`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`:null;return u.jsx("input",{type:"date",value:t||"",onChange:i=>e(i.target.value),max:r,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white text-gray-900",placeholder:"",required:!0})},Px=({user:t,onProfileComplete:e,isOpen:n})=>{const[r,i]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState(null),[h,p]=N.useState(null),[m,v]=N.useState(!1),T=Yt();N.useEffect(()=>{if(r){const[P,E,w]=r.split("-").map(Number),x=new Date(P,E-1,w),j=new Date;let M=j.getFullYear()-x.getFullYear();const B=j.getMonth()-x.getMonth();(B<0||B===0&&j.getDate()<x.getDate())&&M--,c(M)}else c(null)},[r]);const R=!r||!s||m,k=async P=>{if(P.preventDefault(),!r||!s){p("Please fill in all required fields");return}if(l&&l<18){p("You must be 18+ to use this app");return}v(!0),p(null);try{const E="https://flinxx-backend.onrender.com",w=t.id||t.uid||t.googleId;if(!w)throw new Error("Unable to determine user ID");const x=await fetch(`${E}/api/users/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:w,birthday:r||null,gender:s})}),j=await x.json();if(!x.ok){if(j.code==="UNDERAGE_USER"){p("You must be 18+ to use this app");return}p(j.error||"Failed to save profile");return}console.log(" Profile saved successfully:",j);const M={...t,profileCompleted:!0,isProfileCompleted:!0,birthday:r,gender:s,age:l};localStorage.setItem("profileCompleted","true"),localStorage.setItem("user",JSON.stringify(M)),e&&e(M),setTimeout(()=>{T("/chat?view=home")},500)}catch(E){console.error(" Error saving profile:",E),p(E.message||"Network error. Please try again.")}finally{v(!1)}};return!n||!t?null:u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:u.jsx("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 my-8",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Complete Your Profile"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Just a few more details to get started"})]}),u.jsx("div",{className:"flex justify-center mb-6",children:t.picture||t.photoURL?u.jsx("img",{src:t.picture||t.photoURL,alt:t.name||t.displayName,className:"w-20 h-20 rounded-full object-cover border-4 border-blue-500"}):u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center border-4 border-blue-500",children:u.jsx("span",{className:"text-gray-600 text-2xl",children:""})})}),h&&u.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:u.jsx("p",{className:"text-red-700 text-sm font-medium",children:h})}),u.jsxs("form",{onSubmit:k,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),u.jsx("input",{type:"text",value:t.name||t.displayName||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Birthday ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx(I2,{value:r,onChange:i,maxDate:new Date}),l!==null&&u.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Age: ",u.jsxs("span",{className:l<18?"text-red-600 font-bold":"text-green-600 font-bold",children:[l," years old"]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Gender ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{value:s,onChange:P=>o(P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white text-gray-900 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},required:!0,children:[u.jsx("option",{value:"",disabled:!0,children:"Select gender"}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"})]})]}),u.jsx("button",{type:"submit",disabled:R,className:`w-full py-3 px-4 rounded-lg font-medium transition mt-6 ${R?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:m?u.jsxs("span",{className:"flex items-center justify-center",children:[u.jsx("span",{className:"inline-block animate-spin mr-2",children:""}),"Saving..."]}):"Save Profile"})]}),u.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Your birthday and gender cannot be changed after saving."})]})})})};function S2(){const t=Yt(),[e]=mx(),[n,r]=N.useState(!1),[i,s]=N.useState(null);N.useEffect(()=>{try{const l=e.get("token"),c=e.get("user"),h=e.get("error");if(console.log(" Callback - Token:",l),console.log(" Callback - User:",c),h){console.error(" OAuth Error:",h),t("/login?error="+encodeURIComponent(h),{replace:!0});return}if(l&&c)try{const p=JSON.parse(c);localStorage.setItem("token",l),localStorage.setItem("authToken",l),localStorage.setItem("user",JSON.stringify(p)),localStorage.setItem("authProvider","google"),localStorage.setItem("userInfo",JSON.stringify(p)),console.log(" User data saved:",p),p.isProfileCompleted?(console.log(" Profile completed, redirecting to chat..."),setTimeout(()=>{t("/chat")},500)):(console.log(" Profile not completed, showing setup modal"),s(p),r(!0))}catch(p){console.error(" Error parsing user data:",p),t("/login?error=invalid_user_data",{replace:!0})}else console.error(" Missing token or user data"),t("/login?error=missing_data",{replace:!0})}catch(l){console.error(" Callback error:",l),t("/login?error="+encodeURIComponent(l.message),{replace:!0})}},[e,t]);const o=l=>{console.log(" Profile completed, redirecting to chat"),r(!1),setTimeout(()=>{t("/chat")},500)};return n&&i?u.jsx(Px,{user:i,onProfileComplete:o,isOpen:!0}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Completing your login..."}),u.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Please wait while we set up your session"})]})})}function T2(){const t=Yt(),{setAuthToken:e}=N.useContext(Es)||{},[n]=mx(),[r,i]=N.useState(null),[s,o]=N.useState(!0),[l,c]=N.useState(null);return N.useEffect(()=>{(async()=>{try{const p=n.get("token"),m=n.get("data");if(!p){c("No authentication token received"),o(!1);return}console.log(" Auth Success - Token received:",p.substring(0,10)+"...");let v=null;if(m)try{v=JSON.parse(decodeURIComponent(m)),console.log(" Response data from backend:",v)}catch(P){console.warn(" Could not parse response data:",P)}const R=await fetch(`https://flinxx-backend.onrender.com/auth-success?token=${p}`);if(!R.ok)throw new Error(`Failed to fetch user data: ${R.statusText}`);const k=await R.json();if(console.log(" User data received:",k.user.email),k.success&&k.user){const P=k.user;e?(console.log("[AuthSuccess] Storing token and user via AuthContext"),e(p,P)):(console.log("[AuthSuccess] AuthContext not available, saving to localStorage directly"),localStorage.setItem("token",p),localStorage.setItem("authToken",p),localStorage.setItem("user",JSON.stringify(P)),localStorage.setItem("authProvider","google"),localStorage.setItem("userInfo",JSON.stringify(P))),console.log(" User data saved"),i(P),console.log(" Routing all users to /chat (unified dashboard)"),setTimeout(()=>{t("/chat")},500)}else c(k.error||"Failed to authenticate")}catch(p){console.error(" Auth Success Error:",p),c(p.message||"An error occurred during authentication")}finally{o(!1)}})()},[n,t,e]),l?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white text-2xl font-bold mb-4",children:" Authentication Error"}),u.jsx("p",{className:"text-white/70 text-lg mb-6",children:l}),u.jsx("button",{onClick:()=>t("/login",{replace:!0}),className:"px-6 py-2 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100",children:"Back to Login"})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Completing your login..."}),u.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Please wait while we set up your session"})]})})}const ky=()=>{const t=Yt();return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsx("div",{className:"px-6 py-4 flex justify-start items-center max-w-full",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ua,alt:"Flinxx",className:"w-10 h-10"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]})})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"w-full max-w-3xl",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-8",children:"Terms & Conditions"}),u.jsxs("div",{className:"max-h-[70vh] overflow-y-auto pr-4 space-y-6 text-white/90",children:[u.jsx("p",{className:"text-sm text-white/70 italic",children:"Last Updated: December 21, 2025"}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"1. Acceptance of Terms"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:'By accessing and using the Flinxx platform (the "Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"2. Use License"}),u.jsx("p",{className:"text-white/80 leading-relaxed mb-3",children:"Permission is granted to temporarily download one copy of the materials (information or software) on Flinxx for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:"}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-white/80",children:[u.jsx("li",{children:"Modifying or copying the materials"}),u.jsx("li",{children:"Using the materials for any commercial purpose or for any public display"}),u.jsx("li",{children:"Attempting to decompile or reverse engineer any software contained on the Service"}),u.jsx("li",{children:"Removing any copyright or other proprietary notations from the materials"}),u.jsx("li",{children:'Transferring the materials to another person or "mirroring" the materials on any other server'}),u.jsx("li",{children:"Violating any laws or regulations applicable to the Service"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"3. Age Restriction"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"You must be at least 18 years of age to use this Service. By using Flinxx, you represent and warrant that you are at least 18 years old and have the legal right to use the platform in your jurisdiction."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"4. Disclaimer"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"The materials on Flinxx are provided on an 'as is' basis. Flinxx makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"5. Limitations"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"In no event shall Flinxx or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on Flinxx, even if Flinxx or a Flinxx authorized representative has been notified orally or in writing of the possibility of such damage."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"6. Accuracy of Materials"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"The materials appearing on Flinxx could include technical, typographical, or photographic errors. Flinxx does not warrant that any of the materials on its Service are accurate, complete, or current. Flinxx may make changes to the materials contained on the Service at any time without notice."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"7. User Conduct"}),u.jsx("p",{className:"text-white/80 leading-relaxed mb-3",children:"You agree that you will not engage in any conduct that:"}),u.jsxs("ul",{className:"list-disc list-inside space-y-2 text-white/80",children:[u.jsx("li",{children:"Violates any applicable law or regulation"}),u.jsx("li",{children:"Infringes upon or violates any intellectual property rights"}),u.jsx("li",{children:"Harasses, abuses, or threatens other users"}),u.jsx("li",{children:"Uploads malware, viruses, or other harmful code"}),u.jsx("li",{children:"Impersonates any person or entity"}),u.jsx("li",{children:"Shares non-consensual intimate content"}),u.jsx("li",{children:"Attempts to gain unauthorized access to the Service"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"8. Materials License"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"By posting materials to Flinxx, you grant Flinxx a worldwide, royalty-free license to use, reproduce, modify and publish that material in any form, in any media now known or hereafter discovered. However, this license does not extend to any materials posted by other users."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"9. Limitations of Liability"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"In no event shall Flinxx, its employees, agents, suppliers, or any other affiliated parties be liable to you or any third party for any direct, indirect, consequential, special, or punitive damages whatsoever, including without limitation, damages for loss of profits, loss of use, business interruption, or loss of data, even if Flinxx has been advised of the possibility of such damages."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"10. Privacy Policy"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Your use of Flinxx is also governed by our Privacy Policy. Please review our Privacy Policy to understand our practices regarding the collection and use of your personal information."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"11. Termination"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx may terminate or suspend your account and access to the Service at any time, for any reason, without notice. Upon termination, your right to use the Service will immediately cease. You remain liable for all charges incurred through the date of termination."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"12. Modifications to Terms"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx may revise these terms of service for the Service at any time without notice. By using this Service, you are agreeing to be bound by the then current version of these terms of service. If you do not agree to any of these terms, or any revised terms, please stop using the Service."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"13. Governing Law"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"These terms and conditions are governed by and construed in accordance with the laws of the jurisdiction in which Flinxx operates, and you irrevocably submit to the exclusive jurisdiction of the courts in that location."})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"14. Contact Information"}),u.jsx("p",{className:"text-white/80 leading-relaxed",children:"If you have any questions about these Terms & Conditions, please contact us at: support@flinxx.com"})]}),u.jsx("div",{className:"pt-6 border-t border-white/20",children:u.jsx("p",{className:"text-sm text-white/70",children:" 2025 Flinxx. All rights reserved."})})]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsx("button",{onClick:()=>t("/",{replace:!0}),className:"px-8 py-3 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100 transition-all",children:"Back to Home"})})]})})]})},C2=()=>{const t=Yt();return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsx("div",{className:"px-6 py-4 flex justify-start items-center max-w-full",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:ua,alt:"Flinxx",className:"w-10 h-10"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]})})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"w-full max-w-3xl",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-8",children:"Privacy Policy"}),u.jsxs("div",{className:"max-h-[70vh] overflow-y-auto pr-4 space-y-6 text-white/90",children:[u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"By accessing or using Flinxx, you agree to this Privacy Policy."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx is a live interaction platform where users and streamers communicate in real time. Due to the nature of live content, complete privacy cannot be guaranteed."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx hosts multiple streamers and users. You understand that any user or streamer may record video, audio, or interactions without your consent and may upload or share such content on external platforms. You are solely responsible for your own privacy and actions. Flinxx provides no guarantee or control over such recordings or uploads."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Your video, audio, messages, and interactions may also be recorded, stored, reviewed, or used by Flinxx for safety, moderation, legal compliance, marketing, promotional, or platform improvement purposes. By continuing, you give your full consent."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Flinxx is not responsible or liable for screenshots, screen recordings, re-uploads, misuse, or distribution of content by users or streamers outside the platform. You agree that you use Flinxx at your own risk."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"We do not guarantee the behavior, conduct, or content of any user or streamer. Flinxx shall not be held liable for any loss, damage, harassment, or misuse arising from live interactions."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"Basic information such as device data, usage activity, and login details may be collected to operate, secure, and improve the platform."})}),u.jsx("section",{children:u.jsx("p",{className:"text-white/80 leading-relaxed",children:"If you do not agree with this Privacy Policy, please discontinue use of Flinxx immediately."})}),u.jsx("div",{className:"text-sm text-white/50 italic pt-6 border-t border-white/20",children:u.jsx("p",{children:" 2025 Flinxx. All rights reserved."})})]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsx("button",{onClick:()=>t("/",{replace:!0}),className:"px-8 py-3 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100 transition-all",children:"Back to Home"})})]})})]})},k2=({children:t})=>{const e=Yt(),n=N.useContext(Es),r=n==null?void 0:n.user,i=n==null?void 0:n.isLoading,[s,o]=N.useState(!1),[l,c]=N.useState(null),[h,p]=N.useState(!0);console.log(`
[ProtectedChatRoute]  RENDER CALLED`),console.log("[ProtectedChatRoute]   - isLoading:",h),console.log("[ProtectedChatRoute]   - showProfileSetup:",s),console.log("[ProtectedChatRoute]   - authLoading:",i),console.log("[ProtectedChatRoute]   - authUser:",r?r.email:"null"),N.useEffect(()=>{console.log(`

 [ProtectedChatRoute] `),console.log(" [ProtectedChatRoute] EFFECT RUNNING - PROFILE CHECK"),console.log(" [ProtectedChatRoute] "),console.log(" [ProtectedChatRoute] Effect dependencies changed:"),console.log(" [ProtectedChatRoute]   - authLoading:",i),console.log(" [ProtectedChatRoute]   - authUser:",r?r.email:"null");try{if(i===!0){console.log(" [ProtectedChatRoute]  WAITING - AuthContext is still initializing (isLoading=true)"),p(!0);return}if(i===void 0){console.log(" [ProtectedChatRoute]  WAITING - AuthContext loading state is undefined"),p(!0);return}if(console.log(" [ProtectedChatRoute]  AuthContext finished loading (isLoading=false)"),!r){console.log(" [ProtectedChatRoute]  AuthContext finished loading but NO USER found"),console.log(" [ProtectedChatRoute] Redirecting to /login"),p(!1),e("/login",{replace:!0});return}console.log(" [ProtectedChatRoute]  AuthContext loaded with user:",r.email),console.log(" [ProtectedChatRoute] authUser object:",{id:r.id,email:r.email,profileCompleted:r.profileCompleted,birthday:r.birthday,gender:r.gender}),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted type:",typeof r.profileCompleted),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted value:",r.profileCompleted),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted === true?",r.profileCompleted===!0);const v=localStorage.getItem("user");if(console.log(" [ProtectedChatRoute] Checking localStorage:"),console.log(" [ProtectedChatRoute]   - user key exists:",!!v),v)try{const P=JSON.parse(v);console.log(" [ProtectedChatRoute] localStorage user:",{id:P.id,email:P.email,profileCompleted:P.profileCompleted}),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted type:",typeof P.profileCompleted),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted value:",P.profileCompleted),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted === true?",P.profileCompleted===!0)}catch(P){console.error("[ProtectedChatRoute] Failed to parse localStorage user:",P)}else console.log("[ProtectedChatRoute]  No user in localStorage");c(r),console.log(`
 [ProtectedChatRoute] PROFILE COMPLETION CHECK:`);const T=r==null?void 0:r.profileCompleted;console.log(" [ProtectedChatRoute]   Source 1 (AuthContext):"),console.log(" [ProtectedChatRoute]     authUser.profileCompleted =",T),console.log(" [ProtectedChatRoute]     typeof =",typeof T),console.log(" [ProtectedChatRoute]     === true?",T===!0);let R=null;v?(R=JSON.parse(v).profileCompleted,console.log(" [ProtectedChatRoute]   Source 2 (localStorage):"),console.log(" [ProtectedChatRoute]     localStorage.profileCompleted =",R),console.log(" [ProtectedChatRoute]     typeof =",typeof R),console.log(" [ProtectedChatRoute]     === true?",R===!0)):console.log(" [ProtectedChatRoute]   Source 2 (localStorage): not available");const k=T===!0||R===!0;console.log(`
 [ProtectedChatRoute] FINAL DECISION:`),console.log(" [ProtectedChatRoute]   profileCompletedAuth === true?",T===!0),console.log(" [ProtectedChatRoute]   profileCompletedStorage === true?",R===!0),console.log(" [ProtectedChatRoute]   isProfileComplete (final):",k),k?(console.log(`
 [ProtectedChatRoute]  DECISION: Profile IS completed`),console.log(` [ProtectedChatRoute]  SHOWING Chat page
`)):(console.log(`
 [ProtectedChatRoute]  DECISION: Profile NOT completed`),console.log(` [ProtectedChatRoute]  SHOWING ProfileSetupModal
`),o(!0)),p(!1)}catch(v){console.error("[ProtectedChatRoute]  ERROR in profile check:",v),console.error("[ProtectedChatRoute] Stack:",v.stack),p(!1),e("/login",{replace:!0})}},[e,r,i]);const m=v=>{console.log("Profile completed:",v),o(!1),c(v)};return h?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Loading..."})]})}):u.jsxs(u.Fragment,{children:[s&&l&&u.jsx(Px,{user:l,onProfileComplete:m,isOpen:!0}),!s&&t]})};function A2(){return u.jsx(fP,{children:u.jsx(u1,{children:u.jsx("div",{style:{width:"100%",minHeight:"100vh",display:"flex",flexDirection:"column"},children:u.jsxs(o1,{children:[u.jsx(en,{path:"/",element:u.jsx(f1,{})}),u.jsx(en,{path:"/login",element:u.jsx(v1,{})}),u.jsx(en,{path:"/terms",element:u.jsx(ky,{})}),u.jsx(en,{path:"/terms-and-conditions",element:u.jsx(ky,{})}),u.jsx(en,{path:"/privacy-policy",element:u.jsx(C2,{})}),u.jsx(en,{path:"/callback",element:u.jsx(S2,{})}),u.jsx(en,{path:"/auth-success",element:u.jsx(T2,{})}),u.jsx(en,{path:"/chat",element:u.jsx(k2,{children:u.jsx(_2,{})})}),u.jsx(en,{path:"/matching",element:u.jsx(x2,{})}),u.jsx(en,{path:"/profile",element:u.jsx(E2,{})}),u.jsx(en,{path:"*",element:u.jsx(R2,{})})]})})})})}const R2=()=>u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-5xl font-bold text-indigo-400 mb-4",children:"404"}),u.jsx("p",{className:"text-gray-300 mb-8",children:"Page not found"}),u.jsx("a",{href:"/",className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white font-semibold",children:"Go Home"})]})});function b2(){return u.jsx("div",{style:{width:"100%",height:"100vh"},children:u.jsx(A2,{})})}nd.createRoot(document.getElementById("root")).render(u.jsx(Jo.StrictMode,{children:u.jsx(NS,{clientId:"373922547944-gm8fgpgjebnraruomkpajoa7s3nqups0.apps.googleusercontent.com",onScriptProps:{async:!0,defer:!0,nonce:"YOUR_NONCE_VALUE"},children:u.jsx(hP,{children:u.jsx(b2,{})})})}));
//# sourceMappingURL=index-DwLLlv-v.js.map
