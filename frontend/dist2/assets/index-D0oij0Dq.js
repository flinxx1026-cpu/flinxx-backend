function QE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function YE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sy={exports:{}},uc={},Ty={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Go=Symbol.for("react.element"),JE=Symbol.for("react.portal"),XE=Symbol.for("react.fragment"),ZE=Symbol.for("react.strict_mode"),eI=Symbol.for("react.profiler"),tI=Symbol.for("react.provider"),nI=Symbol.for("react.context"),rI=Symbol.for("react.forward_ref"),iI=Symbol.for("react.suspense"),sI=Symbol.for("react.memo"),oI=Symbol.for("react.lazy"),Gp=Symbol.iterator;function aI(t){return t===null||typeof t!="object"?null:(t=Gp&&t[Gp]||t["@@iterator"],typeof t=="function"?t:null)}var Cy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ry=Object.assign,Ay={};function ds(t,e,n){this.props=t,this.context=e,this.refs=Ay,this.updater=n||Cy}ds.prototype.isReactComponent={};ds.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ds.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ky(){}ky.prototype=ds.prototype;function yh(t,e,n){this.props=t,this.context=e,this.refs=Ay,this.updater=n||Cy}var vh=yh.prototype=new ky;vh.constructor=yh;Ry(vh,ds.prototype);vh.isPureReactComponent=!0;var qp=Array.isArray,Ny=Object.prototype.hasOwnProperty,wh={current:null},by={key:!0,ref:!0,__self:!0,__source:!0};function Py(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ny.call(e,r)&&!by.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Go,type:t,key:s,ref:o,props:i,_owner:wh.current}}function lI(t,e){return{$$typeof:Go,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _h(t){return typeof t=="object"&&t!==null&&t.$$typeof===Go}function cI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Kp=/\/+/g;function au(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cI(""+t.key):e.toString(36)}function Ya(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Go:case JE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+au(o,0):r,qp(i)?(n="",t!=null&&(n=t.replace(Kp,"$&/")+"/"),Ya(i,e,n,"",function(h){return h})):i!=null&&(_h(i)&&(i=lI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Kp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",qp(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+au(s,l);o+=Ya(s,e,n,c,i)}else if(c=aI(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+au(s,l++),o+=Ya(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ta(t,e,n){if(t==null)return t;var r=[],i=0;return Ya(t,r,"","",function(s){return e.call(n,s,i++)}),r}function uI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},Ja={transition:null},dI={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:Ja,ReactCurrentOwner:wh};function Oy(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Ta,forEach:function(t,e,n){Ta(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ta(t,function(){e++}),e},toArray:function(t){return Ta(t,function(e){return e})||[]},only:function(t){if(!_h(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=ds;ne.Fragment=XE;ne.Profiler=eI;ne.PureComponent=yh;ne.StrictMode=ZE;ne.Suspense=iI;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dI;ne.act=Oy;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ry({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=wh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Ny.call(e,c)&&!by.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Go,type:t.type,key:i,ref:s,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:nI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tI,_context:t},t.Consumer=t};ne.createElement=Py;ne.createFactory=function(t){var e=Py.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:rI,render:t}};ne.isValidElement=_h;ne.lazy=function(t){return{$$typeof:oI,_payload:{_status:-1,_result:t},_init:uI}};ne.memo=function(t,e){return{$$typeof:sI,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=Ja.transition;Ja.transition={};try{t()}finally{Ja.transition=e}};ne.unstable_act=Oy;ne.useCallback=function(t,e){return Et.current.useCallback(t,e)};ne.useContext=function(t){return Et.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};ne.useEffect=function(t,e){return Et.current.useEffect(t,e)};ne.useId=function(){return Et.current.useId()};ne.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return Et.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};ne.useRef=function(t){return Et.current.useRef(t)};ne.useState=function(t){return Et.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return Et.current.useTransition()};ne.version="18.3.1";Ty.exports=ne;var O=Ty.exports;const qo=YE(O),hI=QE({__proto__:null,default:qo},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fI=O,pI=Symbol.for("react.element"),mI=Symbol.for("react.fragment"),gI=Object.prototype.hasOwnProperty,yI=fI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vI={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gI.call(e,r)&&!vI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:pI,type:t,key:s,ref:o,props:i,_owner:yI.current}}uc.Fragment=mI;uc.jsx=Dy;uc.jsxs=Dy;Sy.exports=uc;var u=Sy.exports,Yu={},jy={exports:{}},Ut={},Ly={exports:{}},My={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Y){var ee=W.length;W.push(Y);e:for(;0<ee;){var _e=ee-1>>>1,de=W[_e];if(0<i(de,Y))W[_e]=Y,W[ee]=de,ee=_e;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],ee=W.pop();if(ee!==Y){W[0]=ee;e:for(var _e=0,de=W.length,Ee=de>>>1;_e<Ee;){var _n=2*(_e+1)-1,tn=W[_n],bt=_n+1,zt=W[bt];if(0>i(tn,ee))bt<de&&0>i(zt,tn)?(W[_e]=zt,W[bt]=ee,_e=bt):(W[_e]=tn,W[_n]=ee,_e=_n);else if(bt<de&&0>i(zt,ee))W[_e]=zt,W[bt]=ee,_e=bt;else break e}}return Y}function i(W,Y){var ee=W.sortIndex-Y.sortIndex;return ee!==0?ee:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,v=3,k=!1,N=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(W){for(var Y=n(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=W)r(h),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(h)}}function D(W){if(x=!1,S(W),!N)if(n(c)!==null)N=!0,wn(L);else{var Y=n(h);Y!==null&&en(D,Y.startTime-W)}}function L(W,Y){N=!1,x&&(x=!1,w(y),y=-1),k=!0;var ee=v;try{for(S(Y),m=n(c);m!==null&&(!(m.expirationTime>Y)||W&&!R());){var _e=m.callback;if(typeof _e=="function"){m.callback=null,v=m.priorityLevel;var de=_e(m.expirationTime<=Y);Y=t.unstable_now(),typeof de=="function"?m.callback=de:m===n(c)&&r(c),S(Y)}else r(c);m=n(c)}if(m!==null)var Ee=!0;else{var _n=n(h);_n!==null&&en(D,_n.startTime-Y),Ee=!1}return Ee}finally{m=null,v=ee,k=!1}}var F=!1,E=null,y=-1,I=5,T=-1;function R(){return!(t.unstable_now()-T<I)}function b(){if(E!==null){var W=t.unstable_now();T=W;var Y=!0;try{Y=E(!0,W)}finally{Y?C():(F=!1,E=null)}}else F=!1}var C;if(typeof _=="function")C=function(){_(b)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,Zt=$e.port2;$e.port1.onmessage=b,C=function(){Zt.postMessage(null)}}else C=function(){A(b,0)};function wn(W){E=W,F||(F=!0,C())}function en(W,Y){y=A(function(){W(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){N||k||(N=!0,wn(L))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(W){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var ee=v;v=Y;try{return W()}finally{v=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ee=v;v=W;try{return Y()}finally{v=ee}},t.unstable_scheduleCallback=function(W,Y,ee){var _e=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?_e+ee:_e):ee=_e,W){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ee+de,W={id:p++,callback:Y,priorityLevel:W,startTime:ee,expirationTime:de,sortIndex:-1},ee>_e?(W.sortIndex=ee,e(h,W),n(c)===null&&W===n(h)&&(x?(w(y),y=-1):x=!0,en(D,ee-_e))):(W.sortIndex=de,e(c,W),N||k||(N=!0,wn(L))),W},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(W){var Y=v;return function(){var ee=v;v=Y;try{return W.apply(this,arguments)}finally{v=ee}}}})(My);Ly.exports=My;var wI=Ly.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _I=O,Vt=wI;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fy=new Set,mo={};function pi(t,e){Xi(t,e),Xi(t+"Capture",e)}function Xi(t,e){for(mo[t]=e,t=0;t<e.length;t++)Fy.add(e[t])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ju=Object.prototype.hasOwnProperty,EI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qp={},Yp={};function II(t){return Ju.call(Yp,t)?!0:Ju.call(Qp,t)?!1:EI.test(t)?Yp[t]=!0:(Qp[t]=!0,!1)}function xI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SI(t,e,n,r){if(e===null||typeof e>"u"||xI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var Eh=/[\-:]([a-z])/g;function Ih(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Eh,Ih);st[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Eh,Ih);st[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Eh,Ih);st[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function xh(t,e,n,r){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SI(e,n,i,r)&&(n=null),r||i===null?II(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nr=_I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ca=Symbol.for("react.element"),ki=Symbol.for("react.portal"),Ni=Symbol.for("react.fragment"),Sh=Symbol.for("react.strict_mode"),Xu=Symbol.for("react.profiler"),Vy=Symbol.for("react.provider"),Uy=Symbol.for("react.context"),Th=Symbol.for("react.forward_ref"),Zu=Symbol.for("react.suspense"),ed=Symbol.for("react.suspense_list"),Ch=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),By=Symbol.for("react.offscreen"),Jp=Symbol.iterator;function Ls(t){return t===null||typeof t!="object"?null:(t=Jp&&t[Jp]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,lu;function qs(t){if(lu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lu=e&&e[1]||""}return`
`+lu+t}var cu=!1;function uu(t,e){if(!t||cu)return"";cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{cu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qs(t):""}function TI(t){switch(t.tag){case 5:return qs(t.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 2:case 15:return t=uu(t.type,!1),t;case 11:return t=uu(t.type.render,!1),t;case 1:return t=uu(t.type,!0),t;default:return""}}function td(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ni:return"Fragment";case ki:return"Portal";case Xu:return"Profiler";case Sh:return"StrictMode";case Zu:return"Suspense";case ed:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uy:return(t.displayName||"Context")+".Consumer";case Vy:return(t._context.displayName||"Context")+".Provider";case Th:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ch:return e=t.displayName||null,e!==null?e:td(t.type)||"Memo";case lr:e=t._payload,t=t._init;try{return td(t(e))}catch{}}return null}function CI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return td(e);case 8:return e===Sh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RI(t){var e=zy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ra(t){t._valueTracker||(t._valueTracker=RI(t))}function $y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nd(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wy(t,e){e=e.checked,e!=null&&xh(t,"checked",e,!1)}function rd(t,e){Wy(t,e);var n=kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?id(t,e.type,n):e.hasOwnProperty("defaultValue")&&id(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function id(t,e,n){(e!=="number"||_l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ks=Array.isArray;function Bi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function em(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Ks(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function Hy(t,e){var n=kr(e.value),r=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function od(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Aa,qy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AI=["Webkit","ms","Moz","O"];Object.keys(Zs).forEach(function(t){AI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zs[e]=Zs[t]})});function Ky(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zs.hasOwnProperty(t)&&Zs[t]?(""+e).trim():e+"px"}function Qy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ky(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var kI=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ad(t,e){if(e){if(kI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function ld(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cd=null;function Rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ud=null,zi=null,$i=null;function nm(t){if(t=Yo(t)){if(typeof ud!="function")throw Error(B(280));var e=t.stateNode;e&&(e=mc(e),ud(t.stateNode,t.type,e))}}function Yy(t){zi?$i?$i.push(t):$i=[t]:zi=t}function Jy(){if(zi){var t=zi,e=$i;if($i=zi=null,nm(t),e)for(t=0;t<e.length;t++)nm(e[t])}}function Xy(t,e){return t(e)}function Zy(){}var du=!1;function ev(t,e,n){if(du)return t(e,n);du=!0;try{return Xy(t,e,n)}finally{du=!1,(zi!==null||$i!==null)&&(Zy(),Jy())}}function yo(t,e){var n=t.stateNode;if(n===null)return null;var r=mc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var dd=!1;if(Yn)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){dd=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{dd=!1}function NI(t,e,n,r,i,s,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var eo=!1,El=null,Il=!1,hd=null,bI={onError:function(t){eo=!0,El=t}};function PI(t,e,n,r,i,s,o,l,c){eo=!1,El=null,NI.apply(bI,arguments)}function OI(t,e,n,r,i,s,o,l,c){if(PI.apply(this,arguments),eo){if(eo){var h=El;eo=!1,El=null}else throw Error(B(198));Il||(Il=!0,hd=h)}}function mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rm(t){if(mi(t)!==t)throw Error(B(188))}function DI(t){var e=t.alternate;if(!e){if(e=mi(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rm(i),t;if(s===r)return rm(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function nv(t){return t=DI(t),t!==null?rv(t):null}function rv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rv(t);if(e!==null)return e;t=t.sibling}return null}var iv=Vt.unstable_scheduleCallback,im=Vt.unstable_cancelCallback,jI=Vt.unstable_shouldYield,LI=Vt.unstable_requestPaint,Me=Vt.unstable_now,MI=Vt.unstable_getCurrentPriorityLevel,Ah=Vt.unstable_ImmediatePriority,sv=Vt.unstable_UserBlockingPriority,xl=Vt.unstable_NormalPriority,FI=Vt.unstable_LowPriority,ov=Vt.unstable_IdlePriority,dc=null,Cn=null;function VI(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(dc,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:zI,UI=Math.log,BI=Math.LN2;function zI(t){return t>>>=0,t===0?32:31-(UI(t)/BI|0)|0}var ka=64,Na=4194304;function Qs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Qs(l):(s&=o,s!==0&&(r=Qs(s)))}else o=n&~i,o!==0?r=Qs(o):s!==0&&(r=Qs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),i=1<<n,r|=t[n],e&=~i;return r}function $I(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-hn(s),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=$I(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function av(){var t=ka;return ka<<=1,!(ka&4194240)&&(ka=64),t}function hu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ko(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function HI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-hn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function kh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var fe=0;function lv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cv,Nh,uv,dv,hv,pd=!1,ba=[],yr=null,vr=null,wr=null,vo=new Map,wo=new Map,ur=[],GI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sm(t,e){switch(t){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(e.pointerId)}}function Fs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Yo(e),e!==null&&Nh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function qI(t,e,n,r,i){switch(e){case"focusin":return yr=Fs(yr,t,e,n,r,i),!0;case"dragenter":return vr=Fs(vr,t,e,n,r,i),!0;case"mouseover":return wr=Fs(wr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return vo.set(s,Fs(vo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wo.set(s,Fs(wo.get(s)||null,t,e,n,r,i)),!0}return!1}function fv(t){var e=Gr(t.target);if(e!==null){var n=mi(e);if(n!==null){if(e=n.tag,e===13){if(e=tv(n),e!==null){t.blockedOn=e,hv(t.priority,function(){uv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cd=r,n.target.dispatchEvent(r),cd=null}else return e=Yo(n),e!==null&&Nh(e),t.blockedOn=n,!1;e.shift()}return!0}function om(t,e,n){Xa(t)&&n.delete(e)}function KI(){pd=!1,yr!==null&&Xa(yr)&&(yr=null),vr!==null&&Xa(vr)&&(vr=null),wr!==null&&Xa(wr)&&(wr=null),vo.forEach(om),wo.forEach(om)}function Vs(t,e){t.blockedOn===e&&(t.blockedOn=null,pd||(pd=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,KI)))}function _o(t){function e(i){return Vs(i,t)}if(0<ba.length){Vs(ba[0],t);for(var n=1;n<ba.length;n++){var r=ba[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yr!==null&&Vs(yr,t),vr!==null&&Vs(vr,t),wr!==null&&Vs(wr,t),vo.forEach(e),wo.forEach(e),n=0;n<ur.length;n++)r=ur[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)fv(n),n.blockedOn===null&&ur.shift()}var Wi=nr.ReactCurrentBatchConfig,Tl=!0;function QI(t,e,n,r){var i=fe,s=Wi.transition;Wi.transition=null;try{fe=1,bh(t,e,n,r)}finally{fe=i,Wi.transition=s}}function YI(t,e,n,r){var i=fe,s=Wi.transition;Wi.transition=null;try{fe=4,bh(t,e,n,r)}finally{fe=i,Wi.transition=s}}function bh(t,e,n,r){if(Tl){var i=md(t,e,n,r);if(i===null)Iu(t,e,r,Cl,n),sm(t,r);else if(qI(i,t,e,n,r))r.stopPropagation();else if(sm(t,r),e&4&&-1<GI.indexOf(t)){for(;i!==null;){var s=Yo(i);if(s!==null&&cv(s),s=md(t,e,n,r),s===null&&Iu(t,e,r,Cl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Iu(t,e,r,null,n)}}var Cl=null;function md(t,e,n,r){if(Cl=null,t=Rh(r),t=Gr(t),t!==null)if(e=mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cl=t,null}function pv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MI()){case Ah:return 1;case sv:return 4;case xl:case FI:return 16;case ov:return 536870912;default:return 16}default:return 16}}var pr=null,Ph=null,Za=null;function mv(){if(Za)return Za;var t,e=Ph,n=e.length,r,i="value"in pr?pr.value:pr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Za=i.slice(t,1<r?1-r:void 0)}function el(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pa(){return!0}function am(){return!1}function Bt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pa:am,this.isPropagationStopped=am,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),e}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oh=Bt(hs),Qo=Pe({},hs,{view:0,detail:0}),JI=Bt(Qo),fu,pu,Us,hc=Pe({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Us&&(Us&&t.type==="mousemove"?(fu=t.screenX-Us.screenX,pu=t.screenY-Us.screenY):pu=fu=0,Us=t),fu)},movementY:function(t){return"movementY"in t?t.movementY:pu}}),lm=Bt(hc),XI=Pe({},hc,{dataTransfer:0}),ZI=Bt(XI),ex=Pe({},Qo,{relatedTarget:0}),mu=Bt(ex),tx=Pe({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),nx=Bt(tx),rx=Pe({},hs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ix=Bt(rx),sx=Pe({},hs,{data:0}),cm=Bt(sx),ox={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ax={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lx[t])?!!e[t]:!1}function Dh(){return cx}var ux=Pe({},Qo,{key:function(t){if(t.key){var e=ox[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=el(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ax[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dh,charCode:function(t){return t.type==="keypress"?el(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?el(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dx=Bt(ux),hx=Pe({},hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),um=Bt(hx),fx=Pe({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dh}),px=Bt(fx),mx=Pe({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),gx=Bt(mx),yx=Pe({},hc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vx=Bt(yx),wx=[9,13,27,32],jh=Yn&&"CompositionEvent"in window,to=null;Yn&&"documentMode"in document&&(to=document.documentMode);var _x=Yn&&"TextEvent"in window&&!to,gv=Yn&&(!jh||to&&8<to&&11>=to),dm=" ",hm=!1;function yv(t,e){switch(t){case"keyup":return wx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bi=!1;function Ex(t,e){switch(t){case"compositionend":return vv(e);case"keypress":return e.which!==32?null:(hm=!0,dm);case"textInput":return t=e.data,t===dm&&hm?null:t;default:return null}}function Ix(t,e){if(bi)return t==="compositionend"||!jh&&yv(t,e)?(t=mv(),Za=Ph=pr=null,bi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gv&&e.locale!=="ko"?null:e.data;default:return null}}var xx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xx[t.type]:e==="textarea"}function wv(t,e,n,r){Yy(r),e=Rl(e,"onChange"),0<e.length&&(n=new Oh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var no=null,Eo=null;function Sx(t){Nv(t,0)}function fc(t){var e=Di(t);if($y(e))return t}function Tx(t,e){if(t==="change")return e}var _v=!1;if(Yn){var gu;if(Yn){var yu="oninput"in document;if(!yu){var pm=document.createElement("div");pm.setAttribute("oninput","return;"),yu=typeof pm.oninput=="function"}gu=yu}else gu=!1;_v=gu&&(!document.documentMode||9<document.documentMode)}function mm(){no&&(no.detachEvent("onpropertychange",Ev),Eo=no=null)}function Ev(t){if(t.propertyName==="value"&&fc(Eo)){var e=[];wv(e,Eo,t,Rh(t)),ev(Sx,e)}}function Cx(t,e,n){t==="focusin"?(mm(),no=e,Eo=n,no.attachEvent("onpropertychange",Ev)):t==="focusout"&&mm()}function Rx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fc(Eo)}function Ax(t,e){if(t==="click")return fc(e)}function kx(t,e){if(t==="input"||t==="change")return fc(e)}function Nx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:Nx;function Io(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ju.call(e,i)||!mn(t[i],e[i]))return!1}return!0}function gm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ym(t,e){var n=gm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gm(n)}}function Iv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Iv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xv(){for(var t=window,e=_l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_l(t.document)}return e}function Lh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bx(t){var e=xv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Iv(n.ownerDocument.documentElement,n)){if(r!==null&&Lh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ym(n,s);var o=ym(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Px=Yn&&"documentMode"in document&&11>=document.documentMode,Pi=null,gd=null,ro=null,yd=!1;function vm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yd||Pi==null||Pi!==_l(r)||(r=Pi,"selectionStart"in r&&Lh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ro&&Io(ro,r)||(ro=r,r=Rl(gd,"onSelect"),0<r.length&&(e=new Oh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Pi)))}function Oa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oi={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionend:Oa("Transition","TransitionEnd")},vu={},Sv={};Yn&&(Sv=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function pc(t){if(vu[t])return vu[t];if(!Oi[t])return t;var e=Oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sv)return vu[t]=e[n];return t}var Tv=pc("animationend"),Cv=pc("animationiteration"),Rv=pc("animationstart"),Av=pc("transitionend"),kv=new Map,wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(t,e){kv.set(t,e),pi(e,[t])}for(var wu=0;wu<wm.length;wu++){var _u=wm[wu],Ox=_u.toLowerCase(),Dx=_u[0].toUpperCase()+_u.slice(1);Dr(Ox,"on"+Dx)}Dr(Tv,"onAnimationEnd");Dr(Cv,"onAnimationIteration");Dr(Rv,"onAnimationStart");Dr("dblclick","onDoubleClick");Dr("focusin","onFocus");Dr("focusout","onBlur");Dr(Av,"onTransitionEnd");Xi("onMouseEnter",["mouseout","mouseover"]);Xi("onMouseLeave",["mouseout","mouseover"]);Xi("onPointerEnter",["pointerout","pointerover"]);Xi("onPointerLeave",["pointerout","pointerover"]);pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ys));function _m(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,OI(r,e,void 0,t),t.currentTarget=null}function Nv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;_m(i,l,h),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;_m(i,l,h),s=c}}}if(Il)throw t=hd,Il=!1,hd=null,t}function xe(t,e){var n=e[Id];n===void 0&&(n=e[Id]=new Set);var r=t+"__bubble";n.has(r)||(bv(e,t,2,!1),n.add(r))}function Eu(t,e,n){var r=0;e&&(r|=4),bv(n,t,r,e)}var Da="_reactListening"+Math.random().toString(36).slice(2);function xo(t){if(!t[Da]){t[Da]=!0,Fy.forEach(function(n){n!=="selectionchange"&&(jx.has(n)||Eu(n,!1,t),Eu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Da]||(e[Da]=!0,Eu("selectionchange",!1,e))}}function bv(t,e,n,r){switch(pv(e)){case 1:var i=QI;break;case 4:i=YI;break;default:i=bh}n=i.bind(null,e,n,t),i=void 0,!dd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Iu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Gr(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}ev(function(){var h=s,p=Rh(n),m=[];e:{var v=kv.get(t);if(v!==void 0){var k=Oh,N=t;switch(t){case"keypress":if(el(n)===0)break e;case"keydown":case"keyup":k=dx;break;case"focusin":N="focus",k=mu;break;case"focusout":N="blur",k=mu;break;case"beforeblur":case"afterblur":k=mu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=lm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=ZI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=px;break;case Tv:case Cv:case Rv:k=nx;break;case Av:k=gx;break;case"scroll":k=JI;break;case"wheel":k=vx;break;case"copy":case"cut":case"paste":k=ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=um}var x=(e&4)!==0,A=!x&&t==="scroll",w=x?v!==null?v+"Capture":null:v;x=[];for(var _=h,S;_!==null;){S=_;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,w!==null&&(D=yo(_,w),D!=null&&x.push(So(_,D,S)))),A)break;_=_.return}0<x.length&&(v=new k(v,N,null,n,p),m.push({event:v,listeners:x}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",v&&n!==cd&&(N=n.relatedTarget||n.fromElement)&&(Gr(N)||N[Jn]))break e;if((k||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,k?(N=n.relatedTarget||n.toElement,k=h,N=N?Gr(N):null,N!==null&&(A=mi(N),N!==A||N.tag!==5&&N.tag!==6)&&(N=null)):(k=null,N=h),k!==N)){if(x=lm,D="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(x=um,D="onPointerLeave",w="onPointerEnter",_="pointer"),A=k==null?v:Di(k),S=N==null?v:Di(N),v=new x(D,_+"leave",k,n,p),v.target=A,v.relatedTarget=S,D=null,Gr(p)===h&&(x=new x(w,_+"enter",N,n,p),x.target=S,x.relatedTarget=A,D=x),A=D,k&&N)t:{for(x=k,w=N,_=0,S=x;S;S=Ri(S))_++;for(S=0,D=w;D;D=Ri(D))S++;for(;0<_-S;)x=Ri(x),_--;for(;0<S-_;)w=Ri(w),S--;for(;_--;){if(x===w||w!==null&&x===w.alternate)break t;x=Ri(x),w=Ri(w)}x=null}else x=null;k!==null&&Em(m,v,k,x,!1),N!==null&&A!==null&&Em(m,A,N,x,!0)}}e:{if(v=h?Di(h):window,k=v.nodeName&&v.nodeName.toLowerCase(),k==="select"||k==="input"&&v.type==="file")var L=Tx;else if(fm(v))if(_v)L=kx;else{L=Rx;var F=Cx}else(k=v.nodeName)&&k.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(L=Ax);if(L&&(L=L(t,h))){wv(m,L,n,p);break e}F&&F(t,v,h),t==="focusout"&&(F=v._wrapperState)&&F.controlled&&v.type==="number"&&id(v,"number",v.value)}switch(F=h?Di(h):window,t){case"focusin":(fm(F)||F.contentEditable==="true")&&(Pi=F,gd=h,ro=null);break;case"focusout":ro=gd=Pi=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,vm(m,n,p);break;case"selectionchange":if(Px)break;case"keydown":case"keyup":vm(m,n,p)}var E;if(jh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else bi?yv(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(gv&&n.locale!=="ko"&&(bi||y!=="onCompositionStart"?y==="onCompositionEnd"&&bi&&(E=mv()):(pr=p,Ph="value"in pr?pr.value:pr.textContent,bi=!0)),F=Rl(h,y),0<F.length&&(y=new cm(y,t,null,n,p),m.push({event:y,listeners:F}),E?y.data=E:(E=vv(n),E!==null&&(y.data=E)))),(E=_x?Ex(t,n):Ix(t,n))&&(h=Rl(h,"onBeforeInput"),0<h.length&&(p=new cm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=E))}Nv(m,e)})}function So(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=yo(t,n),s!=null&&r.unshift(So(t,s,i)),s=yo(t,e),s!=null&&r.push(So(t,s,i))),t=t.return}return r}function Ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Em(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,i?(c=yo(n,s),c!=null&&o.unshift(So(n,c,l))):i||(c=yo(n,s),c!=null&&o.push(So(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Lx=/\r\n?/g,Mx=/\u0000|\uFFFD/g;function Im(t){return(typeof t=="string"?t:""+t).replace(Lx,`
`).replace(Mx,"")}function ja(t,e,n){if(e=Im(e),Im(t)!==e&&n)throw Error(B(425))}function Al(){}var vd=null,wd=null;function _d(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,Fx=typeof clearTimeout=="function"?clearTimeout:void 0,xm=typeof Promise=="function"?Promise:void 0,Vx=typeof queueMicrotask=="function"?queueMicrotask:typeof xm<"u"?function(t){return xm.resolve(null).then(t).catch(Ux)}:Ed;function Ux(t){setTimeout(function(){throw t})}function xu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),_o(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);_o(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fs=Math.random().toString(36).slice(2),Sn="__reactFiber$"+fs,To="__reactProps$"+fs,Jn="__reactContainer$"+fs,Id="__reactEvents$"+fs,Bx="__reactListeners$"+fs,zx="__reactHandles$"+fs;function Gr(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jn]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sm(t);t!==null;){if(n=t[Sn])return n;t=Sm(t)}return e}t=n,n=t.parentNode}return null}function Yo(t){return t=t[Sn]||t[Jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Di(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function mc(t){return t[To]||null}var xd=[],ji=-1;function jr(t){return{current:t}}function Se(t){0>ji||(t.current=xd[ji],xd[ji]=null,ji--)}function ve(t,e){ji++,xd[ji]=t.current,t.current=e}var Nr={},mt=jr(Nr),Tt=jr(!1),ri=Nr;function Zi(t,e){var n=t.type.contextTypes;if(!n)return Nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ct(t){return t=t.childContextTypes,t!=null}function kl(){Se(Tt),Se(mt)}function Tm(t,e,n){if(mt.current!==Nr)throw Error(B(168));ve(mt,e),ve(Tt,n)}function Pv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,CI(t)||"Unknown",i));return Pe({},n,r)}function Nl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,ri=mt.current,ve(mt,t),ve(Tt,Tt.current),!0}function Cm(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=Pv(t,e,ri),r.__reactInternalMemoizedMergedChildContext=t,Se(Tt),Se(mt),ve(mt,t)):Se(Tt),ve(Tt,n)}var Vn=null,gc=!1,Su=!1;function Ov(t){Vn===null?Vn=[t]:Vn.push(t)}function $x(t){gc=!0,Ov(t)}function Lr(){if(!Su&&Vn!==null){Su=!0;var t=0,e=fe;try{var n=Vn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vn=null,gc=!1}catch(i){throw Vn!==null&&(Vn=Vn.slice(t+1)),iv(Ah,Lr),i}finally{fe=e,Su=!1}}return null}var Li=[],Mi=0,bl=null,Pl=0,Ht=[],Gt=0,ii=null,zn=1,$n="";function $r(t,e){Li[Mi++]=Pl,Li[Mi++]=bl,bl=t,Pl=e}function Dv(t,e,n){Ht[Gt++]=zn,Ht[Gt++]=$n,Ht[Gt++]=ii,ii=t;var r=zn;t=$n;var i=32-hn(r)-1;r&=~(1<<i),n+=1;var s=32-hn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zn=1<<32-hn(e)+i|n<<i|r,$n=s+t}else zn=1<<s|n<<i|r,$n=t}function Mh(t){t.return!==null&&($r(t,1),Dv(t,1,0))}function Fh(t){for(;t===bl;)bl=Li[--Mi],Li[Mi]=null,Pl=Li[--Mi],Li[Mi]=null;for(;t===ii;)ii=Ht[--Gt],Ht[Gt]=null,$n=Ht[--Gt],Ht[Gt]=null,zn=Ht[--Gt],Ht[Gt]=null}var Mt=null,Lt=null,Re=!1,ln=null;function jv(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Lt=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ii!==null?{id:zn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Lt=null,!0):!1;default:return!1}}function Sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Td(t){if(Re){var e=Lt;if(e){var n=e;if(!Rm(t,e)){if(Sd(t))throw Error(B(418));e=_r(n.nextSibling);var r=Mt;e&&Rm(t,e)?jv(r,n):(t.flags=t.flags&-4097|2,Re=!1,Mt=t)}}else{if(Sd(t))throw Error(B(418));t.flags=t.flags&-4097|2,Re=!1,Mt=t}}}function Am(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function La(t){if(t!==Mt)return!1;if(!Re)return Am(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_d(t.type,t.memoizedProps)),e&&(e=Lt)){if(Sd(t))throw Lv(),Error(B(418));for(;e;)jv(t,e),e=_r(e.nextSibling)}if(Am(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Mt?_r(t.stateNode.nextSibling):null;return!0}function Lv(){for(var t=Lt;t;)t=_r(t.nextSibling)}function es(){Lt=Mt=null,Re=!1}function Vh(t){ln===null?ln=[t]:ln.push(t)}var Wx=nr.ReactCurrentBatchConfig;function Bs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Ma(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function km(t){var e=t._init;return e(t._payload)}function Mv(t){function e(w,_){if(t){var S=w.deletions;S===null?(w.deletions=[_],w.flags|=16):S.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Sr(w,_),w.index=0,w.sibling=null,w}function s(w,_,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<_?(w.flags|=2,_):S):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,_,S,D){return _===null||_.tag!==6?(_=bu(S,w.mode,D),_.return=w,_):(_=i(_,S),_.return=w,_)}function c(w,_,S,D){var L=S.type;return L===Ni?p(w,_,S.props.children,D,S.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===lr&&km(L)===_.type)?(D=i(_,S.props),D.ref=Bs(w,_,S),D.return=w,D):(D=al(S.type,S.key,S.props,null,w.mode,D),D.ref=Bs(w,_,S),D.return=w,D)}function h(w,_,S,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Pu(S,w.mode,D),_.return=w,_):(_=i(_,S.children||[]),_.return=w,_)}function p(w,_,S,D,L){return _===null||_.tag!==7?(_=Zr(S,w.mode,D,L),_.return=w,_):(_=i(_,S),_.return=w,_)}function m(w,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=bu(""+_,w.mode,S),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ca:return S=al(_.type,_.key,_.props,null,w.mode,S),S.ref=Bs(w,null,_),S.return=w,S;case ki:return _=Pu(_,w.mode,S),_.return=w,_;case lr:var D=_._init;return m(w,D(_._payload),S)}if(Ks(_)||Ls(_))return _=Zr(_,w.mode,S,null),_.return=w,_;Ma(w,_)}return null}function v(w,_,S,D){var L=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:l(w,_,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ca:return S.key===L?c(w,_,S,D):null;case ki:return S.key===L?h(w,_,S,D):null;case lr:return L=S._init,v(w,_,L(S._payload),D)}if(Ks(S)||Ls(S))return L!==null?null:p(w,_,S,D,null);Ma(w,S)}return null}function k(w,_,S,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(S)||null,l(_,w,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ca:return w=w.get(D.key===null?S:D.key)||null,c(_,w,D,L);case ki:return w=w.get(D.key===null?S:D.key)||null,h(_,w,D,L);case lr:var F=D._init;return k(w,_,S,F(D._payload),L)}if(Ks(D)||Ls(D))return w=w.get(S)||null,p(_,w,D,L,null);Ma(_,D)}return null}function N(w,_,S,D){for(var L=null,F=null,E=_,y=_=0,I=null;E!==null&&y<S.length;y++){E.index>y?(I=E,E=null):I=E.sibling;var T=v(w,E,S[y],D);if(T===null){E===null&&(E=I);break}t&&E&&T.alternate===null&&e(w,E),_=s(T,_,y),F===null?L=T:F.sibling=T,F=T,E=I}if(y===S.length)return n(w,E),Re&&$r(w,y),L;if(E===null){for(;y<S.length;y++)E=m(w,S[y],D),E!==null&&(_=s(E,_,y),F===null?L=E:F.sibling=E,F=E);return Re&&$r(w,y),L}for(E=r(w,E);y<S.length;y++)I=k(E,w,y,S[y],D),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?y:I.key),_=s(I,_,y),F===null?L=I:F.sibling=I,F=I);return t&&E.forEach(function(R){return e(w,R)}),Re&&$r(w,y),L}function x(w,_,S,D){var L=Ls(S);if(typeof L!="function")throw Error(B(150));if(S=L.call(S),S==null)throw Error(B(151));for(var F=L=null,E=_,y=_=0,I=null,T=S.next();E!==null&&!T.done;y++,T=S.next()){E.index>y?(I=E,E=null):I=E.sibling;var R=v(w,E,T.value,D);if(R===null){E===null&&(E=I);break}t&&E&&R.alternate===null&&e(w,E),_=s(R,_,y),F===null?L=R:F.sibling=R,F=R,E=I}if(T.done)return n(w,E),Re&&$r(w,y),L;if(E===null){for(;!T.done;y++,T=S.next())T=m(w,T.value,D),T!==null&&(_=s(T,_,y),F===null?L=T:F.sibling=T,F=T);return Re&&$r(w,y),L}for(E=r(w,E);!T.done;y++,T=S.next())T=k(E,w,y,T.value,D),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?y:T.key),_=s(T,_,y),F===null?L=T:F.sibling=T,F=T);return t&&E.forEach(function(b){return e(w,b)}),Re&&$r(w,y),L}function A(w,_,S,D){if(typeof S=="object"&&S!==null&&S.type===Ni&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ca:e:{for(var L=S.key,F=_;F!==null;){if(F.key===L){if(L=S.type,L===Ni){if(F.tag===7){n(w,F.sibling),_=i(F,S.props.children),_.return=w,w=_;break e}}else if(F.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===lr&&km(L)===F.type){n(w,F.sibling),_=i(F,S.props),_.ref=Bs(w,F,S),_.return=w,w=_;break e}n(w,F);break}else e(w,F);F=F.sibling}S.type===Ni?(_=Zr(S.props.children,w.mode,D,S.key),_.return=w,w=_):(D=al(S.type,S.key,S.props,null,w.mode,D),D.ref=Bs(w,_,S),D.return=w,w=D)}return o(w);case ki:e:{for(F=S.key;_!==null;){if(_.key===F)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(w,_.sibling),_=i(_,S.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=Pu(S,w.mode,D),_.return=w,w=_}return o(w);case lr:return F=S._init,A(w,_,F(S._payload),D)}if(Ks(S))return N(w,_,S,D);if(Ls(S))return x(w,_,S,D);Ma(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,S),_.return=w,w=_):(n(w,_),_=bu(S,w.mode,D),_.return=w,w=_),o(w)):n(w,_)}return A}var ts=Mv(!0),Fv=Mv(!1),Ol=jr(null),Dl=null,Fi=null,Uh=null;function Bh(){Uh=Fi=Dl=null}function zh(t){var e=Ol.current;Se(Ol),t._currentValue=e}function Cd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hi(t,e){Dl=t,Uh=Fi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(Uh!==t)if(t={context:t,memoizedValue:e,next:null},Fi===null){if(Dl===null)throw Error(B(308));Fi=t,Dl.dependencies={lanes:0,firstContext:t}}else Fi=Fi.next=t;return e}var qr=null;function $h(t){qr===null?qr=[t]:qr.push(t)}function Vv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$h(e)):(n.next=i.next,i.next=n),e.interleaved=n,Xn(t,r)}function Xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cr=!1;function Wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xn(t,n)}return i=r.interleaved,i===null?(e.next=e,$h(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xn(t,n)}function tl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kh(t,n)}}function Nm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jl(t,e,n,r){var i=t.updateQueue;cr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;o=0,p=h=c=null,l=s;do{var v=l.lane,k=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,x=l;switch(v=e,k=n,x.tag){case 1:if(N=x.payload,typeof N=="function"){m=N.call(k,m,v);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=x.payload,v=typeof N=="function"?N.call(k,m,v):N,v==null)break e;m=Pe({},m,v);break e;case 2:cr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[l]:v.push(l))}else k={eventTime:k,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=k,c=m):p=p.next=k,o|=v;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;v=l,l=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);oi|=o,t.lanes=o,t.memoizedState=m}}function bm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Jo={},Rn=jr(Jo),Co=jr(Jo),Ro=jr(Jo);function Kr(t){if(t===Jo)throw Error(B(174));return t}function Hh(t,e){switch(ve(Ro,e),ve(Co,t),ve(Rn,Jo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:od(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=od(e,t)}Se(Rn),ve(Rn,e)}function ns(){Se(Rn),Se(Co),Se(Ro)}function Bv(t){Kr(Ro.current);var e=Kr(Rn.current),n=od(e,t.type);e!==n&&(ve(Co,t),ve(Rn,n))}function Gh(t){Co.current===t&&(Se(Rn),Se(Co))}var Ne=jr(0);function Ll(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tu=[];function qh(){for(var t=0;t<Tu.length;t++)Tu[t]._workInProgressVersionPrimary=null;Tu.length=0}var nl=nr.ReactCurrentDispatcher,Cu=nr.ReactCurrentBatchConfig,si=0,be=null,He=null,Qe=null,Ml=!1,io=!1,Ao=0,Hx=0;function lt(){throw Error(B(321))}function Kh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function Qh(t,e,n,r,i,s){if(si=s,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nl.current=t===null||t.memoizedState===null?Qx:Yx,t=n(r,i),io){s=0;do{if(io=!1,Ao=0,25<=s)throw Error(B(301));s+=1,Qe=He=null,e.updateQueue=null,nl.current=Jx,t=n(r,i)}while(io)}if(nl.current=Fl,e=He!==null&&He.next!==null,si=0,Qe=He=be=null,Ml=!1,e)throw Error(B(300));return t}function Yh(){var t=Ao!==0;return Ao=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Xt(){if(He===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Qe===null?be.memoizedState:Qe.next;if(e!==null)Qe=e,He=t;else{if(t===null)throw Error(B(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function ko(t,e){return typeof e=="function"?e(t):e}function Ru(t){var e=Xt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=He,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,c=null,h=s;do{var p=h.lane;if((si&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,be.lanes|=p,oi|=p}h=h.next}while(h!==null&&h!==s);c===null?o=r:c.next=l,mn(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,be.lanes|=s,oi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Au(t){var e=Xt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);mn(s,e.memoizedState)||(St=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function zv(){}function $v(t,e){var n=be,r=Xt(),i=e(),s=!mn(r.memoizedState,i);if(s&&(r.memoizedState=i,St=!0),r=r.queue,Jh(Gv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,No(9,Hv.bind(null,n,r,i,e),void 0,null),Je===null)throw Error(B(349));si&30||Wv(n,e,i)}return i}function Wv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Hv(t,e,n,r){e.value=n,e.getSnapshot=r,qv(e)&&Kv(t)}function Gv(t,e,n){return n(function(){qv(e)&&Kv(t)})}function qv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function Kv(t){var e=Xn(t,1);e!==null&&fn(e,t,1,-1)}function Pm(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:t},e.queue=t,t=t.dispatch=Kx.bind(null,be,t),[e.memoizedState,t]}function No(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Qv(){return Xt().memoizedState}function rl(t,e,n,r){var i=xn();be.flags|=t,i.memoizedState=No(1|e,n,void 0,r===void 0?null:r)}function yc(t,e,n,r){var i=Xt();r=r===void 0?null:r;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,r!==null&&Kh(r,o.deps)){i.memoizedState=No(e,n,s,r);return}}be.flags|=t,i.memoizedState=No(1|e,n,s,r)}function Om(t,e){return rl(8390656,8,t,e)}function Jh(t,e){return yc(2048,8,t,e)}function Yv(t,e){return yc(4,2,t,e)}function Jv(t,e){return yc(4,4,t,e)}function Xv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Zv(t,e,n){return n=n!=null?n.concat([t]):null,yc(4,4,Xv.bind(null,e,t),n)}function Xh(){}function e0(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function t0(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function n0(t,e,n){return si&21?(mn(n,e)||(n=av(),be.lanes|=n,oi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function Gx(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Cu.transition;Cu.transition={};try{t(!1),e()}finally{fe=n,Cu.transition=r}}function r0(){return Xt().memoizedState}function qx(t,e,n){var r=xr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},i0(t))s0(e,n);else if(n=Vv(t,e,n,r),n!==null){var i=_t();fn(n,t,r,i),o0(n,e,r)}}function Kx(t,e,n){var r=xr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(i0(t))s0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,mn(l,o)){var c=e.interleaved;c===null?(i.next=i,$h(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Vv(t,e,i,r),n!==null&&(i=_t(),fn(n,t,r,i),o0(n,e,r))}}function i0(t){var e=t.alternate;return t===be||e!==null&&e===be}function s0(t,e){io=Ml=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function o0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kh(t,n)}}var Fl={readContext:Jt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},Qx={readContext:Jt,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:Om,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rl(4194308,4,Xv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rl(4194308,4,t,e)},useInsertionEffect:function(t,e){return rl(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qx.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:Pm,useDebugValue:Xh,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=Pm(!1),e=t[0];return t=Gx.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,i=xn();if(Re){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Je===null)throw Error(B(349));si&30||Wv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Om(Gv.bind(null,r,s,t),[t]),r.flags|=2048,No(9,Hv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=xn(),e=Je.identifierPrefix;if(Re){var n=$n,r=zn;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ao++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Yx={readContext:Jt,useCallback:e0,useContext:Jt,useEffect:Jh,useImperativeHandle:Zv,useInsertionEffect:Yv,useLayoutEffect:Jv,useMemo:t0,useReducer:Ru,useRef:Qv,useState:function(){return Ru(ko)},useDebugValue:Xh,useDeferredValue:function(t){var e=Xt();return n0(e,He.memoizedState,t)},useTransition:function(){var t=Ru(ko)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:zv,useSyncExternalStore:$v,useId:r0,unstable_isNewReconciler:!1},Jx={readContext:Jt,useCallback:e0,useContext:Jt,useEffect:Jh,useImperativeHandle:Zv,useInsertionEffect:Yv,useLayoutEffect:Jv,useMemo:t0,useReducer:Au,useRef:Qv,useState:function(){return Au(ko)},useDebugValue:Xh,useDeferredValue:function(t){var e=Xt();return He===null?e.memoizedState=t:n0(e,He.memoizedState,t)},useTransition:function(){var t=Au(ko)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:zv,useSyncExternalStore:$v,useId:r0,unstable_isNewReconciler:!1};function sn(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vc={isMounted:function(t){return(t=t._reactInternals)?mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),i=xr(t),s=qn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Er(t,s,i),e!==null&&(fn(e,t,i,r),tl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),i=xr(t),s=qn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Er(t,s,i),e!==null&&(fn(e,t,i,r),tl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=xr(t),i=qn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Er(t,i,r),e!==null&&(fn(e,t,r,n),tl(e,t,r))}};function Dm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Io(n,r)||!Io(i,s):!0}function a0(t,e,n){var r=!1,i=Nr,s=e.contextType;return typeof s=="object"&&s!==null?s=Jt(s):(i=Ct(e)?ri:mt.current,r=e.contextTypes,s=(r=r!=null)?Zi(t,i):Nr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function jm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vc.enqueueReplaceState(e,e.state,null)}function Ad(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Wh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Jt(s):(s=Ct(e)?ri:mt.current,i.context=Zi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&vc.enqueueReplaceState(i,i.state,null),jl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function rs(t,e){try{var n="",r=e;do n+=TI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ku(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Xx=typeof WeakMap=="function"?WeakMap:Map;function l0(t,e,n){n=qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ul||(Ul=!0,Vd=r),kd(t,e)},n}function c0(t,e,n){n=qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){kd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){kd(t,e),typeof r!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Lm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Xx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=hS.bind(null,t,e,n),e.then(t,t))}function Mm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qn(-1,1),e.tag=2,Er(n,e,1))),n.lanes|=1),t)}var Zx=nr.ReactCurrentOwner,St=!1;function wt(t,e,n,r){e.child=t===null?Fv(e,null,n,r):ts(e,t.child,n,r)}function Vm(t,e,n,r,i){n=n.render;var s=e.ref;return Hi(e,i),r=Qh(t,e,n,r,s,i),n=Yh(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zn(t,e,i)):(Re&&n&&Mh(e),e.flags|=1,wt(t,e,r,i),e.child)}function Um(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!af(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,u0(t,e,s,r,i)):(t=al(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(o,r)&&t.ref===e.ref)return Zn(t,e,i)}return e.flags|=1,t=Sr(s,r),t.ref=e.ref,t.return=e,e.child=t}function u0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Io(s,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Zn(t,e,i)}return Nd(t,e,n,r,i)}function d0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Ui,jt),jt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(Ui,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ve(Ui,jt),jt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ve(Ui,jt),jt|=r;return wt(t,e,i,n),e.child}function h0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nd(t,e,n,r,i){var s=Ct(n)?ri:mt.current;return s=Zi(e,s),Hi(e,i),n=Qh(t,e,n,r,s,i),r=Yh(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zn(t,e,i)):(Re&&r&&Mh(e),e.flags|=1,wt(t,e,n,i),e.child)}function Bm(t,e,n,r,i){if(Ct(n)){var s=!0;Nl(e)}else s=!1;if(Hi(e,i),e.stateNode===null)il(t,e),a0(e,n,r),Ad(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Jt(h):(h=Ct(n)?ri:mt.current,h=Zi(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&jm(e,o,r,h),cr=!1;var v=e.memoizedState;o.state=v,jl(e,r,o,i),c=e.memoizedState,l!==r||v!==c||Tt.current||cr?(typeof p=="function"&&(Rd(e,n,p,r),c=e.memoizedState),(l=cr||Dm(e,n,l,r,v,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Uv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:sn(e.type,l),o.props=h,m=e.pendingProps,v=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jt(c):(c=Ct(n)?ri:mt.current,c=Zi(e,c));var k=n.getDerivedStateFromProps;(p=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||v!==c)&&jm(e,o,r,c),cr=!1,v=e.memoizedState,o.state=v,jl(e,r,o,i);var N=e.memoizedState;l!==m||v!==N||Tt.current||cr?(typeof k=="function"&&(Rd(e,n,k,r),N=e.memoizedState),(h=cr||Dm(e,n,h,r,v,N,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return bd(t,e,n,r,s,i)}function bd(t,e,n,r,i,s){h0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Cm(e,n,!1),Zn(t,e,s);r=e.stateNode,Zx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ts(e,t.child,null,s),e.child=ts(e,null,l,s)):wt(t,e,l,s),e.memoizedState=r.state,i&&Cm(e,n,!0),e.child}function f0(t){var e=t.stateNode;e.pendingContext?Tm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tm(t,e.context,!1),Hh(t,e.containerInfo)}function zm(t,e,n,r,i){return es(),Vh(i),e.flags|=256,wt(t,e,n,r),e.child}var Pd={dehydrated:null,treeContext:null,retryLane:0};function Od(t){return{baseLanes:t,cachePool:null,transitions:null}}function p0(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ve(Ne,i&1),t===null)return Td(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ec(o,r,0,null),t=Zr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Od(n),e.memoizedState=Pd,t):Zh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return eS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Sr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Sr(l,s):(s=Zr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Od(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Pd,r}return s=t.child,t=s.sibling,r=Sr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zh(t,e){return e=Ec({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fa(t,e,n,r){return r!==null&&Vh(r),ts(e,t.child,null,n),t=Zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ku(Error(B(422))),Fa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ec({mode:"visible",children:r.children},i,0,null),s=Zr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ts(e,t.child,null,o),e.child.memoizedState=Od(o),e.memoizedState=Pd,s);if(!(e.mode&1))return Fa(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(B(419)),r=ku(s,r,void 0),Fa(t,e,o,r)}if(l=(o&t.childLanes)!==0,St||l){if(r=Je,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xn(t,i),fn(r,t,i,-1))}return of(),r=ku(Error(B(421))),Fa(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=fS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Lt=_r(i.nextSibling),Mt=e,Re=!0,ln=null,t!==null&&(Ht[Gt++]=zn,Ht[Gt++]=$n,Ht[Gt++]=ii,zn=t.id,$n=t.overflow,ii=e),e=Zh(e,r.children),e.flags|=4096,e)}function $m(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cd(t.return,e,n)}function Nu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function m0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$m(t,n,e);else if(t.tag===19)$m(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ll(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Nu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ll(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Nu(e,!0,n,null,s);break;case"together":Nu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function il(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tS(t,e,n){switch(e.tag){case 3:f0(e),es();break;case 5:Bv(e);break;case 1:Ct(e.type)&&Nl(e);break;case 4:Hh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ve(Ol,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?p0(t,e,n):(ve(Ne,Ne.current&1),t=Zn(t,e,n),t!==null?t.sibling:null);ve(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return m0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,d0(t,e,n)}return Zn(t,e,n)}var g0,Dd,y0,v0;g0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dd=function(){};y0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Kr(Rn.current);var s=null;switch(n){case"input":i=nd(t,i),r=nd(t,r),s=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":i=sd(t,i),r=sd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Al)}ad(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(mo.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(mo.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&xe("scroll",t),s||l===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};v0=function(t,e,n,r){n!==r&&(e.flags|=4)};function zs(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nS(t,e,n){var r=e.pendingProps;switch(Fh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return Ct(e.type)&&kl(),ct(e),null;case 3:return r=e.stateNode,ns(),Se(Tt),Se(mt),qh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(La(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(zd(ln),ln=null))),Dd(t,e),ct(e),null;case 5:Gh(e);var i=Kr(Ro.current);if(n=e.type,t!==null&&e.stateNode!=null)y0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return ct(e),null}if(t=Kr(Rn.current),La(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Sn]=e,r[To]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<Ys.length;i++)xe(Ys[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Xp(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":em(r,s),xe("invalid",r)}ad(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ja(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ja(r.textContent,l,t),i=["children",""+l]):mo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Ra(r),Zp(r,s,!0);break;case"textarea":Ra(r),tm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Al)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sn]=e,t[To]=r,g0(t,e,!1,!1),e.stateNode=t;e:{switch(o=ld(n,r),n){case"dialog":xe("cancel",t),xe("close",t),i=r;break;case"iframe":case"object":case"embed":xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ys.length;i++)xe(Ys[i],t);i=r;break;case"source":xe("error",t),i=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=r;break;case"details":xe("toggle",t),i=r;break;case"input":Xp(t,r),i=nd(t,r),xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),xe("invalid",t);break;case"textarea":em(t,r),i=sd(t,r),xe("invalid",t);break;default:i=r}ad(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Qy(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qy(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&go(t,c):typeof c=="number"&&go(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(mo.hasOwnProperty(s)?c!=null&&s==="onScroll"&&xe("scroll",t):c!=null&&xh(t,s,c,o))}switch(n){case"input":Ra(t),Zp(t,r,!1);break;case"textarea":Ra(t),tm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Bi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Al)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)v0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Kr(Ro.current),Kr(Rn.current),La(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sn]=e,(s=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:ja(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ja(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=e,e.stateNode=r}return ct(e),null;case 13:if(Se(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Lt!==null&&e.mode&1&&!(e.flags&128))Lv(),es(),e.flags|=98560,s=!1;else if(s=La(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Sn]=e}else es(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),s=!1}else ln!==null&&(zd(ln),ln=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Ge===0&&(Ge=3):of())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return ns(),Dd(t,e),t===null&&xo(e.stateNode.containerInfo),ct(e),null;case 10:return zh(e.type._context),ct(e),null;case 17:return Ct(e.type)&&kl(),ct(e),null;case 19:if(Se(Ne),s=e.memoizedState,s===null)return ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)zs(s,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ll(t),o!==null){for(e.flags|=128,zs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&Me()>is&&(e.flags|=128,r=!0,zs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ll(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Re)return ct(e),null}else 2*Me()-s.renderingStartTime>is&&n!==1073741824&&(e.flags|=128,r=!0,zs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Me(),e.sibling=null,n=Ne.current,ve(Ne,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return sf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function rS(t,e){switch(Fh(e),e.tag){case 1:return Ct(e.type)&&kl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ns(),Se(Tt),Se(mt),qh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gh(e),null;case 13:if(Se(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));es()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Ne),null;case 4:return ns(),null;case 10:return zh(e.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Va=!1,ht=!1,iS=typeof WeakSet=="function"?WeakSet:Set,K=null;function Vi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function jd(t,e,n){try{n()}catch(r){Le(t,e,r)}}var Wm=!1;function sS(t,e){if(vd=Tl,t=xv(),Lh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,v=null;t:for(;;){for(var k;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(k=m.firstChild)!==null;)v=m,m=k;for(;;){if(m===t)break t;if(v===n&&++h===i&&(l=o),v===s&&++p===r&&(c=o),(k=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=k}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:t,selectionRange:n},Tl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var x=N.memoizedProps,A=N.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:sn(e.type,x),A);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(D){Le(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return N=Wm,Wm=!1,N}function so(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&jd(e,n,s)}i=i.next}while(i!==r)}}function wc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ld(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function w0(t){var e=t.alternate;e!==null&&(t.alternate=null,w0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[To],delete e[Id],delete e[Bx],delete e[zx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _0(t){return t.tag===5||t.tag===3||t.tag===4}function Hm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Al));else if(r!==4&&(t=t.child,t!==null))for(Md(t,e,n),t=t.sibling;t!==null;)Md(t,e,n),t=t.sibling}function Fd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fd(t,e,n),t=t.sibling;t!==null;)Fd(t,e,n),t=t.sibling}var et=null,on=!1;function or(t,e,n){for(n=n.child;n!==null;)E0(t,e,n),n=n.sibling}function E0(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(dc,n)}catch{}switch(n.tag){case 5:ht||Vi(n,e);case 6:var r=et,i=on;et=null,or(t,e,n),et=r,on=i,et!==null&&(on?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(on?(t=et,n=n.stateNode,t.nodeType===8?xu(t.parentNode,n):t.nodeType===1&&xu(t,n),_o(t)):xu(et,n.stateNode));break;case 4:r=et,i=on,et=n.stateNode.containerInfo,on=!0,or(t,e,n),et=r,on=i;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jd(n,e,o),i=i.next}while(i!==r)}or(t,e,n);break;case 1:if(!ht&&(Vi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,or(t,e,n),ht=r):or(t,e,n);break;default:or(t,e,n)}}function Gm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iS),e.forEach(function(r){var i=pS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,on=!1;break e;case 3:et=l.stateNode.containerInfo,on=!0;break e;case 4:et=l.stateNode.containerInfo,on=!0;break e}l=l.return}if(et===null)throw Error(B(160));E0(s,o,i),et=null,on=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Le(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)I0(e,t),e=e.sibling}function I0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),In(t),r&4){try{so(3,t,t.return),wc(3,t)}catch(x){Le(t,t.return,x)}try{so(5,t,t.return)}catch(x){Le(t,t.return,x)}}break;case 1:rn(e,t),In(t),r&512&&n!==null&&Vi(n,n.return);break;case 5:if(rn(e,t),In(t),r&512&&n!==null&&Vi(n,n.return),t.flags&32){var i=t.stateNode;try{go(i,"")}catch(x){Le(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Wy(i,s),ld(l,o);var h=ld(l,s);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?Qy(i,m):p==="dangerouslySetInnerHTML"?qy(i,m):p==="children"?go(i,m):xh(i,p,m,h)}switch(l){case"input":rd(i,s);break;case"textarea":Hy(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var k=s.value;k!=null?Bi(i,!!s.multiple,k,!1):v!==!!s.multiple&&(s.defaultValue!=null?Bi(i,!!s.multiple,s.defaultValue,!0):Bi(i,!!s.multiple,s.multiple?[]:"",!1))}i[To]=s}catch(x){Le(t,t.return,x)}}break;case 6:if(rn(e,t),In(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Le(t,t.return,x)}}break;case 3:if(rn(e,t),In(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_o(e.containerInfo)}catch(x){Le(t,t.return,x)}break;case 4:rn(e,t),In(t);break;case 13:rn(e,t),In(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nf=Me())),r&4&&Gm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(h=ht)||p,rn(e,t),ht=h):rn(e,t),In(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(K=t,p=t.child;p!==null;){for(m=K=p;K!==null;){switch(v=K,k=v.child,v.tag){case 0:case 11:case 14:case 15:so(4,v,v.return);break;case 1:Vi(v,v.return);var N=v.stateNode;if(typeof N.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(x){Le(r,n,x)}}break;case 5:Vi(v,v.return);break;case 22:if(v.memoizedState!==null){Km(m);continue}}k!==null?(k.return=v,K=k):Km(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ky("display",o))}catch(x){Le(t,t.return,x)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(x){Le(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:rn(e,t),In(t),r&4&&Gm(t);break;case 21:break;default:rn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_0(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(go(i,""),r.flags&=-33);var s=Hm(t);Fd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Hm(t);Md(t,l,o);break;default:throw Error(B(161))}}catch(c){Le(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oS(t,e,n){K=t,x0(t)}function x0(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Va;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||ht;l=Va;var h=ht;if(Va=o,(ht=c)&&!h)for(K=i;K!==null;)o=K,c=o.child,o.tag===22&&o.memoizedState!==null?Qm(i):c!==null?(c.return=o,K=c):Qm(i);for(;s!==null;)K=s,x0(s),s=s.sibling;K=i,Va=l,ht=h}qm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):qm(t)}}function qm(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||wc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:sn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&_o(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ht||e.flags&512&&Ld(e)}catch(v){Le(e,e.return,v)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Km(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Qm(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wc(4,e)}catch(c){Le(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Le(e,i,c)}}var s=e.return;try{Ld(e)}catch(c){Le(e,s,c)}break;case 5:var o=e.return;try{Ld(e)}catch(c){Le(e,o,c)}}}catch(c){Le(e,e.return,c)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var aS=Math.ceil,Vl=nr.ReactCurrentDispatcher,ef=nr.ReactCurrentOwner,Qt=nr.ReactCurrentBatchConfig,le=0,Je=null,Be=null,it=0,jt=0,Ui=jr(0),Ge=0,bo=null,oi=0,_c=0,tf=0,oo=null,xt=null,nf=0,is=1/0,Fn=null,Ul=!1,Vd=null,Ir=null,Ua=!1,mr=null,Bl=0,ao=0,Ud=null,sl=-1,ol=0;function _t(){return le&6?Me():sl!==-1?sl:sl=Me()}function xr(t){return t.mode&1?le&2&&it!==0?it&-it:Wx.transition!==null?(ol===0&&(ol=av()),ol):(t=fe,t!==0||(t=window.event,t=t===void 0?16:pv(t.type)),t):1}function fn(t,e,n,r){if(50<ao)throw ao=0,Ud=null,Error(B(185));Ko(t,n,r),(!(le&2)||t!==Je)&&(t===Je&&(!(le&2)&&(_c|=n),Ge===4&&dr(t,it)),Rt(t,r),n===1&&le===0&&!(e.mode&1)&&(is=Me()+500,gc&&Lr()))}function Rt(t,e){var n=t.callbackNode;WI(t,e);var r=Sl(t,t===Je?it:0);if(r===0)n!==null&&im(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&im(n),e===1)t.tag===0?$x(Ym.bind(null,t)):Ov(Ym.bind(null,t)),Vx(function(){!(le&6)&&Lr()}),n=null;else{switch(lv(r)){case 1:n=Ah;break;case 4:n=sv;break;case 16:n=xl;break;case 536870912:n=ov;break;default:n=xl}n=b0(n,S0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function S0(t,e){if(sl=-1,ol=0,le&6)throw Error(B(327));var n=t.callbackNode;if(Gi()&&t.callbackNode!==n)return null;var r=Sl(t,t===Je?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zl(t,r);else{e=r;var i=le;le|=2;var s=C0();(Je!==t||it!==e)&&(Fn=null,is=Me()+500,Xr(t,e));do try{uS();break}catch(l){T0(t,l)}while(!0);Bh(),Vl.current=s,le=i,Be!==null?e=0:(Je=null,it=0,e=Ge)}if(e!==0){if(e===2&&(i=fd(t),i!==0&&(r=i,e=Bd(t,i))),e===1)throw n=bo,Xr(t,0),dr(t,r),Rt(t,Me()),n;if(e===6)dr(t,r);else{if(i=t.current.alternate,!(r&30)&&!lS(i)&&(e=zl(t,r),e===2&&(s=fd(t),s!==0&&(r=s,e=Bd(t,s))),e===1))throw n=bo,Xr(t,0),dr(t,r),Rt(t,Me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Wr(t,xt,Fn);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=nf+500-Me(),10<e)){if(Sl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ed(Wr.bind(null,t,xt,Fn),e);break}Wr(t,xt,Fn);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-hn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aS(r/1960))-r,10<r){t.timeoutHandle=Ed(Wr.bind(null,t,xt,Fn),r);break}Wr(t,xt,Fn);break;case 5:Wr(t,xt,Fn);break;default:throw Error(B(329))}}}return Rt(t,Me()),t.callbackNode===n?S0.bind(null,t):null}function Bd(t,e){var n=oo;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=zl(t,e),t!==2&&(e=xt,xt=n,e!==null&&zd(e)),t}function zd(t){xt===null?xt=t:xt.push.apply(xt,t)}function lS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!mn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~tf,e&=~_c,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function Ym(t){if(le&6)throw Error(B(327));Gi();var e=Sl(t,0);if(!(e&1))return Rt(t,Me()),null;var n=zl(t,e);if(t.tag!==0&&n===2){var r=fd(t);r!==0&&(e=r,n=Bd(t,r))}if(n===1)throw n=bo,Xr(t,0),dr(t,e),Rt(t,Me()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wr(t,xt,Fn),Rt(t,Me()),null}function rf(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(is=Me()+500,gc&&Lr())}}function ai(t){mr!==null&&mr.tag===0&&!(le&6)&&Gi();var e=le;le|=1;var n=Qt.transition,r=fe;try{if(Qt.transition=null,fe=1,t)return t()}finally{fe=r,Qt.transition=n,le=e,!(le&6)&&Lr()}}function sf(){jt=Ui.current,Se(Ui)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Fx(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Fh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kl();break;case 3:ns(),Se(Tt),Se(mt),qh();break;case 5:Gh(r);break;case 4:ns();break;case 13:Se(Ne);break;case 19:Se(Ne);break;case 10:zh(r.type._context);break;case 22:case 23:sf()}n=n.return}if(Je=t,Be=t=Sr(t.current,null),it=jt=e,Ge=0,bo=null,tf=_c=oi=0,xt=oo=null,qr!==null){for(e=0;e<qr.length;e++)if(n=qr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}qr=null}return t}function T0(t,e){do{var n=Be;try{if(Bh(),nl.current=Fl,Ml){for(var r=be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ml=!1}if(si=0,Qe=He=be=null,io=!1,Ao=0,ef.current=null,n===null||n.return===null){Ge=1,bo=e,Be=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=it,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var k=Mm(o);if(k!==null){k.flags&=-257,Fm(k,o,l,s,e),k.mode&1&&Lm(s,h,e),e=k,c=h;var N=e.updateQueue;if(N===null){var x=new Set;x.add(c),e.updateQueue=x}else N.add(c);break e}else{if(!(e&1)){Lm(s,h,e),of();break e}c=Error(B(426))}}else if(Re&&l.mode&1){var A=Mm(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Fm(A,o,l,s,e),Vh(rs(c,l));break e}}s=c=rs(c,l),Ge!==4&&(Ge=2),oo===null?oo=[s]:oo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=l0(s,c,e);Nm(s,w);break e;case 1:l=c;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ir===null||!Ir.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=c0(s,l,e);Nm(s,D);break e}}s=s.return}while(s!==null)}A0(n)}catch(L){e=L,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function C0(){var t=Vl.current;return Vl.current=Fl,t===null?Fl:t}function of(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Je===null||!(oi&268435455)&&!(_c&268435455)||dr(Je,it)}function zl(t,e){var n=le;le|=2;var r=C0();(Je!==t||it!==e)&&(Fn=null,Xr(t,e));do try{cS();break}catch(i){T0(t,i)}while(!0);if(Bh(),le=n,Vl.current=r,Be!==null)throw Error(B(261));return Je=null,it=0,Ge}function cS(){for(;Be!==null;)R0(Be)}function uS(){for(;Be!==null&&!jI();)R0(Be)}function R0(t){var e=N0(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?A0(t):Be=e,ef.current=null}function A0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rS(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,Be=null;return}}else if(n=nS(n,e,jt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ge===0&&(Ge=5)}function Wr(t,e,n){var r=fe,i=Qt.transition;try{Qt.transition=null,fe=1,dS(t,e,n,r)}finally{Qt.transition=i,fe=r}return null}function dS(t,e,n,r){do Gi();while(mr!==null);if(le&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(HI(t,s),t===Je&&(Be=Je=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ua||(Ua=!0,b0(xl,function(){return Gi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qt.transition,Qt.transition=null;var o=fe;fe=1;var l=le;le|=4,ef.current=null,sS(t,n),I0(n,t),bx(wd),Tl=!!vd,wd=vd=null,t.current=n,oS(n),LI(),le=l,fe=o,Qt.transition=s}else t.current=n;if(Ua&&(Ua=!1,mr=t,Bl=i),s=t.pendingLanes,s===0&&(Ir=null),VI(n.stateNode),Rt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ul)throw Ul=!1,t=Vd,Vd=null,t;return Bl&1&&t.tag!==0&&Gi(),s=t.pendingLanes,s&1?t===Ud?ao++:(ao=0,Ud=t):ao=0,Lr(),null}function Gi(){if(mr!==null){var t=lv(Bl),e=Qt.transition,n=fe;try{if(Qt.transition=null,fe=16>t?16:t,mr===null)var r=!1;else{if(t=mr,mr=null,Bl=0,le&6)throw Error(B(331));var i=le;for(le|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(K=h;K!==null;){var p=K;switch(p.tag){case 0:case 11:case 15:so(8,p,s)}var m=p.child;if(m!==null)m.return=p,K=m;else for(;K!==null;){p=K;var v=p.sibling,k=p.return;if(w0(p),p===h){K=null;break}if(v!==null){v.return=k,K=v;break}K=k}}}var N=s.alternate;if(N!==null){var x=N.child;if(x!==null){N.child=null;do{var A=x.sibling;x.sibling=null,x=A}while(x!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:so(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,K=w;break e}K=s.return}}var _=t.current;for(K=_;K!==null;){o=K;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,K=S;else e:for(o=_;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wc(9,l)}}catch(L){Le(l,l.return,L)}if(l===o){K=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,K=D;break e}K=l.return}}if(le=i,Lr(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(dc,t)}catch{}r=!0}return r}finally{fe=n,Qt.transition=e}}return!1}function Jm(t,e,n){e=rs(n,e),e=l0(t,e,1),t=Er(t,e,1),e=_t(),t!==null&&(Ko(t,1,e),Rt(t,e))}function Le(t,e,n){if(t.tag===3)Jm(t,t,n);else for(;e!==null;){if(e.tag===3){Jm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ir===null||!Ir.has(r))){t=rs(n,t),t=c0(e,t,1),e=Er(e,t,1),t=_t(),e!==null&&(Ko(e,1,t),Rt(e,t));break}}e=e.return}}function hS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(it&n)===n&&(Ge===4||Ge===3&&(it&130023424)===it&&500>Me()-nf?Xr(t,0):tf|=n),Rt(t,e)}function k0(t,e){e===0&&(t.mode&1?(e=Na,Na<<=1,!(Na&130023424)&&(Na=4194304)):e=1);var n=_t();t=Xn(t,e),t!==null&&(Ko(t,e,n),Rt(t,n))}function fS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),k0(t,n)}function pS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),k0(t,n)}var N0;N0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,tS(t,e,n);St=!!(t.flags&131072)}else St=!1,Re&&e.flags&1048576&&Dv(e,Pl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;il(t,e),t=e.pendingProps;var i=Zi(e,mt.current);Hi(e,n),i=Qh(null,e,r,t,i,n);var s=Yh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ct(r)?(s=!0,Nl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wh(e),i.updater=vc,e.stateNode=i,i._reactInternals=e,Ad(e,r,t,n),e=bd(null,e,r,!0,s,n)):(e.tag=0,Re&&s&&Mh(e),wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(il(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=gS(r),t=sn(r,t),i){case 0:e=Nd(null,e,r,t,n);break e;case 1:e=Bm(null,e,r,t,n);break e;case 11:e=Vm(null,e,r,t,n);break e;case 14:e=Um(null,e,r,sn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),Nd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),Bm(t,e,r,i,n);case 3:e:{if(f0(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Uv(t,e),jl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=rs(Error(B(423)),e),e=zm(t,e,r,n,i);break e}else if(r!==i){i=rs(Error(B(424)),e),e=zm(t,e,r,n,i);break e}else for(Lt=_r(e.stateNode.containerInfo.firstChild),Mt=e,Re=!0,ln=null,n=Fv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(es(),r===i){e=Zn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return Bv(e),t===null&&Td(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,_d(r,i)?o=null:s!==null&&_d(r,s)&&(e.flags|=32),h0(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&Td(e),null;case 13:return p0(t,e,n);case 4:return Hh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ts(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),Vm(t,e,r,i,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ve(Ol,r._currentValue),r._currentValue=o,s!==null)if(mn(s.value,o)){if(s.children===i.children&&!Tt.current){e=Zn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=qn(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Cd(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Cd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Hi(e,n),i=Jt(i),r=r(i),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,i=sn(r,e.pendingProps),i=sn(r.type,i),Um(t,e,r,i,n);case 15:return u0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),il(t,e),e.tag=1,Ct(r)?(t=!0,Nl(e)):t=!1,Hi(e,n),a0(e,r,i),Ad(e,r,i,n),bd(null,e,r,!0,t,n);case 19:return m0(t,e,n);case 22:return d0(t,e,n)}throw Error(B(156,e.tag))};function b0(t,e){return iv(t,e)}function mS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new mS(t,e,n,r)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gS(t){if(typeof t=="function")return af(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Th)return 11;if(t===Ch)return 14}return 2}function Sr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function al(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")af(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ni:return Zr(n.children,i,s,e);case Sh:o=8,i|=8;break;case Xu:return t=Kt(12,n,e,i|2),t.elementType=Xu,t.lanes=s,t;case Zu:return t=Kt(13,n,e,i),t.elementType=Zu,t.lanes=s,t;case ed:return t=Kt(19,n,e,i),t.elementType=ed,t.lanes=s,t;case By:return Ec(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vy:o=10;break e;case Uy:o=9;break e;case Th:o=11;break e;case Ch:o=14;break e;case lr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Zr(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function Ec(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=By,t.lanes=n,t.stateNode={isHidden:!1},t}function bu(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function Pu(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hu(0),this.expirationTimes=hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lf(t,e,n,r,i,s,o,l,c){return t=new yS(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Kt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wh(s),t}function vS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ki,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function P0(t){if(!t)return Nr;t=t._reactInternals;e:{if(mi(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Ct(n))return Pv(t,n,e)}return e}function O0(t,e,n,r,i,s,o,l,c){return t=lf(n,r,!0,t,i,s,o,l,c),t.context=P0(null),n=t.current,r=_t(),i=xr(n),s=qn(r,i),s.callback=e??null,Er(n,s,i),t.current.lanes=i,Ko(t,i,r),Rt(t,r),t}function Ic(t,e,n,r){var i=e.current,s=_t(),o=xr(i);return n=P0(n),e.context===null?e.context=n:e.pendingContext=n,e=qn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Er(i,e,o),t!==null&&(fn(t,i,o,s),tl(t,i,o)),o}function $l(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cf(t,e){Xm(t,e),(t=t.alternate)&&Xm(t,e)}function wS(){return null}var D0=typeof reportError=="function"?reportError:function(t){console.error(t)};function uf(t){this._internalRoot=t}xc.prototype.render=uf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Ic(t,e,null,null)};xc.prototype.unmount=uf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ai(function(){Ic(null,t,null,null)}),e[Jn]=null}};function xc(t){this._internalRoot=t}xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=dv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&fv(t)}};function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zm(){}function _S(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=$l(o);s.call(h)}}var o=O0(e,r,t,0,null,!1,!1,"",Zm);return t._reactRootContainer=o,t[Jn]=o.current,xo(t.nodeType===8?t.parentNode:t),ai(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=$l(c);l.call(h)}}var c=lf(t,0,!1,null,null,!1,!1,"",Zm);return t._reactRootContainer=c,t[Jn]=c.current,xo(t.nodeType===8?t.parentNode:t),ai(function(){Ic(e,c,n,r)}),c}function Tc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=$l(o);l.call(c)}}Ic(e,o,t,i)}else o=_S(n,e,t,i,r);return $l(o)}cv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qs(e.pendingLanes);n!==0&&(kh(e,n|1),Rt(e,Me()),!(le&6)&&(is=Me()+500,Lr()))}break;case 13:ai(function(){var r=Xn(t,1);if(r!==null){var i=_t();fn(r,t,1,i)}}),cf(t,1)}};Nh=function(t){if(t.tag===13){var e=Xn(t,134217728);if(e!==null){var n=_t();fn(e,t,134217728,n)}cf(t,134217728)}};uv=function(t){if(t.tag===13){var e=xr(t),n=Xn(t,e);if(n!==null){var r=_t();fn(n,t,e,r)}cf(t,e)}};dv=function(){return fe};hv=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};ud=function(t,e,n){switch(e){case"input":if(rd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=mc(r);if(!i)throw Error(B(90));$y(r),rd(r,i)}}}break;case"textarea":Hy(t,n);break;case"select":e=n.value,e!=null&&Bi(t,!!n.multiple,e,!1)}};Xy=rf;Zy=ai;var ES={usingClientEntryPoint:!1,Events:[Yo,Di,mc,Yy,Jy,rf]},$s={findFiberByHostInstance:Gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IS={bundleType:$s.bundleType,version:$s.version,rendererPackageName:$s.rendererPackageName,rendererConfig:$s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nv(t),t===null?null:t.stateNode},findFiberByHostInstance:$s.findFiberByHostInstance||wS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ba.isDisabled&&Ba.supportsFiber)try{dc=Ba.inject(IS),Cn=Ba}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ES;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(e))throw Error(B(200));return vS(t,e,null,n)};Ut.createRoot=function(t,e){if(!df(t))throw Error(B(299));var n=!1,r="",i=D0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lf(t,1,!1,null,null,n,!1,r,i),t[Jn]=e.current,xo(t.nodeType===8?t.parentNode:t),new uf(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=nv(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return ai(t)};Ut.hydrate=function(t,e,n){if(!Sc(e))throw Error(B(200));return Tc(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!df(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=D0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=O0(e,null,t,1,n??null,i,!1,s,o),t[Jn]=e.current,xo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xc(e)};Ut.render=function(t,e,n){if(!Sc(e))throw Error(B(200));return Tc(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!Sc(t))throw Error(B(40));return t._reactRootContainer?(ai(function(){Tc(null,null,t,!1,function(){t._reactRootContainer=null,t[Jn]=null})}),!0):!1};Ut.unstable_batchedUpdates=rf;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sc(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Tc(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function j0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j0)}catch(t){console.error(t)}}j0(),jy.exports=Ut;var xS=jy.exports,eg=xS;Yu.createRoot=eg.createRoot,Yu.hydrateRoot=eg.hydrateRoot;function SS(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[i,s]=O.useState(!1),o=O.useRef(n);o.current=n;const l=O.useRef(r);return l.current=r,O.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var h;s(!0),(h=o.current)===null||h===void 0||h.call(o)},c.onerror=()=>{var h;s(!1),(h=l.current)===null||h===void 0||h.call(l)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),i}const TS=O.createContext(null);function CS({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:i}){const s=SS({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),o=O.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return qo.createElement(TS.Provider,{value:o},i)}var tg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},RS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},M0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let v=(l&15)<<2|h>>6,k=h&63;c||(k=64,o||(v=64)),r.push(n[p],n[m],n[v],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(L0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new AS;const v=s<<2|l>>4;if(r.push(v),h!==64){const k=l<<4&240|h>>2;if(r.push(k),m!==64){const N=h<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kS=function(t){const e=L0(t);return M0.encodeByteArray(e,!0)},Wl=function(t){return kS(t).replace(/\./g,"")},F0=function(t){try{return M0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=()=>NS().__FIREBASE_DEFAULTS__,PS=()=>{if(typeof process>"u"||typeof tg>"u")return;const t=tg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&F0(t[1]);return e&&JSON.parse(e)},Cc=()=>{try{return bS()||PS()||OS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},V0=t=>{var e,n;return(n=(e=Cc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},DS=t=>{const e=V0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},U0=()=>{var t;return(t=Cc())===null||t===void 0?void 0:t.config},B0=t=>{var e;return(e=Cc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wl(JSON.stringify(n)),Wl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function FS(){var t;const e=(t=Cc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function US(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BS(){const t=gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zS(){return!FS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $0(){try{return typeof indexedDB=="object"}catch{return!1}}function W0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function $S(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="FirebaseError";class yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WS,Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gi.prototype.create)}}class gi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HS(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new yn(i,l,r)}}function HS(t,e){return t.replace(GS,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const GS=/\{\$([^}]+)}/g;function qS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Po(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ng(s)&&ng(o)){if(!Po(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ng(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function KS(t,e){const n=new QS(t,e);return n.subscribe.bind(n)}class QS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");YS(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ou),i.error===void 0&&(i.error=Ou),i.complete===void 0&&(i.complete=Ou);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ou(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=1e3,XS=2,ZS=4*60*60*1e3,eT=.5;function rg(t,e=JS,n=XS){const r=e*Math.pow(n,t),i=Math.round(eT*r*(Math.random()-.5)*2);return Math.min(ZS,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class gn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rT(e))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hr){return this.instances.has(e)}getOptions(e=Hr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hr){return this.component?this.component.multipleInstances?e:Hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nT(t){return t===Hr?void 0:t}function rT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const sT={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},oT=ie.INFO,aT={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},lT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=aT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rc{constructor(e){this.name=e,this._logLevel=oT,this._logHandler=lT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const cT=(t,e)=>e.some(n=>t instanceof n);let ig,sg;function uT(){return ig||(ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dT(){return sg||(sg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H0=new WeakMap,$d=new WeakMap,G0=new WeakMap,Du=new WeakMap,hf=new WeakMap;function hT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Tr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&H0.set(n,t)}).catch(()=>{}),hf.set(e,t),e}function fT(t){if($d.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});$d.set(t,e)}let Wd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $d.get(t);if(e==="objectStoreNames")return t.objectStoreNames||G0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pT(t){Wd=t(Wd)}function mT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ju(this),e,...n);return G0.set(r,e.sort?e.sort():[e]),Tr(r)}:dT().includes(t)?function(...e){return t.apply(ju(this),e),Tr(H0.get(this))}:function(...e){return Tr(t.apply(ju(this),e))}}function gT(t){return typeof t=="function"?mT(t):(t instanceof IDBTransaction&&fT(t),cT(t,uT())?new Proxy(t,Wd):t)}function Tr(t){if(t instanceof IDBRequest)return hT(t);if(Du.has(t))return Du.get(t);const e=gT(t);return e!==t&&(Du.set(t,e),hf.set(e,t)),e}const ju=t=>hf.get(t);function q0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Tr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Tr(o.result),c.oldVersion,c.newVersion,Tr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const yT=["get","getKey","getAll","getAllKeys","count"],vT=["put","add","delete","clear"],Lu=new Map;function og(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lu.get(e))return Lu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yT.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&c.done]))[0]};return Lu.set(e,s),s}pT(t=>({...t,get:(e,n,r)=>og(e,n)||t.get(e,n,r),has:(e,n)=>!!og(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_T(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _T(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hd="@firebase/app",ag="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new Rc("@firebase/app"),ET="@firebase/app-compat",IT="@firebase/analytics-compat",xT="@firebase/analytics",ST="@firebase/app-check-compat",TT="@firebase/app-check",CT="@firebase/auth",RT="@firebase/auth-compat",AT="@firebase/database",kT="@firebase/data-connect",NT="@firebase/database-compat",bT="@firebase/functions",PT="@firebase/functions-compat",OT="@firebase/installations",DT="@firebase/installations-compat",jT="@firebase/messaging",LT="@firebase/messaging-compat",MT="@firebase/performance",FT="@firebase/performance-compat",VT="@firebase/remote-config",UT="@firebase/remote-config-compat",BT="@firebase/storage",zT="@firebase/storage-compat",$T="@firebase/firestore",WT="@firebase/vertexai-preview",HT="@firebase/firestore-compat",GT="firebase",qT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="[DEFAULT]",KT={[Hd]:"fire-core",[ET]:"fire-core-compat",[xT]:"fire-analytics",[IT]:"fire-analytics-compat",[TT]:"fire-app-check",[ST]:"fire-app-check-compat",[CT]:"fire-auth",[RT]:"fire-auth-compat",[AT]:"fire-rtdb",[kT]:"fire-data-connect",[NT]:"fire-rtdb-compat",[bT]:"fire-fn",[PT]:"fire-fn-compat",[OT]:"fire-iid",[DT]:"fire-iid-compat",[jT]:"fire-fcm",[LT]:"fire-fcm-compat",[MT]:"fire-perf",[FT]:"fire-perf-compat",[VT]:"fire-rc",[UT]:"fire-rc-compat",[BT]:"fire-gcs",[zT]:"fire-gcs-compat",[$T]:"fire-fst",[HT]:"fire-fst-compat",[WT]:"fire-vertex","fire-js":"fire-js",[GT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new Map,QT=new Map,qd=new Map;function lg(t,e){try{t.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kn(t){const e=t.name;if(qd.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;qd.set(e,t);for(const n of Hl.values())lg(n,t);for(const n of QT.values())lg(n,t);return!0}function yi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new gi("app","Firebase",YT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=qT;function K0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Cr.create("bad-app-name",{appName:String(i)});if(n||(n=U0()),!n)throw Cr.create("no-options");const s=Hl.get(i);if(s){if(Po(n,s.options)&&Po(r,s.config))return s;throw Cr.create("duplicate-app",{appName:i})}const o=new iT(i);for(const c of qd.values())o.addComponent(c);const l=new JT(n,r,o);return Hl.set(i,l),l}function ff(t=Gd){const e=Hl.get(t);if(!e&&t===Gd&&U0())return K0();if(!e)throw Cr.create("no-app",{appName:t});return e}function Yt(t,e,n){var r;let i=(r=KT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(l.join(" "));return}kn(new gn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="firebase-heartbeat-database",ZT=1,Oo="firebase-heartbeat-store";let Mu=null;function Q0(){return Mu||(Mu=q0(XT,ZT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cr.create("idb-open",{originalErrorMessage:t.message})})),Mu}async function eC(t){try{const n=(await Q0()).transaction(Oo),r=await n.objectStore(Oo).get(Y0(t));return await n.done,r}catch(e){if(e instanceof yn)er.warn(e.message);else{const n=Cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});er.warn(n.message)}}}async function cg(t,e){try{const r=(await Q0()).transaction(Oo,"readwrite");await r.objectStore(Oo).put(e,Y0(t)),await r.done}catch(n){if(n instanceof yn)er.warn(n.message);else{const r=Cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});er.warn(r.message)}}}function Y0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=1024,nC=30*24*60*60*1e3;class rC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ug();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=nC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ug(),{heartbeatsToSend:r,unsentEntries:i}=iC(this._heartbeatsCache.heartbeats),s=Wl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return er.warn(n),""}}}function ug(){return new Date().toISOString().substring(0,10)}function iC(t,e=tC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),dg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $0()?W0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return cg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return cg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function dg(t){return Wl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t){kn(new gn("platform-logger",e=>new wT(e),"PRIVATE")),kn(new gn("heartbeat",e=>new rC(e),"PRIVATE")),Yt(Hd,ag,t),Yt(Hd,ag,"esm2017"),Yt("fire-js","")}oC("");function pf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function J0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aC=J0,X0=new gi("auth","Firebase",J0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new Rc("@firebase/auth");function lC(t,...e){Gl.logLevel<=ie.WARN&&Gl.warn(`Auth (${ps}): ${t}`,...e)}function ll(t,...e){Gl.logLevel<=ie.ERROR&&Gl.error(`Auth (${ps}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,...e){throw gf(t,...e)}function pn(t,...e){return gf(t,...e)}function mf(t,e,n){const r=Object.assign(Object.assign({},aC()),{[e]:n});return new gi("auth","Firebase",r).create(e,{appName:t.name})}function Rr(t){return mf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z0(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Nn(t,"argument-error"),mf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return X0.create(t,...e)}function J(t,e,...n){if(!t)throw gf(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ll(e),new Error(e)}function tr(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cC(){return hg()==="http:"||hg()==="https:"}function hg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cC()||z0()||"connection"in navigator)?navigator.onLine:!0}function dC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.shortDelay=e,this.longDelay=n,tr(n>e,"Short delay should be less than long delay!"),this.isMobile=MS()||US()}get(){return uC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t,e){tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Zo(3e4,6e4);function vf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ms(t,e,n,r,i={}){return tw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Xo(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},s);return VS()||(h.referrerPolicy="no-referrer"),ew.fetch()(nw(t,t.config.apiHost,n,l),h)})}async function tw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},hC),e);try{const i=new mC(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw za(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw za(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw za(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw za(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw mf(t,p,h);Nn(t,p)}}catch(i){if(i instanceof yn)throw i;Nn(t,"network-request-failed",{message:String(i)})}}async function pC(t,e,n,r,i={}){const s=await ms(t,e,n,r,i);return"mfaPendingCredential"in s&&Nn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function nw(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?yf(t.config,i):`${t.config.apiScheme}://${i}`}class mC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),fC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function za(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(t,e){return ms(t,"POST","/v1/accounts:delete",e)}async function rw(t,e){return ms(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yC(t,e=!1){const n=kt(t),r=await n.getIdToken(e),i=wf(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:lo(Fu(i.auth_time)),issuedAtTime:lo(Fu(i.iat)),expirationTime:lo(Fu(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Fu(t){return Number(t)*1e3}function wf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ll("JWT malformed, contained fewer than 3 sections"),null;try{const i=F0(n);return i?JSON.parse(i):(ll("Failed to decode base64 JWT payload"),null)}catch(i){return ll("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function fg(t){const e=wf(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yn&&vC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function vC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Do(t,rw(n,{idToken:r}));J(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iw(s.providerUserInfo):[],l=EC(t.providerData,o),c=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Qd(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function _C(t){const e=kt(t);await ql(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EC(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iw(t){return t.map(e=>{var{providerId:n}=e,r=pf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(t,e){const n=await tw(t,{},async()=>{const r=Xo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=nw(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ew.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xC(t,e){return ms(t,"POST","/v2/accounts:revokeToken",vf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=fg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await IC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qi;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qi,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=pf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Do(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yC(this,e)}reload(){return _C(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ql(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await Do(this,gC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,k=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(l=n.tenantId)!==null&&l!==void 0?l:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:S,emailVerified:D,isAnonymous:L,providerData:F,stsTokenManager:E}=n;J(S&&E,e,"internal-error");const y=qi.fromJSON(this.name,E);J(typeof S=="string",e,"internal-error"),ar(m,e.name),ar(v,e.name),J(typeof D=="boolean",e,"internal-error"),J(typeof L=="boolean",e,"internal-error"),ar(k,e.name),ar(N,e.name),ar(x,e.name),ar(A,e.name),ar(w,e.name),ar(_,e.name);const I=new Hn({uid:S,auth:e,email:v,emailVerified:D,displayName:m,isAnonymous:L,photoURL:N,phoneNumber:k,tenantId:x,stsTokenManager:y,createdAt:w,lastLoginAt:_});return F&&Array.isArray(F)&&(I.providerData=F.map(T=>Object.assign({},T))),A&&(I._redirectEventId=A),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new qi;i.updateFromServerResponse(n);const s=new Hn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ql(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];J(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?iw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new qi;l.updateFromIdToken(r);const c=new Hn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Qd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=new Map;function Gn(t){tr(t instanceof Function,"Expected a class definition");let e=pg.get(t);return e?(tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sw.type="NONE";const mg=sw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ki{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=cl(this.userKey,i.apiKey,s),this.fullPersistenceKey=cl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ki(Gn(mg),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Gn(mg);const o=cl(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Hn._fromJSON(e,p);h!==s&&(l=m),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ki(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Ki(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ow(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dw(e))return"Blackberry";if(hw(e))return"Webos";if(aw(e))return"Safari";if((e.includes("chrome/")||lw(e))&&!e.includes("edge/"))return"Chrome";if(uw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ow(t=gt()){return/firefox\//i.test(t)}function aw(t=gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lw(t=gt()){return/crios\//i.test(t)}function cw(t=gt()){return/iemobile/i.test(t)}function uw(t=gt()){return/android/i.test(t)}function dw(t=gt()){return/blackberry/i.test(t)}function hw(t=gt()){return/webos/i.test(t)}function _f(t=gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SC(t=gt()){var e;return _f(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TC(){return BS()&&document.documentMode===10}function fw(t=gt()){return _f(t)||uw(t)||hw(t)||dw(t)||/windows phone/i.test(t)||cw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e=[]){let n;switch(t){case"Browser":n=gg(gt());break;case"Worker":n=`${gg(gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ps}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e={}){return ms(t,"GET","/v2/passwordPolicy",vf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=6;class kC{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:AC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yg(this),this.idTokenSubscription=new yg(this),this.beforeStateQueue=new CC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ki.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rw(this,{idToken:e}),r=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Tn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ql(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(Rr(this));const n=e?kt(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RC(this),n=new kC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Ki.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&lC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gs(t){return kt(t)}class yg{constructor(e){this.auth=e,this.observer=null,this.addObserver=KS(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bC(t){Ef=t}function PC(t){return Ef.loadJS(t)}function OC(){return Ef.gapiScript}function DC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t,e){const n=yi(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Po(s,e??{}))return i;Nn(i,"already-initialized")}return n.initialize({options:e})}function LC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MC(t,e,n){const r=gs(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=mw(e),{host:o,port:l}=FC(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),VC()}function mw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function FC(t){const e=mw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:vg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:vg(o)}}}function vg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(t,e){return pC(t,"POST","/v1/accounts:signInWithIdp",vf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="http://localhost";class li extends gw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new li(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=pf(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new li(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Qi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qi(e,n)}buildRequest(){const e={requestUri:UC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Ac{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends ea{constructor(){super("facebook.com")}static credential(e){return li._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Un.credential(e.oauthAccessToken)}catch{return null}}}Un.FACEBOOK_SIGN_IN_METHOD="facebook.com";Un.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends ea{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return li._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bn.credential(n,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends ea{constructor(){super("github.com")}static credential(e){return li._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends ea{constructor(){super("twitter.com")}static credential(e,n){return li._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Hn._fromIdTokenResponse(e,r,i),o=wg(r);return new ss({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=wg(r);return new ss({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function wg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends yn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kl.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Kl(e,n,r,i)}}function yw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Kl._fromErrorAndOperation(t,s,e,r):s})}async function BC(t,e,n=!1){const r=await Do(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ss._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(t,e,n=!1){const{auth:r}=t;if(Tn(r.app))return Promise.reject(Rr(r));const i="reauthenticate";try{const s=await Do(t,yw(r,i,e,t),n);J(s.idToken,r,"internal-error");const o=wf(s.idToken);J(o,r,"internal-error");const{sub:l}=o;return J(t.uid===l,r,"user-mismatch"),ss._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Nn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(t,e,n=!1){if(Tn(t.app))return Promise.reject(Rr(t));const r="signIn",i=await yw(t,r,e),s=await ss._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function WC(t,e,n,r){return kt(t).onIdTokenChanged(e,n,r)}function HC(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}function GC(t,e,n,r){return kt(t).onAuthStateChanged(e,n,r)}function qC(t){return kt(t).signOut()}const Ql="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ql,"1"),this.storage.removeItem(Ql),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=1e3,QC=10;class ww extends vw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);TC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,QC):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ww.type="LOCAL";const YC=ww;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w extends vw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_w.type="SESSION";const Ew=_w;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new kc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(n.origin,s)),c=await JC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const h=If("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const v=m;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(v.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function ZC(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function eR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nR(){return Iw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="firebaseLocalStorageDb",rR=1,Yl="firebaseLocalStorage",Sw="fbase_key";class ta{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nc(t,e){return t.transaction([Yl],e?"readwrite":"readonly").objectStore(Yl)}function iR(){const t=indexedDB.deleteDatabase(xw);return new ta(t).toPromise()}function Yd(){const t=indexedDB.open(xw,rR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yl,{keyPath:Sw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yl)?e(r):(r.close(),await iR(),e(await Yd()))})})}async function _g(t,e,n){const r=Nc(t,!0).put({[Sw]:e,value:n});return new ta(r).toPromise()}async function sR(t,e){const n=Nc(t,!1).get(e),r=await new ta(n).toPromise();return r===void 0?null:r.value}function Eg(t,e){const n=Nc(t,!0).delete(e);return new ta(n).toPromise()}const oR=800,aR=3;class Tw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Iw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kc._getInstance(nR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await eR(),!this.activeServiceWorker)return;this.sender=new XC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yd();return await _g(e,Ql,"1"),await Eg(e,Ql),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_g(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>sR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Eg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Nc(i,!1).getAll();return new ta(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tw.type="LOCAL";const lR=Tw;new Zo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e){return e?Gn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends gw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cR(t){return $C(t.auth,new Sf(t),t.bypassAuthState)}function uR(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),zC(n,new Sf(t),t.bypassAuthState)}async function dR(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),BC(n,new Sf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cR;case"linkViaPopup":case"linkViaRedirect":return dR;case"reauthViaPopup":case"reauthViaRedirect":return uR;default:Nn(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new Zo(2e3,1e4);async function fR(t,e,n){if(Tn(t.app))return Promise.reject(pn(t,"operation-not-supported-in-this-environment"));const r=gs(t);Z0(t,e,Ac);const i=xf(r,n);return new Qr(r,"signInViaPopup",e,i).executeNotNull()}class Qr extends Cw{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Qr.currentPopupAction&&Qr.currentPopupAction.cancel(),Qr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=If();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hR.get())};e()}}Qr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="pendingRedirect",ul=new Map;class mR extends Cw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ul.get(this.auth._key());if(!e){try{const r=await gR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ul.set(this.auth._key(),e)}return this.bypassAuthState||ul.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gR(t,e){const n=Aw(e),r=Rw(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function yR(t,e){return Rw(t)._set(Aw(e),"true")}function vR(t,e){ul.set(t._key(),e)}function Rw(t){return Gn(t._redirectPersistence)}function Aw(t){return cl(pR,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t,e,n){return _R(t,e,n)}async function _R(t,e,n){if(Tn(t.app))return Promise.reject(Rr(t));const r=gs(t);Z0(t,e,Ac),await r._initializationPromise;const i=xf(r,n);return await yR(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function ER(t,e){return await gs(t)._initializationPromise,kw(t,e,!1)}async function kw(t,e,n=!1){if(Tn(t.app))return Promise.reject(Rr(t));const r=gs(t),i=xf(r,e),o=await new mR(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=10*60*1e3;class xR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Nw(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ig(e))}saveEventToCache(e){this.cachedEventUids.add(Ig(e)),this.lastProcessedEventTime=Date.now()}}function Ig(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Nw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(t,e={}){return ms(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RR=/^https?/;async function AR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await TR(t);for(const n of e)try{if(kR(n))return}catch{}Nn(t,"unauthorized-domain")}function kR(t){const e=Kd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!RR.test(n))return!1;if(CR.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Zo(3e4,6e4);function xg(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bR(t){return new Promise((e,n)=>{var r,i,s;function o(){xg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xg(),n(pn(t,"network-request-failed"))},timeout:NR.get()})}if(!((i=(r=An().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=An().gapi)===null||s===void 0)&&s.load)o();else{const l=DC("iframefcb");return An()[l]=()=>{gapi.load?o():n(pn(t,"network-request-failed"))},PC(`${OC()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw dl=null,e})}let dl=null;function PR(t){return dl=dl||bR(t),dl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=new Zo(5e3,15e3),DR="__/auth/iframe",jR="emulator/auth/iframe",LR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FR(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yf(e,jR):`https://${t.config.authDomain}/${DR}`,r={apiKey:e.apiKey,appName:t.name,v:ps},i=MR.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Xo(r).slice(1)}`}async function VR(t){const e=await PR(t),n=An().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:FR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LR,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=pn(t,"network-request-failed"),l=An().setTimeout(()=>{s(o)},OR.get());function c(){An().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BR=500,zR=600,$R="_blank",WR="http://localhost";class Sg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HR(t,e,n,r=BR,i=zR){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},UR),{width:r.toString(),height:i.toString(),top:s,left:o}),h=gt().toLowerCase();n&&(l=lw(h)?$R:n),ow(h)&&(e=e||WR,c.scrollbars="yes");const p=Object.entries(c).reduce((v,[k,N])=>`${v}${k}=${N},`,"");if(SC(h)&&l!=="_self")return GR(e||"",l),new Sg(null);const m=window.open(e||"",l,p);J(m,t,"popup-blocked");try{m.focus()}catch{}return new Sg(m)}function GR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="__/auth/handler",KR="emulator/auth/handler",QR=encodeURIComponent("fac");async function Tg(t,e,n,r,i,s){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ps,eventId:i};if(e instanceof Ac){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",qS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof ea){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${QR}=${encodeURIComponent(c)}`:"";return`${YR(t)}?${Xo(l).slice(1)}${h}`}function YR({config:t}){return t.emulator?yf(t,KR):`https://${t.authDomain}/${qR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu="webStorageSupport";class JR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ew,this._completeRedirectFn=kw,this._overrideRedirectResult=vR}async _openPopup(e,n,r,i){var s;tr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Tg(e,n,r,Kd(),i);return HR(e,o,If())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Tg(e,n,r,Kd(),i);return ZC(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(tr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VR(e),r=new xR(e);return n.register("authEvent",i=>(J(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vu,{type:Vu},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Vu];o!==void 0&&n(!!o),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fw()||aw()||_f()}}const XR=JR;var Cg="@firebase/auth",Rg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tA(t){kn(new gn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pw(t)},h=new NC(r,i,s,c);return LC(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),kn(new gn("auth-internal",e=>{const n=gs(e.getProvider("auth").getImmediate());return(r=>new ZR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yt(Cg,Rg,eA(t)),Yt(Cg,Rg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=5*60,rA=B0("authIdTokenMaxAge")||nA;let Ag=null;const iA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rA)return;const i=n==null?void 0:n.token;Ag!==i&&(Ag=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sA(t=ff()){const e=yi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jC(t,{popupRedirectResolver:XR,persistence:[lR,YC,Ew]}),r=B0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=iA(s.toString());HC(n,o,()=>o(n.currentUser)),WC(n,l=>o(l))}}const i=V0("auth");return i&&MC(n,`http://${i}`),n}function oA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=pn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",oA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tA("Browser");var aA="firebase",lA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt(aA,lA,"app");var kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function I(){}I.prototype=y.prototype,E.D=y.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(T,R,b){for(var C=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)C[$e-2]=arguments[$e];return y.prototype[R].apply(T,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,I){I||(I=0);var T=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)T[R]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(R=0;16>R;++R)T[R]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=E.g[0],I=E.g[1],R=E.g[2];var b=E.g[3],C=y+(b^I&(R^b))+T[0]+3614090360&4294967295;y=I+(C<<7&4294967295|C>>>25),C=b+(R^y&(I^R))+T[1]+3905402710&4294967295,b=y+(C<<12&4294967295|C>>>20),C=R+(I^b&(y^I))+T[2]+606105819&4294967295,R=b+(C<<17&4294967295|C>>>15),C=I+(y^R&(b^y))+T[3]+3250441966&4294967295,I=R+(C<<22&4294967295|C>>>10),C=y+(b^I&(R^b))+T[4]+4118548399&4294967295,y=I+(C<<7&4294967295|C>>>25),C=b+(R^y&(I^R))+T[5]+1200080426&4294967295,b=y+(C<<12&4294967295|C>>>20),C=R+(I^b&(y^I))+T[6]+2821735955&4294967295,R=b+(C<<17&4294967295|C>>>15),C=I+(y^R&(b^y))+T[7]+4249261313&4294967295,I=R+(C<<22&4294967295|C>>>10),C=y+(b^I&(R^b))+T[8]+1770035416&4294967295,y=I+(C<<7&4294967295|C>>>25),C=b+(R^y&(I^R))+T[9]+2336552879&4294967295,b=y+(C<<12&4294967295|C>>>20),C=R+(I^b&(y^I))+T[10]+4294925233&4294967295,R=b+(C<<17&4294967295|C>>>15),C=I+(y^R&(b^y))+T[11]+2304563134&4294967295,I=R+(C<<22&4294967295|C>>>10),C=y+(b^I&(R^b))+T[12]+1804603682&4294967295,y=I+(C<<7&4294967295|C>>>25),C=b+(R^y&(I^R))+T[13]+4254626195&4294967295,b=y+(C<<12&4294967295|C>>>20),C=R+(I^b&(y^I))+T[14]+2792965006&4294967295,R=b+(C<<17&4294967295|C>>>15),C=I+(y^R&(b^y))+T[15]+1236535329&4294967295,I=R+(C<<22&4294967295|C>>>10),C=y+(R^b&(I^R))+T[1]+4129170786&4294967295,y=I+(C<<5&4294967295|C>>>27),C=b+(I^R&(y^I))+T[6]+3225465664&4294967295,b=y+(C<<9&4294967295|C>>>23),C=R+(y^I&(b^y))+T[11]+643717713&4294967295,R=b+(C<<14&4294967295|C>>>18),C=I+(b^y&(R^b))+T[0]+3921069994&4294967295,I=R+(C<<20&4294967295|C>>>12),C=y+(R^b&(I^R))+T[5]+3593408605&4294967295,y=I+(C<<5&4294967295|C>>>27),C=b+(I^R&(y^I))+T[10]+38016083&4294967295,b=y+(C<<9&4294967295|C>>>23),C=R+(y^I&(b^y))+T[15]+3634488961&4294967295,R=b+(C<<14&4294967295|C>>>18),C=I+(b^y&(R^b))+T[4]+3889429448&4294967295,I=R+(C<<20&4294967295|C>>>12),C=y+(R^b&(I^R))+T[9]+568446438&4294967295,y=I+(C<<5&4294967295|C>>>27),C=b+(I^R&(y^I))+T[14]+3275163606&4294967295,b=y+(C<<9&4294967295|C>>>23),C=R+(y^I&(b^y))+T[3]+4107603335&4294967295,R=b+(C<<14&4294967295|C>>>18),C=I+(b^y&(R^b))+T[8]+1163531501&4294967295,I=R+(C<<20&4294967295|C>>>12),C=y+(R^b&(I^R))+T[13]+2850285829&4294967295,y=I+(C<<5&4294967295|C>>>27),C=b+(I^R&(y^I))+T[2]+4243563512&4294967295,b=y+(C<<9&4294967295|C>>>23),C=R+(y^I&(b^y))+T[7]+1735328473&4294967295,R=b+(C<<14&4294967295|C>>>18),C=I+(b^y&(R^b))+T[12]+2368359562&4294967295,I=R+(C<<20&4294967295|C>>>12),C=y+(I^R^b)+T[5]+4294588738&4294967295,y=I+(C<<4&4294967295|C>>>28),C=b+(y^I^R)+T[8]+2272392833&4294967295,b=y+(C<<11&4294967295|C>>>21),C=R+(b^y^I)+T[11]+1839030562&4294967295,R=b+(C<<16&4294967295|C>>>16),C=I+(R^b^y)+T[14]+4259657740&4294967295,I=R+(C<<23&4294967295|C>>>9),C=y+(I^R^b)+T[1]+2763975236&4294967295,y=I+(C<<4&4294967295|C>>>28),C=b+(y^I^R)+T[4]+1272893353&4294967295,b=y+(C<<11&4294967295|C>>>21),C=R+(b^y^I)+T[7]+4139469664&4294967295,R=b+(C<<16&4294967295|C>>>16),C=I+(R^b^y)+T[10]+3200236656&4294967295,I=R+(C<<23&4294967295|C>>>9),C=y+(I^R^b)+T[13]+681279174&4294967295,y=I+(C<<4&4294967295|C>>>28),C=b+(y^I^R)+T[0]+3936430074&4294967295,b=y+(C<<11&4294967295|C>>>21),C=R+(b^y^I)+T[3]+3572445317&4294967295,R=b+(C<<16&4294967295|C>>>16),C=I+(R^b^y)+T[6]+76029189&4294967295,I=R+(C<<23&4294967295|C>>>9),C=y+(I^R^b)+T[9]+3654602809&4294967295,y=I+(C<<4&4294967295|C>>>28),C=b+(y^I^R)+T[12]+3873151461&4294967295,b=y+(C<<11&4294967295|C>>>21),C=R+(b^y^I)+T[15]+530742520&4294967295,R=b+(C<<16&4294967295|C>>>16),C=I+(R^b^y)+T[2]+3299628645&4294967295,I=R+(C<<23&4294967295|C>>>9),C=y+(R^(I|~b))+T[0]+4096336452&4294967295,y=I+(C<<6&4294967295|C>>>26),C=b+(I^(y|~R))+T[7]+1126891415&4294967295,b=y+(C<<10&4294967295|C>>>22),C=R+(y^(b|~I))+T[14]+2878612391&4294967295,R=b+(C<<15&4294967295|C>>>17),C=I+(b^(R|~y))+T[5]+4237533241&4294967295,I=R+(C<<21&4294967295|C>>>11),C=y+(R^(I|~b))+T[12]+1700485571&4294967295,y=I+(C<<6&4294967295|C>>>26),C=b+(I^(y|~R))+T[3]+2399980690&4294967295,b=y+(C<<10&4294967295|C>>>22),C=R+(y^(b|~I))+T[10]+4293915773&4294967295,R=b+(C<<15&4294967295|C>>>17),C=I+(b^(R|~y))+T[1]+2240044497&4294967295,I=R+(C<<21&4294967295|C>>>11),C=y+(R^(I|~b))+T[8]+1873313359&4294967295,y=I+(C<<6&4294967295|C>>>26),C=b+(I^(y|~R))+T[15]+4264355552&4294967295,b=y+(C<<10&4294967295|C>>>22),C=R+(y^(b|~I))+T[6]+2734768916&4294967295,R=b+(C<<15&4294967295|C>>>17),C=I+(b^(R|~y))+T[13]+1309151649&4294967295,I=R+(C<<21&4294967295|C>>>11),C=y+(R^(I|~b))+T[4]+4149444226&4294967295,y=I+(C<<6&4294967295|C>>>26),C=b+(I^(y|~R))+T[11]+3174756917&4294967295,b=y+(C<<10&4294967295|C>>>22),C=R+(y^(b|~I))+T[2]+718787259&4294967295,R=b+(C<<15&4294967295|C>>>17),C=I+(b^(R|~y))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var I=y-this.blockSize,T=this.B,R=this.h,b=0;b<y;){if(R==0)for(;b<=I;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<y;)if(T[R++]=E.charCodeAt(b++),R==this.blockSize){i(this,T),R=0;break}}else for(;b<y;)if(T[R++]=E[b++],R==this.blockSize){i(this,T),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var I=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=I&255,I/=256;for(this.u(E),E=Array(16),y=I=0;4>y;++y)for(var T=0;32>T;T+=8)E[I++]=this.g[y]>>>T&255;return E};function s(E,y){var I=l;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=y(E)}function o(E,y){this.h=y;for(var I=[],T=!0,R=E.length-1;0<=R;R--){var b=E[R]|0;T&&b==y||(I[R]=b,T=!1)}this.g=I}var l={};function c(E){return-128<=E&&128>E?s(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return A(h(-E));for(var y=[],I=1,T=0;E>=I;T++)y[T]=E/I|0,I*=4294967296;return new o(y,0)}function p(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return A(p(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(y,8)),T=m,R=0;R<E.length;R+=8){var b=Math.min(8,E.length-R),C=parseInt(E.substring(R,R+b),y);8>b?(b=h(Math.pow(y,b)),T=T.j(b).add(h(C))):(T=T.j(I),T=T.add(h(C)))}return T}var m=c(0),v=c(1),k=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-A(this).m();for(var E=0,y=1,I=0;I<this.g.length;I++){var T=this.i(I);E+=(0<=T?T:4294967296+T)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(x(this))return"-"+A(this).toString(E);for(var y=h(Math.pow(E,6)),I=this,T="";;){var R=D(I,y).g;I=w(I,R.j(y));var b=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=R,N(I))return b+T;for(;6>b.length;)b="0"+b;T=b+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function x(E){return E.h==-1}t.l=function(E){return E=w(this,E),x(E)?-1:N(E)?0:1};function A(E){for(var y=E.g.length,I=[],T=0;T<y;T++)I[T]=~E.g[T];return new o(I,~E.h).add(v)}t.abs=function(){return x(this)?A(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0,R=0;R<=y;R++){var b=T+(this.i(R)&65535)+(E.i(R)&65535),C=(b>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);T=C>>>16,b&=65535,C&=65535,I[R]=C<<16|b}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(E,y){return E.add(A(y))}t.j=function(E){if(N(this)||N(E))return m;if(x(this))return x(E)?A(this).j(A(E)):A(A(this).j(E));if(x(E))return A(this.j(A(E)));if(0>this.l(k)&&0>E.l(k))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,I=[],T=0;T<2*y;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var R=0;R<E.g.length;R++){var b=this.i(T)>>>16,C=this.i(T)&65535,$e=E.i(R)>>>16,Zt=E.i(R)&65535;I[2*T+2*R]+=C*Zt,_(I,2*T+2*R),I[2*T+2*R+1]+=b*Zt,_(I,2*T+2*R+1),I[2*T+2*R+1]+=C*$e,_(I,2*T+2*R+1),I[2*T+2*R+2]+=b*$e,_(I,2*T+2*R+2)}for(T=0;T<y;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=y;T<2*y;T++)I[T]=0;return new o(I,0)};function _(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function S(E,y){this.g=E,this.h=y}function D(E,y){if(N(y))throw Error("division by zero");if(N(E))return new S(m,m);if(x(E))return y=D(A(E),y),new S(A(y.g),A(y.h));if(x(y))return y=D(E,A(y)),new S(A(y.g),y.h);if(30<E.g.length){if(x(E)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var I=v,T=y;0>=T.l(E);)I=L(I),T=L(T);var R=F(I,1),b=F(T,1);for(T=F(T,2),I=F(I,2);!N(T);){var C=b.add(T);0>=C.l(E)&&(R=R.add(I),b=C),T=F(T,1),I=F(I,1)}return y=w(E,R.j(y)),new S(R,y)}for(R=m;0<=E.l(y);){for(I=Math.max(1,Math.floor(E.m()/y.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),b=h(I),C=b.j(y);x(C)||0<C.l(E);)I-=T,b=h(I),C=b.j(y);N(b)&&(b=v),R=R.add(b),E=w(E,C)}return new S(R,E)}t.A=function(E){return D(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)&E.i(T);return new o(I,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)|E.i(T);return new o(I,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)^E.i(T);return new o(I,this.h^E.h)};function L(E){for(var y=E.g.length+1,I=[],T=0;T<y;T++)I[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(I,E.h)}function F(E,y){var I=y>>5;y%=32;for(var T=E.g.length-I,R=[],b=0;b<T;b++)R[b]=0<y?E.i(b+I)>>>y|E.i(b+I+1)<<32-y:E.i(b+I);return new o(R,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,bw=o}).apply(typeof kg<"u"?kg:typeof self<"u"?self:typeof window<"u"?window:{});var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pw,Js,Ow,hl,Jd,Dw,jw,Lw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof $a=="object"&&$a];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var P=a[g];if(!(P in f))break e;f=f[P]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,g=!1,P={next:function(){if(!g&&f<a.length){var j=f++;return{value:d(j,a[j]),done:!1}}return g=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,g),a.apply(d,P)}}return function(){return a.apply(d,arguments)}}function v(a,d,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,v.apply(null,arguments)}function k(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function N(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,P,j){for(var $=Array(arguments.length-2),me=2;me<arguments.length;me++)$[me-2]=arguments[me];return d.prototype[P].apply(g,$)}}function x(a){const d=a.length;if(0<d){const f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function A(a,d){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(c(g)){const P=a.length||0,j=g.length||0;a.length=P+j;for(let $=0;$<j;$++)a[P+$]=g[$]}else a.push(g)}}class w{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function F(a,d,f){for(const g in a)d.call(f,a[g],g,a)}function E(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,d){let f,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(f in g)a[f]=g[f];for(let j=0;j<I.length;j++)f=I[j],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function R(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function b(a){l.setTimeout(()=>{throw a},0)}function C(){var a=Y;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class $e{constructor(){this.h=this.g=null}add(d,f){const g=Zt.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Zt=new w(()=>new wn,a=>a.reset());class wn{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let en,W=!1,Y=new $e,ee=()=>{const a=l.Promise.resolve(void 0);en=()=>{a.then(_e)}};var _e=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){b(f)}var d=Zt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}W=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var _n=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function tn(a,d){if(Ee.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{D(d.nodeName);var P=!0;break e}catch{}P=!1}P||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:bt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&tn.aa.h.call(this)}}N(tn,Ee);var bt={2:"touch",3:"pen",4:"mouse"};tn.prototype.h=function(){tn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var zt="closure_listenable_"+(1e6*Math.random()|0),wi=0;function Mr(a,d,f,g,P){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=P,this.key=++wi,this.da=this.fa=!1}function Fr(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Vr(a){this.src=a,this.g={},this.h=0}Vr.prototype.add=function(a,d,f,g,P){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var $=_i(a,d,g,P);return-1<$?(d=a[$],f||(d.fa=!1)):(d=new Mr(d,this.src,j,!!g,P),d.fa=f,a.push(d)),d};function En(a,d){var f=d.type;if(f in a.g){var g=a.g[f],P=Array.prototype.indexOf.call(g,d,void 0),j;(j=0<=P)&&Array.prototype.splice.call(g,P,1),j&&(Fr(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function _i(a,d,f,g){for(var P=0;P<a.length;++P){var j=a[P];if(!j.da&&j.listener==d&&j.capture==!!f&&j.ha==g)return P}return-1}var Ei="closure_lm_"+(1e6*Math.random()|0),xs={};function oa(a,d,f,g,P){if(Array.isArray(d)){for(var j=0;j<d.length;j++)oa(a,d[j],f,g,P);return null}return f=H(f),a&&a[zt]?a.K(d,f,h(g)?!!g.capture:!1,P):aa(a,d,f,!1,g,P)}function aa(a,d,f,g,P,j){if(!d)throw Error("Invalid event type");var $=h(P)?!!P.capture:!!P,me=Ii(a);if(me||(a[Ei]=me=new Vr(a)),f=me.add(d,f,g,$,j),f.proxy)return f;if(g=qc(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)_n||(P=$),P===void 0&&(P=!1),a.addEventListener(d.toString(),g,P);else if(a.attachEvent)a.attachEvent(ca(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function qc(){function a(f){return d.call(a.src,a.listener,f)}const d=Kc;return a}function la(a,d,f,g,P){if(Array.isArray(d))for(var j=0;j<d.length;j++)la(a,d[j],f,g,P);else g=h(g)?!!g.capture:!!g,f=H(f),a&&a[zt]?(a=a.i,d=String(d).toString(),d in a.g&&(j=a.g[d],f=_i(j,f,g,P),-1<f&&(Fr(j[f]),Array.prototype.splice.call(j,f,1),j.length==0&&(delete a.g[d],a.h--)))):a&&(a=Ii(a))&&(d=a.g[d.toString()],a=-1,d&&(a=_i(d,f,g,P)),(f=-1<a?d[a]:null)&&Ss(f))}function Ss(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[zt])En(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(ca(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ii(d))?(En(f,a),f.h==0&&(f.src=null,d[Ei]=null)):Fr(a)}}}function ca(a){return a in xs?xs[a]:xs[a]="on"+a}function Kc(a,d){if(a.da)a=!0;else{d=new tn(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Ss(a),a=f.call(g,d)}return a}function Ii(a){return a=a[Ei],a instanceof Vr?a:null}var M="__closure_events_fn_"+(1e9*Math.random()>>>0);function H(a){return typeof a=="function"?a:(a[M]||(a[M]=function(d){return a.handleEvent(d)}),a[M])}function V(){de.call(this),this.i=new Vr(this),this.M=this,this.F=null}N(V,de),V.prototype[zt]=!0,V.prototype.removeEventListener=function(a,d,f,g){la(this,a,d,f,g)};function G(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Ee(d,a);else if(d instanceof Ee)d.target=d.target||a;else{var P=d;d=new Ee(g,a),T(d,P)}if(P=!0,f)for(var j=f.length-1;0<=j;j--){var $=d.g=f[j];P=q($,g,!0,d)&&P}if($=d.g=a,P=q($,g,!0,d)&&P,P=q($,g,!1,d)&&P,f)for(j=0;j<f.length;j++)$=d.g=f[j],P=q($,g,!1,d)&&P}V.prototype.N=function(){if(V.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)Fr(f[g]);delete a.g[d],a.h--}}this.F=null},V.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},V.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function q(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var P=!0,j=0;j<d.length;++j){var $=d[j];if($&&!$.da&&$.capture==f){var me=$.listener,Ze=$.ha||$.src;$.fa&&En(a.i,$),P=me.call(Ze,g)!==!1&&P}}return P&&!g.defaultPrevented}function he(a,d,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function ye(a){a.g=he(()=>{a.g=null,a.i&&(a.i=!1,ye(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Oe extends de{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ye(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ae(a){de.call(this),this.h=a,this.g={}}N(Ae,de);var Te=[];function De(a){F(a.g,function(d,f){this.g.hasOwnProperty(f)&&Ss(d)},a),a.g={}}Ae.prototype.N=function(){Ae.aa.N.call(this),De(this)},Ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=l.JSON.stringify,$t=l.JSON.parse,Dn=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function pe(){}pe.prototype.h=null;function Wt(a){return a.h||(a.h=a.i())}function We(){}var Ce={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yt(){Ee.call(this,"d")}N(yt,Ee);function Pt(){Ee.call(this,"c")}N(Pt,Ee);var ue={},Ot=null;function ua(){return Ot=Ot||new V}ue.La="serverreachability";function ip(a){Ee.call(this,ue.La,a)}N(ip,Ee);function Ts(a){const d=ua();G(d,new ip(d))}ue.STAT_EVENT="statevent";function sp(a,d){Ee.call(this,ue.STAT_EVENT,a),this.stat=d}N(sp,Ee);function vt(a){const d=ua();G(d,new sp(d,a))}ue.Ma="timingevent";function op(a,d){Ee.call(this,ue.Ma,a),this.size=d}N(op,Ee);function Cs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function CE(a,d,f,g,P,j){a.info(function(){if(a.g)if(j)for(var $="",me=j.split("&"),Ze=0;Ze<me.length;Ze++){var ce=me[Ze].split("=");if(1<ce.length){var ot=ce[0];ce=ce[1];var at=ot.split("_");$=2<=at.length&&at[1]=="type"?$+(ot+"="+ce+"&"):$+(ot+"=redacted&")}}else $=null;else $=j;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+d+`
`+f+`
`+$})}function RE(a,d,f,g,P,j,$){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+d+`
`+f+`
`+j+" "+$})}function xi(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+kE(a,f)+(g?" "+g:"")})}function AE(a,d){a.info(function(){return"TIMEOUT: "+d})}Rs.prototype.info=function(){};function kE(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var P=g[1];if(Array.isArray(P)&&!(1>P.length)){var j=P[0];if(j!="noop"&&j!="stop"&&j!="close")for(var $=1;$<P.length;$++)P[$]=""}}}}return ae(f)}catch{return d}}var da={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ap={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qc;function ha(){}N(ha,pe),ha.prototype.g=function(){return new XMLHttpRequest},ha.prototype.i=function(){return{}},Qc=new ha;function rr(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new Ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lp}function lp(){this.i=null,this.g="",this.h=!1}var cp={},Yc={};function Jc(a,d,f){a.L=1,a.v=ga(jn(d)),a.m=f,a.P=!0,up(a,null)}function up(a,d){a.F=Date.now(),fa(a),a.A=jn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Sp(f.i,"t",g),a.C=0,f=a.j.J,a.h=new lp,a.g=zp(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Oe(v(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(Te[0]=P.toString()),P=Te);for(var j=0;j<P.length;j++){var $=oa(f,P[j],g||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Ts(),CE(a.i,a.u,a.A,a.l,a.R,a.m)}rr.prototype.ca=function(a){a=a.target;const d=this.M;d&&Ln(a)==3?d.j():this.Y(a)},rr.prototype.Y=function(a){try{if(a==this.g)e:{const at=Ln(this.g);var d=this.g.Ba();const Ci=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||bp(this.g)))){this.J||at!=4||d==7||(d==8||0>=Ci?Ts(3):Ts(2)),Xc(this);var f=this.g.Z();this.X=f;t:if(dp(this)){var g=bp(this.g);a="";var P=g.length,j=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),As(this);var $="";break t}this.h.i=new l.TextDecoder}for(d=0;d<P;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(j&&d==P-1)});g.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,RE(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var me,Ze=this.g;if((me=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(me)){var ce=me;break t}}ce=null}if(f=ce)xi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zc(this,f);else{this.o=!1,this.s=3,vt(12),Ur(this),As(this);break e}}if(this.P){f=!0;let nn;for(;!this.J&&this.C<$.length;)if(nn=NE(this,$),nn==Yc){at==4&&(this.s=4,vt(14),f=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==cp){this.s=4,vt(15),xi(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else xi(this.i,this.l,nn,null),Zc(this,nn);if(dp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||$.length!=0||this.h.h||(this.s=1,vt(16),f=!1),this.o=this.o&&f,!f)xi(this.i,this.l,$,"[Invalid Chunked Response]"),Ur(this),As(this);else if(0<$.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),su(ot),ot.M=!0,vt(11))}}else xi(this.i,this.l,$,null),Zc(this,$);at==4&&Ur(this),this.o&&!this.J&&(at==4?Fp(this.j,this):(this.o=!1,fa(this)))}else qE(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),Ur(this),As(this)}}}catch{}finally{}};function dp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function NE(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Yc:(f=Number(d.substring(f,g)),isNaN(f)?cp:(g+=1,g+f>d.length?Yc:(d=d.slice(g,g+f),a.C=g+f,d)))}rr.prototype.cancel=function(){this.J=!0,Ur(this)};function fa(a){a.S=Date.now()+a.I,hp(a,a.I)}function hp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Cs(v(a.ba,a),d)}function Xc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}rr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(AE(this.i,this.A),this.L!=2&&(Ts(),vt(17)),Ur(this),this.s=2,As(this)):hp(this,this.S-a)};function As(a){a.j.G==0||a.J||Fp(a.j,a)}function Ur(a){Xc(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,De(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Zc(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||eu(f.h,a))){if(!a.K&&eu(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Ia(f),_a(f);else break e;iu(f),vt(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=Cs(v(f.Za,f),6e3));if(1>=mp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else zr(f,11)}else if((a.K||f.g==a)&&Ia(f),!_(d))for(P=f.Da.g.parse(d),d=0;d<P.length;d++){let ce=P[d];if(f.T=ce[0],ce=ce[1],f.G==2)if(ce[0]=="c"){f.K=ce[1],f.ia=ce[2];const ot=ce[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));const at=ce[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));const Ci=ce[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(g=1.5*Ci,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const nn=a.g;if(nn){const Sa=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var j=g.h;j.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(tu(j,j.h),j.h=null))}if(g.D){const ou=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;ou&&(g.ya=ou,Ie(g.I,g.D,ou))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var $=a;if(g.qa=Bp(g,g.J?g.ia:null,g.W),$.K){gp(g.h,$);var me=$,Ze=g.L;Ze&&(me.I=Ze),me.B&&(Xc(me),fa(me)),g.g=$}else Lp(g);0<f.i.length&&Ea(f)}else ce[0]!="stop"&&ce[0]!="close"||zr(f,7);else f.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?zr(f,7):ru(f):ce[0]!="noop"&&f.l&&f.l.ta(ce),f.v=0)}}Ts(4)}catch{}}var bE=class{constructor(a,d){this.g=a,this.map=d}};function fp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function mp(a){return a.h?1:a.g?a.g.size:0}function eu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function tu(a,d){a.g?a.g.add(d):a.h=d}function gp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}fp.prototype.cancel=function(){if(this.i=yp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function yp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return x(a.i)}function PE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function OE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const g in a)d[f++]=g;return d}}}function vp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=OE(a),g=PE(a),P=g.length,j=0;j<P;j++)d.call(void 0,g[j],f&&f[j],a)}var wp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DE(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),P=null;if(0<=g){var j=a[f].substring(0,g);P=a[f].substring(g+1)}else j=a[f];d(j,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Br(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Br){this.h=a.h,pa(this,a.j),this.o=a.o,this.g=a.g,ma(this,a.s),this.l=a.l;var d=a.i,f=new bs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),_p(this,f),this.m=a.m}else a&&(d=String(a).match(wp))?(this.h=!1,pa(this,d[1]||"",!0),this.o=ks(d[2]||""),this.g=ks(d[3]||"",!0),ma(this,d[4]),this.l=ks(d[5]||"",!0),_p(this,d[6]||"",!0),this.m=ks(d[7]||"")):(this.h=!1,this.i=new bs(null,this.h))}Br.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Ns(d,Ep,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ns(d,Ep,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ns(f,f.charAt(0)=="/"?ME:LE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ns(f,VE)),a.join("")};function jn(a){return new Br(a)}function pa(a,d,f){a.j=f?ks(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ma(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function _p(a,d,f){d instanceof bs?(a.i=d,UE(a.i,a.h)):(f||(d=Ns(d,FE)),a.i=new bs(d,a.h))}function Ie(a,d,f){a.i.set(d,f)}function ga(a){return Ie(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ks(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ns(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,jE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function jE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ep=/[#\/\?@]/g,LE=/[#\?:]/g,ME=/[#\?]/g,FE=/[#\?@]/g,VE=/#/g;function bs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function ir(a){a.g||(a.g=new Map,a.h=0,a.i&&DE(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=bs.prototype,t.add=function(a,d){ir(this),this.i=null,a=Si(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Ip(a,d){ir(a),d=Si(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function xp(a,d){return ir(a),d=Si(a,d),a.g.has(d)}t.forEach=function(a,d){ir(this),this.g.forEach(function(f,g){f.forEach(function(P){a.call(d,P,g,this)},this)},this)},t.na=function(){ir(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){const P=a[g];for(let j=0;j<P.length;j++)f.push(d[g])}return f},t.V=function(a){ir(this);let d=[];if(typeof a=="string")xp(this,a)&&(d=d.concat(this.g.get(Si(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return ir(this),this.i=null,a=Si(this,a),xp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Sp(a,d,f){Ip(a,d),0<f.length&&(a.i=null,a.g.set(Si(a,d),x(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];const j=encodeURIComponent(String(g)),$=this.V(g);for(g=0;g<$.length;g++){var P=j;$[g]!==""&&(P+="="+encodeURIComponent(String($[g]))),a.push(P)}}return this.i=a.join("&")};function Si(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function UE(a,d){d&&!a.j&&(ir(a),a.i=null,a.g.forEach(function(f,g){var P=g.toLowerCase();g!=P&&(Ip(this,g),Sp(this,P,f))},a)),a.j=d}function BE(a,d){const f=new Rs;if(l.Image){const g=new Image;g.onload=k(sr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=k(sr,f,"TestLoadImage: error",!1,d,g),g.onabort=k(sr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=k(sr,f,"TestLoadImage: timeout",!1,d,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function zE(a,d){const f=new Rs,g=new AbortController,P=setTimeout(()=>{g.abort(),sr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(j=>{clearTimeout(P),j.ok?sr(f,"TestPingServer: ok",!0,d):sr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(P),sr(f,"TestPingServer: error",!1,d)})}function sr(a,d,f,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(f)}catch{}}function $E(){this.g=new Dn}function WE(a,d,f){const g=f||"";try{vp(a,function(P,j){let $=P;h(P)&&($=ae(P)),d.push(g+j+"="+encodeURIComponent($))})}catch(P){throw d.push(g+"type="+encodeURIComponent("_badmap")),P}}function ya(a){this.l=a.Ub||null,this.j=a.eb||!1}N(ya,pe),ya.prototype.g=function(){return new va(this.l,this.j)},ya.prototype.i=function(a){return function(){return a}}({});function va(a,d){V.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(va,V),t=va.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Os(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ps(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ps(this):Os(this),this.readyState==3&&Tp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ps(this))},t.Qa=function(a){this.g&&(this.response=a,Ps(this))},t.ga=function(){this.g&&Ps(this)};function Ps(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Os(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Os(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Cp(a){let d="";return F(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function nu(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Cp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ie(a,d,f))}function je(a){V.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(je,V);var HE=/^https?$/i,GE=["POST","PUT"];t=je.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qc.g(),this.v=this.o?Wt(this.o):Wt(Qc),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(j){Rp(this,j);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)f.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const j of g.keys())f.set(j,g.get(j));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),P=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(GE,d,void 0))||g||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,$]of f)this.g.setRequestHeader(j,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Np(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){Rp(this,j)}};function Rp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Ap(a),wa(a)}function Ap(a){a.A||(a.A=!0,G(a,"complete"),G(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,G(this,"complete"),G(this,"abort"),wa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wa(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?kp(this):this.bb())},t.bb=function(){kp(this)};function kp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Ln(a)!=4||a.Z()!=2)){if(a.u&&Ln(a)==4)he(a.Ea,0,a);else if(G(a,"readystatechange"),Ln(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=$===0){var P=String(a.D).match(wp)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),g=!HE.test(P?P.toLowerCase():"")}f=g}if(f)G(a,"complete"),G(a,"success");else{a.m=6;try{var j=2<Ln(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",Ap(a)}}finally{wa(a)}}}}function wa(a,d){if(a.g){Np(a);const f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||G(a,"ready");try{f.onreadystatechange=g}catch{}}}function Np(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Ln(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),$t(d)}};function bp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function qE(a){const d={};a=(a.g&&2<=Ln(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var f=R(a[g]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=d[P]||[];d[P]=j,j.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Pp(a){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ds("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ds("baseRetryDelayMs",5e3,a),this.cb=Ds("retryDelaySeedMs",1e4,a),this.Wa=Ds("forwardChannelMaxRetries",2,a),this.wa=Ds("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new fp(a&&a.concurrentRequestLimit),this.Da=new $E,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){vt(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Bp(this,null,this.W),Ea(this)};function ru(a){if(Op(a),a.G==3){var d=a.U++,f=jn(a.I);if(Ie(f,"SID",a.K),Ie(f,"RID",d),Ie(f,"TYPE","terminate"),js(a,f),d=new rr(a,a.j,d),d.L=2,d.v=ga(jn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=zp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),fa(d)}Up(a)}function _a(a){a.g&&(su(a),a.g.cancel(),a.g=null)}function Op(a){_a(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ia(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ea(a){if(!pp(a.h)&&!a.s){a.s=!0;var d=a.Ga;en||ee(),W||(en(),W=!0),Y.add(d,a),a.B=0}}function KE(a,d){return mp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Cs(v(a.Ga,a,d),Vp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new rr(this,this.j,a);let j=this.o;if(this.S&&(j?(j=y(j),T(j,this.S)):j=this.S),this.m!==null||this.O||(P.H=j,j=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=jp(this,P,d),f=jn(this.I),Ie(f,"RID",a),Ie(f,"CVER",22),this.D&&Ie(f,"X-HTTP-Session-Id",this.D),js(this,f),j&&(this.O?d="headers="+encodeURIComponent(String(Cp(j)))+"&"+d:this.m&&nu(f,this.m,j)),tu(this.h,P),this.Ua&&Ie(f,"TYPE","init"),this.P?(Ie(f,"$req",d),Ie(f,"SID","null"),P.T=!0,Jc(P,f,null)):Jc(P,f,d),this.G=2}}else this.G==3&&(a?Dp(this,a):this.i.length==0||pp(this.h)||Dp(this))};function Dp(a,d){var f;d?f=d.l:f=a.U++;const g=jn(a.I);Ie(g,"SID",a.K),Ie(g,"RID",f),Ie(g,"AID",a.T),js(a,g),a.m&&a.o&&nu(g,a.m,a.o),f=new rr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=jp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),tu(a.h,f),Jc(f,g,d)}function js(a,d){a.H&&F(a.H,function(f,g){Ie(d,g,f)}),a.l&&vp({},function(f,g){Ie(d,g,f)})}function jp(a,d,f){f=Math.min(a.i.length,f);var g=a.l?v(a.l.Na,a.l,a):null;e:{var P=a.i;let j=-1;for(;;){const $=["count="+f];j==-1?0<f?(j=P[0].g,$.push("ofs="+j)):j=0:$.push("ofs="+j);let me=!0;for(let Ze=0;Ze<f;Ze++){let ce=P[Ze].g;const ot=P[Ze].map;if(ce-=j,0>ce)j=Math.max(0,P[Ze].g-100),me=!1;else try{WE(ot,$,"req"+ce+"_")}catch{g&&g(ot)}}if(me){g=$.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function Lp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;en||ee(),W||(en(),W=!0),Y.add(d,a),a.v=0}}function iu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Cs(v(a.Fa,a),Vp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Mp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Cs(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),_a(this),Mp(this))};function su(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Mp(a){a.g=new rr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=jn(a.qa);Ie(d,"RID","rpc"),Ie(d,"SID",a.K),Ie(d,"AID",a.T),Ie(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ie(d,"TO",a.ja),Ie(d,"TYPE","xmlhttp"),js(a,d),a.m&&a.o&&nu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ga(jn(d)),f.m=null,f.P=!0,up(f,a)}t.Za=function(){this.C!=null&&(this.C=null,_a(this),iu(this),vt(19))};function Ia(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Fp(a,d){var f=null;if(a.g==d){Ia(a),su(a),a.g=null;var g=2}else if(eu(a.h,d))f=d.D,gp(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var P=a.B;g=ua(),G(g,new op(g,f)),Ea(a)}else Lp(a);else if(P=d.s,P==3||P==0&&0<d.X||!(g==1&&KE(a,d)||g==2&&iu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),P){case 1:zr(a,5);break;case 4:zr(a,10);break;case 3:zr(a,6);break;default:zr(a,2)}}}function Vp(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function zr(a,d){if(a.j.info("Error code "+d),d==2){var f=v(a.fb,a),g=a.Xa;const P=!g;g=new Br(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||pa(g,"https"),ga(g),P?BE(g.toString(),f):zE(g.toString(),f)}else vt(2);a.G=0,a.l&&a.l.sa(d),Up(a),Op(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Up(a){if(a.G=0,a.ka=[],a.l){const d=yp(a.h);(d.length!=0||a.i.length!=0)&&(A(a.ka,d),A(a.ka,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.ra()}}function Bp(a,d,f){var g=f instanceof Br?jn(f):new Br(f);if(g.g!="")d&&(g.g=d+"."+g.g),ma(g,g.s);else{var P=l.location;g=P.protocol,d=d?d+"."+P.hostname:P.hostname,P=+P.port;var j=new Br(null);g&&pa(j,g),d&&(j.g=d),P&&ma(j,P),f&&(j.l=f),g=j}return f=a.D,d=a.ya,f&&d&&Ie(g,f,d),Ie(g,"VER",a.la),js(a,g),g}function zp(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new je(new ya({eb:f})):new je(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $p(){}t=$p.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xa(){}xa.prototype.g=function(a,d){return new Dt(a,d)};function Dt(a,d){V.call(this),this.g=new Pp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ti(this)}N(Dt,V),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){ru(this.g)},Dt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=ae(a),a=f);d.i.push(new bE(d.Ya++,a)),d.G==3&&Ea(d)},Dt.prototype.N=function(){this.g.l=null,delete this.j,ru(this.g),delete this.g,Dt.aa.N.call(this)};function Wp(a){yt.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}N(Wp,yt);function Hp(){Pt.call(this),this.status=1}N(Hp,Pt);function Ti(a){this.g=a}N(Ti,$p),Ti.prototype.ua=function(){G(this.g,"a")},Ti.prototype.ta=function(a){G(this.g,new Wp(a))},Ti.prototype.sa=function(a){G(this.g,new Hp)},Ti.prototype.ra=function(){G(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,Lw=function(){return new xa},jw=function(){return ua()},Dw=ue,Jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,hl=da,ap.COMPLETE="complete",Ow=ap,We.EventType=Ce,Ce.OPEN="a",Ce.CLOSE="b",Ce.ERROR="c",Ce.MESSAGE="d",V.prototype.listen=V.prototype.K,Js=We,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,Pw=je}).apply(typeof $a<"u"?$a:typeof self<"u"?self:typeof window<"u"?window:{});const Ng="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ys="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Rc("@firebase/firestore");function Ws(){return ci.logLevel}function Q(t,...e){if(ci.logLevel<=ie.DEBUG){const n=e.map(Tf);ci.debug(`Firestore (${ys}): ${t}`,...n)}}function ui(t,...e){if(ci.logLevel<=ie.ERROR){const n=e.map(Tf);ci.error(`Firestore (${ys}): ${t}`,...n)}}function Jl(t,...e){if(ci.logLevel<=ie.WARN){const n=e.map(Tf);ci.warn(`Firestore (${ys}): ${t}`,...n)}}function Tf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${ys}) INTERNAL ASSERTION FAILED: `+t;throw ui(e),new Error(e)}function Fe(t,e){t||se()}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class uA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dA{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ei,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ei)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string"),new Mw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new dt(e)}}class hA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Fe(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.R=n.token,new pA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=gA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function os(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Xe(0,0))}static max(){return new ke(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends jo{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const yA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends jo{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return yA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new rt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new X(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new X(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new X(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ue.fromString(e))}static fromName(e){return new te(Ue.fromString(e).popFirst(5))}static empty(){return new te(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ue(e.slice()))}}function vA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new br(i,te.empty(),e)}function wA(t){return new br(t.readTime,t.key,-1)}class br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new br(ke.min(),te.empty(),-1)}static max(){return new br(ke.max(),te.empty(),-1)}}function _A(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==EA)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function xA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Uw.oe=-1;function Cf(t){return t==null}function Xl(t){return t===0&&1/t==-1/0}function SA(t){return typeof t=="number"&&Number.isInteger(t)&&!Xl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function na(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wa(this.root,e,this.comparator,!0)}}class Wa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??tt.RED,this.left=i??tt.EMPTY,this.right=s??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new tt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return tt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,i,s){return this}insert(e,n,r){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pg(this.data.getIterator())}getIteratorFrom(e){return new Pg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class Pg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new dn([])}unionWith(e){let n=new pt(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return os(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new TA("Invalid base64 string: "+s):s}}(e);return new bn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new bn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const CA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(t){if(Fe(!!t),typeof t=="string"){let e=0;const n=CA.exec(t);if(Fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lo(t){return typeof t=="string"?bn.fromBase64String(t):bn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function zw(t){const e=t.mapValue.fields.__previous_value__;return Rf(e)?zw(e):e}function Zl(t){const e=di(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n,r,i,s,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class ec{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha={mapValue:{}};function as(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rf(t)?4:kA(t)?9007199254740991:AA(t)?10:11:se()}function Pn(t,e){if(t===e)return!0;const n=as(t);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=di(i.timestampValue),l=di(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Lo(i.bytesValue).isEqual(Lo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return nt(i.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nt(i.integerValue)===nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nt(i.doubleValue),l=nt(s.doubleValue);return o===l?Xl(o)===Xl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return os(t.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(bg(o)!==bg(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Pn(o[c],l[c])))return!1;return!0}(t,e);default:return se()}}function Mo(t,e){return(t.values||[]).find(n=>Pn(n,e))!==void 0}function ls(t,e){if(t===e)return 0;const n=as(t),r=as(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=nt(s.integerValue||s.doubleValue),c=nt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Og(t.timestampValue,e.timestampValue);case 4:return Og(Zl(t),Zl(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Lo(s),c=Lo(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=ge(l[h],c[h]);if(p!==0)return p}return ge(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ge(nt(s.latitude),nt(o.latitude));return l!==0?l:ge(nt(s.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,h,p;const m=s.fields||{},v=o.fields||{},k=(l=m.value)===null||l===void 0?void 0:l.arrayValue,N=(c=v.value)===null||c===void 0?void 0:c.arrayValue,x=ge(((h=k==null?void 0:k.values)===null||h===void 0?void 0:h.length)||0,((p=N==null?void 0:N.values)===null||p===void 0?void 0:p.length)||0);return x!==0?x:Dg(k,N)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ha.mapValue&&o===Ha.mapValue)return 0;if(s===Ha.mapValue)return 1;if(o===Ha.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const v=ge(c[m],p[m]);if(v!==0)return v;const k=ls(l[c[m]],h[p[m]]);if(k!==0)return k}return ge(c.length,p.length)}(t.mapValue,e.mapValue);default:throw se()}}function Og(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=di(t),r=di(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function Dg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ls(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function cs(t){return Xd(t)}function Xd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=di(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Xd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Xd(n.fields[o])}`;return i+"}"}(t.mapValue):se()}function Zd(t){return!!t&&"integerValue"in t}function Af(t){return!!t&&"arrayValue"in t}function fl(t){return!!t&&"mapValue"in t}function AA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function co(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return na(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=co(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=co(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=co(n)}setAll(e){let n=rt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=co(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){na(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new un(co(this.value))}}function $w(t){const e=[];return na(t.fields,(n,r)=>{const i=new rt([n]);if(fl(r)){const s=$w(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new cn(e,0,ke.min(),ke.min(),ke.min(),un.empty(),0)}static newFoundDocument(e,n,r,i){return new cn(e,1,n,ke.min(),r,i,0)}static newNoDocument(e,n){return new cn(e,2,n,ke.min(),ke.min(),un.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,ke.min(),ke.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.position=e,this.inclusive=n}}function jg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=ls(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n="asc"){this.field=e,this.dir=n}}function NA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{}class Ye extends Ww{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new PA(e,n,r):n==="array-contains"?new jA(e,r):n==="in"?new LA(e,r):n==="not-in"?new MA(e,r):n==="array-contains-any"?new FA(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new OA(e,r):new DA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ls(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends Ww{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Pr(e,n)}matches(e){return Hw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Hw(t){return t.op==="and"}function Gw(t){return bA(t)&&Hw(t)}function bA(t){for(const e of t.filters)if(e instanceof Pr)return!1;return!0}function eh(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+cs(t.value);if(Gw(t))return t.filters.map(e=>eh(e)).join(",");{const e=t.filters.map(n=>eh(n)).join(",");return`${t.op}(${e})`}}function qw(t,e){return t instanceof Ye?function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&Pn(r.value,i.value)}(t,e):t instanceof Pr?function(r,i){return i instanceof Pr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&qw(o,i.filters[l]),!0):!1}(t,e):void se()}function Kw(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${cs(n.value)}`}(t):t instanceof Pr?function(n){return n.op.toString()+" {"+n.getFilters().map(Kw).join(" ,")+"}"}(t):"Filter"}class PA extends Ye{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class OA extends Ye{constructor(e,n){super(e,"in",n),this.keys=Qw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DA extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=Qw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Qw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class jA extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Af(n)&&Mo(n.arrayValue,this.value)}}class LA extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mo(this.value.arrayValue,n)}}class MA extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Mo(this.value.arrayValue,n)}}class FA extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Af(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Mg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new VA(t,e,n,r,i,s,o)}function kf(t){const e=we(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>eh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>cs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>cs(r)).join(",")),e.ue=n}return e.ue}function Nf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lg(t.startAt,e.startAt)&&Lg(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UA(t,e,n,r,i,s,o,l){return new Pc(t,e,n,r,i,s,o,l)}function BA(t){return new Pc(t)}function Fg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zA(t){return t.collectionGroup!==null}function uo(t){const e=we(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new pt(rt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new nc(s,r))}),n.has(rt.keyField().canonicalString())||e.ce.push(new nc(rt.keyField(),r))}return e.ce}function ti(t){const e=we(t);return e.le||(e.le=$A(e,uo(t))),e.le}function $A(t,e){if(t.limitType==="F")return Mg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new nc(i.field,s)});const n=t.endAt?new tc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tc(t.startAt.position,t.startAt.inclusive):null;return Mg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function th(t,e,n){return new Pc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yw(t,e){return Nf(ti(t),ti(e))&&t.limitType===e.limitType}function Jw(t){return`${kf(ti(t))}|lt:${t.limitType}`}function Hs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Kw(i)).join(", ")}]`),Cf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>cs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>cs(i)).join(",")),`Target(${r})`}(ti(t))}; limitType=${t.limitType})`}function bf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of uo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const h=jg(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,uo(r),i)||r.endAt&&!function(o,l,c){const h=jg(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,uo(r),i))}(t,e)}function WA(t){return(e,n)=>{let r=!1;for(const i of uo(t)){const s=HA(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function HA(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,o,l){const c=o.data.field(s),h=l.data.field(s);return c!==null&&h!==null?ls(c,h):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){na(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Bw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new Nt(te.comparator);function rc(){return GA}const Xw=new Nt(te.comparator);function Ga(...t){let e=Xw;for(const n of t)e=e.insert(n.key,n);return e}function Zw(t){let e=Xw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return ho()}function e_(){return ho()}function ho(){return new vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const qA=new Nt(te.comparator),KA=new pt(te.comparator);function ft(...t){let e=KA;for(const n of t)e=e.add(n);return e}const QA=new pt(ge);function YA(){return QA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xl(e)?"-0":e}}function t_(t){return{integerValue:""+t}}function JA(t,e){return SA(e)?t_(e):Pf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this._=void 0}}function XA(t,e,n){return t instanceof ic?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Rf(s)&&(s=zw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Fo?r_(t,e):t instanceof Vo?i_(t,e):function(i,s){const o=n_(i,s),l=Vg(o)+Vg(i.Pe);return Zd(o)&&Zd(i.Pe)?t_(l):Pf(i.serializer,l)}(t,e)}function ZA(t,e,n){return t instanceof Fo?r_(t,e):t instanceof Vo?i_(t,e):n}function n_(t,e){return t instanceof sc?function(r){return Zd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ic extends Oc{}class Fo extends Oc{constructor(e){super(),this.elements=e}}function r_(t,e){const n=s_(e);for(const r of t.elements)n.some(i=>Pn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Vo extends Oc{constructor(e){super(),this.elements=e}}function i_(t,e){let n=s_(e);for(const r of t.elements)n=n.filter(i=>!Pn(i,r));return{arrayValue:{values:n}}}class sc extends Oc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Vg(t){return nt(t.integerValue||t.doubleValue)}function s_(t){return Af(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ek(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Fo&&i instanceof Fo||r instanceof Vo&&i instanceof Vo?os(r.elements,i.elements,Pn):r instanceof sc&&i instanceof sc?Pn(r.Pe,i.Pe):r instanceof ic&&i instanceof ic}(t.transform,e.transform)}class tk{constructor(e,n){this.version=e,this.transformResults=n}}class Kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dc{}function o_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new l_(t.key,Kn.none()):new ra(t.key,t.data,Kn.none());{const n=t.data,r=un.empty();let i=new pt(rt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new vi(t.key,r,new dn(i.toArray()),Kn.none())}}function nk(t,e,n){t instanceof ra?function(i,s,o){const l=i.value.clone(),c=Bg(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof vi?function(i,s,o){if(!pl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Bg(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(a_(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fo(t,e,n,r){return t instanceof ra?function(s,o,l,c){if(!pl(s.precondition,o))return l;const h=s.value.clone(),p=zg(s.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof vi?function(s,o,l,c){if(!pl(s.precondition,o))return l;const h=zg(s.fieldTransforms,c,o),p=o.data;return p.setAll(a_(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return pl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function rk(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=n_(r.transform,i||null);s!=null&&(n===null&&(n=un.empty()),n.set(r.field,s))}return n||null}function Ug(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&os(r,i,(s,o)=>ek(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ra extends Dc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vi extends Dc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function a_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Bg(t,e,n){const r=new Map;Fe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,ZA(o,l,n[i]))}return r}function zg(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,XA(s,o,e))}return r}class l_ extends Dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ik extends Dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&nk(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=e_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const c=o_(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ft())}isEqual(e){return this.batchId===e.batchId&&os(this.mutations,e.mutations,(n,r)=>Ug(n,r))&&os(this.baseMutations,e.baseMutations,(n,r)=>Ug(n,r))}}class Of{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Fe(e.mutations.length===r.length);let i=function(){return qA}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Of(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,oe;function ak(t){switch(t){default:return se();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function lk(t){if(t===void 0)return ui("GRPC error has no .code"),z.UNKNOWN;switch(t){case Ve.OK:return z.OK;case Ve.CANCELLED:return z.CANCELLED;case Ve.UNKNOWN:return z.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return z.INTERNAL;case Ve.UNAVAILABLE:return z.UNAVAILABLE;case Ve.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Ve.NOT_FOUND:return z.NOT_FOUND;case Ve.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Ve.ABORTED:return z.ABORTED;case Ve.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Ve.DATA_LOSS:return z.DATA_LOSS;default:return se()}}(oe=Ve||(Ve={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new bw([4294967295,4294967295],0);class ck{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dk(t,e){return nh(t,e.toTimestamp())}function Yi(t){return Fe(!!t),ke.fromTimestamp(function(n){const r=di(n);return new Xe(r.seconds,r.nanos)}(t))}function c_(t,e){return rh(t,e).canonicalString()}function rh(t,e){const n=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hk(t){const e=Ue.fromString(t);return Fe(_k(e)),e}function ih(t,e){return c_(t.databaseId,e.path)}function fk(t){const e=hk(t);return e.length===4?Ue.emptyPath():mk(e)}function pk(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mk(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $g(t,e,n){return{name:ih(t,e),fields:n.value.mapValue.fields}}function gk(t,e){let n;if(e instanceof ra)n={update:$g(t,e.key,e.value)};else if(e instanceof l_)n={delete:ih(t,e.key)};else if(e instanceof vi)n={update:$g(t,e.key,e.data),updateMask:wk(e.fieldMask)};else{if(!(e instanceof ik))return se();n={verify:ih(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Vo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:dk(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se()}(t,e.precondition)),n}function yk(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Yi(i.updateTime):Yi(s);return o.isEqual(ke.min())&&(o=Yi(s)),new tk(o,i.transformResults||[])}(n,e))):[]}function vk(t){let e=fk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Fe(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const v=u_(m);return v instanceof Pr&&Gw(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(v=>function(N){return new nc(Ai(N.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,Cf(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(m){const v=!!m.before,k=m.values||[];return new tc(k,v)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const v=!m.before,k=m.values||[];return new tc(k,v)}(n.endAt)),UA(e,i,o,s,l,"F",c,h)}function u_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ai(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ai(n.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ai(n.unaryFilter.field);return Ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ai(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(Ai(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pr.create(n.compositeFilter.filters.map(r=>u_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function Ai(t){return rt.fromServerFormat(t.fieldPath)}function wk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _k(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.ct=e}}function Ik(t){const e=vk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?th(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.un=new Sk}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(br.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(br.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Sk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(Ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new us(0)}static kn(){return new us(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.changes=new vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fo(r.mutation,i,dn.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ft()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ft()){const i=Yr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ga();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ft()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=rc();const o=ho(),l=function(){return ho()}();return n.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof vi)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),fo(p.mutation,h,p.mutation.getFieldMask(),Xe.now())):o.set(h.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new Ck(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ho();let i=new Nt((o,l)=>o-l),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||dn.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(i.get(l.batchId)||ft()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=e_();p.forEach(v=>{if(!s.has(v)){const k=o_(n.get(v),r.get(v));k!==null&&m.set(v,k),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Yr());let l=-1,c=s;return o.next(h=>U.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{c=c.insert(p,v)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,ft())).next(p=>({batchId:l,changes:Zw(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=Ga();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ga();return this.indexManager.getCollectionParents(e,s).next(l=>U.forEach(l,c=>{const h=function(m,v){return new Pc(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,cn.newInvalidDocument(p)))});let l=Ga();return o.forEach((c,h)=>{const p=s.get(c);p!==void 0&&fo(p.mutation,h,dn.empty(),Xe.now()),bf(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Yi(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Ik(i.bundledQuery),readTime:Yi(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.overlays=new Nt(te.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Yr(),s=n.length+1,o=new te(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Nt((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Yr(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Yr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return U.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ok(n,r));let s=this.Ir.get(n);s===void 0&&(s=ft(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(){this.Tr=new pt(Ke.Er),this.dr=new pt(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ke(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ke(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new Ue([])),r=new Ke(n,e),i=new Ke(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Ue([])),r=new Ke(n,e),i=new Ke(n,e+1);let s=ft();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ke(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ke{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pt(Ke.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sk(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Ke(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(ge);return n.forEach(i=>{const s=new Ke(i,0),o=new Ke(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const o=new Ke(new te(s),0);let l=new pt(ge);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new Ke(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ke(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.Mr=e,this.docs=function(){return new Nt(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=rc();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():cn.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=rc();const o=n.path,l=new te(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||_A(wA(p),r)<=0||(i.has(p.key)||bf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){se()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ok(this)}getSize(e){return U.resolve(this.size)}}class Ok extends Tk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.persistence=e,this.Nr=new vs(n=>kf(n),Nf),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Df,this.targetCount=0,this.kr=us.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new us(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Uw(0),this.Kr=!1,this.Kr=!0,this.$r=new Nk,this.referenceDelegate=e(this),this.Ur=new Dk(this),this.indexManager=new xk,this.remoteDocumentCache=function(i){return new Pk(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ek(n),this.Gr=new Ak(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new bk(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new Lk(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Lk extends IA{constructor(e){super(),this.currentSequenceNumber=e}}class jf{constructor(e){this.persistence=e,this.Jr=new Df,this.Yr=null}static Zr(e){return new jf(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=te.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ke.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ft(),i=ft();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Lf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zS()?8:xA(gt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Mk;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ws()<=ie.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Hs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Ws()<=ie.DEBUG&&Q("QueryEngine","Query:",Hs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ws()<=ie.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Hs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(n))):U.resolve())}Yi(e,n){if(Fg(n))return U.resolve(null);let r=ti(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=th(n,null,"F"),r=ti(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ft(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,th(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,i){return Fg(n)||i.isEqual(ke.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(Ws()<=ie.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hs(n)),this.rs(e,o,n,vA(i,-1)).next(l=>l))})}ts(e,n){let r=new pt(WA(e));return n.forEach((i,s)=>{bf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ws()<=ie.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Hs(n)),this.Ji.getDocumentsMatchingQuery(e,n,br.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Nt(ge),this._s=new vs(s=>kf(s),Nf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Uk(t,e,n,r){return new Vk(t,e,n,r)}async function d_(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=ft();for(const h of i){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function Bk(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,v=m.keys();let k=U.resolve();return v.forEach(N=>{k=k.next(()=>p.getEntry(c,N)).next(x=>{const A=h.docVersions.get(N);Fe(A!==null),x.version.compareTo(A)<0&&(m.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),p.addEntry(x)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ft();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function zk(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function $k(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class Wg{constructor(){this.activeTargetIds=YA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wk{constructor(){this.so=new Wg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa=null;function Uu(){return qa===null?qa=function(){return 268435456+Math.round(2147483648*Math.random())}():qa++,"0x"+qa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class Kk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Uu(),c=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,c,h,i).then(p=>(Q("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Jl("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",i),p})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ys}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Gk[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Uu();return new Promise((o,l)=>{const c=new Pw;c.setWithCredentials(!0),c.listenOnce(Ow.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case hl.NO_ERROR:const p=c.getResponseJson();Q(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case hl.TIMEOUT:Q(ut,`RPC '${e}' ${s} timed out`),l(new X(z.DEADLINE_EXCEEDED,"Request time out"));break;case hl.HTTP_ERROR:const m=c.getStatus();if(Q(ut,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const k=v==null?void 0:v.error;if(k&&k.status&&k.message){const N=function(A){const w=A.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(w)>=0?w:z.UNKNOWN}(k.status);l(new X(N,k.message))}else l(new X(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new X(z.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{Q(ut,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Q(ut,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Uu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Lw(),l=jw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");Q(ut,`Creating RPC '${e}' stream ${i}: ${p}`,c);const m=o.createWebChannel(p,c);let v=!1,k=!1;const N=new qk({Io:A=>{k?Q(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(v||(Q(ut,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),Q(ut,`RPC '${e}' stream ${i} sending:`,A),m.send(A))},To:()=>m.close()}),x=(A,w,_)=>{A.listen(w,S=>{try{_(S)}catch(D){setTimeout(()=>{throw D},0)}})};return x(m,Js.EventType.OPEN,()=>{k||(Q(ut,`RPC '${e}' stream ${i} transport opened.`),N.yo())}),x(m,Js.EventType.CLOSE,()=>{k||(k=!0,Q(ut,`RPC '${e}' stream ${i} transport closed`),N.So())}),x(m,Js.EventType.ERROR,A=>{k||(k=!0,Jl(ut,`RPC '${e}' stream ${i} transport errored:`,A),N.So(new X(z.UNAVAILABLE,"The operation could not be completed")))}),x(m,Js.EventType.MESSAGE,A=>{var w;if(!k){const _=A.data[0];Fe(!!_);const S=_,D=S.error||((w=S[0])===null||w===void 0?void 0:w.error);if(D){Q(ut,`RPC '${e}' stream ${i} received error:`,D);const L=D.status;let F=function(I){const T=Ve[I];if(T!==void 0)return lk(T)}(L),E=D.message;F===void 0&&(F=z.INTERNAL,E="Unknown error status: "+L+" with message "+D.message),k=!0,N.So(new X(F,E)),m.close()}else Q(ut,`RPC '${e}' stream ${i} received:`,_),N.bo(_)}}),x(l,Dw.STAT_EVENT,A=>{A.stat===Jd.PROXY?Q(ut,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Jd.NOPROXY&&Q(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Bu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t){return new ck(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n,r,i,s,o,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new h_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new X(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yk extends Qk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=yk(e.writeResults,e.commitTime),r=Yi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=pk(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gk(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,rh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,rh(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Xk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ui(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{sa(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=we(c);h.L_.add(4),await ia(h),h.q_.set("Unknown"),h.L_.delete(4),await Lc(h)}(this))})}),this.q_=new Xk(r,i)}}async function Lc(t){if(sa(t))for(const e of t.B_)await e(!0)}async function ia(t){for(const e of t.B_)await e(!1)}function sa(t){return we(t).L_.size===0}async function f_(t,e,n){if(!bc(e))throw e;t.L_.add(1),await ia(t),t.q_.set("Offline"),n||(n=()=>zk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Lc(t)})}function p_(t,e){return e().catch(n=>f_(t,n,e))}async function Mc(t){const e=we(t),n=Or(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;eN(e);)try{const i=await $k(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,tN(e,i)}catch(i){await f_(e,i)}m_(e)&&g_(e)}function eN(t){return sa(t)&&t.O_.length<10}function tN(t,e){t.O_.push(e);const n=Or(t);n.r_()&&n.V_&&n.m_(e.mutations)}function m_(t){return sa(t)&&!Or(t).n_()&&t.O_.length>0}function g_(t){Or(t).start()}async function nN(t){Or(t).p_()}async function rN(t){const e=Or(t);for(const n of t.O_)e.m_(n.mutations)}async function iN(t,e,n){const r=t.O_.shift(),i=Of.from(r,e,n);await p_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Mc(t)}async function sN(t,e){e&&Or(t).V_&&await async function(r,i){if(function(o){return ak(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();Or(r).s_(),await p_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Mc(r)}}(t,e),m_(t)&&g_(t)}async function Gg(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=sa(n);n.L_.add(3),await ia(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Lc(n)}async function oN(t,e){const n=we(t);e?(n.L_.delete(2),await Lc(n)):e||(n.L_.add(2),await ia(n),n.q_.set("Unknown"))}function Or(t){return t.U_||(t.U_=function(n,r,i){const s=we(n);return s.w_(),new Yk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nN.bind(null,t),mo:sN.bind(null,t),f_:rN.bind(null,t),g_:iN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Mc(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Mf(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y_(t,e){if(ui("AsyncQueue",`${e}: ${t}`),bc(t))return new X(z.UNAVAILABLE,`${e}: ${t}`);throw t}class aN{constructor(){this.queries=qg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=we(n),s=i.queries;i.queries=qg(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new X(z.ABORTED,"Firestore shutting down"))}}function qg(){return new vs(t=>Jw(t),Yw)}function lN(t){t.Y_.forEach(e=>{e.next()})}var Kg,Qg;(Qg=Kg||(Kg={})).ea="default",Qg.Cache="cache";class cN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vs(l=>Jw(l),Yw),this.Ma=new Map,this.xa=new Set,this.Oa=new Nt(te.comparator),this.Na=new Map,this.La=new Df,this.Ba={},this.ka=new Map,this.qa=us.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uN(t,e,n){const r=pN(t);try{const i=await function(o,l){const c=we(o),h=Xe.now(),p=l.reduce((k,N)=>k.add(N.key),ft());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",k=>{let N=rc(),x=ft();return c.cs.getEntries(k,p).next(A=>{N=A,N.forEach((w,_)=>{_.isValidDocument()||(x=x.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(k,N)).next(A=>{m=A;const w=[];for(const _ of l){const S=rk(_,m.get(_.key).overlayedDocument);S!=null&&w.push(new vi(_.key,S,$w(S.value.mapValue),Kn.exists(!0)))}return c.mutationQueue.addMutationBatch(k,h,w,l)}).next(A=>{v=A;const w=A.applyToLocalDocumentSet(m,x);return c.documentOverlayCache.saveOverlays(k,A.batchId,w)})}).then(()=>({batchId:v.batchId,changes:Zw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Nt(ge)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Fc(r,i.changes),await Mc(r.remoteStore)}catch(i){const s=y_(i,"Failed to persist write");n.reject(s)}}function Yg(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=we(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const v of m.j_)v.Z_(l)&&(h=!0)}),h&&lN(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dN(t,e){const n=we(t),r=e.batch.batchId;try{const i=await Bk(n.localStore,e);w_(n,r,null),v_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fc(n,i)}catch(i){await Vw(i)}}async function hN(t,e,n){const r=we(t);try{const i=await function(o,l){const c=we(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(Fe(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);w_(r,e,n),v_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fc(r,i)}catch(i){await Vw(i)}}function v_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function w_(t,e,n){const r=we(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}async function Fc(t,e,n){const r=we(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=void 0)===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=Lf.Wi(c.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,h){const p=we(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(h,v=>U.forEach(v.$i,k=>p.persistence.referenceDelegate.addReference(m,v.targetId,k)).next(()=>U.forEach(v.Ui,k=>p.persistence.referenceDelegate.removeReference(m,v.targetId,k)))))}catch(m){if(!bc(m))throw m;Q("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const k=p.os.get(v),N=k.snapshotVersion,x=k.withLastLimboFreeSnapshotVersion(N);p.os=p.os.insert(v,x)}}}(r.localStore,s))}async function fN(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await d_(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new X(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fc(n,r.hs)}}function pN(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hN.bind(null,e),e}class oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Uk(this.persistence,new Fk,e.initialUser,this.serializer)}Ga(e){return new jk(jf.Zr,this.serializer)}Wa(e){return new Wk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oc.provider={build:()=>new oc};class sh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fN.bind(null,this.syncEngine),await oN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aN}()}createDatastore(e){const n=jc(e.databaseInfo.databaseId),r=function(s){return new Kk(s)}(e.databaseInfo);return function(s,o,l,c){return new Jk(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new Zk(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Yg(this.syncEngine,n,0),function(){return Hg.D()?new Hg:new Hk}())}createSyncEngine(e,n){return function(i,s,o,l,c,h,p){const m=new cN(i,s,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=we(i);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ia(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sh.provider={build:()=>new sh};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=Fw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=y_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zu(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await d_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gN(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Gg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Gg(e.remoteStore,i)),t._onlineComponents=e}async function gN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await zu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Jl("Error using user provided cache. Falling back to memory cache: "+n),await zu(t,new oc)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await zu(t,new oc);return t._offlineComponents}async function yN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await Jg(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await Jg(t,new sh))),t._onlineComponents}function vN(t){return yN(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t,e,n){if(!n)throw new X(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _N(t,e,n,r){if(e===!0&&r===!0)throw new X(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zg(t){if(!te.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ff(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function oh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ff(t);throw new X(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_N("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ey({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ey(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cA;switch(r.type){case"firstParty":return new fA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xg.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Xg.delete(n),r.terminate())}(this),Promise.resolve()}}function EN(t,e,n,r={}){var i;const s=(t=oh(t,Vf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=dt.MOCK_USER;else{l=LS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new X(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dt(h)}t._authCredentials=new uA(new Mw(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Uf(this.firestore,e,this._query)}}class Qn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class Uo extends Uf{constructor(e,n,r){super(e,n,BA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new te(e))}withConverter(e){return new Uo(this.firestore,e,this._path)}}function IN(t,e,...n){if(t=kt(t),arguments.length===1&&(e=Fw.newId()),wN("doc","path",e),t instanceof Vf){const r=Ue.fromString(e,...n);return Zg(r),new Qn(t,null,new te(r))}{if(!(t instanceof Qn||t instanceof Uo))throw new X(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return Zg(r),new Qn(t.firestore,t instanceof Uo?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new h_(this,"async_queue_retry"),this.Vu=()=>{const r=Bu();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Bu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Bu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ei;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bc(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw ui("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Mf.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class E_ extends Vf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ty,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ty(e),this._firestoreClient=void 0,await e}}}function xN(t,e){const n=typeof t=="object"?t:ff(),r=typeof t=="string"?t:"(default)",i=yi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=DS("firestore");s&&EN(i,...s)}return i}function SN(t){if(t._terminated)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TN(t),t._firestoreClient}function TN(t){var e,n,r;const i=t._freezeSettings(),s=function(l,c,h,p){return new RA(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,__(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new mN(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bo(bn.fromBase64String(e))}catch(n){throw new X(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bo(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=/^__.*__$/;class RN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ra(e,this.data,n,this.fieldTransforms)}}function C_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class Bf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ac(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(C_(this.Cu)&&CN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class AN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jc(e)}Qu(e,n,r,i=!1){return new Bf({Cu:e,methodName:n,qu:r,path:rt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kN(t){const e=t._freezeSettings(),n=jc(t._databaseId);return new AN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function NN(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);N_("Data must be an object, but it was:",o,r);const l=A_(r,o);let c,h;if(s.merge)c=new dn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const v=bN(e,m,n);if(!o.contains(v))throw new X(z.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);DN(p,v)||p.push(v)}c=new dn(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new RN(new un(l),c,h)}function R_(t,e){if(k_(t=kt(t)))return N_("Unsupported field value:",e,t),A_(t,e);if(t instanceof x_)return function(r,i){if(!C_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=R_(l,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Xe.fromDate(r);return{timestampValue:nh(i.serializer,s)}}if(r instanceof Xe){const s=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nh(i.serializer,s)}}if(r instanceof S_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bo)return{bytesValue:uk(i.serializer,r._byteString)};if(r instanceof Qn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:c_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof T_)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Pf(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ff(r)}`)}(t,e)}function A_(t,e){const n={};return Bw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):na(t,(r,i)=>{const s=R_(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function k_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof S_||t instanceof Bo||t instanceof Qn||t instanceof x_||t instanceof T_)}function N_(t,e,n){if(!k_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ff(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function bN(t,e,n){if((e=kt(e))instanceof I_)return e._internalPath;if(typeof e=="string")return ON(t,e);throw ac("Field path arguments must be of type string or ",t,!1,void 0,n)}const PN=new RegExp("[~\\*/\\[\\]]");function ON(t,e,n){if(e.search(PN)>=0)throw ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new I_(...e.split("."))._internalPath}catch{throw ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ac(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new X(z.INVALID_ARGUMENT,l+t+c)}function DN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function LN(t,e,n){t=oh(t,Qn);const r=oh(t.firestore,E_),i=jN(t.converter,e,n);return MN(r,[NN(kN(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Kn.none())])}function MN(t,e){return function(r,i){const s=new ei;return r.asyncQueue.enqueueAndForget(async()=>uN(await vN(r),i,s)),s.promise}(SN(t),e)}(function(e,n=!0){(function(i){ys=i})(ps),kn(new gn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new E_(new dA(r.getProvider("auth-internal")),new mA(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new X(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Yt(Ng,"4.7.3",e),Yt(Ng,"4.7.3","esm2017")})();const b_="@firebase/installations",zf="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=1e4,O_=`w:${zf}`,D_="FIS_v2",FN="https://firebaseinstallations.googleapis.com/v1",VN=60*60*1e3,UN="installations",BN="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},hi=new gi(UN,BN,zN);function j_(t){return t instanceof yn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_({projectId:t}){return`${FN}/projects/${t}/installations`}function M_(t){return{token:t.token,requestStatus:2,expiresIn:WN(t.expiresIn),creationTime:Date.now()}}async function F_(t,e){const r=(await e.json()).error;return hi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function V_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $N(t,{refreshToken:e}){const n=V_(t);return n.append("Authorization",HN(e)),n}async function U_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function WN(t){return Number(t.replace("s","000"))}function HN(t){return`${D_} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=L_(t),i=V_(t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:n,authVersion:D_,appId:t.appId,sdkVersion:O_},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await U_(()=>fetch(r,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:M_(h.authToken)}}else throw await F_("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=/^[cdef][\w-]{21}$/,ah="";function QN(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=YN(t);return KN.test(n)?n:ah}catch{return ah}}function YN(t){return qN(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Map;function $_(t,e){const n=Vc(t);W_(n,e),JN(n,e)}function W_(t,e){const n=z_.get(t);if(n)for(const r of n)r(e)}function JN(t,e){const n=XN();n&&n.postMessage({key:t,fid:e}),ZN()}let Jr=null;function XN(){return!Jr&&"BroadcastChannel"in self&&(Jr=new BroadcastChannel("[Firebase] FID Change"),Jr.onmessage=t=>{W_(t.data.key,t.data.fid)}),Jr}function ZN(){z_.size===0&&Jr&&(Jr.close(),Jr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="firebase-installations-database",tb=1,fi="firebase-installations-store";let $u=null;function $f(){return $u||($u=q0(eb,tb,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(fi)}}})),$u}async function lc(t,e){const n=Vc(t),i=(await $f()).transaction(fi,"readwrite"),s=i.objectStore(fi),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&$_(t,e.fid),e}async function H_(t){const e=Vc(t),r=(await $f()).transaction(fi,"readwrite");await r.objectStore(fi).delete(e),await r.done}async function Uc(t,e){const n=Vc(t),i=(await $f()).transaction(fi,"readwrite"),s=i.objectStore(fi),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&$_(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wf(t){let e;const n=await Uc(t.appConfig,r=>{const i=nb(r),s=rb(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===ah?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function nb(t){const e=t||{fid:QN(),registrationStatus:0};return G_(e)}function rb(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(hi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=ib(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sb(t)}:{installationEntry:e}}async function ib(t,e){try{const n=await GN(t,e);return lc(t.appConfig,n)}catch(n){throw j_(n)&&n.customData.serverCode===409?await H_(t.appConfig):await lc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function sb(t){let e=await ny(t.appConfig);for(;e.registrationStatus===1;)await B_(100),e=await ny(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Wf(t);return r||n}return e}function ny(t){return Uc(t,e=>{if(!e)throw hi.create("installation-not-found");return G_(e)})}function G_(t){return ob(t)?{fid:t.fid,registrationStatus:0}:t}function ob(t){return t.registrationStatus===1&&t.registrationTime+P_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab({appConfig:t,heartbeatServiceProvider:e},n){const r=lb(t,n),i=$N(t,n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:O_,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await U_(()=>fetch(r,l));if(c.ok){const h=await c.json();return M_(h)}else throw await F_("Generate Auth Token",c)}function lb(t,{fid:e}){return`${L_(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(t,e=!1){let n;const r=await Uc(t.appConfig,s=>{if(!q_(s))throw hi.create("not-registered");const o=s.authToken;if(!e&&db(o))return s;if(o.requestStatus===1)return n=cb(t,e),s;{if(!navigator.onLine)throw hi.create("app-offline");const l=fb(s);return n=ub(t,l),l}});return n?await n:r.authToken}async function cb(t,e){let n=await ry(t.appConfig);for(;n.authToken.requestStatus===1;)await B_(100),n=await ry(t.appConfig);const r=n.authToken;return r.requestStatus===0?Hf(t,e):r}function ry(t){return Uc(t,e=>{if(!q_(e))throw hi.create("not-registered");const n=e.authToken;return pb(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ub(t,e){try{const n=await ab(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await lc(t.appConfig,r),n}catch(n){if(j_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await H_(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await lc(t.appConfig,r)}throw n}}function q_(t){return t!==void 0&&t.registrationStatus===2}function db(t){return t.requestStatus===2&&!hb(t)}function hb(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+VN}function fb(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function pb(t){return t.requestStatus===1&&t.requestTime+P_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(t){const e=t,{installationEntry:n,registrationPromise:r}=await Wf(e);return r?r.catch(console.error):Hf(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(t,e=!1){const n=t;return await yb(n),(await Hf(n,e)).token}async function yb(t){const{registrationPromise:e}=await Wf(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t){if(!t||!t.options)throw Wu("App Configuration");if(!t.name)throw Wu("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Wu(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Wu(t){return hi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="installations",wb="installations-internal",_b=t=>{const e=t.getProvider("app").getImmediate(),n=vb(e),r=yi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Eb=t=>{const e=t.getProvider("app").getImmediate(),n=yi(e,K_).getImmediate();return{getId:()=>mb(n),getToken:i=>gb(n,i)}};function Ib(){kn(new gn(K_,_b,"PUBLIC")),kn(new gn(wb,Eb,"PRIVATE"))}Ib();Yt(b_,zf);Yt(b_,zf,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc="analytics",xb="firebase_id",Sb="origin",Tb=60*1e3,Cb="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At=new Rc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ft=new gi("analytics","Analytics",Rb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t){if(!t.startsWith(Gf)){const e=Ft.create("invalid-gtag-resource",{gtagURL:t});return At.warn(e.message),""}return t}function Q_(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function kb(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Nb(t,e){const n=kb("firebase-js-sdk-policy",{createScriptURL:Ab}),r=document.createElement("script"),i=`${Gf}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function bb(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Pb(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await Q_(n)).find(h=>h.measurementId===i);c&&await e[c.appId]}}catch(l){At.error(l)}t("config",i,s)}async function Ob(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await Q_(n);for(const c of o){const h=l.find(m=>m.measurementId===c),p=h&&e[h.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){At.error(s)}}function Db(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,c]=o;await Ob(t,e,n,l,c)}else if(s==="config"){const[l,c]=o;await Pb(t,e,n,r,l,c)}else if(s==="consent"){const[l,c]=o;t("consent",l,c)}else if(s==="get"){const[l,c,h]=o;t("get",l,c,h)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){At.error(l)}}return i}function jb(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Db(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function Lb(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Gf)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=30,Fb=1e3;class Vb{constructor(e={},n=Fb){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Y_=new Vb;function Ub(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Bb(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:Ub(r)},s=Cb.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw Ft.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function zb(t,e=Y_,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Ft.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ft.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Hb;return setTimeout(async()=>{l.abort()},Tb),J_({appId:r,apiKey:i,measurementId:s},o,l,e)}async function J_(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Y_){var s;const{appId:o,measurementId:l}=t;try{await $b(r,e)}catch(c){if(l)return At.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await Bb(t);return i.deleteThrottleMetadata(o),c}catch(c){const h=c;if(!Wb(h)){if(i.deleteThrottleMetadata(o),l)return At.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:l};throw c}const p=Number((s=h==null?void 0:h.customData)===null||s===void 0?void 0:s.httpStatus)===503?rg(n,i.intervalMillis,Mb):rg(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return i.setThrottleMetadata(o,m),At.debug(`Calling attemptFetch again in ${p} millis`),J_(t,m,r,i)}}function $b(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Ft.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Wb(t){if(!(t instanceof yn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Hb{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Gb(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(){if($0())try{await W0()}catch(t){return At.warn(Ft.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return At.warn(Ft.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Kb(t,e,n,r,i,s,o){var l;const c=zb(t);c.then(k=>{n[k.measurementId]=k.appId,t.options.measurementId&&k.measurementId!==t.options.measurementId&&At.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${k.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(k=>At.error(k)),e.push(c);const h=qb().then(k=>{if(k)return r.getId()}),[p,m]=await Promise.all([c,h]);Lb(s)||Nb(s,p.measurementId),i("js",new Date);const v=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return v[Sb]="firebase",v.update=!0,m!=null&&(v[xb]=m),i("config",p.measurementId,v),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.app=e}_delete(){return delete po[this.app.options.appId],Promise.resolve()}}let po={},iy=[];const sy={};let Hu="dataLayer",Yb="gtag",oy,X_,ay=!1;function Jb(){const t=[];if(z0()&&t.push("This is a browser extension environment."),$S()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ft.create("invalid-analytics-context",{errorInfo:e});At.warn(n.message)}}function Xb(t,e,n){Jb();const r=t.options.appId;if(!r)throw Ft.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)At.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ft.create("no-api-key");if(po[r]!=null)throw Ft.create("already-exists",{id:r});if(!ay){bb(Hu);const{wrappedGtag:s,gtagCore:o}=jb(po,iy,sy,Hu,Yb);X_=s,oy=o,ay=!0}return po[r]=Kb(t,iy,sy,e,oy,Hu,n),new Qb(t)}function Zb(t=ff()){t=kt(t);const e=yi(t,cc);return e.isInitialized()?e.getImmediate():eP(t)}function eP(t,e={}){const n=yi(t,cc);if(n.isInitialized()){const i=n.getImmediate();if(Po(e,n.getOptions()))return i;throw Ft.create("already-initialized")}return n.initialize({options:e})}function tP(t,e,n,r){t=kt(t),Gb(X_,po[t.app.options.appId],e,n,r).catch(i=>At.error(i))}const ly="@firebase/analytics",cy="0.10.8";function nP(){kn(new gn(cc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Xb(r,i,n)},"PUBLIC")),kn(new gn("analytics-internal",t,"PRIVATE")),Yt(ly,cy),Yt(ly,cy,"esm2017");function t(e){try{const n=e.getProvider(cc).getImmediate();return{logEvent:(r,i,s)=>tP(n,r,i,s)}}catch(n){throw Ft.create("interop-component-reg-failed",{reason:n})}}}nP();const rP={apiKey:"AIzaSyCIqpOl5nT3VH149xISPqyLgkjyIiMWPb8",authDomain:"flinx-8a05e.firebaseapp.com",projectId:"flinx-8a05e",storageBucket:"flinx-8a05e.firebasestorage.app",messagingSenderId:"977393893446",appId:"1:977393893446:web:308db5f232f7c5558cca47",measurementId:"G-N0LW13KMNJ"},qf=K0(rP);let iP;if(typeof window<"u")try{iP=Zb(qf)}catch{console.log("Analytics initialization skipped (local development)")}const zo=sA(qf),sP=xN(qf),Kf=new Bn;Kf.addScope("profile");Kf.addScope("email");Kf.addScope("openid");const $o=new Un,Z_="863917229498555";console.log(" Configuring Facebook Auth Provider:");console.log("   - App ID:",Z_);console.log("   - Redirect URL:","https://flinx-8a05e.firebaseapp.com/__/auth/handler");$o.setCustomParameters({app_id:Z_,display:"popup",auth_type:"rerequest",scope:"public_profile,email"});$o.addScope("public_profile");$o.addScope("email");console.log(" Facebook Auth Provider initialized with:");console.log("   - Public Profile scope: ");console.log("   - Email scope: ");console.log("   - Web OAuth redirect enabled: ");const eE=async(t,e)=>{var o,l,c;console.log(` Processing ${e} login for user:`,t.email);let n=null;e==="facebook"&&((o=t.providerData[0])!=null&&o.uid)&&(n=t.providerData[0].uid);const r={uid:t.uid,email:t.email,name:t.displayName||"User",picture:t.photoURL||null,authProvider:e,googleId:e==="google"?(l=t.providerData[0])==null?void 0:l.uid:null,facebookId:e==="facebook"?n:null,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};console.log(" User info extracted:",{email:r.email,name:r.name,authProvider:r.authProvider});try{const h=await t.getIdToken();localStorage.setItem("idToken",h),console.log(" Firebase ID token stored for Socket.IO")}catch(h){console.error(" Failed to get Firebase ID token:",h)}try{const p=await fetch("https://flinxx-backend.onrender.com/api/users/save",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({uid:t.uid,email:t.email,displayName:t.displayName||"User",photoURL:t.photoURL||null,authProvider:e})});if(!p.ok)throw new Error(`Failed to save user: ${p.status}`);const m=await p.json();console.log(" User saved to Neon PostgreSQL:",m.user),m.user&&(r.profileCompleted=m.user.profileCompleted,r.isProfileCompleted=m.user.profileCompleted,r.id=m.user.id,console.log("[FIREBASE]  Updated userInfo with profileCompleted:",m.user.profileCompleted)),localStorage.setItem("dbUserId",m.user.id)}catch(h){console.error(" Error saving user to backend database:",h)}try{await LN(IN(sP,"users",t.uid),{email:t.email,displayName:t.displayName,photoURL:t.photoURL,authProvider:e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()},{merge:!0}),console.log(" User saved to Firestore")}catch(h){console.error(" Error saving user to Firestore:",h)}console.log(`
 [firebase] handleLoginSuccess storing to localStorage`),console.log(" [firebase]   - userInfo.profileCompleted =",r.profileCompleted),console.log(" [firebase]   - userInfo.isProfileCompleted =",r.isProfileCompleted);const i={id:r.id,uid:r.uid,name:t.displayName,email:t.email,picture:t.photoURL,googleId:e==="google"?(c=t.providerData[0])==null?void 0:c.uid:null,facebookId:e==="facebook"?n:null,profileCompleted:r.profileCompleted||!1,isProfileCompleted:r.profileCompleted||!1,authProvider:e};console.log(" [firebase] userToStore object:",i),localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("authProvider",e),localStorage.setItem("userInfo",JSON.stringify(r)),console.log(" [firebase]  Stored to localStorage, verifying...");const s=JSON.parse(localStorage.getItem("user"));return console.log(" [firebase]   - Verified profileCompleted:",s.profileCompleted),console.log(" [firebase]  User data stored in localStorage with profileCompleted:",r.profileCompleted||!1),r},oP=async()=>{var t;try{console.log(" Starting Facebook login via popup...");const e=await fR(zo,$o);console.log(" Facebook popup login successful:",e.user.email);const n=(t=e.user.providerData[0])==null?void 0:t.providerId;let r="facebook";return n==="facebook.com"&&(r="facebook"),eE(e.user,r)}catch(e){console.warn(" Facebook popup login failed, trying redirect method:",e.code);try{return console.log(" Starting Facebook login via redirect..."),await wR(zo,$o),null}catch(n){throw console.error(" Facebook login failed:",n),n}}},aP=async()=>{var t;try{const e=await ER(zo);if(e!=null&&e.user){console.log(" Redirect login successful:",e.user.email);const n=(t=e.user.providerData[0])==null?void 0:t.providerId;console.log("Provider:",n);let r="unknown";return n==="google.com"?r="google":n==="facebook.com"&&(r="facebook"),eE(e.user,r)}}catch(e){console.error("Redirect result error:",e),e.code==="auth/account-exists-with-different-credential"?console.error("Account exists with different credential"):e.code==="auth/auth-domain-config-required"&&console.error("Auth domain config required")}return null},ws=O.createContext(),lP=({children:t})=>{const[e,n]=O.useState(null),[r,i]=O.useState(!0),[s,o]=O.useState(!1),[l,c]=O.useState(!1);O.useEffect(()=>{(async()=>{try{console.log(`

 [AuthContext] `),console.log(" [AuthContext] INITIALIZATION STARTED"),console.log(" [AuthContext] ");const v=localStorage.getItem("token"),k=localStorage.getItem("user");if(console.log(" [AuthContext] STEP 1: Check localStorage"),console.log(" [AuthContext]   - token:",v?" Found":" Not found"),console.log(" [AuthContext]   - user:",k?" Found":" Not found"),v&&k)try{console.log(`
 [AuthContext] STEP 2: Parse localStorage user`);const x=JSON.parse(k);console.log(" [AuthContext]   - Parsed user email:",x.email),console.log(" [AuthContext]   - profileCompleted from localStorage:",x.profileCompleted,"(type:",typeof x.profileCompleted+")"),console.log(" [AuthContext]  Attempting to restore Google OAuth user from localStorage:",x.email),console.log(" [AuthContext] User data from localStorage:",{id:x.id,email:x.email,profileCompleted:x.profileCompleted,isProfileCompleted:x.isProfileCompleted});const A="https://flinxx-backend.onrender.com";console.log(`
 [AuthContext] STEP 3: Validate token with backend`),console.log(" [AuthContext]   - Backend URL:",A),console.log(" [AuthContext]   - Making request to /api/profile...");const w=await fetch(`${A}/api/profile`,{method:"GET",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(console.log(" [AuthContext]   - Response status:",w.status),w.ok){const _=await w.json();if(console.log(" [AuthContext]   - Response OK, parsing data..."),console.log(" [AuthContext]   - data.success:",_.success),console.log(" [AuthContext]   - data.user available:",!!_.user),_.success&&_.user){console.log(" [AuthContext]  Token validated, user restored from backend"),console.log(" [AuthContext] Backend user data:",{id:_.user.id,email:_.user.email,profileCompleted:_.user.profileCompleted,birthday:_.user.birthday,gender:_.user.gender}),console.log(" [AuthContext] Setting user state with:",{email:_.user.email,profileCompleted:_.user.profileCompleted}),n(_.user),o(!0),i(!1),console.log(" [AuthContext]  COMPLETE - Returning from token validation path");return}else console.log(" [AuthContext]   Response OK but data.success or data.user missing")}else{console.log(" [AuthContext]  Token validation response not OK:",w.status);const _=await w.text();console.log(" [AuthContext] Error response:",_)}}catch(x){console.error(" [AuthContext]  Error validating token:",x)}else console.log(`
 [AuthContext] STEP 2: Skip token validation (missing token or user)`),console.log(" [AuthContext]   - Skipping /api/profile call");if(k)try{console.log(`
 [AuthContext] STEP 3: Restore from localStorage (no token validation)`);const x=JSON.parse(k);console.log(" [AuthContext]   - Email:",x.email),console.log(" [AuthContext]   - profileCompleted:",x.profileCompleted,"(type:",typeof x.profileCompleted+")"),console.log(" [AuthContext]  User loaded from localStorage (no token validation):",x.email),console.log(" [AuthContext] User data from localStorage:",{id:x.id,email:x.email,profileCompleted:x.profileCompleted,isProfileCompleted:x.isProfileCompleted}),console.log(" [AuthContext] Setting user state with profileCompleted:",x.profileCompleted),n(x),o(!0),i(!1),console.log(" [AuthContext]  COMPLETE - Returning from localStorage fallback path");return}catch(x){console.error("[AuthContext] Error parsing saved user:",x)}return console.log(`
 [AuthContext] STEP 3: No stored token or user, checking Firebase...`),GC(zo,async x=>{var A,w;if(console.log(`
 [AuthContext] Firebase onAuthStateChanged fired`),console.log(" [AuthContext]   - firebaseUser:",x?x.email:"null"),x){const _=((A=x.providerData[0])==null?void 0:A.providerId)||"unknown";console.log(" [AuthContext] User authenticated via Firebase"),console.log(" [AuthContext]   - Email:",x.email),console.log(" [AuthContext]   - Provider:",_);try{console.log(" [AuthContext] Getting Firebase ID token...");const D=await x.getIdToken();console.log(" [AuthContext]  ID token obtained"),localStorage.setItem("idToken",D),console.log(" Firebase ID token stored for Socket.IO");const L="https://flinxx-backend.onrender.com";console.log(" [AuthContext] Calling /api/profile with ID token...");const F=await fetch(`${L}/api/profile`,{method:"GET",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}});if(console.log(" [AuthContext] /api/profile response status:",F.status),F.ok){const E=await F.json();if(console.log(" [AuthContext] /api/profile response OK"),console.log(" [AuthContext]   - success:",E.success),console.log(" [AuthContext]   - user.profileCompleted:",(w=E.user)==null?void 0:w.profileCompleted),E.success&&E.user){console.log(" [AuthContext]  Fetched full user profile from database:",{email:E.user.email,profileCompleted:E.user.profileCompleted}),console.log(" [AuthContext] Setting user state with profileCompleted:",E.user.profileCompleted),n(E.user),o(!0),i(!1);return}}else console.log(" [AuthContext]  /api/profile response not OK:",F.status)}catch(D){console.warn("[AuthContext]  Failed to fetch profile from database:",D)}const S={uid:x.uid,email:x.email,displayName:x.displayName,photoURL:x.photoURL,authProvider:_,profileCompleted:!1};console.log("[AuthContext] Using fallback userInfo (database fetch failed):",S.email),console.log("[AuthContext]  WARNING: profileCompleted not loaded from database, defaulting to false"),n(S),o(!0),localStorage.setItem("userInfo",JSON.stringify(S)),localStorage.setItem("authProvider",_)}else{console.log(" [AuthContext] Firebase user is null/logged out");const _=localStorage.getItem("authToken"),S=localStorage.getItem("authProvider");if(console.log(" [AuthContext]   - authToken:",_?"Found":"Not found"),console.log(" [AuthContext]   - authProvider:",S),_&&S==="guest"){const D=JSON.parse(localStorage.getItem("userInfo")||"{}");console.log(" [AuthContext] Restoring guest login"),n(D),o(!0)}else console.log(" [AuthContext]  No authentication found, user will be redirected to login"),n(null),o(!1)}console.log(" [AuthContext] "),console.log(" [AuthContext] INITIALIZATION COMPLETE - Setting isLoading=false"),console.log(` [AuthContext] 
`),i(!1)})}catch(v){console.error("[AuthContext] Error initializing auth:",v),i(!1)}})()},[]);const h=()=>{n(null),o(!1),localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),localStorage.removeItem("authProvider"),localStorage.removeItem("token"),localStorage.removeItem("user")},p=(m,v)=>{console.log("[AuthContext] Storing token and user data:",v==null?void 0:v.email),localStorage.setItem("token",m),localStorage.setItem("user",JSON.stringify(v)),localStorage.setItem("authProvider","google"),n(v),o(!0)};return u.jsx(ws.Provider,{value:{user:e,isAuthenticated:s,isLoading:r,logout:h,authPending:l,setAuthPending:c,setAuthToken:p},children:t})};class cP extends qo.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){var e;return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-bold text-red-500 mb-4",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-300 mb-8",children:(e=this.state.error)==null?void 0:e.message}),u.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg font-semibold text-white",children:"Reload Page"})]})}):this.props.children}}/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wo(){return Wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wo.apply(this,arguments)}var gr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gr||(gr={}));const uy="popstate";function uP(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return lh("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:tE(i)}return hP(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dP(){return Math.random().toString(36).substr(2,8)}function dy(t,e){return{usr:t.state,key:t.key,idx:e}}function lh(t,e,n,r){return n===void 0&&(n=null),Wo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_s(e):e,{state:n,key:e&&e.key||r||dP()})}function tE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _s(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function hP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=gr.Pop,c=null,h=p();h==null&&(h=0,o.replaceState(Wo({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=gr.Pop;let A=p(),w=A==null?null:A-h;h=A,c&&c({action:l,location:x.location,delta:w})}function v(A,w){l=gr.Push;let _=lh(x.location,A,w);h=p()+1;let S=dy(_,h),D=x.createHref(_);try{o.pushState(S,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(D)}s&&c&&c({action:l,location:x.location,delta:1})}function k(A,w){l=gr.Replace;let _=lh(x.location,A,w);h=p();let S=dy(_,h),D=x.createHref(_);o.replaceState(S,"",D),s&&c&&c({action:l,location:x.location,delta:0})}function N(A){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof A=="string"?A:tE(A);return _=_.replace(/ $/,"%20"),qe(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let x={get action(){return l},get location(){return t(i,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(uy,m),c=A,()=>{i.removeEventListener(uy,m),c=null}},createHref(A){return e(i,A)},createURL:N,encodeLocation(A){let w=N(A);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:k,go(A){return o.go(A)}};return x}var hy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hy||(hy={}));function fP(t,e,n){return n===void 0&&(n="/"),pP(t,e,n)}function pP(t,e,n,r){let i=typeof e=="string"?_s(e):e,s=iE(i.pathname||"/",n);if(s==null)return null;let o=nE(t);mP(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let h=RP(s);l=SP(o[c],h)}return l}function nE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(qe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=ni([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),nE(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:IP(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of rE(s.path))i(s,o,c)}),e}function rE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=rE(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function mP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gP=/^:[\w-]+$/,yP=3,vP=2,wP=1,_P=10,EP=-2,fy=t=>t==="*";function IP(t,e){let n=t.split("/"),r=n.length;return n.some(fy)&&(r+=EP),e&&(r+=vP),n.filter(i=>!fy(i)).reduce((i,s)=>i+(gP.test(s)?yP:s===""?wP:_P),r)}function xP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function SP(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=TP({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),v=c.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:ni([s,m.pathname]),pathnameBase:DP(ni([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=ni([s,m.pathnameBase]))}return o}function TP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:v,isOptional:k}=p;if(v==="*"){let x=l[m]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const N=l[m];return k&&!N?h[v]=void 0:h[v]=(N||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function CP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function RP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function iE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const AP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kP=t=>AP.test(t);function NP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?_s(t):t,s;if(n)if(kP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Qf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=py(n.substring(1),"/"):s=py(n,e)}else s=e;return{pathname:s,search:jP(r),hash:LP(i)}}function py(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Gu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function PP(t,e){let n=bP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function OP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=_s(t):(i=Wo({},t),qe(!i.pathname||!i.pathname.includes("?"),Gu("?","pathname","search",i)),qe(!i.pathname||!i.pathname.includes("#"),Gu("#","pathname","hash",i)),qe(!i.search||!i.search.includes("#"),Gu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}l=m>=0?e[m]:"/"}let c=NP(i,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const ni=t=>t.join("/").replace(/\/\/+/g,"/"),DP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sE=["post","put","patch","delete"];new Set(sE);const FP=["get",...sE];new Set(FP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ho(){return Ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ho.apply(this,arguments)}const Yf=O.createContext(null),VP=O.createContext(null),Bc=O.createContext(null),zc=O.createContext(null),Es=O.createContext({outlet:null,matches:[],isDataRoute:!1}),oE=O.createContext(null);function $c(){return O.useContext(zc)!=null}function Wc(){return $c()||qe(!1),O.useContext(zc).location}function aE(t){O.useContext(Bc).static||O.useLayoutEffect(t)}function vn(){let{isDataRoute:t}=O.useContext(Es);return t?XP():UP()}function UP(){$c()||qe(!1);let t=O.useContext(Yf),{basename:e,future:n,navigator:r}=O.useContext(Bc),{matches:i}=O.useContext(Es),{pathname:s}=Wc(),o=JSON.stringify(PP(i,n.v7_relativeSplatPath)),l=O.useRef(!1);return aE(()=>{l.current=!0}),O.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=OP(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ni([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,s,t])}function BP(t,e){return zP(t,e)}function zP(t,e,n,r){$c()||qe(!1);let{navigator:i}=O.useContext(Bc),{matches:s}=O.useContext(Es),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Wc(),p;if(e){var m;let A=typeof e=="string"?_s(e):e;c==="/"||(m=A.pathname)!=null&&m.startsWith(c)||qe(!1),p=A}else p=h;let v=p.pathname||"/",k=v;if(c!=="/"){let A=c.replace(/^\//,"").split("/");k="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let N=fP(t,{pathname:k}),x=qP(N&&N.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:ni([c,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:ni([c,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,n,r);return e&&x?O.createElement(zc.Provider,{value:{location:Ho({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:gr.Pop}},x):x}function $P(){let t=JP(),e=MP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const WP=O.createElement($P,null);class HP extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Es.Provider,{value:this.props.routeContext},O.createElement(oE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GP(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(Yf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Es.Provider,{value:e},r)}function qP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||qe(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:v,errors:k}=n,N=m.route.loader&&v[m.route.id]===void 0&&(!k||k[m.route.id]===void 0);if(m.route.lazy||N){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,v)=>{let k,N=!1,x=null,A=null;n&&(k=l&&m.route.id?l[m.route.id]:void 0,x=m.route.errorElement||WP,c&&(h<0&&v===0?(ZP("route-fallback"),N=!0,A=null):h===v&&(N=!0,A=m.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,v+1)),_=()=>{let S;return k?S=x:N?S=A:m.route.Component?S=O.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=p,O.createElement(GP,{match:m,routeContext:{outlet:p,matches:w,isDataRoute:n!=null},children:S})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?O.createElement(HP,{location:n.location,revalidation:n.revalidation,component:x,error:k,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var lE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lE||{}),cE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(cE||{});function KP(t){let e=O.useContext(Yf);return e||qe(!1),e}function QP(t){let e=O.useContext(VP);return e||qe(!1),e}function YP(t){let e=O.useContext(Es);return e||qe(!1),e}function uE(t){let e=YP(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function JP(){var t;let e=O.useContext(oE),n=QP(),r=uE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function XP(){let{router:t}=KP(lE.UseNavigateStable),e=uE(cE.UseNavigateStable),n=O.useRef(!1);return aE(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ho({fromRouteId:e},s)))},[t,e])}const my={};function ZP(t,e,n){my[t]||(my[t]=!0)}function e1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Mn(t){qe(!1)}function t1(t){let{basename:e="/",children:n=null,location:r,navigationType:i=gr.Pop,navigator:s,static:o=!1,future:l}=t;$c()&&qe(!1);let c=e.replace(/^\/*/,"/"),h=O.useMemo(()=>({basename:c,navigator:s,static:o,future:Ho({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=_s(r));let{pathname:p="/",search:m="",hash:v="",state:k=null,key:N="default"}=r,x=O.useMemo(()=>{let A=iE(p,c);return A==null?null:{location:{pathname:A,search:m,hash:v,state:k,key:N},navigationType:i}},[c,p,m,v,k,N,i]);return x==null?null:O.createElement(Bc.Provider,{value:h},O.createElement(zc.Provider,{children:n,value:x}))}function n1(t){let{children:e,location:n}=t;return BP(ch(e),n)}new Promise(()=>{});function ch(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,ch(r.props.children,s));return}r.type!==Mn&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ch(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function r1(t,e){let n=uh(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const i1="6";try{window.__reactRouterVersion=i1}catch{}const s1="startTransition",gy=hI[s1];function o1(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=uP({window:i,v5Compat:!0}));let o=s.current,[l,c]=O.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},p=O.useCallback(m=>{h&&gy?gy(()=>c(m)):c(m)},[c,h]);return O.useLayoutEffect(()=>o.listen(p),[o,p]),O.useEffect(()=>e1(r),[r]),O.createElement(t1,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var yy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(yy||(yy={}));var vy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vy||(vy={}));function dE(t){let e=O.useRef(uh(t)),n=O.useRef(!1),r=Wc(),i=O.useMemo(()=>r1(r.search,n.current?null:e.current),[r.search]),s=vn(),o=O.useCallback((l,c)=>{const h=uh(typeof l=="function"?l(i):l);n.current=!0,s("?"+h,c)},[s,i]);return[i,o]}const a1="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMjgwIDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8IS0tIFB1cnBsZSBSb3VuZGVkLVNxdWFyZSBJY29uIChleGFjdCBmcm9tIGJyYW5kaW5nKSAtLT4NCiAgPGc+DQogICAgPCEtLSBHcmFkaWVudCBkZWZpbml0aW9ucyAtLT4NCiAgICA8ZGVmcz4NCiAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icHVycGxlR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPg0KICAgICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojOUQ0RUREO3N0b3Atb3BhY2l0eToxIiAvPg0KICAgICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3MjA5Qjc7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgDQogICAgICA8bGluZWFyR3JhZGllbnQgaWQ9Imdsb3dHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+DQogICAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDA7c3RvcC1vcGFjaXR5OjAuOCIgLz4NCiAgICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZBNTAwO3N0b3Atb3BhY2l0eTowLjQiIC8+DQogICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgDQogICAgICA8ZmlsdGVyIGlkPSJwcmVtaXVtU2hhZG93Ij4NCiAgICAgICAgPGZlRHJvcFNoYWRvdyBkeD0iMCIgZHk9IjQiIHN0ZERldmlhdGlvbj0iNiIgZmxvb2Qtb3BhY2l0eT0iMC4zNSIvPg0KICAgICAgPC9maWx0ZXI+DQogICAgPC9kZWZzPg0KICAgIA0KICAgIDwhLS0gR29sZGVuIGdsb3cvaGFsbyBiZWhpbmQgaWNvbiAtLT4NCiAgICA8Y2lyY2xlIGN4PSIzNiIgY3k9IjM2IiByPSIzNCIgZmlsbD0idXJsKCNnbG93R3JhZGllbnQpIiBvcGFjaXR5PSIwLjUiLz4NCiAgICANCiAgICA8IS0tIE1haW4gcHVycGxlIHJvdW5kZWQtc3F1YXJlIGJhY2tncm91bmQgLS0+DQogICAgPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iMTYiIGZpbGw9InVybCgjcHVycGxlR3JhZGllbnQpIiBmaWx0ZXI9InVybCgjcHJlbWl1bVNoYWRvdykiLz4NCiAgICANCiAgICA8IS0tIENhbWVyYSBib2R5ICh3aGl0ZSBvdXRsaW5lIHN0eWxlKSAtLT4NCiAgICA8cmVjdCB4PSIxNiIgeT0iMjIiIHdpZHRoPSIyNCIgaGVpZ2h0PSIxOCIgcng9IjIiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMi41Ii8+DQogICAgDQogICAgPCEtLSBDYW1lcmEgbGVucyAoY2lyY3VsYXIpIC0tPg0KICAgIDxjaXJjbGUgY3g9IjQ0IiBjeT0iMzEiIHI9IjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxjaXJjbGUgY3g9IjQ0IiBjeT0iMzEiIHI9IjMuNSIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuNSIvPg0KICAgIA0KICAgIDwhLS0gTGlnaHRuaW5nIGJvbHQgYWNjZW50ICh0b3AgcmlnaHQpIC0tPg0KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ2LCAxMCkiPg0KICAgICAgPCEtLSBNYWluIGxpZ2h0bmluZyBzaGFwZSAtLT4NCiAgICAgIDxwYXRoIGQ9Ik0gNiAwIEwgMiA2IEwgNiA2IEwgMCAxNCBMIDggOCBMIDQgOCBaIiBmaWxsPSIjRkZENzAwIiBzdHJva2U9IiNGRjhBMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogICAgICA8IS0tIElubmVyIGhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgICA8cGF0aCBkPSJNIDQgMSBMIDMgNCBMIDUgNCBMIDEgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRUIzQiIgc3Ryb2tlLXdpZHRoPSIwLjgiIG9wYWNpdHk9IjAuNyIvPg0KICAgIDwvZz4NCiAgICANCiAgICA8IS0tIEdvbGRlbiBzcGFya2xlIGFjY2VudHMgLS0+DQogICAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMS41IiBmaWxsPSIjRkZENzAwIiBvcGFjaXR5PSIwLjkiLz4NCiAgICA8Y2lyY2xlIGN4PSI1OCIgY3k9IjE4IiByPSIxLjUiIGZpbGw9IiNGRkQ3MDAiIG9wYWNpdHk9IjAuOCIvPg0KICAgIDxjaXJjbGUgY3g9IjE2IiBjeT0iNTYiIHI9IjEiIGZpbGw9IiNGRkIzMUEiIG9wYWNpdHk9IjAuNyIvPg0KICA8L2c+DQogIA0KICA8IS0tIEZMSU5YWCBUZXh0IC0tPg0KICA8dGV4dCB4PSI4MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSI0MiIgZm9udC13ZWlnaHQ9IjkwMCIgZmlsbD0idXJsKCN0ZXh0R3JhZGllbnQpIiBsZXR0ZXItc3BhY2luZz0iMSI+DQogICAgRkxJTlhYDQogIDwvdGV4dD4NCiAgDQogIDwhLS0gVGV4dCBHcmFkaWVudCAtLT4NCiAgPGRlZnM+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJ0ZXh0R3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDA7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQjMxQTtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGOEEwMDtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICA8L2xpbmVhckdyYWRpZW50Pg0KICA8L2RlZnM+DQo8L3N2Zz4NCg==",l1=()=>{const t=vn(),[e,n]=O.useState(!1),r=()=>{n(!0),setTimeout(()=>{t("/login")},500)};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-4 flex justify-between items-center max-w-full",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:a1,alt:"Flinxx",className:"h-12",style:{width:"auto"}}),u.jsx("span",{className:"text-sm text-white/90 ml-2",children:" 3,247 online"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:r,className:"text-white font-bold px-6 py-2 rounded-lg transition transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 20px rgba(255, 139, 0, 0.3)"},onMouseEnter:i=>i.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)",onMouseLeave:i=>i.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)",children:"Start Now"})})]})}),u.jsx("div",{className:"relative z-10 min-h-[500px] flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"text-center max-w-3xl",children:[u.jsxs("h1",{className:"text-6xl md:text-7xl font-black text-white mb-6 leading-tight",children:["Meet New People",u.jsx("br",{}),"Around the World"]}),u.jsx("p",{className:"text-xl text-white/90 mb-10",children:"Connect instantly with strangers through video chat"}),u.jsx("button",{onClick:r,disabled:e,className:`inline-flex items-center gap-2 px-8 py-4 text-lg font-bold rounded-lg transition-all transform hover:scale-105 mb-12 ${e?"cursor-not-allowed text-gray-700":"text-white"}`,style:e?{backgroundColor:"#9CA3AF"}:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 30px rgba(255, 139, 0, 0.4)"},onMouseEnter:i=>!e&&(i.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)"),onMouseLeave:i=>!e&&(i.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)"),children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""})," Starting Chat..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Start Chatting Now"]})}),u.jsx("p",{className:"text-white/80 text-sm",children:"Fast, simple video chats  Real users, real time"})]})}),u.jsx("div",{className:"relative z-10 px-4 py-16 bg-gradient-to-b from-transparent via-purple-600/50 to-purple-700",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0 shadow-lg",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Instant Connection"}),u.jsx("p",{className:"text-white/80 text-base",children:"Connect with random strangers in seconds. No waiting, no hassle."})]})]})}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-pink-400 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Global Community"}),u.jsx("p",{className:"text-white/80 text-base",children:"Meet people from all over the world. Make international friends."})]})]})}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-cyan-400 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Safe & Verified"}),u.jsx("p",{className:"text-white/80 text-base",children:"Verified users, moderated content, and privacy protection."})]})]})})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-b from-purple-700 via-purple-600 to-purple-500",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-black text-white text-center mb-16",children:"How It Works"}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"1"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Sign Up"}),u.jsx("p",{className:"text-white/80 text-base",children:"Create your free account in seconds"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"2"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Start Video Chat"}),u.jsx("p",{className:"text-white/80 text-base",children:"Get matched with random strangers instantly"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"3"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Make Friends"}),u.jsx("p",{className:"text-white/80 text-base",children:"Chat, connect, and meet awesome people"})]})]})})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-b from-purple-500 via-purple-600 to-purple-700",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-black text-white text-center mb-16",children:"Smart Matching Features"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-3xl mb-6 shadow-lg",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"One-Click Connect"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Connect with strangers instantly with just one click. No complicated setup needed."}),u.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-200 px-4 py-1 rounded-full text-sm font-semibold",children:"Free"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-3xl mb-6 shadow-lg",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"Auto-Matching"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Our intelligent algorithm matches you with compatible users based on interests and preferences."}),u.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-200 px-4 py-1 rounded-full text-sm font-semibold",children:"Free"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all md:col-span-2",children:[u.jsx("div",{className:"w-14 h-14 bg-purple-400 rounded-xl flex items-center justify-center text-3xl mb-6",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"Gender Preference Filter"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Fine-tune your matching experience with optional gender preferences. Available in Premium."}),u.jsx("div",{className:"inline-block bg-purple-400/30 text-purple-200 px-4 py-1 rounded-full text-sm font-semibold border border-purple-400/50",children:" Premium Feature"})]})]})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:u.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[u.jsx("h2",{className:"text-5xl md:text-6xl font-black text-white mb-6",children:"Ready to Meet New People?"}),u.jsx("p",{className:"text-xl text-white/90 mb-10",children:"Join thousands of users connecting right now"}),u.jsx("button",{onClick:r,disabled:e,className:`inline-flex items-center gap-3 px-10 py-4 text-xl font-bold rounded-lg transition-all transform hover:scale-105 ${e?"cursor-not-allowed text-gray-700":"text-white"}`,style:e?{backgroundColor:"#9CA3AF"}:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 30px rgba(255, 139, 0, 0.4)"},onMouseEnter:i=>!e&&(i.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)"),onMouseLeave:i=>!e&&(i.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)"),children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""})," Starting Chat..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Get Started Free"]})})]})})]})};class c1 extends Error{}c1.prototype.name="InvalidTokenError";const Jf="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Orange%20gradient%20background%20--%3e%3crect%20width='40'%20height='40'%20rx='8'%20fill='url(%23gradient)'%20/%3e%3c!--%20Video%20camera%20icon%20--%3e%3cg%20transform='translate(8,%208)'%3e%3c!--%20Camera%20body%20--%3e%3crect%20x='1'%20y='6'%20width='16'%20height='12'%20rx='1'%20fill='white'%20stroke='white'%20stroke-width='0.5'/%3e%3c!--%20Camera%20lens%20--%3e%3ccircle%20cx='17'%20cy='12'%20r='4'%20fill='none'%20stroke='white'%20stroke-width='1'/%3e%3ccircle%20cx='17'%20cy='12'%20r='2.5'%20fill='white'%20opacity='0.8'/%3e%3c!--%20Recording%20indicator%20dot%20--%3e%3ccircle%20cx='3'%20cy='3'%20r='1.5'%20fill='%23FF4444'/%3e%3c/g%3e%3c!--%20Gradient%20definition%20--%3e%3cdefs%3e%3clinearGradient%20id='gradient'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%23FF8C42;stop-opacity:1'%20/%3e%3cstop%20offset='100%25'%20style='stop-color:%23FF6B35;stop-opacity:1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",u1="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%3e%3cpath%20fill='%234285F4'%20d='M22.56%2012.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26%201.37-1.04%202.53-2.21%203.31v2.77h3.57c2.08-1.92%203.28-4.74%203.28-8.09z'/%3e%3cpath%20fill='%2334A853'%20d='M12%2023c2.97%200%205.46-.98%207.28-2.66l-3.57-2.77c-.98.66-2.23%201.06-3.71%201.06-2.86%200-5.29-1.93-6.16-4.53H2.18v2.84C3.99%2020.53%207.7%2023%2012%2023z'/%3e%3cpath%20fill='%23FBBC05'%20d='M5.84%2014.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43%208.55%201%2010.22%201%2012s.43%203.45%201.18%204.93l2.85-2.22.81-.62z'/%3e%3cpath%20fill='%23EA4335'%20d='M12%205.38c1.62%200%203.06.56%204.21%201.64l3.15-3.15C17.45%202.09%2014.97%201%2012%201%207.7%201%203.99%203.47%202.18%207.07l3.66%202.84c.87-2.6%203.3-4.53%206.16-4.53z'/%3e%3c/svg%3e",d1=({isSigningIn:t})=>{const e=()=>{const n="https://flinxx-backend.onrender.com";console.log(" Redirecting to Google OAuth:",`${n}/auth/google`),window.location.href=`${n}/auth/google`};return u.jsxs("button",{onClick:e,disabled:t,className:`w-full py-3 px-6 rounded-full transition-all text-lg font-bold flex items-center justify-center gap-3 ${t?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-white hover:bg-gray-50 text-black shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:[u.jsx("img",{src:u1,alt:"Google",className:"w-6 h-6"}),"Continue with Google"]})},h1=()=>{const t=vn(),[e,n]=O.useState(!1),[r,i]=O.useState(null);O.useEffect(()=>{(async()=>{try{const l=await aP();l&&(console.log(" Login successful:",l.email),t("/chat"))}catch(l){console.error(" Login check failed:",l)}})()},[t]);const s=async()=>{n(!0),i(null);try{console.log(" Starting Facebook login..."),console.log("Facebook App ID:","863917229498555"),console.log("Redirect URL:","https://flinx-8a05e.firebaseapp.com/__/auth/handler"),await oP()}catch(o){console.error(" Facebook login error:",o),i("Facebook login failed. Please try again."),n(!1)}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"Welcome to Flinxx"}),u.jsx("p",{className:"text-lg text-white/80",children:"Connect with strangers instantly"}),u.jsx("p",{className:"text-sm text-white/70 mt-2",children:"Sign up to get started"})]}),r&&u.jsx("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg",children:u.jsx("p",{className:"text-red-200 text-sm",children:r})}),u.jsxs("div",{className:"space-y-4",children:[e&&u.jsxs("button",{disabled:!0,className:"w-full bg-gray-400 cursor-not-allowed text-gray-700 font-bold py-3 px-6 rounded-full transition-all text-lg flex items-center justify-center gap-2",children:[u.jsx("span",{className:"animate-spin",children:""})," Signing in..."]}),u.jsx(d1,{isSigningIn:e}),u.jsxs("button",{onClick:s,disabled:e,className:`w-full py-3 px-6 rounded-full transition-all text-lg font-bold flex items-center justify-center gap-3 ${e?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:[u.jsx("span",{className:"text-xl",children:"f"})," Continue with Facebook"]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsxs("p",{className:"text-xs text-white/60",children:["By signing in, you agree to our"," ",u.jsx("a",{href:"#",className:"text-white/80 hover:text-white underline",children:"Terms of Service"})," ","and"," ",u.jsx("a",{href:"#",className:"text-white/80 hover:text-white underline",children:"Privacy Policy"})]})}),u.jsxs("div",{className:"mt-10 flex flex-col items-center gap-3 text-white/80 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"Instant connection with strangers"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"100% Anonymous & Safe"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"High-quality Video Chat"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"Connect Worldwide"})]})]})]})})},On=Object.create(null);On.open="0";On.close="1";On.ping="2";On.pong="3";On.message="4";On.upgrade="5";On.noop="6";const ml=Object.create(null);Object.keys(On).forEach(t=>{ml[On[t]]=t});const dh={type:"error",data:"parser error"},hE=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",fE=typeof ArrayBuffer=="function",pE=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Xf=({type:t,data:e},n,r)=>hE&&e instanceof Blob?n?r(e):wy(e,r):fE&&(e instanceof ArrayBuffer||pE(e))?n?r(e):wy(new Blob([e]),r):r(On[t]+(e||"")),wy=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function _y(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let qu;function f1(t,e){if(hE&&t.data instanceof Blob)return t.data.arrayBuffer().then(_y).then(e);if(fE&&(t.data instanceof ArrayBuffer||pE(t.data)))return e(_y(t.data));Xf(t,!1,n=>{qu||(qu=new TextEncoder),e(qu.encode(n))})}const Ey="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ey.length;t++)Xs[Ey.charCodeAt(t)]=t;const p1=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),p=new Uint8Array(h);for(r=0;r<n;r+=4)s=Xs[t.charCodeAt(r)],o=Xs[t.charCodeAt(r+1)],l=Xs[t.charCodeAt(r+2)],c=Xs[t.charCodeAt(r+3)],p[i++]=s<<2|o>>4,p[i++]=(o&15)<<4|l>>2,p[i++]=(l&3)<<6|c&63;return h},m1=typeof ArrayBuffer=="function",Zf=(t,e)=>{if(typeof t!="string")return{type:"message",data:mE(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:g1(t.substring(1),e)}:ml[n]?t.length>1?{type:ml[n],data:t.substring(1)}:{type:ml[n]}:dh},g1=(t,e)=>{if(m1){const n=p1(t);return mE(n,e)}else return{base64:!0,data:t}},mE=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},gE="",y1=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{Xf(s,!1,l=>{r[o]=l,++i===n&&e(r.join(gE))})})},v1=(t,e)=>{const n=t.split(gE),r=[];for(let i=0;i<n.length;i++){const s=Zf(n[i],e);if(r.push(s),s.type==="error")break}return r};function w1(){return new TransformStream({transform(t,e){f1(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Ku;function Ka(t){return t.reduce((e,n)=>e+n.length,0)}function Qa(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function _1(t,e){Ku||(Ku=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Ka(n)<1)break;const c=Qa(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ka(n)<2)break;const c=Qa(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ka(n)<8)break;const c=Qa(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),p=h.getUint32(0);if(p>Math.pow(2,21)-1){l.enqueue(dh);break}i=p*Math.pow(2,32)+h.getUint32(4),r=3}else{if(Ka(n)<i)break;const c=Qa(n,i);l.enqueue(Zf(s?c:Ku.decode(c),e)),r=0}if(i===0||i>t){l.enqueue(dh);break}}}})}const yE=4;function ze(t){if(t)return E1(t)}function E1(t){for(var e in ze.prototype)t[e]=ze.prototype[e];return t}ze.prototype.on=ze.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ze.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};ze.prototype.off=ze.prototype.removeListener=ze.prototype.removeAllListeners=ze.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};ze.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};ze.prototype.emitReserved=ze.prototype.emit;ze.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ze.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Hc=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),qt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),I1="arraybuffer";function vE(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const x1=qt.setTimeout,S1=qt.clearTimeout;function Gc(t,e){e.useNativeTimers?(t.setTimeoutFn=x1.bind(qt),t.clearTimeoutFn=S1.bind(qt)):(t.setTimeoutFn=qt.setTimeout.bind(qt),t.clearTimeoutFn=qt.clearTimeout.bind(qt))}const T1=1.33;function C1(t){return typeof t=="string"?R1(t):Math.ceil((t.byteLength||t.size)*T1)}function R1(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function wE(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function A1(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function k1(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class N1 extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class ep extends ze{constructor(e){super(),this.writable=!1,Gc(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new N1(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Zf(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=A1(e);return n.length?"?"+n:""}}class b1 extends ep{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};v1(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,y1(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=wE()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let _E=!1;try{_E=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const P1=_E;function O1(){}class D1 extends b1{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Ji=class gl extends ze{constructor(e,n,r){super(),this.createRequest=e,Gc(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=vE(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=gl.requestsCount++,gl.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=O1,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete gl.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Ji.requestsCount=0;Ji.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Iy);else if(typeof addEventListener=="function"){const t="onpagehide"in qt?"pagehide":"unload";addEventListener(t,Iy,!1)}}function Iy(){for(let t in Ji.requests)Ji.requests.hasOwnProperty(t)&&Ji.requests[t].abort()}const j1=function(){const t=EE({xdomain:!1});return t&&t.responseType!==null}();class L1 extends D1{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=j1&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ji(EE,this.uri(),e)}}function EE(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||P1))return new XMLHttpRequest}catch{}if(!e)try{return new qt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const IE=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class M1 extends ep{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=IE?{}:vE(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Xf(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Hc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=wE()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Qu=qt.WebSocket||qt.MozWebSocket;class F1 extends M1{createSocket(e,n,r){return IE?new Qu(e,n,r):n?new Qu(e,n):new Qu(e)}doWrite(e,n){this.ws.send(n)}}class V1 extends ep{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=_1(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=w1();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Hc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const U1={websocket:F1,webtransport:V1,polling:L1},B1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,z1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hh(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=B1.exec(t||""),s={},o=14;for(;o--;)s[z1[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=$1(s,s.path),s.queryKey=W1(s,s.query),s}function $1(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function W1(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const fh=typeof addEventListener=="function"&&typeof removeEventListener=="function",yl=[];fh&&addEventListener("offline",()=>{yl.forEach(t=>t())},!1);class Ar extends ze{constructor(e,n){if(super(),this.binaryType=I1,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=hh(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=hh(n.host).host);Gc(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=k1(this.opts.query)),fh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},yl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=yE,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ar.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ar.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=C1(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Hc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Ar.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),fh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=yl.indexOf(this._offlineEventListener);r!==-1&&yl.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ar.protocol=yE;class H1 extends Ar{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Ar.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",m=>{if(!r)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ar.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=n.name,this.emitReserved("upgradeError",v)}}))};function s(){r||(r=!0,p(),n.close(),n=null)}const o=m=>{const v=new Error("probe error: "+m);v.transport=n.name,s(),this.emitReserved("upgradeError",v)};function l(){o("transport closed")}function c(){o("socket closed")}function h(m){n&&m.name!==n.name&&s()}const p=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",h)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let G1=class extends H1{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>U1[i]).filter(i=>!!i)),super(e,r)}};function q1(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=hh(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const K1=typeof ArrayBuffer=="function",Q1=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,xE=Object.prototype.toString,Y1=typeof Blob=="function"||typeof Blob<"u"&&xE.call(Blob)==="[object BlobConstructor]",J1=typeof File=="function"||typeof File<"u"&&xE.call(File)==="[object FileConstructor]";function tp(t){return K1&&(t instanceof ArrayBuffer||Q1(t))||Y1&&t instanceof Blob||J1&&t instanceof File}function vl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(vl(t[n]))return!0;return!1}if(tp(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return vl(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&vl(t[n]))return!0;return!1}function X1(t){const e=[],n=t.data,r=t;return r.data=ph(n,e),r.attachments=e.length,{packet:r,buffers:e}}function ph(t,e){if(!t)return t;if(tp(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=ph(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=ph(t[r],e));return n}return t}function Z1(t,e){return t.data=mh(t.data,e),delete t.attachments,t}function mh(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=mh(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=mh(t[n],e));return t}const e2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],t2=5;var re;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(re||(re={}));class n2{constructor(e){this.replacer=e}encode(e){return(e.type===re.EVENT||e.type===re.ACK)&&vl(e)?this.encodeAsBinary({type:e.type===re.EVENT?re.BINARY_EVENT:re.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===re.BINARY_EVENT||e.type===re.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=X1(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function xy(t){return Object.prototype.toString.call(t)==="[object Object]"}class np extends ze{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===re.BINARY_EVENT;r||n.type===re.BINARY_ACK?(n.type=r?re.EVENT:re.ACK,this.reconstructor=new r2(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(tp(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(re[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===re.BINARY_EVENT||r.type===re.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(np.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case re.CONNECT:return xy(n);case re.DISCONNECT:return n===void 0;case re.CONNECT_ERROR:return typeof n=="string"||xy(n);case re.EVENT:case re.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&e2.indexOf(n[0])===-1);case re.ACK:case re.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class r2{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Z1(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const i2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:np,Encoder:n2,get PacketType(){return re},protocol:t2},Symbol.toStringTag,{value:"Module"}));function an(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const s2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class SE extends ze{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[an(e,"open",this.onopen.bind(this)),an(e,"packet",this.onpacket.bind(this)),an(e,"error",this.onerror.bind(this)),an(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(s2.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:re.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const p=this.ids++,m=n.pop();this._registerAckCallback(p,m),o.id=p}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:re.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case re.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case re.EVENT:case re.BINARY_EVENT:this.onevent(e);break;case re.ACK:case re.BINARY_ACK:this.onack(e);break;case re.DISCONNECT:this.ondisconnect();break;case re.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:re.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:re.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Is(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Is.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Is.prototype.reset=function(){this.attempts=0};Is.prototype.setMin=function(t){this.ms=t};Is.prototype.setMax=function(t){this.max=t};Is.prototype.setJitter=function(t){this.jitter=t};class gh extends ze{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Gc(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Is({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||i2;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new G1(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=an(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=an(n,"error",s);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(an(e,"ping",this.onping.bind(this)),an(e,"data",this.ondata.bind(this)),an(e,"error",this.onerror.bind(this)),an(e,"close",this.onclose.bind(this)),an(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Hc(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new SE(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Gs={};function wl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=q1(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Gs[i]&&s in Gs[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return l?c=new gh(r,e):(Gs[i]||(Gs[i]=new gh(r,e)),c=Gs[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(wl,{Manager:gh,Socket:SE,io:wl,connect:wl});const TE="https://flinxx-backend.onrender.com";console.log(" Socket.IO connecting to:",TE);const Z=wl(TE,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:10,transports:["websocket","polling"],secure:!1,rejectUnauthorized:!1,forceNew:!1,withCredentials:!0,upgrade:!0,rememberUpgrade:!1,multiplex:!0,timeout:6e4,extraHeaders:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}});Z.on("connect",()=>{console.log(" Socket connected successfully! ID:",Z.id),console.log(" Transport method:",Z.io.engine.transport.name)});Z.on("connect_error",t=>{console.error(" Socket connection error:",t.message||t),console.error(" Error details:",t),Z.io.engine.transport.name==="polling"&&console.log(" Retrying with websocket...")});Z.on("error",t=>{console.error(" Socket error:",t)});Z.on("disconnect",t=>{console.log(" Socket disconnected. Reason:",t),console.log(" Attempting to reconnect...")});Z.on("connect_timeout",()=>{console.error(" Socket connection timeout")});const o2=()=>{console.log(`
 `),console.log(" [ICE SERVERS CONFIGURATION]"),console.log(" "),console.log(" STUN Server:"),console.log("   - stun:global.xirsys.net"),console.log("     Purpose: NAT detection, find public IP"),console.log("     Status: Should work on all networks"),console.log(" "),console.log(" TURN Servers (for relaying if P2P blocked):"),console.log("   - turn:global.xirsys.net:3478?transport=udp"),console.log("     Status: Blocked if ISP blocks UDP port 3478"),console.log("   - turn:global.xirsys.net:3478?transport=tcp"),console.log("     Status: Blocked if ISP blocks TCP port 3478"),console.log("   - turns:global.xirsys.net:5349?transport=tcp"),console.log("     Status: Blocked if ISP blocks TLS port 5349"),console.log(" "),console.log(" Credentials:"),console.log("   - Username: nkhlydv"),console.log("   - Credential: a8e244b8-cf5b-11f0-8771-0242ac140002"),console.log(" "),console.log(" If all TURN candidates fail with error 701:"),console.log("    Configuration is CORRECT"),console.log("    STUN works (can find your IP)"),console.log("    ISP/Network is blocking TURN ports"),console.log("    Try VPN or different network to test"),console.log(` 
`)},a2=()=>[{urls:["stun:global.xirsys.net"]},{urls:["turn:global.xirsys.net:3478?transport=udp","turn:global.xirsys.net:3478?transport=tcp","turns:global.xirsys.net:5349?transport=tcp"],username:"nkhlydv",credential:"a8e244b8-cf5b-11f0-8771-0242ac140002"}],l2=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}h ${n}m ${r}s`:n>0?`${n}m ${r}s`:`${r}s`},c2=({isOpen:t,onClose:e})=>{const[n,r]=O.useState("premium"),[i,s]=O.useState("lite");if(!t)return null;const o=[{id:"lite",name:"LITE",emoji:"",price:"69",duration:"1 Day",features:["Unlimited Filters","Gender Filter: 50/day","10 Match Preferences","Ads Enabled","No Boost"]},{id:"prime",name:"PRIME",emoji:"",price:"199",duration:"15 Days",features:["Unlimited Filters","Gender Filter: 150/day","Full Match Preferences","No Ads","2x Profile Boost","Priority Match Queue"]},{id:"ultra",name:"ULTRA",emoji:"",price:"399",duration:"30 Days",features:["Unlimited Filters","Unlimited Gender Filter","Full Match Preferences","No Ads","5x Profile Boost","Ultra Priority Queue","Ultra Badge","Double Visibility"]}],l=[{id:"blue-tick",name:"Blue Tick",emoji:"",price:"69",features:["Verification badge","Trust boost","Status indicator"]},{id:"chat-themes",name:"Chat Themes",emoji:"",price:"49",features:["Unlock themes","Custom colors","Personal style"]},{id:"match-boost",name:"Match Boost",emoji:"",price:"39",features:["30 min visibility boost","Increased reach","More matches"]},{id:"profile-ring",name:"Profile Ring",emoji:"",price:"79",features:["Colored profile ring","Stand out","Eye-catching design"]},{id:"profile-highlight",name:"Profile Highlight",emoji:"",price:"99",features:["24h highlight","Top search visibility","Premium placement"]}],c=o.find(h=>h.id===i);return u.jsx("div",{className:"premium-overlay",onClick:e,children:u.jsxs("div",{className:"premium-box",onClick:h=>h.stopPropagation(),children:[u.jsx("button",{className:"close-btn",onClick:e,children:""}),u.jsx("h2",{className:"premium-title",children:"Flinxx Subscriptions"}),u.jsxs("div",{className:"main-tabs-container",children:[u.jsx("button",{className:`main-tab ${n==="premium"?"active":""}`,onClick:()=>r("premium"),children:"Premium Plans"}),u.jsx("button",{className:`main-tab ${n==="flex"?"active":""}`,onClick:()=>r("flex"),children:"Flex Plans"})]}),n==="premium"&&u.jsxs("div",{className:"tab-content",children:[u.jsx("div",{className:"premium-tabs-container",children:o.map(h=>u.jsxs("button",{className:`premium-tab ${i===h.id?"active":""}`,onClick:()=>s(h.id),children:[u.jsx("span",{className:"tab-emoji",children:h.emoji}),u.jsx("span",{className:"tab-name",children:h.name}),u.jsx("span",{className:"tab-price",children:h.price})]},h.id))}),c&&u.jsxs("div",{className:"premium-card",children:[u.jsx("div",{className:"card-header",children:u.jsxs("h3",{children:[c.emoji," ",c.name]})}),u.jsxs("div",{className:"card-price",children:[u.jsx("div",{className:"price-amount",children:c.price}),u.jsxs("div",{className:"price-duration",children:["/ ",c.duration]})]}),u.jsx("ul",{className:"card-features",children:c.features.map((h,p)=>u.jsxs("li",{children:[u.jsx("span",{className:"feature-check",children:""}),u.jsx("span",{className:"feature-text",children:h})]},p))}),u.jsx("button",{className:"card-subscribe-btn",children:"Subscribe Now"})]},i)]}),n==="flex"&&u.jsxs("div",{className:"tab-content",children:[u.jsx("p",{className:"flex-subtitle",children:"Choose individual features"}),u.jsx("div",{className:"flex-section flex-wrapper",children:u.jsx("div",{className:"flex-plans-box",children:u.jsx("div",{className:"flex-plans-container",children:l.map(h=>u.jsxs("div",{className:"flex-card",children:[u.jsxs("div",{className:"flex-item-header",children:[u.jsx("span",{className:"flex-emoji",children:h.emoji}),u.jsx("h4",{children:h.name})]}),u.jsx("div",{className:"flex-item-price",children:h.price}),u.jsx("ul",{className:"flex-item-features",children:h.features.map((p,m)=>u.jsxs("li",{children:[u.jsx("span",{className:"flex-check",children:""}),u.jsx("span",{children:p})]},m))}),u.jsx("button",{className:"flex-item-btn",children:"Add Now"})]},h.id))})})})]}),u.jsx("div",{className:"premium-footer",children:u.jsx("p",{children:"Recurring billing. Cancel anytime. No hidden charges."})})]})})},u2=({isOpen:t,onClose:e,currentGender:n="both",onOpenPremium:r})=>{const[i,s]=O.useState(n);if(!t)return null;const o=()=>{console.log("Gender filter saved:",i),e()},l=()=>{console.log("Join clicked - opening premium modal"),r(),e()};return u.jsx("div",{className:"gender-filter-overlay",onClick:e,children:u.jsxs("div",{className:"gender-filter-modal",onClick:c=>c.stopPropagation(),children:[u.jsx("button",{className:"gender-close-btn",onClick:e,children:""}),u.jsxs("div",{className:"gender-premium-section",children:[u.jsx("div",{className:"premium-icon",children:""}),u.jsxs("div",{className:"premium-content",children:[u.jsx("h3",{children:"Flinxx Prime"}),u.jsx("p",{children:"Get More Gender Filters"})]}),u.jsx("button",{className:"join-btn",onClick:l,children:"Join"})]}),u.jsxs("div",{className:"gender-section",children:[u.jsx("div",{className:"gender-icon",children:""}),u.jsx("h2",{children:"Gender"}),u.jsxs("div",{className:"gender-options",children:[u.jsxs("button",{className:`gender-option ${i==="girls"?"selected":""}`,onClick:()=>s("girls"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Girls Only"})]}),u.jsxs("button",{className:`gender-option ${i==="guys"?"selected":""}`,onClick:()=>s("guys"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Guys Only"})]}),u.jsxs("button",{className:`gender-option ${i==="both"?"selected":""}`,onClick:()=>s("both"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Both"})]})]})]}),u.jsxs("div",{className:"gender-footer",children:[u.jsx("button",{className:"save-btn",onClick:o,children:"Save"}),u.jsx("button",{className:"filter-btn",children:""})]})]})})},d2=({isOpen:t,onClose:e,onOpenPremium:n,onReinitializeCamera:r})=>{const i=vn(),{user:s}=O.useContext(ws)||{},[o,l]=O.useState(!1),[c,h]=O.useState({name:"",email:"",picture:"",googleId:"",location:"",gender:"",birthday:"",tokens:0,gems:0}),[p,m]=O.useState(!1),[v,k]=O.useState(null);O.useEffect(()=>{t&&s&&A()},[t,s]),O.useEffect(()=>{!v&&t&&N()},[t]);const N=async()=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async L=>{var y,I,T;const{latitude:F,longitude:E}=L.coords;try{const b=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${F}&lon=${E}`)).json(),C=((y=b.address)==null?void 0:y.city)||((I=b.address)==null?void 0:I.town)||"Unknown",$e=((T=b.address)==null?void 0:T.country)||"Unknown";k(`${C}, ${$e}`),h(Zt=>({...Zt,location:`${C}, ${$e}`}))}catch(R){console.log("Reverse geocoding error:",R)}},L=>{console.log("Geolocation error:",L),x()}):x()}catch(L){console.log("Location detection error:",L)}},x=async()=>{try{const F=await(await fetch("https://ipapi.co/json/")).json(),E=`${F.city}, ${F.country_name}`;k(E),h(y=>({...y,location:E}))}catch(L){console.log("IP API error:",L)}},A=async()=>{var L;if(s)try{h(E=>({...E,name:s.name||"User",email:s.email||"",picture:s.picture||"",googleId:s.googleId||""}));const F=localStorage.getItem("token");if(F){console.log("[ProfileModal] Fetching fresh user profile from backend");const y=await fetch("https://flinxx-backend.onrender.com/api/profile",{method:"GET",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"}});if(y.ok){const I=await y.json();console.log("[ProfileModal]  Fetched profile data from backend:",(L=I.user)==null?void 0:L.email),I.success&&I.user&&h(T=>({...T,name:I.user.name||"User",email:I.user.email||"",picture:I.user.picture||"",googleId:I.user.googleId||"",gender:I.user.gender||"Not set",birthday:I.user.birthday||"Not set"}))}else console.warn("[ProfileModal]  Failed to fetch profile from backend:",y.status)}else console.log("[ProfileModal]  No token found in localStorage")}catch(F){console.error("[ProfileModal]  Error loading user profile:",F)}},w=L=>{const{name:F,value:E}=L.target;h(y=>({...y,[F]:E}))},_=L=>{var E;const F=(E=L.target.files)==null?void 0:E[0];if(F){const y=new FileReader;y.onloadend=()=>{h(I=>({...I,picture:y.result}))},y.readAsDataURL(F)}},S=async()=>{m(!0);try{console.log("[PROFILE SAVE] Starting profile save process"),console.log("[PROFILE SAVE] Profile data:",c);const L=(s==null?void 0:s.googleId)||localStorage.getItem("userId");if(console.log("[PROFILE SAVE] User ID:",L),!L){console.error("[PROFILE SAVE] Error: No user ID found"),alert("Error: User ID not found. Please login again."),m(!1);return}const F={userId:L,birthday:c.birthday||new Date().toISOString().split("T")[0],gender:c.gender||"Not set"};console.log("[PROFILE SAVE] Request body:",JSON.stringify(F)),console.log("[PROFILE SAVE] Required fields check:"),console.log("  - userId:",!!F.userId),console.log("  - birthday:",!!F.birthday),console.log("  - gender:",!!F.gender);const E=localStorage.getItem("token");console.log("[PROFILE SAVE] Token present:",!!E),E||console.warn("[PROFILE SAVE] Warning: No auth token found");const y="https://flinxx-backend.onrender.com";console.log("[PROFILE SAVE] Backend URL:",y),console.log("[PROFILE SAVE] Making API call to /api/users/complete-profile");const I=await fetch(`${y}/api/users/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json",...E&&{Authorization:`Bearer ${E}`}},body:JSON.stringify(F)});if(console.log("[PROFILE SAVE] Response status:",I.status),!I.ok){const R=await I.json();console.error("[PROFILE SAVE] Error response:",R),alert(`Failed to save profile: ${R.error||"Unknown error"}`),m(!1);return}const T=await I.json();console.log("[PROFILE SAVE]  Profile saved successfully:",T),localStorage.setItem("userProfile",JSON.stringify(F)),l(!1),console.log("[PROFILE SAVE] Profile saved successfully"),console.log("[PROFILE SAVE] Closing ProfileModal..."),e(),alert("Profile updated successfully!"),console.log(" [ProfileModal] Scheduling camera re-init with 500ms delay to allow modal unmount"),typeof r=="function"?setTimeout(()=>{console.log(`
 [ProfileModal] 500ms delay complete, reinitializing camera now`),console.log(" [ProfileModal] Calling onReinitializeCamera()"),r().then(R=>{R?console.log(" [ProfileModal]  Camera reinitialized successfully after profile save"):console.warn(" [ProfileModal]  Camera reinitialization returned false")}).catch(R=>{console.error(" [ProfileModal]  Error calling reinitializeCamera:",R)})},500):console.warn(" [ProfileModal]  onReinitializeCamera callback not provided")}catch(L){console.error("[PROFILE SAVE] Error:",L),console.error("[PROFILE SAVE] Error message:",L.message),console.error("[PROFILE SAVE] Error stack:",L.stack),alert("Failed to save profile: "+L.message)}finally{m(!1)}},D=async()=>{try{await qC(zo),localStorage.removeItem("userInfo"),localStorage.removeItem("userProfile"),i("/login")}catch(L){console.error("Sign out error:",L)}};return t?u.jsx("div",{className:"profile-modal-overlay",onClick:e,children:u.jsxs("div",{className:"profile-modal-container",onClick:L=>L.stopPropagation(),children:[u.jsx("button",{className:"profile-modal-close",onClick:e,children:""}),u.jsxs("div",{className:"profile-header",children:[u.jsxs("div",{className:"profile-picture-container",children:[u.jsx("img",{src:c.picture||"https://via.placeholder.com/120",alt:"Profile",className:"profile-picture"}),o&&u.jsxs("label",{className:"photo-upload-label",children:[u.jsx("input",{type:"file",accept:"image/*",onChange:_,style:{display:"none"}}),""]})]}),o?u.jsx("input",{type:"text",name:"name",value:c.name,onChange:w,className:"profile-input-name",placeholder:"Name"}):u.jsx("h2",{className:"profile-name",children:c.name}),u.jsxs("p",{className:"profile-uid",children:["ID: ",c.googleId||"N/A"]})]}),u.jsxs("div",{className:"profile-premium-section",onClick:n,style:{cursor:"pointer"},children:[u.jsx("div",{className:"premium-badge",children:" Flinxx Premium"}),u.jsx("p",{className:"premium-description",children:"Unlock premium features"})]}),u.jsxs("div",{className:"profile-details",children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Tokens"}),u.jsx("span",{className:"detail-value",children:c.tokens})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gems"}),u.jsx("span",{className:"detail-value",children:c.gems})]}),o?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Location"}),u.jsx("input",{type:"text",name:"location",value:c.location,onChange:w,className:"profile-input-small"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gender"}),u.jsxs("select",{name:"gender",value:c.gender,onChange:w,className:"profile-input-small",children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Birthday"}),u.jsx("input",{type:"date",name:"birthday",value:c.birthday?c.birthday.slice(0,10):"",onChange:w,className:"profile-input-small text-black focus:text-black !text-black [&::-webkit-datetime-edit]:text-black [&::-webkit-datetime-edit-year-field]:text-black [&::-webkit-datetime-edit-month-field]:text-black [&::-webkit-datetime-edit-day-field]:text-black"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Location"}),u.jsx("span",{className:"detail-value",children:c.location||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gender"}),u.jsx("span",{className:"detail-value",children:c.gender||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Birthday"}),u.jsx("span",{className:"detail-value",children:c.birthday||"Not set"})]})]})]}),u.jsx("div",{className:"profile-actions",children:o?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-save",onClick:S,disabled:p,children:p?"Saving...":"Save Changes"}),u.jsx("button",{className:"btn-cancel",onClick:()=>{l(!1),A()},children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-edit",onClick:()=>l(!0),children:" Edit Profile"}),u.jsx("button",{className:"btn-more",children:" More"})]})}),u.jsx("button",{className:"btn-sign-out",onClick:D,children:"Sign Out"})]})}):null},h2=({isOpen:t,onClose:e})=>{const[n,r]=O.useState([{id:1,username:"Up ke ",name:"Up ke",location:"National Capital Territory of Delhi",duration:"00:05",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:2,username:"Loup ",name:"Loup",location:"Algeria",duration:"00:06",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:3,username:"Nish ",name:"Nish",location:"Maharashtra",duration:"00:04",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:4,username:"Priya ",name:"Priya",location:"Gujarat",duration:"00:02",date:"11/27/2025",time:"9:23PM",avatar:"M",liked:!1},{id:5,username:"pagbigyamnmako ",name:"pagbigyamnmako",location:"Philippines",duration:"00:08",date:"11/27/2025",time:"9:23PM",avatar:"",liked:!1}]),i=o=>{r(n.map(l=>l.id===o?{...l,liked:!l.liked}:l))},s=o=>{r(n.filter(l=>l.id!==o))};return t?u.jsx("div",{className:"match-history-overlay",onClick:e,children:u.jsxs("div",{className:"match-history-container",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"match-history-header",children:[u.jsx("h2",{children:"Match History"}),u.jsx("button",{className:"match-history-close",onClick:e,children:""})]}),u.jsx("div",{className:"match-history-list",children:n.length===0?u.jsxs("div",{className:"match-history-empty",children:[u.jsx("p",{children:"No match history yet"}),u.jsx("p",{className:"match-history-empty-sub",children:"Start video chatting to build your history!"})]}):n.map(o=>u.jsxs("div",{className:"match-card",children:[u.jsxs("div",{className:"match-card-date",children:[u.jsxs("div",{className:"match-card-datetime",children:[u.jsx("span",{className:"match-date",children:o.date}),u.jsx("span",{className:"match-time",children:o.time})]}),u.jsxs("div",{className:"match-duration",children:[" ",o.duration]})]}),u.jsxs("div",{className:"match-card-user",children:[u.jsx("div",{className:"match-card-avatar",children:o.avatar==="M"?u.jsx("div",{className:"avatar-initial",children:"M"}):u.jsx("span",{children:o.avatar})}),u.jsxs("div",{className:"match-card-info",children:[u.jsx("p",{className:"match-card-name",children:o.name}),u.jsxs("p",{className:"match-card-location",children:[" ",o.location]})]})]}),u.jsxs("div",{className:"match-card-actions",children:[u.jsx("button",{className:`action-btn like-btn ${o.liked?"liked":""}`,onClick:()=>i(o.id),title:"Like this match",children:""}),u.jsx("button",{className:"action-btn delete-btn",onClick:()=>s(o.id),title:"Delete from history",children:""})]})]},o.id))})]})}):null},f2=({currentUser:t,onProfileClick:e,onPremiumClick:n,onMatchHistoryClick:r,isFixedPosition:i=!1})=>{const s=i?{position:"fixed",top:"12px",right:"24px",zIndex:999999}:{},o=i?"flex items-center gap-4":"top-right-icons";return u.jsxs("div",{className:o,style:s,children:[u.jsx("div",{className:"icon-circle",title:"Profile",onClick:e,style:{cursor:"pointer"},children:t!=null&&t.picture?u.jsx("img",{src:t.picture,alt:"Profile"}):""}),u.jsx("div",{className:"icon-circle",title:"Search",onClick:()=>console.log("Search clicked"),children:""}),u.jsx("div",{className:"icon-circle",title:"Messages",onClick:()=>console.log("Messages clicked"),children:""}),u.jsx("div",{className:"icon-circle",title:"Flinx Premium",onClick:n,children:""}),u.jsx("div",{className:"icon-circle",title:"Match History",onClick:r,children:""})]})};console.log(" CHAT BUILD: 2025-12-08T16:00:00Z - Fresh clean bundle - TDZ error FIXED");const p2=()=>{var Ii;console.log(" CHAT COMPONENT LOADED - BUILD: 895cedd (temporal deadzone fix - useRef(null))"),vn();const t=Wc(),{user:e}=O.useContext(ws)||{},[n,r]=O.useState(null),[i,s]=O.useState(!1);O.useEffect(()=>{const H=new URLSearchParams(t.search).get("view");r(H),s(H==="home"),console.log("[Chat] Location search params:",t.search),console.log("[Chat] view parameter:",H),console.log("[Chat] shouldStartAsIntro:",H==="home")},[t.search]);const o=O.useRef(null),l=O.useRef(null),c=O.useRef(null),h=O.useRef(null),[p,m]=O.useState(null);O.useEffect(()=>{const M=e||{googleId:"guest_"+Math.random().toString(36).substring(2,9),name:"Guest User",email:"guest@flinxx.local",picture:null};m(M),h.current||(h.current=M.googleId||M.id,console.log(" USER ID INITIALIZED (ONE TIME):",h.current)),c.current||(c.current=M)},[e]);const v=O.useRef(null),[k,N]=O.useState(!1);O.useEffect(()=>()=>{v.current&&clearInterval(v.current)},[]);const x=O.useRef(null),A=O.useRef(null),w=O.useRef(null),_=O.useRef(null);O.useEffect(()=>{var M;console.log(" Refs initialized:"),console.log("   localVideoRef.current exists:",!!x.current),console.log("   localVideoRef.current in DOM:",(M=x.current)!=null&&M.parentElement?"YES":"NO"),console.log("   remoteVideoRef.current exists:",!!A.current),console.log("   localStreamRef.current exists:",!!w.current)},[]),O.useEffect(()=>{const M=setInterval(()=>{var G,q;const H=!!A.current,V=!!((G=A.current)!=null&&G.parentElement);(q=A.current)!=null&&q.srcObject,H&&V?console.log(" remoteVideoRef is AVAILABLE in DOM and ready for ontrack"):H&&!V?console.warn(" remoteVideoRef exists but NOT in DOM - ontrack may fail!"):console.log(" Waiting for remoteVideoRef to be mounted...")},2e3);return()=>clearInterval(M)},[]);const[S,D]=O.useState(!1),[L,F]=O.useState(!1),[E,y]=O.useState(!1),[I,T]=O.useState(!1),[R,b]=O.useState(null),[C,$e]=O.useState(0),[Zt,wn]=O.useState(!1),[en,W]=O.useState(!1),[Y,ee]=O.useState(!1),[_e,de]=O.useState(!1),[Ee,_n]=O.useState("both"),[tn,bt]=O.useState(!1),[zt,wi]=O.useState([]),[Mr,Fr]=O.useState(""),[Vr,En]=O.useState(!1);O.useEffect(()=>{console.log(`
 [POSITIONING] Local video positioning effect triggered`),console.log("   hasPartner:",E),console.log("   isMatchingStarted:",L);const M=x.current;if(!M){console.warn(" [POSITIONING] Persistent video ref is null - element not yet rendered");return}console.log(" [POSITIONING] Video element ref found:",M);const H=document.querySelectorAll(".left-panel");console.log(`   Found ${H.length} left-panel containers`);for(let V=0;V<H.length;V++){const G=H[V];if(G.offsetParent!==null){console.log(`   [POSITIONING] Visible left-panel found at index ${V}`),M.parentElement!==G?(console.log(`   [POSITIONING] Moving video into left-panel ${V}`),G.insertBefore(M,G.firstChild),M.style.display="block",console.log(`    [POSITIONING] Video positioned in left-panel ${V}`)):(console.log("    [POSITIONING] Video already in correct panel"),M.style.display="block");break}}},[E,L]);const _i=qo.useCallback(async()=>{console.log(`

 ===== CAMERA RE-INITIALIZATION STARTED =====`),console.log(" [REINIT] Camera re-initialization requested"),console.log(" [REINIT] Current state:"),console.log("  - localStreamRef.current exists:",!!w.current),console.log("  - localVideoRef.current exists:",!!x.current),console.log("  - cameraStarted:",S);try{if(!x.current)return console.error(" [REINIT]  CRITICAL: localVideoRef.current is null/undefined - video element not in DOM"),!1;if(!x.current.parentElement)return console.error(" [REINIT]  CRITICAL: Video element is not attached to DOM"),!1;if(console.log(" [REINIT]  Video element exists in DOM"),w.current){console.log(" [REINIT] Stream exists, checking if tracks are active...");const H=w.current.getTracks();if(console.log(" [REINIT] Stream has",H.length,"tracks"),H.forEach((V,G)=>{console.log(`  Track ${G}:`,{kind:V.kind,enabled:V.enabled,readyState:V.readyState})}),H.length===0)console.warn(" [REINIT]  Stream exists but has no active tracks - will request new stream"),w.current=null;else{console.log(" [REINIT]  Stream has active tracks, reattaching to video element"),x.current.srcObject=w.current,x.current.muted=!0,console.log(" [REINIT] srcObject set, waiting for play()...");try{const V=x.current.play();return V!==void 0&&await V,console.log(" [REINIT]  Camera preview reattached and playing"),console.log(` ===== CAMERA RE-INITIALIZATION SUCCESSFUL =====

`),!0}catch(V){return console.error(" [REINIT]  Error playing video:",V),console.error(" [REINIT] Error name:",V.name),console.error(" [REINIT] Error message:",V.message),!1}}}console.log(" [REINIT] No existing stream or tracks inactive, requesting new preview stream");const M=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});return w.current=M,console.log(" [REINIT]  New camera stream obtained:",M),console.log(" [REINIT] New stream tracks:",M.getTracks().map(H=>({kind:H.kind,id:H.id}))),x.current.srcObject=M,x.current.muted=!0,console.log(" [REINIT] srcObject set to new stream, calling play()..."),requestAnimationFrame(()=>{var H;(H=x.current)==null||H.play().catch(V=>{console.log(" [REINIT] Video play blocked:",V)}),console.log(" [REINIT]  New camera preview play command dispatched")}),D(!0),console.log(` ===== CAMERA RE-INITIALIZATION SUCCESSFUL =====

`),!0}catch(M){return console.error(" [REINIT]  Error reinitializing camera:",M),console.error(" [REINIT] Error name:",M.name),console.error(" [REINIT] Error message:",M.message),console.error(` ===== CAMERA RE-INITIALIZATION FAILED =====

`),!1}},[S]);O.useEffect(()=>{o.current={reinitializeCamera:_i}},[_i]),O.useEffect(()=>{if(!I)return;const M=setInterval(()=>{$e(H=>H+1)},1e3);return()=>clearInterval(M)},[I]),O.useEffect(()=>{E&&S&&console.log(" [PARTNER FOUND] Transitioning to video chat screen")},[E,S]),O.useEffect(()=>{if(i){console.log("[Camera]  Skipping auto camera init - user just completed profile (view=home)"),console.log('[Camera] Camera will start when user clicks "Start Video Chat" button');return}async function M(){try{if(console.log(" Starting camera preview..."),console.log(" [INIT] Chat component mounted, attempting to initialize camera"),!x.current){console.error(" [INIT]  Video element not in DOM yet, cannot initialize camera");return}console.log(" [INIT]  Video element found in DOM, requesting camera permissions");const V=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(w.current=V,console.log("[Camera]  Camera stream obtained"),console.log("[Camera] Stream tracks:",V.getTracks().map(G=>({kind:G.kind,id:G.id}))),x.current){x.current.srcObject=V,x.current.muted=!0;try{await x.current.play(),console.log(" Camera preview playing successfully"),D(!0)}catch(G){console.error(" Preview play error:",G)}}}catch(V){console.log(" Camera preview error (this is OK, user may deny permission):",V.message),console.log(" Error name:",V.name),console.log(" Error code:",V.code)}}console.log("[Camera] Chat component useEffect triggered, scheduling camera init with delay");const H=setTimeout(()=>{console.log("[Camera] Delay complete, now calling startPreview()"),M()},100);return()=>{console.log("[Camera] Chat component unmounting, clearing camera init timer"),clearTimeout(H)}},[i]);const Ei=async()=>{if(console.log(" createPeerConnection called"),console.log("   Current localStreamRef:",w.current),!w.current){console.warn(" CRITICAL: localStreamRef.current is null - attempting to reacquire camera stream");try{const G=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(w.current=G,x.current){x.current.srcObject=G,x.current.muted=!0;try{await x.current.play()}catch(q){console.warn(" Play error during reacquisition:",q)}}console.log(" LOCAL STREAM RE-ACQUIRED SUCCESSFULLY"),console.log("   Tracks:",G.getTracks().map(q=>({kind:q.kind,id:q.id})))}catch(G){throw console.error(" FATAL: Could not reacquire camera stream:",G.message),new Error("Cannot proceed: local camera stream unavailable - "+G.message)}}o2();const M=await xs(),H=[{urls:["stun:global.xirsys.net","turn:global.xirsys.net:3478?transport=udp","turn:global.xirsys.net:3478?transport=tcp"],username:"nkhlvdv",credential:"a8e244b8-cf5b-11f0-8771-0242ac140002"},...M];console.log(" ICE Servers Configuration:",{count:H.length,servers:H.map(G=>({urls:G.urls,username:G.username?"***":void 0,credential:G.credential?"***":void 0}))});const V=new RTCPeerConnection({iceServers:H,iceTransportPolicy:"all"});if(l.current=V,console.log(" RTCPeerConnection created with iceTransportPolicy: all"),V.onicecandidate=G=>{if(G.candidate){const q=G.candidate;console.log(" ICE candidate generated:",{candidate:q.candidate,protocol:q.protocol,port:q.port,address:q.address,type:q.type,priority:q.priority,sdpMLineIndex:q.sdpMLineIndex,sdpMId:q.sdpMid}),q.type==="relay"?(console.log(" RELAY (TURN) candidate generated - TURN server is reachable"),console.log("   Protocol:",q.protocol,"Port:",q.port)):q.type==="srflx"?(console.log(" SRFLX (server reflexive) candidate - STUN working"),console.log("   Found public address via STUN")):q.type==="host"&&console.log(" HOST candidate - direct LAN connection possible"),console.log(" Sending ICE candidate to partner socket:",_.current),Z.emit("ice_candidate",{candidate:q,to:_.current}),console.log(" ICE candidate sent to peer")}else console.log(" ICE gathering complete (null candidate received)"),console.log(" ICE gathering summary:"),console.log("   Connection State:",V.connectionState),console.log("   ICE Connection State:",V.iceConnectionState),console.log("   ICE Gathering State:",V.iceGatheringState)},V.oniceconnectionstatechange=()=>{const G=V.iceConnectionState;switch(console.log(`
 ===== ICE CONNECTION STATE CHANGED =====`),console.log(" New ICE Connection State:",G),G){case"new":console.log(" State: NEW - Gathering ICE candidates");break;case"checking":console.log(" State: CHECKING - Testing ICE candidate pairs"),console.log(" Connection in progress - waiting for connectivity");break;case"connected":console.log(" State: CONNECTED - Found working ICE candidate pair"),console.log(" Peer-to-peer communication established");break;case"completed":console.log(" State: COMPLETED - ICE checks completed, ready for media"),console.log(" All connectivity checks passed");break;case"failed":console.error(" State: FAILED - All ICE candidate pairs failed"),console.error(" Could not establish peer-to-peer connection"),console.error(" TURN server may be unreachable or blocked by ISP"),console.error(" Troubleshooting:"),console.error("   - Check console for TURN error details"),console.error("   - TURN error 701 = Network/ISP blocking ports 3478, 5349"),console.error("   - Solutions: Try VPN, different WiFi, or mobile hotspot"),console.error("   - User can retry with a retry button (do NOT auto-restart ICE)");break;case"disconnected":console.warn(" State: DISCONNECTED - Lost connection to peer"),console.warn("   Note: ICE restart is manual only to prevent stream loss");break;case"closed":console.log(" State: CLOSED - Connection closed");break}console.log(" Full connection states:"),console.log("   Signaling State:",V.signalingState),console.log("   Connection State:",V.connectionState),console.log("   ICE Gathering State:",V.iceGatheringState)},V.ontrack=G=>{var ye,Oe,Ae,Te,De,ae,$t,Dn,pe,Wt,We,Ce,yt,Pt;if(console.log(`

 ===== CRITICAL: ONTRACK HANDLER FIRING! =====`),console.log(" ONTRACK CALLED AT:",new Date().toISOString()),console.log(" This is the REMOTE TRACK RECEIVER - the most important handler!"),console.log(`
 ===== REMOTE TRACK RECEIVED =====`),console.log(" TIMESTAMP:",new Date().toISOString()),console.log(" Remote track received:",{kind:G.track.kind,id:G.track.id,enabled:G.track.enabled,readyState:G.track.readyState,muted:G.track.muted}),console.log(" Event streams:",G.streams.map(ue=>({id:ue.id,active:ue.active,trackCount:ue.getTracks().length,tracks:ue.getTracks().map(Ot=>({kind:Ot.kind,id:Ot.id,enabled:Ot.enabled,muted:Ot.muted}))}))),console.log(`
 ===== CRITICAL VIDEO REF CHECK =====`),console.log(" localVideoRef.current:",{exists:!!x.current,element:(ye=x.current)==null?void 0:ye.tagName,id:(Oe=x.current)==null?void 0:Oe.id,srcObject:!!((Ae=x.current)!=null&&Ae.srcObject),object:x.current}),console.log(" remoteVideoRef.current:",{exists:!!A.current,element:(Te=A.current)==null?void 0:Te.tagName,id:(De=A.current)==null?void 0:De.id,srcObject:!!((ae=A.current)!=null&&ae.srcObject),object:A.current}),console.log(" SAME REF?:",x.current===A.current),!A.current){console.error(" CRITICAL ERROR: remoteVideoRef.current is NULL!"),console.error("   Cannot attach remote track - video element not available"),console.error("   remoteVideoRef must be attached to the remote-video HTML element"),console.error('   Check line ~1977: <video id="remote-video" ref={remoteVideoRef} />');return}if(x.current||(console.warn(" WARNING: localVideoRef.current is NULL"),console.warn("   This is OK if not yet on a screen that uses it"),console.warn("   localVideoRef should only be used for local stream in left/right panels")),x.current===A.current){console.error(" CRITICAL ERROR: localVideoRef and remoteVideoRef are the SAME OBJECT!"),console.error("   This will OVERWRITE local video with remote track!"),console.error("   Check JSX ref assignments - they should be TWO DIFFERENT video elements"),console.error('   localVideoRef should be: <video ref={localVideoRef} className="local-video" /> in left/right panel'),console.error('   remoteVideoRef should be: <video id="remote-video" ref={remoteVideoRef} /> in remote-video-wrapper');return}if(console.log(" CRITICAL CHECK PASSED - refs are DIFFERENT and valid"),console.log(" localVideoRef points to:",(($t=x.current)==null?void 0:$t.id)||"no-id","(class="+((Dn=x.current)==null?void 0:Dn.className)+")"),console.log(" remoteVideoRef points to:",((pe=A.current)==null?void 0:pe.id)||"no-id","(class="+((Wt=A.current)==null?void 0:Wt.className)+")"),console.log(" Proceeding to attach REMOTE stream to remoteVideoRef ONLY..."),!G.streams||!G.streams[0]){console.error(" No streams available in event");return}if(A.current.srcObject&&A.current.srcObject.getTracks().length>0){console.log("  GUARD: Remote stream already attached with tracks, skipping re-attachment"),console.log(" Current stream has",A.current.srcObject.getTracks().length,"tracks");return}console.log(" STEP 1: Setting remoteVideoRef.current.srcObject = event.streams[0]");const q=G.streams[0];A.current.srcObject=q,console.log(" STEP 2:  Remote stream assigned to remoteVideoRef ONLY"),console.log(" LOCAL STREAM UNAFFECTED - localVideoRef still has:",(We=x.current)!=null&&We.srcObject?"a stream":"no stream"),console.log(" STEP 3: Verifying remote attachment:",{srcObjectExists:!!A.current.srcObject,srcObjectSame:A.current.srcObject===q,srcObjectActive:(Ce=A.current.srcObject)==null?void 0:Ce.active,srcObjectTracks:(yt=A.current.srcObject)==null?void 0:yt.getTracks().length,trackDetails:(Pt=A.current.srcObject)==null?void 0:Pt.getTracks().map(ue=>({kind:ue.kind,enabled:ue.enabled,muted:ue.muted})),videoReadyState:A.current.readyState,videoNetworkState:A.current.networkState,videoPaused:A.current.paused}),A.current.style.display="block",A.current.style.width="100%",A.current.style.height="100%",A.current.style.objectFit="cover",console.log(" STEP 4:  CSS styles applied to remoteVideoRef");const he=q!=null&&q.getTracks?q.getTracks():[];console.log(" CRITICAL: Remote stream details BEFORE play():"),console.log("   Stream exists:",!!q),console.log("   Stream active:",q==null?void 0:q.active),console.log("   Stream tracks count:",he.length),console.log("   Track details:",he.map(ue=>({kind:ue.kind,id:ue.id,enabled:ue.enabled,readyState:ue.readyState,muted:ue.muted,label:ue.label}))),console.log(" Video element state:"),console.log("   srcObject:",!!A.current.srcObject),console.log("   readyState:",A.current.readyState,"(0=HAVE_NOTHING, 1=HAVE_METADATA, 2=HAVE_CURRENT_DATA, 3=HAVE_FUTURE_DATA, 4=HAVE_ENOUGH_DATA)"),console.log("   networkState:",A.current.networkState,"(0=NETWORK_EMPTY, 1=NETWORK_IDLE, 2=NETWORK_LOADING, 3=NETWORK_NO_SOURCE)"),console.log("   paused:",A.current.paused),console.log("   muted:",A.current.muted),console.log("   style.display:",A.current.style.display),console.log("   Computed style display:",window.getComputedStyle(A.current).display),console.log(" STEP 5: Attempting to play remote video on remoteVideoRef...");try{const ue=A.current.play();ue!==void 0?ue.then(()=>{console.log("  Remote video playing successfully on remoteVideoRef"),setTimeout(()=>{A.current&&(A.current.muted=!1,console.log("  Remote video UNMUTED - audio should now play"))},100)}).catch(Ot=>{console.warn("  Play error (may be due to mobile autoplay policy):",Ot.name,Ot.message),console.log(" NOTE: Remote video element has srcObject set, will play when user interacts"),A.current&&(A.current.muted=!1,console.log(" Remote video UNMUTED (in case autoplay was blocked)"))}):(console.log(" Play promise not returned (older browser), remote video should play automatically"),A.current&&(A.current.muted=!1,console.log(" Remote video UNMUTED (older browser)")))}catch(ue){console.error("  Play attempt threw error:",ue),console.log(" Continuing - remote stream is attached and ready"),A.current&&(A.current.muted=!1,console.log(" Remote video UNMUTED (after error)"))}console.log("   Remote video srcObject set successfully on remoteVideoRef"),console.log(` ===== REMOTE TRACK SETUP COMPLETE =====

`)},V.onconnectionstatechange=()=>{console.log(`
 ===== CONNECTION STATE CHANGED =====`),console.log(" New Connection State:",V.connectionState),console.log("   ICE Connection State:",V.iceConnectionState),console.log("   ICE Gathering State:",V.iceGatheringState),console.log("   Signaling State:",V.signalingState),V.connectionState==="connected"?(T(!0),console.log(" WebRTC connection ESTABLISHED"),setTimeout(()=>{console.log(`
 ===== RECEIVER DEBUG CHECK (after connected) =====`);const G=V.getReceivers();console.log(" Total receivers:",G.length),G.forEach((he,ye)=>{var Oe,Ae,Te,De,ae;console.log(` Receiver ${ye}:`,{kind:(Oe=he.track)==null?void 0:Oe.kind,enabled:(Ae=he.track)==null?void 0:Ae.enabled,readyState:(Te=he.track)==null?void 0:Te.readyState,id:(De=he.track)==null?void 0:De.id,muted:(ae=he.track)==null?void 0:ae.muted})}),console.log(" Audio and video tracks should be present above");const q=V.getSenders();console.log(`
 Total senders:`,q.length),q.forEach((he,ye)=>{var Oe,Ae,Te,De;console.log(` Sender ${ye}:`,{kind:(Oe=he.track)==null?void 0:Oe.kind,enabled:(Ae=he.track)==null?void 0:Ae.enabled,readyState:(Te=he.track)==null?void 0:Te.readyState,id:(De=he.track)==null?void 0:De.id})})},1e3)):V.connectionState==="disconnected"?(T(!1),console.log(" WebRTC connection DISCONNECTED")):V.connectionState==="failed"?(T(!1),console.log(" WebRTC connection FAILED")):V.connectionState==="closed"&&(T(!1),console.log(" WebRTC connection CLOSED"))},!w.current)throw console.error(" CRITICAL ERROR: localStreamRef.current is null/undefined in createPeerConnection!"),new Error("Local stream lost before createPeerConnection");return V};O.useEffect(()=>(console.log(`

 ===== SOCKET LISTENERS SETUP (COMPONENT MOUNT) =====`),console.log(" Setting up socket listeners - runs ONCE on component load"),console.log(" Socket ID:",Z.id),console.log(" Socket connected:",Z.connected),console.log("  Using userIdRef.current for ALL ID comparisons:",h.current),Z.off("partner_found"),Z.off("webrtc_offer"),Z.off("webrtc_answer"),Z.off("ice_candidate"),Z.off("receive_message"),Z.off("partner_disconnected"),Z.off("disconnect"),console.log(" Removed old listeners (if any existed)"),Z.on("partner_found",async M=>{var Oe,Ae,Te,De;console.log(`

 ===== PARTNER FOUND EVENT RECEIVED =====`),console.log(" RAW DATA from server:",JSON.stringify(M,null,2)),console.log(" My socket ID:",Z.id),console.log(" currentUser object:",JSON.stringify(p,null,2)),console.log(" userIdRef.current (SHOULD USE THIS):",h.current),console.log(" currentUser.googleId:",p==null?void 0:p.googleId),console.log(" currentUser.id:",p==null?void 0:p.id),console.log(" data.socketId:",M.socketId),console.log(" data.partnerId:",M.partnerId),console.log(" data.userName:",M.userName),console.log(`
 SELF-MATCH CHECK - START`);const H=h.current,V=M.partnerId;if(console.log(" COMPARISON VALUES:"),console.log("   myUserId type:",typeof H,"value:",H),console.log("   partnerUserId type:",typeof V,"value:",V),console.log("   Are they EQUAL?",H===V),console.log("   String comparison:",String(H)===String(V)),H===V){console.error(`
 CRITICAL ERROR: SELF-MATCH DETECTED! `),console.error("   My user ID:",H,"type:",typeof H),console.error("   Partner user ID:",V,"type:",typeof V),console.error("   Match IDs:",H===V),console.error("   These should be DIFFERENT!"),En(!0),console.error("   Emitting skip_user..."),Z.emit("skip_user",{partnerSocketId:M.socketId}),console.error("   Emitting find_partner..."),Z.emit("find_partner",{userId:h.current,userName:p.name||"Anonymous",userAge:p.age||18,userLocation:p.location||"Unknown"}),console.error("   Returning - match REJECTED");return}console.log(" SELF-MATCH CHECK PASSED - partner is different user"),console.log("   Accepting match and proceeding with WebRTC setup"),console.log(` SELF-MATCH CHECK - END
`),_.current=M.socketId,console.log(" CRITICAL: Stored partner socket ID:",_.current),console.log(" CRITICAL: Verification - partnerSocketIdRef.current is now:",_.current),console.log(" ABOUT TO CALL setHasPartner(true)"),y(!0),console.log("  setHasPartner(true) CALLED - force attach effect should trigger");const G={...M,picture:M.userPicture||M.picture||null,userName:M.userName||M.name||"Anonymous",userLocation:M.userLocation||M.location||"Unknown",userAge:M.userAge||M.age||18};b(G),console.log("  setPartnerInfo CALLED with data:",G);const q=Z.id,he=M.socketId,ye=q<he;if(console.log(" SOCKET ID COMPARISON:"),console.log("   My socket ID:",q),console.log("   Partner socket ID:",he),console.log("   Am I offerer? (myID < partnerID):",ye),console.log(`
 ===== CRITICAL STREAM VERIFICATION =====`),console.log(" Checking localStreamRef.current status:"),console.log("   exists:",!!w.current),console.log("   tracks:",((Oe=w.current)==null?void 0:Oe.getTracks().length)||0),console.log("   video element srcObject:",!!((Ae=x.current)!=null&&Ae.srcObject)),!w.current){console.error("  CRITICAL: localStreamRef.current is NULL - cannot proceed to WebRTC"),console.error("   This means the camera stream was never acquired or was lost"),console.error("   Attempting emergency camera reacquisition...");try{const ae=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(w.current=ae,x.current){x.current.srcObject=ae,x.current.muted=!0;try{await x.current.play()}catch{console.warn(" Play error in emergency reacquisition")}}console.log("  EMERGENCY: Camera stream re-acquired")}catch(ae){console.error("  EMERGENCY FAILED: Could not reacquire camera -",ae.message),console.error("   User must allow camera permission to continue");return}}if(console.log(`  STREAM VERIFICATION PASSED - proceeding with WebRTC
`),!ye){console.log(" I am the ANSWERER - waiting for offer from offerer");return}console.log(" I am the OFFERER - creating peer connection and sending offer");try{if(console.log(`
 OFFERER: Creating peer connection`),l.current){console.warn(" OFFERER: WARNING - Peer connection already exists! Not recreating."),console.warn("   Existing PC state:",{connectionState:l.current.connectionState,iceConnectionState:l.current.iceConnectionState,signalingState:l.current.signalingState});return}let ae;try{ae=await Ei()}catch(pe){console.error(" OFFERER: Error creating peer connection:",pe);return}if(l.current=ae,console.log(" OFFERER: Peer connection created"),console.log(" OFFERER Stream status after peer connection creation:",{exists:!!w.current,trackCount:(Te=w.current)==null?void 0:Te.getTracks().length,tracks:(De=w.current)==null?void 0:De.getTracks().map(pe=>({kind:pe.kind,enabled:pe.enabled,state:pe.readyState}))}),w.current){console.log(`
 OFFERER localStream:`,w.current);const pe=w.current.getTracks();console.log(" OFFERER: All available tracks:",pe),console.log(" OFFERER tracks detail:",pe.map(We=>({kind:We.kind,id:We.id,enabled:We.enabled,state:We.readyState})));const Wt=ae.getSenders();if(console.log(" OFFERER: Existing senders count:",Wt.length),Wt.length>0)console.warn(" OFFERER WARNING: Tracks already added! Senders:",Wt.map(We=>{var Ce,yt;return{kind:(Ce=We.track)==null?void 0:Ce.kind,id:(yt=We.track)==null?void 0:yt.id}})),console.warn("   Not adding tracks again to avoid duplicates");else{console.log(`
 OFFERER: Adding ${pe.length} local tracks to peer connection`),pe.forEach((Ce,yt)=>{console.log(`  [${yt}] Adding ${Ce.kind} track (id: ${Ce.id}, enabled: ${Ce.enabled})`);try{const Pt=ae.addTrack(Ce,w.current);console.log(`  [${yt}]  addTrack succeeded, sender:`,Pt)}catch(Pt){console.error(`  [${yt}]  addTrack failed:`,Pt)}}),console.log(`
 OFFERER: All tracks added to peer connection`);const We=ae.getSenders();console.log(" OFFERER senders count:",We.length),console.log(" OFFERER senders after addTrack:",We.map((Ce,yt)=>{var Pt,ue,Ot;return{index:yt,kind:(Pt=Ce.track)==null?void 0:Pt.kind,id:(ue=Ce.track)==null?void 0:ue.id,trackExists:!!Ce.track,trackEnabled:(Ot=Ce.track)==null?void 0:Ot.enabled}})),console.log(" OFFERER: Ready to send offer with",pe.length,`tracks
`)}}else console.error(" OFFERER: No local stream available - TRACKS WILL NOT BE SENT!"),console.error(" OFFERER: localStreamRef.current is:",w.current);console.log(`
 ===== OFFERER CREATING AND SENDING OFFER =====`),console.log(" OFFERER: Creating WebRTC offer with offerToReceiveVideo/Audio");const $t=await ae.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0});console.log(" OFFERER: Offer created with receive constraints:",$t),console.log(" OFFERER SDP CHECK - Looking for a=sendrecv:");const Dn=$t.sdp.split(`
`).filter(pe=>pe.includes("sendrecv")||pe.includes("recvonly")||pe.includes("sendonly"));console.log("   Media direction lines:"),Dn.forEach(pe=>console.log("   ",pe)),console.log(" OFFERER: Setting local description (offer)"),await ae.setLocalDescription($t),console.log(" OFFERER: Local description set"),console.log(`
 OFFERER: Sending offer with tracks:`,ae.getSenders().map(pe=>{var Wt,We,Ce;return{kind:(Wt=pe.track)==null?void 0:Wt.kind,id:(We=pe.track)==null?void 0:We.id,enabled:(Ce=pe.track)==null?void 0:Ce.enabled}})),console.log(" OFFERER: Partner socket ID from data:",M.socketId),console.log(" OFFERER: partnerSocketIdRef.current value:",_.current),console.log(" CRITICAL: About to emit webrtc_offer with to:",M.socketId),console.log(" CRITICAL: Is to value empty/null/undefined?",!M.socketId),Z.emit("webrtc_offer",{offer:l.current.localDescription,to:M.socketId}),console.log(" OFFERER: webrtc_offer emitted successfully"),console.log(" OFFERER: webrtc_offer sent to socket ID:",M.socketId),console.log(" OFFERER: webrtc_offer contains",l.current.getSenders().length,"senders"),console.log(" OFFERER: Sent to socket:",M.socketId)}catch(ae){console.error(" OFFERER: Error in partner_found handler:",ae),console.error(" OFFERER: Stack trace:",ae.stack)}}),Z.on("webrtc_offer",async M=>{console.log(`

`),console.log("  ANSWERER HANDLER FIRED  "),console.log(""),console.log(" ===== ANSWERER RECEIVED OFFER ====="),console.log(" ANSWERER: WEBRTC_OFFER EVENT FIRED - OFFER WAS RECEIVED"),console.log(" ANSWERER: Received WebRTC offer from offerer"),console.log(" ANSWERER: My socket ID:",Z.id),console.log(" ANSWERER: Offer from:",M.from),console.log(" ANSWERER: Full data:",M),console.log(" ANSWERER: data.from (offerer socket ID):",M.from),_.current=M.from,console.log(" CRITICAL: Stored offerer socket ID:",_.current);try{if(l.current)console.log(" ANSWERER: WARNING - peerConnectionRef already exists (should be null for answerer)");else{console.log(" ANSWERER: Creating new peer connection for the first time");let q;try{q=await Ei()}catch(he){console.error(" ANSWERER: Error creating peer connection:",he);return}l.current=q,console.log(" ANSWERER: Peer connection created")}if(console.log(`
 ANSWERER: ALWAYS executing track addition logic`),console.log(" ANSWERER: Checking localStreamRef.current..."),console.log(" ANSWERER localStreamRef.current:",w.current),console.log(" ANSWERER localStreamRef.current === null?",w.current===null),console.log(" ANSWERER localStreamRef.current === undefined?",w.current===void 0),!w.current){console.warn(" ANSWERER: localStreamRef.current is NULL - attempting emergency reacquisition");try{const q=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(w.current=q,x.current){x.current.srcObject=q,x.current.muted=!0;try{await x.current.play()}catch{console.warn(" Play error in answerer emergency reacquisition")}}console.log(" ANSWERER: Emergency stream acquisition successful")}catch(q){throw console.error(" ANSWERER: Emergency stream acquisition failed:",q.message),new Error("ANSWERER: Cannot reacquire camera stream - "+q.message)}}if(w.current){console.log(`
 ANSWERER: localStream EXISTS - will add tracks`),console.log(" ANSWERER localStream object:",w.current);const q=w.current.getTracks();console.log(" ANSWERER: getAllTracks() returned:",q),console.log(" ANSWERER: Track array length:",q.length),q.length>0?console.log(" ANSWERER: Tracks detail:",q.map(ye=>({kind:ye.kind,id:ye.id,enabled:ye.enabled,readyState:ye.readyState}))):console.warn(" ANSWERER: WARNING - localStream exists but getTracks() returned empty array!");const he=l.current.getSenders();if(console.log(" ANSWERER: Existing senders count:",he.length),he.length>0)console.warn(" ANSWERER WARNING: Tracks already added! Senders:",he.map(ye=>{var Oe,Ae;return{kind:(Oe=ye.track)==null?void 0:Oe.kind,id:(Ae=ye.track)==null?void 0:Ae.id}})),console.warn("   Not adding tracks again to avoid duplicates");else{console.log(`
 ANSWERER: Attempting to add ${q.length} local tracks to peer connection`);let ye=0,Oe=0;q.forEach((Te,De)=>{console.log(`  [${De}] About to add ${Te.kind} track (id: ${Te.id}, enabled: ${Te.enabled})`);try{const ae=l.current.addTrack(Te,w.current);console.log(`  [${De}]  addTrack SUCCEEDED`),console.log(`  [${De}] Sender:`,ae),ye++}catch(ae){console.error(`  [${De}]  addTrack FAILED`),console.error(`  [${De}] Error:`,ae.message),Oe++}}),console.log(`
 ANSWERER: Track addition complete (${ye} succeeded, ${Oe} failed)`);const Ae=l.current.getSenders();console.log(" ANSWERER: Final senders count:",Ae.length),console.log(" ANSWERER: Senders:",Ae.map((Te,De)=>{var ae,$t,Dn;return{index:De,kind:(ae=Te.track)==null?void 0:ae.kind,id:($t=Te.track)==null?void 0:$t.id,trackExists:!!Te.track,trackEnabled:(Dn=Te.track)==null?void 0:Dn.enabled}}))}}else throw console.error(`
 ANSWERER: CRITICAL ERROR - localStreamRef.current is NULL!`),console.error(" ANSWERER: Cannot add tracks - stream does not exist"),new Error("ANSWERER: No local stream - cannot add tracks");console.log(`
 ANSWERER: Setting remote description (offer from offerer)`),await l.current.setRemoteDescription(new RTCSessionDescription(M.offer)),console.log(" ANSWERER: Remote description set successfully"),console.log(" ANSWERER: Creating answer");const H=await l.current.createAnswer({offerToReceiveVideo:!0,offerToReceiveAudio:!0});console.log(" ANSWERER: Answer created with receive constraints"),console.log(" ANSWERER SDP CHECK - Looking for a=sendrecv:");const V=H.sdp.split(`
`).filter(q=>q.includes("sendrecv")||q.includes("recvonly")||q.includes("sendonly"));console.log("   Media direction lines:"),V.forEach(q=>console.log("   ",q)),console.log(" ANSWERER: Setting local description (answer)"),await l.current.setLocalDescription(H),console.log(" ANSWERER: Local description set successfully"),console.log(`
 ===== ANSWERER SENDING ANSWER =====`);const G=l.current.getSenders();console.log(" ANSWERER: Final senders count:",G.length),console.log(" ANSWERER: Sending answer with tracks:",G.map(q=>{var he,ye,Oe;return{kind:(he=q.track)==null?void 0:he.kind,id:(ye=q.track)==null?void 0:ye.id,enabled:(Oe=q.track)==null?void 0:Oe.enabled}})),console.log(" CRITICAL: Offerer socket ID from offer:",M.from),console.log(" SERVER sending ANSWER to:",M.from),Z.emit("webrtc_answer",{answer:l.current.localDescription,to:M.from}),console.log(" ANSWERER: Answer emitted to offerer via socket:",M.from),console.log(` ===== ANSWERER ANSWER SENT =====

`)}catch(H){console.error(`
 ANSWERER: ERROR in webrtc_offer handler:`,H),console.error(" ANSWERER: Error message:",H.message),console.error(" ANSWERER: Stack trace:",H.stack)}}),Z.on("webrtc_answer",async M=>{console.log(`

 ===== OFFERER RECEIVED ANSWER =====`),console.log(" OFFERER: Received WebRTC answer from answerer"),console.log(" OFFERER: data.from (answerer socket ID):",M.from),console.log(" OFFERER: Answer SDP:",M.answer),_.current=M.from,console.log(" CRITICAL: Stored answerer socket ID:",_.current);try{if(!l.current){console.error(" OFFERER: No peer connection available to handle answer");return}console.log(`
 OFFERER: Setting remote description (answer from answerer)`),console.log(" OFFERER: Current connection state before answer:",{connectionState:l.current.connectionState,iceConnectionState:l.current.iceConnectionState,signalingState:l.current.signalingState}),await l.current.setRemoteDescription(new RTCSessionDescription(M.answer)),console.log(" OFFERER: Remote description (answer) set successfully"),console.log(" OFFERER: Connection state after answer:",{connectionState:l.current.connectionState,iceConnectionState:l.current.iceConnectionState,signalingState:l.current.signalingState}),console.log(` ===== OFFERER ANSWER RECEIVED AND SET =====

`)}catch(H){console.error(" OFFERER: Error handling answer:",H),console.error(" OFFERER: Stack trace:",H.stack)}}),Z.on("ice_candidate",async M=>{if(console.log(`
 ICE candidate received from peer:`,{candidate:M.candidate,sdpMLineIndex:M.sdpMLineIndex,sdpMid:M.sdpMid}),!M.candidate||M.candidate.sdpMid==null&&M.candidate.sdpMLineIndex==null){console.warn(" Ignoring invalid ICE candidate (empty sdpMid and sdpMLineIndex)");return}try{l.current?(console.log(" Adding ICE candidate to peer connection"),await l.current.addIceCandidate(new RTCIceCandidate(M.candidate)),console.log(` ICE candidate added successfully
`)):console.warn(" No peer connection available for ICE candidate")}catch(H){console.error(" Error adding ICE candidate:",H)}}),Z.on("receive_message",M=>{wi(H=>[...H,{id:Date.now(),sender:"partner",text:M.message,timestamp:new Date}])}),Z.on("partner_disconnected",M=>{console.log(`

 ===== PARTNER DISCONNECTED EVENT RECEIVED ===== `),console.log(" Event Data:",M),console.log(" Timestamp:",new Date().toISOString()),console.log(" Partner has closed the browser/tab"),console.log(" Cleaning up WebRTC connection..."),l.current?(console.log(" Closing peer connection"),console.log("   Current state:",l.current.connectionState),l.current.close(),l.current=null,console.log(" Peer connection closed successfully")):console.log(" WARNING: peerConnectionRef.current was null"),A.current&&(console.log(" Clearing remote video ref"),A.current.srcObject=null),console.log(" Calling endChat() to reset UI"),qc(),console.log(" Cleanup complete - ready for new partner")}),Z.on("disconnect",()=>{console.log("Socket disconnected"),la()}),console.log(`

 ===== ALL SOCKET LISTENERS REGISTERED =====`),console.log("  partner_found listener active"),console.log("  webrtc_offer listener active"),console.log("  webrtc_answer listener active"),console.log("  ice_candidate listener active"),console.log("  receive_message listener active"),console.log("  partner_disconnected listener active (CRITICAL FOR DISCONNECT)"),console.log("  disconnect listener active"),console.log(` Ready to receive WebRTC signaling messages

`),()=>{console.log(" Removing socket listeners on component unmount"),Z.off("partner_found"),Z.off("webrtc_offer"),Z.off("webrtc_answer"),Z.off("ice_candidate"),Z.off("receive_message"),Z.off("partner_disconnected"),Z.off("disconnect")}),[]),O.useEffect(()=>{const M=L,H=E;return()=>{console.log(`

   CHAT COMPONENT UNMOUNTING - CRITICAL CLEANUP   `),M&&!H&&(console.log(" User was still looking for partner - emitting cancel_matching"),Z.emit("cancel_matching",{userId:h.current,timestamp:new Date().toISOString()})),l.current&&(console.log(" Closing peer connection"),l.current.close(),l.current=null),console.log(" Chat component cleanup complete (tracks NOT stopped - will be reused)")}},[]),O.useEffect(()=>()=>{console.log(" Chat component unmounting - cleaning up peer connection only"),l.current&&(l.current.close(),l.current=null)},[]);const xs=async()=>{var M;try{console.log(" Fetching TURN servers from Xirsys via backend API...");const V=await(await fetch("https://flinxx-backend.onrender.com/api/turn")).json();if(console.log(" Xirsys API Response:",V),(M=V==null?void 0:V.v)!=null&&M.iceServers&&Array.isArray(V.v.iceServers))return console.log(" TURN servers fetched from Xirsys API"),console.log(" iceServers is an array with",V.v.iceServers.length,"entries"),console.log(" ICE Servers:",V.v.iceServers),V.v.iceServers;throw console.warn(" Invalid Xirsys TURN response format"),console.log("   Expected: data.v.iceServers as array"),console.log("   Received:",V),new Error("Invalid Xirsys TURN response format")}catch(H){console.error(" Error fetching TURN servers from Xirsys:",H.message),console.log(" Falling back to static STUN/TURN configuration");const V=a2();return console.log(" Using fallback ICE servers:",V),V}},oa=async()=>{if(S)S&&!L&&(console.log(' [MATCHING] User clicked "Start Video Chat" again - starting matching'),console.log(" [MATCHING]  NOT reinitializing camera - stream already active"),console.log(" [MATCHING] Emitting find_partner event to server"),F(!0),En(!0),Z.emit("find_partner",{userId:h.current,userName:p.name||"Anonymous",userAge:p.age||18,userLocation:p.location||"Unknown",userPicture:p.picture||null}),console.log(" [MATCHING]  find_partner event emitted - now waiting for a partner"));else{if(console.log(' [START] User clicked "Allow Camera & Continue" - requesting camera permission'),tn){console.warn(" Camera request already in progress");return}try{bt(!0),En(!0),console.log(" [INIT] Requesting camera permission from browser...");const M=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(w.current=M,console.log("[Camera]  Camera stream obtained"),console.log("[Camera] Stream tracks:",M.getTracks().map(H=>({kind:H.kind,id:H.id}))),x.current){x.current.srcObject=M,x.current.muted=!0;try{await x.current.play(),console.log(" Camera preview playing successfully")}catch(H){console.error(" Play error:",H)}}console.log(" [START] Setting cameraStarted = true (camera preview now showing)"),D(!0),bt(!1),En(!1),console.log(" [START]  Camera initialized - user is still on home screen, matching NOT started yet")}catch(M){console.error(" Error initializing camera:",M),bt(!1),En(!1),M.name==="NotAllowedError"?console.warn(" Camera permission denied by user"):M.name==="NotFoundError"?console.warn(" No camera device found"):M.name==="NotReadableError"&&console.warn(" Camera device is already in use by another application")}}},aa=()=>{if(Mr.trim()===""||!E)return;const M={id:Date.now(),sender:"user",text:Mr,timestamp:new Date};wi(H=>[...H,M]),Z.emit("send_message",{message:Mr}),Fr("")},qc=()=>{y(!1),T(!1),b(null),wi([]),$e(0),l.current&&(l.current.close(),l.current=null),Z.emit("find_partner",{userId:h.current,userName:p.name||"Anonymous",userAge:p.age||18,userLocation:p.location||"Unknown"})},la=()=>{console.log(" Cleaning up chat session"),l.current&&(l.current.close(),l.current=null),D(!1),y(!1),T(!1),wi([]),$e(0)},Ss=()=>u.jsxs("div",{className:"intro-screen-container flex flex-row w-full max-w-[1500px] mx-auto gap-12 px-10 mt-20 items-start overflow-visible",style:{minHeight:"100vh",height:"auto",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx(f2,{currentUser:p,onProfileClick:()=>ee(!0),onPremiumClick:()=>wn(!0),onMatchHistoryClick:()=>de(!0),isFixedPosition:!0}),u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})}),u.jsx("div",{className:"right-panel flex-1 rounded-3xl shadow-xl p-12 pb-16 space-y-6 flex items-center justify-center",style:{height:"520px",minHeight:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f"},children:u.jsxs("div",{className:"w-full h-full rounded-3xl p-8 shadow-2xl flex flex-col items-center justify-between text-center",children:[u.jsxs("div",{className:"flex gap-3 justify-center",children:[u.jsx("button",{className:"text-white font-bold py-2 px-6 rounded-lg transition-all text-sm shadow-md hover:shadow-lg",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"SOLO"}),u.jsx("button",{className:"text-white font-bold py-2 px-6 rounded-lg transition-all text-sm",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"DUO"})]}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("img",{src:Jf,alt:"Flinxx",className:"w-16 h-16"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black mb-2",style:{color:"#d9b85f"},children:"Flinxx"}),u.jsx("p",{className:"text-sm",style:{color:"#d9b85f"},children:"Meet new people in real time."})]}),u.jsx("button",{onClick:()=>W(!0),className:"rounded-full px-4 py-1 transition-all cursor-pointer text-xs",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:u.jsxs("span",{className:"font-semibold",children:[" ",Ee==="girls"?"Girls Only":Ee==="guys"?"Guys Only":"Both"]})})]}),u.jsx("button",{onClick:oa,disabled:Vr,className:"w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 text-sm shadow-lg",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:Vr?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin inline-block mr-2",children:""})," ",S?"Starting Match...":"Requesting Access..."]}):S?"Start Video Chat":"Allow Camera & Continue"})]})})]}),ca=()=>(O.useEffect(()=>{console.log(`

 ===== WAITING SCREEN DIAGNOSTIC CHECK =====
`);const M=!!x.current;console.log(" CHECK 1: Video element found?",M?"YES":"NO",x.current);const H=!!w.current;if(console.log(" CHECK 2: Local stream valid?",H?"YES":"NO",w.current),H){const V=w.current.getVideoTracks();if(console.log(" CHECK 3: Does stream have video track?",V.length>0?"YES":"NO"),V.length>0){const G=V[0];console.log("   - kind:",G.kind),console.log("   - enabled:",G.enabled),console.log("   - readyState:",G.readyState),console.log("   - id:",G.id)}}if(M&&H){const V=x.current.srcObject===w.current;console.log(" CHECK 4: Stream attached to video element?",V?"YES":"NO"),V||(console.log("    Attaching stream to video element NOW..."),x.current.srcObject=w.current,x.current.muted=!0,console.log("    Stream attached!"))}console.log(`
 ===== END DIAGNOSTIC CHECK =====

`)},[L]),u.jsxs("div",{className:"flex flex-row w-full max-w-[1500px] mx-auto gap-12 px-10 mt-20 items-start overflow-visible",style:{minHeight:"100vh",height:"auto",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})}),u.jsx("div",{className:"right-panel flex-1 rounded-3xl shadow-xl flex flex-col",style:{height:"520px",minHeight:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f",padding:0,overflow:"visible",position:"relative",zIndex:5},children:u.jsxs("div",{className:"flex flex-col items-center justify-center text-center gap-8 py-20",children:[u.jsx("div",{className:"animate-pulse text-6xl",children:""}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("h2",{className:"text-2xl font-bold",style:{color:"#d9b85f"},children:"Looking for a partner..."}),u.jsx("p",{className:"text-sm",style:{color:"#d9b85f"},children:"Matching you with someone nearby"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0.2s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0.4s"}})]}),u.jsx("button",{onClick:()=>{console.log(" Cancel matching - emitting cancel_matching event"),Z.emit("cancel_matching",{userId:h.current,timestamp:new Date().toISOString()}),F(!1),En(!1)},className:"w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 text-sm shadow-lg mt-4",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"Cancel Search"})]})})]})),Kc=()=>(console.log(" VideoChatScreen rendering - partnerInfo:",{exists:!!R,userName:R==null?void 0:R.userName,userLocation:R==null?void 0:R.userLocation,picture:!!(R!=null&&R.picture),fullObject:R}),console.log(" currentUser for comparison:",{name:p==null?void 0:p.name,location:p==null?void 0:p.location,picture:!!(p!=null&&p.picture)}),u.jsxs("div",{className:"video-chat-container flex flex-col md:flex-row w-full h-full gap-6 items-start overflow-visible",style:{minHeight:"100vh",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsxs("div",{className:"right-panel flex-1 rounded-3xl shadow-xl flex flex-col",style:{height:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f",padding:0,overflow:"visible"},children:[u.jsxs("div",{className:"w-full h-full bg-black rounded-3xl shadow-2xl flex flex-col overflow-visible",style:{backgroundColor:"#131313",overflow:"visible"},children:[u.jsxs("div",{className:"px-4 flex items-center justify-between backdrop-blur-sm flex-shrink-0",style:{height:"56px",paddingTop:"8px",paddingBottom:"8px",backgroundColor:"rgba(19, 19, 19, 0.8)",borderBottom:"1px solid #d9b85f"},children:[u.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg flex-shrink-0 overflow-hidden",children:E&&R&&R.picture?u.jsx("img",{src:R.picture,alt:"Partner",className:"w-full h-full object-cover"}):""}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-semibold text-sm leading-tight truncate",style:{color:"#d9b85f"},children:E&&R?R.userName:"Waiting..."}),u.jsx("p",{className:"text-xs truncate",style:{color:"#d9b85f"},children:E&&R?R.userLocation:"for a partner"})]})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[u.jsx("button",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""}),u.jsx("button",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""})]})]}),u.jsxs("div",{id:"main-container",className:"overflow-visible flex flex-col w-full flex-1",style:{zIndex:1,backgroundColor:"transparent",padding:0,overflow:"visible"},children:[u.jsxs("div",{id:"remote-video-wrapper",style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:1,overflow:"visible",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:[u.jsx("video",{id:"remote-video-singleton",ref:A,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"black",display:E?"block":"none",zIndex:10}}),!E&&u.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000000",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:u.jsx("p",{style:{color:"#d9b85f",fontSize:"14px"},children:"Waiting for partner video..."})}),I&&E&&u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 text-xs font-semibold z-50 shadow-lg px-2 py-1 rounded-full",style:{backgroundColor:"rgba(217, 184, 95, 0.9)",color:"#0f0f0f"},children:[u.jsx("span",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:"#0f0f0f"}}),l2(C)]})]}),!E&&u.jsx("div",{className:"flex-1 w-full flex items-center justify-center flex-col bg-black rounded-2xl",style:{zIndex:1},children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin mb-4 text-5xl inline-block",children:""}),u.jsx("p",{className:"font-semibold text-base",style:{color:"#d9b85f"},children:"Looking for a partner..."}),u.jsx("p",{className:"text-xs mt-2",style:{color:"#d9b85f"},children:"This won't take long"})]})}),zt.length>0&&E&&u.jsx("div",{className:"space-y-2 mt-3 px-4",style:{zIndex:10},children:zt.map(M=>u.jsx("div",{className:`flex ${M.sender==="user"?"justify-end":"justify-start"}`,children:u.jsx("div",{className:`max-w-xs px-3 py-2 rounded-2xl text-xs ${M.sender==="user","text-white"}`,style:{backgroundColor:M.sender==="user"?"#d9b85f":"rgba(217, 184, 95, 0.6)",color:M.sender==="user"?"#0f0f0f":"#d9b85f"},children:M.text})},M.id))})]})]}),u.jsxs("div",{className:"px-4 flex items-center justify-between backdrop-blur-sm flex-shrink-0",style:{height:"56px",paddingTop:"8px",paddingBottom:"8px",backgroundColor:"rgba(19, 19, 19, 0.8)",borderTop:"1px solid #d9b85f"},children:[u.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"M"})}),u.jsxs("div",{className:"flex items-center gap-2 flex-1 ml-2 flex-shrink-0",children:[u.jsx("input",{type:"text",value:Mr,onChange:M=>Fr(M.target.value),onKeyPress:M=>M.key==="Enter"&&aa(),placeholder:"Send Message",disabled:!E,className:"flex-1 px-3 py-2 rounded-lg focus:outline-none disabled:bg-gray-500/20 text-xs font-medium",style:{backgroundColor:"rgba(217, 184, 95, 0.1)",borderColor:"#d9b85f",border:"1px solid #d9b85f",color:"#d9b85f"}}),u.jsx("button",{onClick:aa,disabled:!E||Mr.trim()==="",className:"w-8 h-8 font-bold rounded-lg transition-all disabled:cursor-not-allowed flex items-center justify-center text-sm shadow-md flex-shrink-0",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""})]})]})]}),u.jsx("div",{className:"left-panel flex-1 rounded-3xl shadow-xl",style:{height:"520px",minHeight:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f",overflow:"hidden",position:"relative"},children:u.jsx("div",{className:"you-badge",children:"You"})})]}));return u.jsxs("div",{className:"flex flex-col h-screen w-screen overflow-visible min-h-0",style:{backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx("video",{ref:x,id:"local-video-singleton",className:"local-video",autoPlay:!0,playsInline:!0,muted:!0,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#000",display:"none",zIndex:1}}),E?u.jsx(Kc,{}):L?u.jsx(ca,{}):u.jsx(Ss,{}),u.jsx(c2,{isOpen:Zt,onClose:()=>wn(!1)}),u.jsx(d2,{isOpen:Y,onClose:()=>ee(!1),onOpenPremium:()=>wn(!0),onReinitializeCamera:(Ii=o.current)==null?void 0:Ii.reinitializeCamera}),u.jsx(h2,{isOpen:_e,onClose:()=>de(!1)}),u.jsx(u2,{isOpen:en,onClose:()=>W(!1),currentGender:Ee,onOpenPremium:()=>wn(!0)}),k&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-indigo-600 rounded-2xl p-8 max-w-md w-full border border-white/20 shadow-2xl",children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-center",children:" Time's Up!"}),u.jsx("p",{className:"text-white/90 text-center mb-4",children:"Your 2-minute guest preview has ended. Redirecting to login..."}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsx("div",{className:"animate-spin text-4xl",children:""})})]})})]})},m2=()=>{const t=vn(),[e,n]=O.useState(5),[r,i]=O.useState(!0),[s,o]=O.useState([{id:1,username:"Alex_24",name:"Alex",age:24,country:"USA",avatar:"",status:"Online"},{id:2,username:"Jordan_22",name:"Jordan",age:22,country:"UK",avatar:"",status:"Online"},{id:3,username:"Casey_25",name:"Casey",age:25,country:"Canada",avatar:"",status:"Online"},{id:4,username:"Morgan_23",name:"Morgan",age:23,country:"Australia",avatar:"",status:"Online"},{id:5,username:"Taylor_26",name:"Taylor",age:26,country:"Germany",avatar:"",status:"Online"},{id:6,username:"Alex_27",name:"Alex",age:27,country:"France",avatar:"",status:"Online"},{id:7,username:"Sam_21",name:"Sam",age:21,country:"Canada",avatar:"",status:"Online"},{id:8,username:"Chris_28",name:"Chris",age:28,country:"Japan",avatar:"",status:"Online"}]),[l,c]=O.useState(0),h=O.useRef(null);O.useEffect(()=>(r&&e>0?h.current=setTimeout(()=>{n(x=>x-1)},1e3):r&&e===0&&(p(),n(5)),()=>clearTimeout(h.current)),[e,r]);const p=()=>{l<s.length-1?(c(x=>x+1),n(5),i(!0)):(c(0),n(5),i(!0))},m=()=>{p()},v=()=>{Z.emit("connect_user",{targetUserId:s[l].id}),t("/chat")},k=s[l],N=s[(l+1)%s.length];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex flex-col",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-6 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:Jf,alt:"Flinxx",className:"w-8 h-8"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:()=>t("/"),className:"text-white font-semibold hover:text-white/80 transition",children:" Back"})})]})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-8",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"relative h-[600px] mb-8",children:[u.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-md rounded-3xl border border-white/20 p-8 transform scale-95 translate-y-4 opacity-50",children:u.jsxs("div",{className:"h-full flex flex-col justify-between",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-white font-bold text-xl mb-2",children:[N.name,", ",N.age]}),u.jsxs("p",{className:"text-white/70 text-sm mb-6",children:[" ",N.country]})]}),u.jsx("div",{className:"text-center opacity-50",children:u.jsx("p",{className:"text-white/50 text-sm",children:"Next up..."})})]})}),u.jsxs("div",{className:"absolute inset-0 bg-gradient-to-b from-white/20 to-white/5 backdrop-blur-md rounded-3xl border-2 border-white/30 p-8 flex flex-col justify-between shadow-2xl hover:border-white/50 transition-all duration-300",children:[u.jsx("div",{className:"flex justify-center mb-6",children:u.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-5xl shadow-lg shadow-blue-600/50 border-4 border-white/40 text-white",children:k.avatar})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-white font-black text-3xl mb-1",children:k.name}),u.jsx("p",{className:"text-white/90 text-2xl font-bold mb-2",children:k.age}),u.jsxs("p",{className:"text-white/80 text-base mb-2",children:[" ",k.country]}),u.jsxs("p",{className:"text-white/70 text-sm mb-6",children:["@",k.username]}),u.jsx("div",{className:"space-y-3",children:u.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20",children:[u.jsx("p",{className:"text-white/70 text-xs",children:"Status"}),u.jsxs("p",{className:"text-white font-bold text-sm",children:[" ",k.status]})]})})]}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsxs("div",{className:"relative w-20 h-20",children:[u.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[u.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"white",strokeWidth:"2",opacity:"0.2"}),u.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"url(#gradient)",strokeWidth:"2",strokeDasharray:`${(5-e)/5*226.2} 226.2`,className:"transition-all duration-1000"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:"#fbbf24"}),u.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})]})})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-black text-2xl",children:e})})]})}),r&&u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-blue-400 text-sm font-semibold animate-pulse",children:[" Auto-next in ",e,"s"]})})]})]}),u.jsxs("div",{className:"flex gap-4 justify-center",children:[u.jsx("button",{onClick:m,className:"flex-1 px-6 py-4 bg-white/20 hover:bg-white/30 border-2 border-white/40 hover:border-white/60 rounded-full font-bold text-white transition-all transform hover:scale-105 backdrop-blur",children:" Skip"}),u.jsx("button",{onClick:v,className:"flex-1 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-2xl shadow-blue-600/30 transition-all transform hover:scale-105",children:" Connect"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx("button",{onClick:()=>i(!r),className:`px-6 py-2 rounded-full font-semibold text-sm transition-all ${r?"bg-blue-600/30 text-blue-200 border border-blue-400/50":"bg-white/10 text-white/70 border border-white/20"}`,children:r?" Auto-Next ON":" Auto-Next OFF"})}),u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("p",{className:"text-white/70 text-sm",children:["Showing ",l+1," of ",s.length," profiles"]})})]})})]})},g2=()=>{const t=vn(),{user:e}=O.useContext(ws)||{},r=(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null)||e||{name:"Guest User",email:"guest@flinxx.local",picture:null,googleId:"N/A"};console.log(" Profile Component - Loaded User:",r);const[i,s]=O.useState({username:(r==null?void 0:r.name)||"User",age:(r==null?void 0:r.age)||24,country:(r==null?void 0:r.location)||"Unknown",bio:"Welcome to my profile",avatar:"",gender:"Not specified",status:"Looking to chat",email:(r==null?void 0:r.email)||"",displayName:(r==null?void 0:r.name)||"",photoURL:(r==null?void 0:r.picture)||"",googleId:(r==null?void 0:r.googleId)||"N/A"}),[o,l]=O.useState(!0);O.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.email)){console.log(" No user email found, using localStorage data only"),console.log(" Profile from localStorage:",{name:r==null?void 0:r.name,email:r==null?void 0:r.email,picture:r==null?void 0:r.picture,googleId:r==null?void 0:r.googleId}),l(!1);return}const A="https://flinxx-backend.onrender.com";console.log(` Profile Component - Fetching from: ${A}/api/user/profile?email=${r.email}`);const w=await fetch(`${A}/api/user/profile?email=${encodeURIComponent(r.email)}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!w.ok)throw new Error(`Failed to fetch profile: ${w.status}`);const _=await w.json();console.log(" Profile data fetched from backend:",_.profile),_.profile?s(S=>({...S,email:_.profile.email||r.email||S.email,displayName:_.profile.name||r.name||S.displayName,photoURL:_.profile.picture||r.picture||S.photoURL,googleId:r.googleId||_.profile.id||S.googleId})):s(S=>({...S,email:r.email||S.email,displayName:r.name||S.displayName,photoURL:r.picture||S.photoURL,googleId:r.googleId||S.googleId}))}catch(A){console.error(" Error fetching profile:",A),s(w=>({...w,email:r.email||w.email,displayName:r.name||w.displayName,photoURL:r.picture||w.photoURL,googleId:r.googleId||w.googleId}))}finally{l(!1)}})()},[r==null?void 0:r.email]);const[c,h]=O.useState(!1),[p,m]=O.useState(i),v=x=>{const{name:A,value:w}=x.target;m(_=>({..._,[A]:A==="age"?parseInt(w):w}))},k=()=>{s(p),h(!1),console.log("Profile saved:",p)},N=["","","","","","","","",""];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-6 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:Jf,alt:"Flinxx",className:"w-8 h-8"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:()=>t("/"),className:"text-white font-semibold hover:text-white/80 transition",children:" Back"})})]})}),u.jsx("div",{className:"flex-1 px-4 py-12",children:u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 mb-8",children:[u.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.photoURL&&!c?u.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center shadow-2xl shadow-yellow-400/50 mb-6 border-4 border-white/30 overflow-hidden",children:u.jsx("img",{src:i.photoURL,alt:"Profile",className:"w-full h-full object-cover"})}):u.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-7xl shadow-2xl shadow-blue-600/50 mb-6 border-4 border-white/30",children:c?u.jsx("div",{className:"grid grid-cols-3 gap-2 p-4",children:N.map(x=>u.jsx("button",{onClick:()=>m(A=>({...A,avatar:x})),className:`text-3xl p-2 rounded-lg transition-all ${p.avatar===x?"bg-white/30 border-2 border-white scale-110":"bg-white/10 hover:bg-white/20"}`,children:x},x))}):i.avatar}),!c&&u.jsx("p",{className:"text-white/70 text-sm",children:"Click Edit to change avatar"})]}),c?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Full Name"}),u.jsx("input",{type:"text",name:"displayName",value:p.displayName,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60",placeholder:"Enter your full name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:p.email,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60",placeholder:"Enter your email"})]}),p.googleId&&p.googleId!=="N/A"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Google ID (Read-only)"}),u.jsx("input",{type:"text",value:p.googleId,disabled:!0,className:"w-full mt-2 bg-white/5 border border-white/20 rounded-xl px-4 py-3 text-white/60 cursor-not-allowed"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Username"}),u.jsx("input",{type:"text",name:"username",value:p.username,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Age"}),u.jsx("input",{type:"number",name:"age",value:p.age,onChange:v,min:"18",max:"100",className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Country"}),u.jsx("input",{type:"text",name:"country",value:p.country,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Gender"}),u.jsxs("select",{name:"gender",value:p.gender,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/60",children:[u.jsx("option",{value:"Male",children:"Male"}),u.jsx("option",{value:"Female",children:"Female"}),u.jsx("option",{value:"Other",children:"Other"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Bio"}),u.jsx("textarea",{name:"bio",value:p.bio,onChange:v,rows:"4",className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60 resize-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Status"}),u.jsxs("select",{name:"status",value:p.status,onChange:v,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/60",children:[u.jsx("option",{value:"Looking to chat",children:"Looking to chat"}),u.jsx("option",{value:"Making friends",children:"Making friends"}),u.jsx("option",{value:"Just browsing",children:"Just browsing"})]})]}),u.jsxs("div",{className:"flex gap-4 pt-6",children:[u.jsx("button",{onClick:()=>{h(!1),m(i)},className:"flex-1 bg-white/20 hover:bg-white/30 text-white font-bold py-3 rounded-xl transition-all",children:"Cancel"}),u.jsx("button",{onClick:k,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105",children:"Save Profile"})]})]}):u.jsxs("div",{className:"space-y-6",children:[i.displayName&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Full Name"}),u.jsx("p",{className:"text-white font-bold text-2xl mt-2",children:i.displayName})]}),i.email&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Email"}),u.jsx("p",{className:"text-white font-normal text-base mt-2",children:i.email})]}),i.googleId&&i.googleId!=="N/A"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Google ID"}),u.jsx("p",{className:"text-white font-mono text-sm mt-2 break-all",children:i.googleId})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Username"}),u.jsx("p",{className:"text-white font-bold text-2xl mt-2",children:i.username})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Age"}),u.jsxs("p",{className:"text-white font-bold text-xl mt-2",children:[i.age," years old"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Country"}),u.jsxs("p",{className:"text-white font-bold text-xl mt-2",children:[" ",i.country]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Gender"}),u.jsx("p",{className:"text-white font-bold text-lg mt-2",children:i.gender})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Bio"}),u.jsx("p",{className:"text-white/90 text-base mt-2",children:i.bio})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Status"}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),u.jsx("p",{className:"text-white font-semibold",children:i.status})]})]}),u.jsx("button",{onClick:()=>h(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105",children:" Edit Profile"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Matches"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"24"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Chats"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"8"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Time Online"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"42h"})]})]})]})})]})},y2=({value:t,onChange:e,maxDate:n})=>{const r=n?`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`:null;return u.jsx("input",{type:"date",value:t||"",onChange:i=>e(i.target.value),max:r,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white text-gray-900",placeholder:"",required:!0})},rp=({user:t,onProfileComplete:e,isOpen:n})=>{const[r,i]=O.useState(""),[s,o]=O.useState(""),[l,c]=O.useState(null),[h,p]=O.useState(null),[m,v]=O.useState(!1),k=vn();O.useEffect(()=>{if(r){const[A,w,_]=r.split("-").map(Number),S=new Date(A,w-1,_),D=new Date;let L=D.getFullYear()-S.getFullYear();const F=D.getMonth()-S.getMonth();(F<0||F===0&&D.getDate()<S.getDate())&&L--,c(L)}else c(null)},[r]);const N=!r||!s||m,x=async A=>{if(A.preventDefault(),!r||!s){p("Please fill in all required fields");return}if(l&&l<18){p("You must be 18+ to use this app");return}v(!0),p(null);try{const w="https://flinxx-backend.onrender.com",_=t.id||t.uid||t.googleId;if(!_)throw new Error("Unable to determine user ID");const S=await fetch(`${w}/api/users/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:_,birthday:r||null,gender:s})}),D=await S.json();if(!S.ok){if(D.code==="UNDERAGE_USER"){p("You must be 18+ to use this app");return}p(D.error||"Failed to save profile");return}console.log(" Profile saved successfully:",D);const L={...t,id:D.user.id,birthday:D.user.birthday,gender:D.user.gender,age:D.user.age,profileCompleted:D.user.profileCompleted,isProfileCompleted:!0};localStorage.setItem("user",JSON.stringify(L)),e&&e(L),setTimeout(()=>{k("/chat?view=home")},500)}catch(w){console.error(" Error saving profile:",w),p(w.message||"Network error. Please try again.")}finally{v(!1)}};return!n||!t?null:u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:u.jsx("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 my-8",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Complete Your Profile"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Just a few more details to get started"})]}),u.jsx("div",{className:"flex justify-center mb-6",children:t.picture||t.photoURL?u.jsx("img",{src:t.picture||t.photoURL,alt:t.name||t.displayName,className:"w-20 h-20 rounded-full object-cover border-4 border-blue-500"}):u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center border-4 border-blue-500",children:u.jsx("span",{className:"text-gray-600 text-2xl",children:""})})}),h&&u.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:u.jsx("p",{className:"text-red-700 text-sm font-medium",children:h})}),u.jsxs("form",{onSubmit:x,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),u.jsx("input",{type:"text",value:t.name||t.displayName||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Birthday ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx(y2,{value:r,onChange:i,maxDate:new Date}),l!==null&&u.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Age: ",u.jsxs("span",{className:l<18?"text-red-600 font-bold":"text-green-600 font-bold",children:[l," years old"]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Gender ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{value:s,onChange:A=>o(A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white text-gray-900 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},required:!0,children:[u.jsx("option",{value:"",disabled:!0,children:"Select gender"}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"other",children:"Other"}),u.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),u.jsx("button",{type:"submit",disabled:N,className:`w-full py-3 px-4 rounded-lg font-medium transition mt-6 ${N?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:m?u.jsxs("span",{className:"flex items-center justify-center",children:[u.jsx("span",{className:"inline-block animate-spin mr-2",children:""}),"Saving..."]}):"Save Profile"})]}),u.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Your birthday and gender cannot be changed after saving."})]})})})};function v2(){const t=vn(),[e]=dE(),[n,r]=O.useState(!1),[i,s]=O.useState(null);O.useEffect(()=>{try{const l=e.get("token"),c=e.get("user"),h=e.get("error");if(console.log(" Callback - Token:",l),console.log(" Callback - User:",c),h){console.error(" OAuth Error:",h),t("/login?error="+encodeURIComponent(h));return}if(l&&c)try{const p=JSON.parse(c);localStorage.setItem("token",l),localStorage.setItem("authToken",l),localStorage.setItem("user",JSON.stringify(p)),localStorage.setItem("authProvider","google"),localStorage.setItem("userInfo",JSON.stringify(p)),console.log(" User data saved:",p),p.isProfileCompleted?(console.log(" Profile completed, redirecting to chat..."),setTimeout(()=>{t("/chat")},500)):(console.log(" Profile not completed, showing setup modal"),s(p),r(!0))}catch(p){console.error(" Error parsing user data:",p),t("/login?error=invalid_user_data")}else console.error(" Missing token or user data"),t("/login?error=missing_data")}catch(l){console.error(" Callback error:",l),t("/login?error="+encodeURIComponent(l.message))}},[e,t]);const o=l=>{console.log(" Profile completed, redirecting to chat"),r(!1),setTimeout(()=>{t("/chat")},500)};return n&&i?u.jsx(rp,{user:i,onProfileComplete:o,isOpen:!0}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Completing your login..."}),u.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Please wait while we set up your session"})]})})}function w2(){const t=vn(),{setAuthToken:e}=O.useContext(ws)||{},[n]=dE(),[r,i]=O.useState(!1),[s,o]=O.useState(null),[l,c]=O.useState(!0),[h,p]=O.useState(null);O.useEffect(()=>{(async()=>{try{const k=n.get("token");if(!k){p("No authentication token received"),c(!1);return}console.log(" Auth Success - Token received:",k.substring(0,10)+"...");const x=await fetch(`https://flinxx-backend.onrender.com/auth-success?token=${k}`);if(!x.ok)throw new Error(`Failed to fetch user data: ${x.statusText}`);const A=await x.json();if(console.log(" User data received:",A.user.email),A.success&&A.user){const w=A.user;e?(console.log("[AuthSuccess] Storing token and user via AuthContext"),e(k,w)):(console.log("[AuthSuccess] AuthContext not available, saving to localStorage directly"),localStorage.setItem("token",k),localStorage.setItem("authToken",k),localStorage.setItem("user",JSON.stringify(w)),localStorage.setItem("authProvider","google"),localStorage.setItem("userInfo",JSON.stringify(w))),console.log(" User data saved to localStorage"),w.profileCompleted?(console.log(" Profile completed, redirecting to chat"),setTimeout(()=>{t("/chat")},500)):(console.log(" Profile not completed, showing setup modal"),o(w),i(!0))}else p(A.error||"Failed to authenticate")}catch(k){console.error(" Auth Success Error:",k),p(k.message||"An error occurred during authentication")}finally{c(!1)}})()},[n,t,e]);const m=v=>{console.log(" Profile completed, redirecting to chat"),i(!1),setTimeout(()=>{t("/chat")},500)};return h?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white text-2xl font-bold mb-4",children:" Authentication Error"}),u.jsx("p",{className:"text-white/70 text-lg mb-6",children:h}),u.jsx("button",{onClick:()=>t("/login"),className:"px-6 py-2 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100",children:"Back to Login"})]})}):r&&s?u.jsx(rp,{user:s,onProfileComplete:m,isOpen:!0}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Completing your login..."}),u.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Please wait while we set up your session"})]})})}const _2=({children:t})=>{const e=vn(),n=O.useContext(ws),r=n==null?void 0:n.user,i=n==null?void 0:n.isLoading,[s,o]=O.useState(!1),[l,c]=O.useState(null),[h,p]=O.useState(!0);console.log(`
[ProtectedChatRoute]  RENDER CALLED`),console.log("[ProtectedChatRoute]   - isLoading:",h),console.log("[ProtectedChatRoute]   - showProfileSetup:",s),console.log("[ProtectedChatRoute]   - authLoading:",i),console.log("[ProtectedChatRoute]   - authUser:",r?r.email:"null"),O.useEffect(()=>{console.log(`

 [ProtectedChatRoute] `),console.log(" [ProtectedChatRoute] EFFECT RUNNING - PROFILE CHECK"),console.log(" [ProtectedChatRoute] "),console.log(" [ProtectedChatRoute] Effect dependencies changed:"),console.log(" [ProtectedChatRoute]   - authLoading:",i),console.log(" [ProtectedChatRoute]   - authUser:",r?r.email:"null");try{if(i===!0){console.log(" [ProtectedChatRoute]  WAITING - AuthContext is still initializing (isLoading=true)"),p(!0);return}if(i===void 0){console.log(" [ProtectedChatRoute]  WAITING - AuthContext loading state is undefined"),p(!0);return}if(console.log(" [ProtectedChatRoute]  AuthContext finished loading (isLoading=false)"),!r){console.log(" [ProtectedChatRoute]  AuthContext finished loading but NO USER found"),console.log(" [ProtectedChatRoute] Redirecting to /login"),p(!1),e("/login",{replace:!0});return}console.log(" [ProtectedChatRoute]  AuthContext loaded with user:",r.email),console.log(" [ProtectedChatRoute] authUser object:",{id:r.id,email:r.email,profileCompleted:r.profileCompleted,birthday:r.birthday,gender:r.gender}),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted type:",typeof r.profileCompleted),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted value:",r.profileCompleted),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted === true?",r.profileCompleted===!0);const v=localStorage.getItem("user");if(console.log(" [ProtectedChatRoute] Checking localStorage:"),console.log(" [ProtectedChatRoute]   - user key exists:",!!v),v)try{const A=JSON.parse(v);console.log(" [ProtectedChatRoute] localStorage user:",{id:A.id,email:A.email,profileCompleted:A.profileCompleted}),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted type:",typeof A.profileCompleted),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted value:",A.profileCompleted),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted === true?",A.profileCompleted===!0)}catch(A){console.error("[ProtectedChatRoute] Failed to parse localStorage user:",A)}else console.log("[ProtectedChatRoute]  No user in localStorage");c(r),console.log(`
 [ProtectedChatRoute] PROFILE COMPLETION CHECK:`);const k=r==null?void 0:r.profileCompleted;console.log(" [ProtectedChatRoute]   Source 1 (AuthContext):"),console.log(" [ProtectedChatRoute]     authUser.profileCompleted =",k),console.log(" [ProtectedChatRoute]     typeof =",typeof k),console.log(" [ProtectedChatRoute]     === true?",k===!0);let N=null;v?(N=JSON.parse(v).profileCompleted,console.log(" [ProtectedChatRoute]   Source 2 (localStorage):"),console.log(" [ProtectedChatRoute]     localStorage.profileCompleted =",N),console.log(" [ProtectedChatRoute]     typeof =",typeof N),console.log(" [ProtectedChatRoute]     === true?",N===!0)):console.log(" [ProtectedChatRoute]   Source 2 (localStorage): not available");const x=k===!0||N===!0;console.log(`
 [ProtectedChatRoute] FINAL DECISION:`),console.log(" [ProtectedChatRoute]   profileCompletedAuth === true?",k===!0),console.log(" [ProtectedChatRoute]   profileCompletedStorage === true?",N===!0),console.log(" [ProtectedChatRoute]   isProfileComplete (final):",x),x?(console.log(`
 [ProtectedChatRoute]  DECISION: Profile IS completed`),console.log(` [ProtectedChatRoute]  SHOWING Chat page
`)):(console.log(`
 [ProtectedChatRoute]  DECISION: Profile NOT completed`),console.log(` [ProtectedChatRoute]  SHOWING ProfileSetupModal
`),o(!0)),p(!1)}catch(v){console.error("[ProtectedChatRoute]  ERROR in profile check:",v),console.error("[ProtectedChatRoute] Stack:",v.stack),p(!1),e("/login",{replace:!0})}},[e,r,i]);const m=v=>{console.log("Profile completed:",v),o(!1),c(v)};return h?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Loading..."})]})}):u.jsxs(u.Fragment,{children:[s&&l&&u.jsx(rp,{user:l,onProfileComplete:m,isOpen:!0}),!s&&t]})};function E2(){return u.jsx(cP,{children:u.jsx(o1,{children:u.jsx("div",{style:{width:"100%",minHeight:"100vh",display:"flex",flexDirection:"column"},children:u.jsxs(n1,{children:[u.jsx(Mn,{path:"/",element:u.jsx(l1,{})}),u.jsx(Mn,{path:"/login",element:u.jsx(h1,{})}),u.jsx(Mn,{path:"/callback",element:u.jsx(v2,{})}),u.jsx(Mn,{path:"/auth-success",element:u.jsx(w2,{})}),u.jsx(Mn,{path:"/chat",element:u.jsx(_2,{children:u.jsx(p2,{})})}),u.jsx(Mn,{path:"/matching",element:u.jsx(m2,{})}),u.jsx(Mn,{path:"/profile",element:u.jsx(g2,{})}),u.jsx(Mn,{path:"*",element:u.jsx(I2,{})})]})})})})}const I2=()=>u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-5xl font-bold text-indigo-400 mb-4",children:"404"}),u.jsx("p",{className:"text-gray-300 mb-8",children:"Page not found"}),u.jsx("a",{href:"/",className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white font-semibold",children:"Go Home"})]})});function x2(){return u.jsx("div",{style:{width:"100%",height:"100vh"},children:u.jsx(E2,{})})}Yu.createRoot(document.getElementById("root")).render(u.jsx(qo.StrictMode,{children:u.jsx(CS,{clientId:"373922547944-gm8fgpgjebnraruomkpajoa7s3nqups0.apps.googleusercontent.com",onScriptProps:{async:!0,defer:!0,nonce:"YOUR_NONCE_VALUE"},children:u.jsx(lP,{children:u.jsx(x2,{})})})}));
//# sourceMappingURL=index-D0oij0Dq.js.map
