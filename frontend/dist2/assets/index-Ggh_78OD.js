function XE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ty(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cy={exports:{}},lc={},ky={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=Symbol.for("react.element"),ZE=Symbol.for("react.portal"),eI=Symbol.for("react.fragment"),tI=Symbol.for("react.strict_mode"),nI=Symbol.for("react.profiler"),rI=Symbol.for("react.provider"),iI=Symbol.for("react.context"),sI=Symbol.for("react.forward_ref"),oI=Symbol.for("react.suspense"),aI=Symbol.for("react.memo"),lI=Symbol.for("react.lazy"),qp=Symbol.iterator;function cI(t){return t===null||typeof t!="object"?null:(t=qp&&t[qp]||t["@@iterator"],typeof t=="function"?t:null)}var Ry={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ay=Object.assign,by={};function cs(t,e,n){this.props=t,this.context=e,this.refs=by,this.updater=n||Ry}cs.prototype.isReactComponent={};cs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ny(){}Ny.prototype=cs.prototype;function yh(t,e,n){this.props=t,this.context=e,this.refs=by,this.updater=n||Ry}var vh=yh.prototype=new Ny;vh.constructor=yh;Ay(vh,cs.prototype);vh.isPureReactComponent=!0;var Kp=Array.isArray,Py=Object.prototype.hasOwnProperty,wh={current:null},Oy={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Py.call(e,r)&&!Oy.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:$o,type:t,key:s,ref:o,props:i,_owner:wh.current}}function uI(t,e){return{$$typeof:$o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _h(t){return typeof t=="object"&&t!==null&&t.$$typeof===$o}function dI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qp=/\/+/g;function ou(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dI(""+t.key):e.toString(36)}function Ka(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $o:case ZE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ou(o,0):r,Kp(i)?(n="",t!=null&&(n=t.replace(Qp,"$&/")+"/"),Ka(i,e,n,"",function(h){return h})):i!=null&&(_h(i)&&(i=uI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Qp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Kp(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+ou(s,l);o+=Ka(s,e,n,c,i)}else if(c=cI(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+ou(s,l++),o+=Ka(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xa(t,e,n){if(t==null)return t;var r=[],i=0;return Ka(t,r,"","",function(s){return e.call(n,s,i++)}),r}function hI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vt={current:null},Qa={transition:null},fI={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:Qa,ReactCurrentOwner:wh};function jy(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:xa,forEach:function(t,e,n){xa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xa(t,function(){e++}),e},toArray:function(t){return xa(t,function(e){return e})||[]},only:function(t){if(!_h(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=cs;te.Fragment=eI;te.Profiler=nI;te.PureComponent=yh;te.StrictMode=tI;te.Suspense=oI;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fI;te.act=jy;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ay({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=wh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Py.call(e,c)&&!Oy.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:$o,type:t.type,key:i,ref:s,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:iI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rI,_context:t},t.Consumer=t};te.createElement=Dy;te.createFactory=function(t){var e=Dy.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:sI,render:t}};te.isValidElement=_h;te.lazy=function(t){return{$$typeof:lI,_payload:{_status:-1,_result:t},_init:hI}};te.memo=function(t,e){return{$$typeof:aI,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Qa.transition;Qa.transition={};try{t()}finally{Qa.transition=e}};te.unstable_act=jy;te.useCallback=function(t,e){return vt.current.useCallback(t,e)};te.useContext=function(t){return vt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return vt.current.useDeferredValue(t)};te.useEffect=function(t,e){return vt.current.useEffect(t,e)};te.useId=function(){return vt.current.useId()};te.useImperativeHandle=function(t,e,n){return vt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return vt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return vt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return vt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return vt.current.useReducer(t,e,n)};te.useRef=function(t){return vt.current.useRef(t)};te.useState=function(t){return vt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return vt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return vt.current.useTransition()};te.version="18.3.1";ky.exports=te;var O=ky.exports;const Wo=Ty(O),pI=XE({__proto__:null,default:Wo},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mI=O,gI=Symbol.for("react.element"),yI=Symbol.for("react.fragment"),vI=Object.prototype.hasOwnProperty,wI=mI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_I={key:!0,ref:!0,__self:!0,__source:!0};function Ly(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vI.call(e,r)&&!_I.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:gI,type:t,key:s,ref:o,props:i,_owner:wI.current}}lc.Fragment=yI;lc.jsx=Ly;lc.jsxs=Ly;Cy.exports=lc;var u=Cy.exports,Yu={},My={exports:{}},Mt={},Vy={exports:{}},Fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Q){var X=W.length;W.push(Q);e:for(;0<X;){var de=X-1>>>1,ce=W[de];if(0<i(ce,Q))W[de]=Q,W[X]=ce,X=de;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Q=W[0],X=W.pop();if(X!==Q){W[0]=X;e:for(var de=0,ce=W.length,pe=ce>>>1;de<pe;){var At=2*(de+1)-1,fn=W[At],Kt=At+1,bt=W[Kt];if(0>i(fn,X))Kt<ce&&0>i(bt,fn)?(W[de]=bt,W[Kt]=X,de=Kt):(W[de]=fn,W[At]=X,de=At);else if(Kt<ce&&0>i(bt,X))W[de]=bt,W[Kt]=X,de=Kt;else break e}}return Q}function i(W,Q){var X=W.sortIndex-Q.sortIndex;return X!==0?X:W.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,w=3,k=!1,N=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(W){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=W)r(h),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(h)}}function D(W){if(A=!1,S(W),!N)if(n(c)!==null)N=!0,Pr(L);else{var Q=n(h);Q!==null&&tt(D,Q.startTime-W)}}function L(W,Q){N=!1,A&&(A=!1,_(g),g=-1),k=!0;var X=w;try{for(S(Q),m=n(c);m!==null&&(!(m.expirationTime>Q)||W&&!R());){var de=m.callback;if(typeof de=="function"){m.callback=null,w=m.priorityLevel;var ce=de(m.expirationTime<=Q);Q=t.unstable_now(),typeof ce=="function"?m.callback=ce:m===n(c)&&r(c),S(Q)}else r(c);m=n(c)}if(m!==null)var pe=!0;else{var At=n(h);At!==null&&tt(D,At.startTime-Q),pe=!1}return pe}finally{m=null,w=X,k=!1}}var F=!1,E=null,g=-1,I=5,T=-1;function R(){return!(t.unstable_now()-T<I)}function b(){if(E!==null){var W=t.unstable_now();T=W;var Q=!0;try{Q=E(!0,W)}finally{Q?C():(F=!1,E=null)}}else F=!1}var C;if(typeof y=="function")C=function(){y(b)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Rt=qe.port2;qe.port1.onmessage=b,C=function(){Rt.postMessage(null)}}else C=function(){x(b,0)};function Pr(W){E=W,F||(F=!0,C())}function tt(W,Q){g=x(function(){W(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){N||k||(N=!0,Pr(L))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(W){switch(w){case 1:case 2:case 3:var Q=3;break;default:Q=w}var X=w;w=Q;try{return W()}finally{w=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var X=w;w=W;try{return Q()}finally{w=X}},t.unstable_scheduleCallback=function(W,Q,X){var de=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?de+X:de):X=de,W){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=X+ce,W={id:p++,callback:Q,priorityLevel:W,startTime:X,expirationTime:ce,sortIndex:-1},X>de?(W.sortIndex=X,e(h,W),n(c)===null&&W===n(h)&&(A?(_(g),g=-1):A=!0,tt(D,X-de))):(W.sortIndex=ce,e(c,W),N||k||(N=!0,Pr(L))),W},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(W){var Q=w;return function(){var X=w;w=Q;try{return W.apply(this,arguments)}finally{w=X}}}})(Fy);Vy.exports=Fy;var EI=Vy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var II=O,Lt=EI;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uy=new Set,ho={};function ci(t,e){Yi(t,e),Yi(t+"Capture",e)}function Yi(t,e){for(ho[t]=e,t=0;t<e.length;t++)Uy.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ju=Object.prototype.hasOwnProperty,xI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yp={},Jp={};function SI(t){return Ju.call(Jp,t)?!0:Ju.call(Yp,t)?!1:xI.test(t)?Jp[t]=!0:(Yp[t]=!0,!1)}function TI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CI(t,e,n,r){if(e===null||typeof e>"u"||TI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Eh=/[\-:]([a-z])/g;function Ih(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Eh,Ih);et[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Eh,Ih);et[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Eh,Ih);et[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function xh(t,e,n,r){var i=et.hasOwnProperty(e)?et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CI(e,n,i,r)&&(n=null),r||i===null?SI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yn=II.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sa=Symbol.for("react.element"),ki=Symbol.for("react.portal"),Ri=Symbol.for("react.fragment"),Sh=Symbol.for("react.strict_mode"),Xu=Symbol.for("react.profiler"),By=Symbol.for("react.provider"),zy=Symbol.for("react.context"),Th=Symbol.for("react.forward_ref"),Zu=Symbol.for("react.suspense"),ed=Symbol.for("react.suspense_list"),Ch=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),$y=Symbol.for("react.offscreen"),Xp=Symbol.iterator;function Os(t){return t===null||typeof t!="object"?null:(t=Xp&&t[Xp]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,au;function Ws(t){if(au===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);au=e&&e[1]||""}return`
`+au+t}var lu=!1;function cu(t,e){if(!t||lu)return"";lu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{lu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ws(t):""}function kI(t){switch(t.tag){case 5:return Ws(t.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 2:case 15:return t=cu(t.type,!1),t;case 11:return t=cu(t.type.render,!1),t;case 1:return t=cu(t.type,!0),t;default:return""}}function td(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ri:return"Fragment";case ki:return"Portal";case Xu:return"Profiler";case Sh:return"StrictMode";case Zu:return"Suspense";case ed:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zy:return(t.displayName||"Context")+".Consumer";case By:return(t._context.displayName||"Context")+".Provider";case Th:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ch:return e=t.displayName||null,e!==null?e:td(t.type)||"Memo";case rr:e=t._payload,t=t._init;try{return td(t(e))}catch{}}return null}function RI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return td(e);case 8:return e===Sh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AI(t){var e=Wy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ta(t){t._valueTracker||(t._valueTracker=AI(t))}function Hy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nd(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Gy(t,e){e=e.checked,e!=null&&xh(t,"checked",e,!1)}function rd(t,e){Gy(t,e);var n=Sr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?id(t,e.type,n):e.hasOwnProperty("defaultValue")&&id(t,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function em(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function id(t,e,n){(e!=="number"||vl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Hs=Array.isArray;function Fi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Hs(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sr(n)}}function qy(t,e){var n=Sr(e.value),r=Sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ky(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function od(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ky(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ca,Qy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ca=Ca||document.createElement("div"),Ca.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ca.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bI=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(t){bI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ys[e]=Ys[t]})});function Yy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ys.hasOwnProperty(t)&&Ys[t]?(""+e).trim():e+"px"}function Jy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Yy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var NI=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ad(t,e){if(e){if(NI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function ld(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cd=null;function kh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ud=null,Ui=null,Bi=null;function rm(t){if(t=qo(t)){if(typeof ud!="function")throw Error(B(280));var e=t.stateNode;e&&(e=fc(e),ud(t.stateNode,t.type,e))}}function Xy(t){Ui?Bi?Bi.push(t):Bi=[t]:Ui=t}function Zy(){if(Ui){var t=Ui,e=Bi;if(Bi=Ui=null,rm(t),e)for(t=0;t<e.length;t++)rm(e[t])}}function ev(t,e){return t(e)}function tv(){}var uu=!1;function nv(t,e,n){if(uu)return t(e,n);uu=!0;try{return ev(t,e,n)}finally{uu=!1,(Ui!==null||Bi!==null)&&(tv(),Zy())}}function po(t,e){var n=t.stateNode;if(n===null)return null;var r=fc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var dd=!1;if(Wn)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){dd=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{dd=!1}function PI(t,e,n,r,i,s,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Js=!1,wl=null,_l=!1,hd=null,OI={onError:function(t){Js=!0,wl=t}};function DI(t,e,n,r,i,s,o,l,c){Js=!1,wl=null,PI.apply(OI,arguments)}function jI(t,e,n,r,i,s,o,l,c){if(DI.apply(this,arguments),Js){if(Js){var h=wl;Js=!1,wl=null}else throw Error(B(198));_l||(_l=!0,hd=h)}}function ui(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function rv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function im(t){if(ui(t)!==t)throw Error(B(188))}function LI(t){var e=t.alternate;if(!e){if(e=ui(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return im(i),t;if(s===r)return im(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function iv(t){return t=LI(t),t!==null?sv(t):null}function sv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sv(t);if(e!==null)return e;t=t.sibling}return null}var ov=Lt.unstable_scheduleCallback,sm=Lt.unstable_cancelCallback,MI=Lt.unstable_shouldYield,VI=Lt.unstable_requestPaint,Oe=Lt.unstable_now,FI=Lt.unstable_getCurrentPriorityLevel,Rh=Lt.unstable_ImmediatePriority,av=Lt.unstable_UserBlockingPriority,El=Lt.unstable_NormalPriority,UI=Lt.unstable_LowPriority,lv=Lt.unstable_IdlePriority,cc=null,_n=null;function BI(t){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(cc,t,void 0,(t.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:WI,zI=Math.log,$I=Math.LN2;function WI(t){return t>>>=0,t===0?32:31-(zI(t)/$I|0)|0}var ka=64,Ra=4194304;function Gs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Il(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Gs(l):(s&=o,s!==0&&(r=Gs(s)))}else o=n&~i,o!==0?r=Gs(o):s!==0&&(r=Gs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-on(e),i=1<<n,r|=t[n],e&=~i;return r}function HI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-on(s),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=HI(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cv(){var t=ka;return ka<<=1,!(ka&4194240)&&(ka=64),t}function du(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-on(e),t[e]=n}function qI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-on(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ah(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-on(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ue=0;function uv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dv,bh,hv,fv,pv,pd=!1,Aa=[],hr=null,fr=null,pr=null,mo=new Map,go=new Map,sr=[],KI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function om(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":mo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(e.pointerId)}}function js(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qo(e),e!==null&&bh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function QI(t,e,n,r,i){switch(e){case"focusin":return hr=js(hr,t,e,n,r,i),!0;case"dragenter":return fr=js(fr,t,e,n,r,i),!0;case"mouseover":return pr=js(pr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return mo.set(s,js(mo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,go.set(s,js(go.get(s)||null,t,e,n,r,i)),!0}return!1}function mv(t){var e=Br(t.target);if(e!==null){var n=ui(e);if(n!==null){if(e=n.tag,e===13){if(e=rv(n),e!==null){t.blockedOn=e,pv(t.priority,function(){hv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ya(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cd=r,n.target.dispatchEvent(r),cd=null}else return e=qo(n),e!==null&&bh(e),t.blockedOn=n,!1;e.shift()}return!0}function am(t,e,n){Ya(t)&&n.delete(e)}function YI(){pd=!1,hr!==null&&Ya(hr)&&(hr=null),fr!==null&&Ya(fr)&&(fr=null),pr!==null&&Ya(pr)&&(pr=null),mo.forEach(am),go.forEach(am)}function Ls(t,e){t.blockedOn===e&&(t.blockedOn=null,pd||(pd=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,YI)))}function yo(t){function e(i){return Ls(i,t)}if(0<Aa.length){Ls(Aa[0],t);for(var n=1;n<Aa.length;n++){var r=Aa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hr!==null&&Ls(hr,t),fr!==null&&Ls(fr,t),pr!==null&&Ls(pr,t),mo.forEach(e),go.forEach(e),n=0;n<sr.length;n++)r=sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)mv(n),n.blockedOn===null&&sr.shift()}var zi=Yn.ReactCurrentBatchConfig,xl=!0;function JI(t,e,n,r){var i=ue,s=zi.transition;zi.transition=null;try{ue=1,Nh(t,e,n,r)}finally{ue=i,zi.transition=s}}function XI(t,e,n,r){var i=ue,s=zi.transition;zi.transition=null;try{ue=4,Nh(t,e,n,r)}finally{ue=i,zi.transition=s}}function Nh(t,e,n,r){if(xl){var i=md(t,e,n,r);if(i===null)Eu(t,e,r,Sl,n),om(t,r);else if(QI(i,t,e,n,r))r.stopPropagation();else if(om(t,r),e&4&&-1<KI.indexOf(t)){for(;i!==null;){var s=qo(i);if(s!==null&&dv(s),s=md(t,e,n,r),s===null&&Eu(t,e,r,Sl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Eu(t,e,r,null,n)}}var Sl=null;function md(t,e,n,r){if(Sl=null,t=kh(r),t=Br(t),t!==null)if(e=ui(t),e===null)t=null;else if(n=e.tag,n===13){if(t=rv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sl=t,null}function gv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FI()){case Rh:return 1;case av:return 4;case El:case UI:return 16;case lv:return 536870912;default:return 16}default:return 16}}var cr=null,Ph=null,Ja=null;function yv(){if(Ja)return Ja;var t,e=Ph,n=e.length,r,i="value"in cr?cr.value:cr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ja=i.slice(t,1<r?1-r:void 0)}function Xa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ba(){return!0}function lm(){return!1}function Vt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ba:lm,this.isPropagationStopped=lm,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),e}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oh=Vt(us),Go=Ae({},us,{view:0,detail:0}),ZI=Vt(Go),hu,fu,Ms,uc=Ae({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ms&&(Ms&&t.type==="mousemove"?(hu=t.screenX-Ms.screenX,fu=t.screenY-Ms.screenY):fu=hu=0,Ms=t),hu)},movementY:function(t){return"movementY"in t?t.movementY:fu}}),cm=Vt(uc),ex=Ae({},uc,{dataTransfer:0}),tx=Vt(ex),nx=Ae({},Go,{relatedTarget:0}),pu=Vt(nx),rx=Ae({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),ix=Vt(rx),sx=Ae({},us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ox=Vt(sx),ax=Ae({},us,{data:0}),um=Vt(ax),lx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ux[t])?!!e[t]:!1}function Dh(){return dx}var hx=Ae({},Go,{key:function(t){if(t.key){var e=lx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dh,charCode:function(t){return t.type==="keypress"?Xa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fx=Vt(hx),px=Ae({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=Vt(px),mx=Ae({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dh}),gx=Vt(mx),yx=Ae({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),vx=Vt(yx),wx=Ae({},uc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_x=Vt(wx),Ex=[9,13,27,32],jh=Wn&&"CompositionEvent"in window,Xs=null;Wn&&"documentMode"in document&&(Xs=document.documentMode);var Ix=Wn&&"TextEvent"in window&&!Xs,vv=Wn&&(!jh||Xs&&8<Xs&&11>=Xs),hm=" ",fm=!1;function wv(t,e){switch(t){case"keyup":return Ex.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _v(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ai=!1;function xx(t,e){switch(t){case"compositionend":return _v(e);case"keypress":return e.which!==32?null:(fm=!0,hm);case"textInput":return t=e.data,t===hm&&fm?null:t;default:return null}}function Sx(t,e){if(Ai)return t==="compositionend"||!jh&&wv(t,e)?(t=yv(),Ja=Ph=cr=null,Ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vv&&e.locale!=="ko"?null:e.data;default:return null}}var Tx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Tx[t.type]:e==="textarea"}function Ev(t,e,n,r){Xy(r),e=Tl(e,"onChange"),0<e.length&&(n=new Oh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zs=null,vo=null;function Cx(t){Pv(t,0)}function dc(t){var e=Pi(t);if(Hy(e))return t}function kx(t,e){if(t==="change")return e}var Iv=!1;if(Wn){var mu;if(Wn){var gu="oninput"in document;if(!gu){var mm=document.createElement("div");mm.setAttribute("oninput","return;"),gu=typeof mm.oninput=="function"}mu=gu}else mu=!1;Iv=mu&&(!document.documentMode||9<document.documentMode)}function gm(){Zs&&(Zs.detachEvent("onpropertychange",xv),vo=Zs=null)}function xv(t){if(t.propertyName==="value"&&dc(vo)){var e=[];Ev(e,vo,t,kh(t)),nv(Cx,e)}}function Rx(t,e,n){t==="focusin"?(gm(),Zs=e,vo=n,Zs.attachEvent("onpropertychange",xv)):t==="focusout"&&gm()}function Ax(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dc(vo)}function bx(t,e){if(t==="click")return dc(e)}function Nx(t,e){if(t==="input"||t==="change")return dc(e)}function Px(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cn=typeof Object.is=="function"?Object.is:Px;function wo(t,e){if(cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ju.call(e,i)||!cn(t[i],e[i]))return!1}return!0}function ym(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vm(t,e){var n=ym(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ym(n)}}function Sv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Sv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Tv(){for(var t=window,e=vl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vl(t.document)}return e}function Lh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ox(t){var e=Tv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Sv(n.ownerDocument.documentElement,n)){if(r!==null&&Lh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=vm(n,s);var o=vm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Dx=Wn&&"documentMode"in document&&11>=document.documentMode,bi=null,gd=null,eo=null,yd=!1;function wm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yd||bi==null||bi!==vl(r)||(r=bi,"selectionStart"in r&&Lh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eo&&wo(eo,r)||(eo=r,r=Tl(gd,"onSelect"),0<r.length&&(e=new Oh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bi)))}function Na(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ni={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},yu={},Cv={};Wn&&(Cv=document.createElement("div").style,"AnimationEvent"in window||(delete Ni.animationend.animation,delete Ni.animationiteration.animation,delete Ni.animationstart.animation),"TransitionEvent"in window||delete Ni.transitionend.transition);function hc(t){if(yu[t])return yu[t];if(!Ni[t])return t;var e=Ni[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Cv)return yu[t]=e[n];return t}var kv=hc("animationend"),Rv=hc("animationiteration"),Av=hc("animationstart"),bv=hc("transitionend"),Nv=new Map,_m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){Nv.set(t,e),ci(e,[t])}for(var vu=0;vu<_m.length;vu++){var wu=_m[vu],jx=wu.toLowerCase(),Lx=wu[0].toUpperCase()+wu.slice(1);Ar(jx,"on"+Lx)}Ar(kv,"onAnimationEnd");Ar(Rv,"onAnimationIteration");Ar(Av,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(bv,"onTransitionEnd");Yi("onMouseEnter",["mouseout","mouseover"]);Yi("onMouseLeave",["mouseout","mouseover"]);Yi("onPointerEnter",["pointerout","pointerover"]);Yi("onPointerLeave",["pointerout","pointerover"]);ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(qs));function Em(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jI(r,e,void 0,t),t.currentTarget=null}function Pv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Em(i,l,h),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Em(i,l,h),s=c}}}if(_l)throw t=hd,_l=!1,hd=null,t}function _e(t,e){var n=e[Id];n===void 0&&(n=e[Id]=new Set);var r=t+"__bubble";n.has(r)||(Ov(e,t,2,!1),n.add(r))}function _u(t,e,n){var r=0;e&&(r|=4),Ov(n,t,r,e)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function _o(t){if(!t[Pa]){t[Pa]=!0,Uy.forEach(function(n){n!=="selectionchange"&&(Mx.has(n)||_u(n,!1,t),_u(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pa]||(e[Pa]=!0,_u("selectionchange",!1,e))}}function Ov(t,e,n,r){switch(gv(e)){case 1:var i=JI;break;case 4:i=XI;break;default:i=Nh}n=i.bind(null,e,n,t),i=void 0,!dd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Eu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Br(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}nv(function(){var h=s,p=kh(n),m=[];e:{var w=Nv.get(t);if(w!==void 0){var k=Oh,N=t;switch(t){case"keypress":if(Xa(n)===0)break e;case"keydown":case"keyup":k=fx;break;case"focusin":N="focus",k=pu;break;case"focusout":N="blur",k=pu;break;case"beforeblur":case"afterblur":k=pu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=tx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=gx;break;case kv:case Rv:case Av:k=ix;break;case bv:k=vx;break;case"scroll":k=ZI;break;case"wheel":k=_x;break;case"copy":case"cut":case"paste":k=ox;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=dm}var A=(e&4)!==0,x=!A&&t==="scroll",_=A?w!==null?w+"Capture":null:w;A=[];for(var y=h,S;y!==null;){S=y;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,_!==null&&(D=po(y,_),D!=null&&A.push(Eo(y,D,S)))),x)break;y=y.return}0<A.length&&(w=new k(w,N,null,n,p),m.push({event:w,listeners:A}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",w&&n!==cd&&(N=n.relatedTarget||n.fromElement)&&(Br(N)||N[Hn]))break e;if((k||w)&&(w=p.window===p?p:(w=p.ownerDocument)?w.defaultView||w.parentWindow:window,k?(N=n.relatedTarget||n.toElement,k=h,N=N?Br(N):null,N!==null&&(x=ui(N),N!==x||N.tag!==5&&N.tag!==6)&&(N=null)):(k=null,N=h),k!==N)){if(A=cm,D="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(A=dm,D="onPointerLeave",_="onPointerEnter",y="pointer"),x=k==null?w:Pi(k),S=N==null?w:Pi(N),w=new A(D,y+"leave",k,n,p),w.target=x,w.relatedTarget=S,D=null,Br(p)===h&&(A=new A(_,y+"enter",N,n,p),A.target=S,A.relatedTarget=x,D=A),x=D,k&&N)t:{for(A=k,_=N,y=0,S=A;S;S=Ti(S))y++;for(S=0,D=_;D;D=Ti(D))S++;for(;0<y-S;)A=Ti(A),y--;for(;0<S-y;)_=Ti(_),S--;for(;y--;){if(A===_||_!==null&&A===_.alternate)break t;A=Ti(A),_=Ti(_)}A=null}else A=null;k!==null&&Im(m,w,k,A,!1),N!==null&&x!==null&&Im(m,x,N,A,!0)}}e:{if(w=h?Pi(h):window,k=w.nodeName&&w.nodeName.toLowerCase(),k==="select"||k==="input"&&w.type==="file")var L=kx;else if(pm(w))if(Iv)L=Nx;else{L=Ax;var F=Rx}else(k=w.nodeName)&&k.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(L=bx);if(L&&(L=L(t,h))){Ev(m,L,n,p);break e}F&&F(t,w,h),t==="focusout"&&(F=w._wrapperState)&&F.controlled&&w.type==="number"&&id(w,"number",w.value)}switch(F=h?Pi(h):window,t){case"focusin":(pm(F)||F.contentEditable==="true")&&(bi=F,gd=h,eo=null);break;case"focusout":eo=gd=bi=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,wm(m,n,p);break;case"selectionchange":if(Dx)break;case"keydown":case"keyup":wm(m,n,p)}var E;if(jh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Ai?wv(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(vv&&n.locale!=="ko"&&(Ai||g!=="onCompositionStart"?g==="onCompositionEnd"&&Ai&&(E=yv()):(cr=p,Ph="value"in cr?cr.value:cr.textContent,Ai=!0)),F=Tl(h,g),0<F.length&&(g=new um(g,t,null,n,p),m.push({event:g,listeners:F}),E?g.data=E:(E=_v(n),E!==null&&(g.data=E)))),(E=Ix?xx(t,n):Sx(t,n))&&(h=Tl(h,"onBeforeInput"),0<h.length&&(p=new um("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=E))}Pv(m,e)})}function Eo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=po(t,n),s!=null&&r.unshift(Eo(t,s,i)),s=po(t,e),s!=null&&r.push(Eo(t,s,i))),t=t.return}return r}function Ti(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Im(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,i?(c=po(n,s),c!=null&&o.unshift(Eo(n,c,l))):i||(c=po(n,s),c!=null&&o.push(Eo(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Vx=/\r\n?/g,Fx=/\u0000|\uFFFD/g;function xm(t){return(typeof t=="string"?t:""+t).replace(Vx,`
`).replace(Fx,"")}function Oa(t,e,n){if(e=xm(e),xm(t)!==e&&n)throw Error(B(425))}function Cl(){}var vd=null,wd=null;function _d(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,Ux=typeof clearTimeout=="function"?clearTimeout:void 0,Sm=typeof Promise=="function"?Promise:void 0,Bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Sm<"u"?function(t){return Sm.resolve(null).then(t).catch(zx)}:Ed;function zx(t){setTimeout(function(){throw t})}function Iu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),yo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);yo(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ds=Math.random().toString(36).slice(2),vn="__reactFiber$"+ds,Io="__reactProps$"+ds,Hn="__reactContainer$"+ds,Id="__reactEvents$"+ds,$x="__reactListeners$"+ds,Wx="__reactHandles$"+ds;function Br(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tm(t);t!==null;){if(n=t[vn])return n;t=Tm(t)}return e}t=n,n=t.parentNode}return null}function qo(t){return t=t[vn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function fc(t){return t[Io]||null}var xd=[],Oi=-1;function br(t){return{current:t}}function Ee(t){0>Oi||(t.current=xd[Oi],xd[Oi]=null,Oi--)}function ye(t,e){Oi++,xd[Oi]=t.current,t.current=e}var Tr={},ft=br(Tr),It=br(!1),Xr=Tr;function Ji(t,e){var n=t.type.contextTypes;if(!n)return Tr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xt(t){return t=t.childContextTypes,t!=null}function kl(){Ee(It),Ee(ft)}function Cm(t,e,n){if(ft.current!==Tr)throw Error(B(168));ye(ft,e),ye(It,n)}function Dv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,RI(t)||"Unknown",i));return Ae({},n,r)}function Rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tr,Xr=ft.current,ye(ft,t),ye(It,It.current),!0}function km(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=Dv(t,e,Xr),r.__reactInternalMemoizedMergedChildContext=t,Ee(It),Ee(ft),ye(ft,t)):Ee(It),ye(It,n)}var On=null,pc=!1,xu=!1;function jv(t){On===null?On=[t]:On.push(t)}function Hx(t){pc=!0,jv(t)}function Nr(){if(!xu&&On!==null){xu=!0;var t=0,e=ue;try{var n=On;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}On=null,pc=!1}catch(i){throw On!==null&&(On=On.slice(t+1)),ov(Rh,Nr),i}finally{ue=e,xu=!1}}return null}var Di=[],ji=0,Al=null,bl=0,Ut=[],Bt=0,Zr=null,Ln=1,Mn="";function Vr(t,e){Di[ji++]=bl,Di[ji++]=Al,Al=t,bl=e}function Lv(t,e,n){Ut[Bt++]=Ln,Ut[Bt++]=Mn,Ut[Bt++]=Zr,Zr=t;var r=Ln;t=Mn;var i=32-on(r)-1;r&=~(1<<i),n+=1;var s=32-on(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ln=1<<32-on(e)+i|n<<i|r,Mn=s+t}else Ln=1<<s|n<<i|r,Mn=t}function Mh(t){t.return!==null&&(Vr(t,1),Lv(t,1,0))}function Vh(t){for(;t===Al;)Al=Di[--ji],Di[ji]=null,bl=Di[--ji],Di[ji]=null;for(;t===Zr;)Zr=Ut[--Bt],Ut[Bt]=null,Mn=Ut[--Bt],Ut[Bt]=null,Ln=Ut[--Bt],Ut[Bt]=null}var Dt=null,Ot=null,Ie=!1,tn=null;function Mv(t,e){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Ot=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Ot=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zr!==null?{id:Ln,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Ot=null,!0):!1;default:return!1}}function Sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Td(t){if(Ie){var e=Ot;if(e){var n=e;if(!Rm(t,e)){if(Sd(t))throw Error(B(418));e=mr(n.nextSibling);var r=Dt;e&&Rm(t,e)?Mv(r,n):(t.flags=t.flags&-4097|2,Ie=!1,Dt=t)}}else{if(Sd(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ie=!1,Dt=t}}}function Am(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function Da(t){if(t!==Dt)return!1;if(!Ie)return Am(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_d(t.type,t.memoizedProps)),e&&(e=Ot)){if(Sd(t))throw Vv(),Error(B(418));for(;e;)Mv(t,e),e=mr(e.nextSibling)}if(Am(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ot=mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ot=null}}else Ot=Dt?mr(t.stateNode.nextSibling):null;return!0}function Vv(){for(var t=Ot;t;)t=mr(t.nextSibling)}function Xi(){Ot=Dt=null,Ie=!1}function Fh(t){tn===null?tn=[t]:tn.push(t)}var Gx=Yn.ReactCurrentBatchConfig;function Vs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function ja(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bm(t){var e=t._init;return e(t._payload)}function Fv(t){function e(_,y){if(t){var S=_.deletions;S===null?(_.deletions=[y],_.flags|=16):S.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=wr(_,y),_.index=0,_.sibling=null,_}function s(_,y,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<y?(_.flags|=2,y):S):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,y,S,D){return y===null||y.tag!==6?(y=bu(S,_.mode,D),y.return=_,y):(y=i(y,S),y.return=_,y)}function c(_,y,S,D){var L=S.type;return L===Ri?p(_,y,S.props.children,D,S.key):y!==null&&(y.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===rr&&bm(L)===y.type)?(D=i(y,S.props),D.ref=Vs(_,y,S),D.return=_,D):(D=sl(S.type,S.key,S.props,null,_.mode,D),D.ref=Vs(_,y,S),D.return=_,D)}function h(_,y,S,D){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=Nu(S,_.mode,D),y.return=_,y):(y=i(y,S.children||[]),y.return=_,y)}function p(_,y,S,D,L){return y===null||y.tag!==7?(y=Kr(S,_.mode,D,L),y.return=_,y):(y=i(y,S),y.return=_,y)}function m(_,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=bu(""+y,_.mode,S),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sa:return S=sl(y.type,y.key,y.props,null,_.mode,S),S.ref=Vs(_,null,y),S.return=_,S;case ki:return y=Nu(y,_.mode,S),y.return=_,y;case rr:var D=y._init;return m(_,D(y._payload),S)}if(Hs(y)||Os(y))return y=Kr(y,_.mode,S,null),y.return=_,y;ja(_,y)}return null}function w(_,y,S,D){var L=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:l(_,y,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Sa:return S.key===L?c(_,y,S,D):null;case ki:return S.key===L?h(_,y,S,D):null;case rr:return L=S._init,w(_,y,L(S._payload),D)}if(Hs(S)||Os(S))return L!==null?null:p(_,y,S,D,null);ja(_,S)}return null}function k(_,y,S,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(S)||null,l(y,_,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Sa:return _=_.get(D.key===null?S:D.key)||null,c(y,_,D,L);case ki:return _=_.get(D.key===null?S:D.key)||null,h(y,_,D,L);case rr:var F=D._init;return k(_,y,S,F(D._payload),L)}if(Hs(D)||Os(D))return _=_.get(S)||null,p(y,_,D,L,null);ja(y,D)}return null}function N(_,y,S,D){for(var L=null,F=null,E=y,g=y=0,I=null;E!==null&&g<S.length;g++){E.index>g?(I=E,E=null):I=E.sibling;var T=w(_,E,S[g],D);if(T===null){E===null&&(E=I);break}t&&E&&T.alternate===null&&e(_,E),y=s(T,y,g),F===null?L=T:F.sibling=T,F=T,E=I}if(g===S.length)return n(_,E),Ie&&Vr(_,g),L;if(E===null){for(;g<S.length;g++)E=m(_,S[g],D),E!==null&&(y=s(E,y,g),F===null?L=E:F.sibling=E,F=E);return Ie&&Vr(_,g),L}for(E=r(_,E);g<S.length;g++)I=k(E,_,g,S[g],D),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?g:I.key),y=s(I,y,g),F===null?L=I:F.sibling=I,F=I);return t&&E.forEach(function(R){return e(_,R)}),Ie&&Vr(_,g),L}function A(_,y,S,D){var L=Os(S);if(typeof L!="function")throw Error(B(150));if(S=L.call(S),S==null)throw Error(B(151));for(var F=L=null,E=y,g=y=0,I=null,T=S.next();E!==null&&!T.done;g++,T=S.next()){E.index>g?(I=E,E=null):I=E.sibling;var R=w(_,E,T.value,D);if(R===null){E===null&&(E=I);break}t&&E&&R.alternate===null&&e(_,E),y=s(R,y,g),F===null?L=R:F.sibling=R,F=R,E=I}if(T.done)return n(_,E),Ie&&Vr(_,g),L;if(E===null){for(;!T.done;g++,T=S.next())T=m(_,T.value,D),T!==null&&(y=s(T,y,g),F===null?L=T:F.sibling=T,F=T);return Ie&&Vr(_,g),L}for(E=r(_,E);!T.done;g++,T=S.next())T=k(E,_,g,T.value,D),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?g:T.key),y=s(T,y,g),F===null?L=T:F.sibling=T,F=T);return t&&E.forEach(function(b){return e(_,b)}),Ie&&Vr(_,g),L}function x(_,y,S,D){if(typeof S=="object"&&S!==null&&S.type===Ri&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Sa:e:{for(var L=S.key,F=y;F!==null;){if(F.key===L){if(L=S.type,L===Ri){if(F.tag===7){n(_,F.sibling),y=i(F,S.props.children),y.return=_,_=y;break e}}else if(F.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===rr&&bm(L)===F.type){n(_,F.sibling),y=i(F,S.props),y.ref=Vs(_,F,S),y.return=_,_=y;break e}n(_,F);break}else e(_,F);F=F.sibling}S.type===Ri?(y=Kr(S.props.children,_.mode,D,S.key),y.return=_,_=y):(D=sl(S.type,S.key,S.props,null,_.mode,D),D.ref=Vs(_,y,S),D.return=_,_=D)}return o(_);case ki:e:{for(F=S.key;y!==null;){if(y.key===F)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(_,y.sibling),y=i(y,S.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Nu(S,_.mode,D),y.return=_,_=y}return o(_);case rr:return F=S._init,x(_,y,F(S._payload),D)}if(Hs(S))return N(_,y,S,D);if(Os(S))return A(_,y,S,D);ja(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,S),y.return=_,_=y):(n(_,y),y=bu(S,_.mode,D),y.return=_,_=y),o(_)):n(_,y)}return x}var Zi=Fv(!0),Uv=Fv(!1),Nl=br(null),Pl=null,Li=null,Uh=null;function Bh(){Uh=Li=Pl=null}function zh(t){var e=Nl.current;Ee(Nl),t._currentValue=e}function Cd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $i(t,e){Pl=t,Uh=Li=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(Uh!==t)if(t={context:t,memoizedValue:e,next:null},Li===null){if(Pl===null)throw Error(B(308));Li=t,Pl.dependencies={lanes:0,firstContext:t}}else Li=Li.next=t;return e}var zr=null;function $h(t){zr===null?zr=[t]:zr.push(t)}function Bv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$h(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gn(t,r)}function Gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ir=!1;function Wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gn(t,n)}return i=r.interleaved,i===null?(e.next=e,$h(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gn(t,n)}function Za(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ah(t,n)}}function Nm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ol(t,e,n,r){var i=t.updateQueue;ir=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;o=0,p=h=c=null,l=s;do{var w=l.lane,k=l.eventTime;if((r&w)===w){p!==null&&(p=p.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,A=l;switch(w=e,k=n,A.tag){case 1:if(N=A.payload,typeof N=="function"){m=N.call(k,m,w);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=A.payload,w=typeof N=="function"?N.call(k,m,w):N,w==null)break e;m=Ae({},m,w);break e;case 2:ir=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[l]:w.push(l))}else k={eventTime:k,lane:w,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=k,c=m):p=p.next=k,o|=w;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;w=l,l=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ti|=o,t.lanes=o,t.memoizedState=m}}function Pm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Ko={},En=br(Ko),xo=br(Ko),So=br(Ko);function $r(t){if(t===Ko)throw Error(B(174));return t}function Hh(t,e){switch(ye(So,e),ye(xo,t),ye(En,Ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:od(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=od(e,t)}Ee(En),ye(En,e)}function es(){Ee(En),Ee(xo),Ee(So)}function $v(t){$r(So.current);var e=$r(En.current),n=od(e,t.type);e!==n&&(ye(xo,t),ye(En,n))}function Gh(t){xo.current===t&&(Ee(En),Ee(xo))}var ke=br(0);function Dl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Su=[];function qh(){for(var t=0;t<Su.length;t++)Su[t]._workInProgressVersionPrimary=null;Su.length=0}var el=Yn.ReactCurrentDispatcher,Tu=Yn.ReactCurrentBatchConfig,ei=0,Re=null,Fe=null,$e=null,jl=!1,to=!1,To=0,qx=0;function ot(){throw Error(B(321))}function Kh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cn(t[n],e[n]))return!1;return!0}function Qh(t,e,n,r,i,s){if(ei=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,el.current=t===null||t.memoizedState===null?Jx:Xx,t=n(r,i),to){s=0;do{if(to=!1,To=0,25<=s)throw Error(B(301));s+=1,$e=Fe=null,e.updateQueue=null,el.current=Zx,t=n(r,i)}while(to)}if(el.current=Ll,e=Fe!==null&&Fe.next!==null,ei=0,$e=Fe=Re=null,jl=!1,e)throw Error(B(300));return t}function Yh(){var t=To!==0;return To=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Re.memoizedState=$e=t:$e=$e.next=t,$e}function qt(){if(Fe===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=$e===null?Re.memoizedState:$e.next;if(e!==null)$e=e,Fe=t;else{if(t===null)throw Error(B(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},$e===null?Re.memoizedState=$e=t:$e=$e.next=t}return $e}function Co(t,e){return typeof e=="function"?e(t):e}function Cu(t){var e=qt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Fe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,c=null,h=s;do{var p=h.lane;if((ei&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Re.lanes|=p,ti|=p}h=h.next}while(h!==null&&h!==s);c===null?o=r:c.next=l,cn(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Re.lanes|=s,ti|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ku(t){var e=qt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);cn(s,e.memoizedState)||(Et=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Wv(){}function Hv(t,e){var n=Re,r=qt(),i=e(),s=!cn(r.memoizedState,i);if(s&&(r.memoizedState=i,Et=!0),r=r.queue,Jh(Kv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,ko(9,qv.bind(null,n,r,i,e),void 0,null),He===null)throw Error(B(349));ei&30||Gv(n,e,i)}return i}function Gv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qv(t,e,n,r){e.value=n,e.getSnapshot=r,Qv(e)&&Yv(t)}function Kv(t,e,n){return n(function(){Qv(e)&&Yv(t)})}function Qv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cn(t,n)}catch{return!0}}function Yv(t){var e=Gn(t,1);e!==null&&an(e,t,1,-1)}function Om(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=Yx.bind(null,Re,t),[e.memoizedState,t]}function ko(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Jv(){return qt().memoizedState}function tl(t,e,n,r){var i=yn();Re.flags|=t,i.memoizedState=ko(1|e,n,void 0,r===void 0?null:r)}function mc(t,e,n,r){var i=qt();r=r===void 0?null:r;var s=void 0;if(Fe!==null){var o=Fe.memoizedState;if(s=o.destroy,r!==null&&Kh(r,o.deps)){i.memoizedState=ko(e,n,s,r);return}}Re.flags|=t,i.memoizedState=ko(1|e,n,s,r)}function Dm(t,e){return tl(8390656,8,t,e)}function Jh(t,e){return mc(2048,8,t,e)}function Xv(t,e){return mc(4,2,t,e)}function Zv(t,e){return mc(4,4,t,e)}function e0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function t0(t,e,n){return n=n!=null?n.concat([t]):null,mc(4,4,e0.bind(null,e,t),n)}function Xh(){}function n0(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function r0(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function i0(t,e,n){return ei&21?(cn(n,e)||(n=cv(),Re.lanes|=n,ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function Kx(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=Tu.transition;Tu.transition={};try{t(!1),e()}finally{ue=n,Tu.transition=r}}function s0(){return qt().memoizedState}function Qx(t,e,n){var r=vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},o0(t))a0(e,n);else if(n=Bv(t,e,n,r),n!==null){var i=yt();an(n,t,r,i),l0(n,e,r)}}function Yx(t,e,n){var r=vr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(o0(t))a0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,cn(l,o)){var c=e.interleaved;c===null?(i.next=i,$h(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Bv(t,e,i,r),n!==null&&(i=yt(),an(n,t,r,i),l0(n,e,r))}}function o0(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function a0(t,e){to=jl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function l0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ah(t,n)}}var Ll={readContext:Gt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},Jx={readContext:Gt,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:Dm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tl(4194308,4,e0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tl(4194308,4,t,e)},useInsertionEffect:function(t,e){return tl(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Qx.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:Om,useDebugValue:Xh,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=Om(!1),e=t[0];return t=Kx.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,i=yn();if(Ie){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),He===null)throw Error(B(349));ei&30||Gv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Dm(Kv.bind(null,r,s,t),[t]),r.flags|=2048,ko(9,qv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=yn(),e=He.identifierPrefix;if(Ie){var n=Mn,r=Ln;n=(r&~(1<<32-on(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=To++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xx={readContext:Gt,useCallback:n0,useContext:Gt,useEffect:Jh,useImperativeHandle:t0,useInsertionEffect:Xv,useLayoutEffect:Zv,useMemo:r0,useReducer:Cu,useRef:Jv,useState:function(){return Cu(Co)},useDebugValue:Xh,useDeferredValue:function(t){var e=qt();return i0(e,Fe.memoizedState,t)},useTransition:function(){var t=Cu(Co)[0],e=qt().memoizedState;return[t,e]},useMutableSource:Wv,useSyncExternalStore:Hv,useId:s0,unstable_isNewReconciler:!1},Zx={readContext:Gt,useCallback:n0,useContext:Gt,useEffect:Jh,useImperativeHandle:t0,useInsertionEffect:Xv,useLayoutEffect:Zv,useMemo:r0,useReducer:ku,useRef:Jv,useState:function(){return ku(Co)},useDebugValue:Xh,useDeferredValue:function(t){var e=qt();return Fe===null?e.memoizedState=t:i0(e,Fe.memoizedState,t)},useTransition:function(){var t=ku(Co)[0],e=qt().memoizedState;return[t,e]},useMutableSource:Wv,useSyncExternalStore:Hv,useId:s0,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gc={isMounted:function(t){return(t=t._reactInternals)?ui(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),i=vr(t),s=Bn(r,i);s.payload=e,n!=null&&(s.callback=n),e=gr(t,s,i),e!==null&&(an(e,t,i,r),Za(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),i=vr(t),s=Bn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=gr(t,s,i),e!==null&&(an(e,t,i,r),Za(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=vr(t),i=Bn(n,r);i.tag=2,e!=null&&(i.callback=e),e=gr(t,i,r),e!==null&&(an(e,t,r,n),Za(e,t,r))}};function jm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wo(n,r)||!wo(i,s):!0}function c0(t,e,n){var r=!1,i=Tr,s=e.contextType;return typeof s=="object"&&s!==null?s=Gt(s):(i=xt(e)?Xr:ft.current,r=e.contextTypes,s=(r=r!=null)?Ji(t,i):Tr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Lm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gc.enqueueReplaceState(e,e.state,null)}function Rd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Wh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Gt(s):(s=xt(e)?Xr:ft.current,i.context=Ji(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(kd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&gc.enqueueReplaceState(i,i.state,null),Ol(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ts(t,e){try{var n="",r=e;do n+=kI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ru(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ad(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eS=typeof WeakMap=="function"?WeakMap:Map;function u0(t,e,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vl||(Vl=!0,Fd=r),Ad(t,e)},n}function d0(t,e,n){n=Bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ad(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ad(t,e),typeof r!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Mm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=pS.bind(null,t,e,n),e.then(t,t))}function Vm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bn(-1,1),e.tag=2,gr(n,e,1))),n.lanes|=1),t)}var tS=Yn.ReactCurrentOwner,Et=!1;function gt(t,e,n,r){e.child=t===null?Uv(e,null,n,r):Zi(e,t.child,n,r)}function Um(t,e,n,r,i){n=n.render;var s=e.ref;return $i(e,i),r=Qh(t,e,n,r,s,i),n=Yh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qn(t,e,i)):(Ie&&n&&Mh(e),e.flags|=1,gt(t,e,r,i),e.child)}function Bm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!af(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,h0(t,e,s,r,i)):(t=sl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(o,r)&&t.ref===e.ref)return qn(t,e,i)}return e.flags|=1,t=wr(s,r),t.ref=e.ref,t.return=e,e.child=t}function h0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wo(s,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,qn(t,e,i)}return bd(t,e,n,r,i)}function f0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Vi,Pt),Pt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Vi,Pt),Pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ye(Vi,Pt),Pt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ye(Vi,Pt),Pt|=r;return gt(t,e,i,n),e.child}function p0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bd(t,e,n,r,i){var s=xt(n)?Xr:ft.current;return s=Ji(e,s),$i(e,i),n=Qh(t,e,n,r,s,i),r=Yh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qn(t,e,i)):(Ie&&r&&Mh(e),e.flags|=1,gt(t,e,n,i),e.child)}function zm(t,e,n,r,i){if(xt(n)){var s=!0;Rl(e)}else s=!1;if($i(e,i),e.stateNode===null)nl(t,e),c0(e,n,r),Rd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Gt(h):(h=xt(n)?Xr:ft.current,h=Ji(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&Lm(e,o,r,h),ir=!1;var w=e.memoizedState;o.state=w,Ol(e,r,o,i),c=e.memoizedState,l!==r||w!==c||It.current||ir?(typeof p=="function"&&(kd(e,n,p,r),c=e.memoizedState),(l=ir||jm(e,n,l,r,w,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,zv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Xt(e.type,l),o.props=h,m=e.pendingProps,w=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Gt(c):(c=xt(n)?Xr:ft.current,c=Ji(e,c));var k=n.getDerivedStateFromProps;(p=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||w!==c)&&Lm(e,o,r,c),ir=!1,w=e.memoizedState,o.state=w,Ol(e,r,o,i);var N=e.memoizedState;l!==m||w!==N||It.current||ir?(typeof k=="function"&&(kd(e,n,k,r),N=e.memoizedState),(h=ir||jm(e,n,h,r,w,N,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return Nd(t,e,n,r,s,i)}function Nd(t,e,n,r,i,s){p0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&km(e,n,!1),qn(t,e,s);r=e.stateNode,tS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zi(e,t.child,null,s),e.child=Zi(e,null,l,s)):gt(t,e,l,s),e.memoizedState=r.state,i&&km(e,n,!0),e.child}function m0(t){var e=t.stateNode;e.pendingContext?Cm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cm(t,e.context,!1),Hh(t,e.containerInfo)}function $m(t,e,n,r,i){return Xi(),Fh(i),e.flags|=256,gt(t,e,n,r),e.child}var Pd={dehydrated:null,treeContext:null,retryLane:0};function Od(t){return{baseLanes:t,cachePool:null,transitions:null}}function g0(t,e,n){var r=e.pendingProps,i=ke.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ye(ke,i&1),t===null)return Td(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=wc(o,r,0,null),t=Kr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Od(n),e.memoizedState=Pd,t):Zh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return nS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=wr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=wr(l,s):(s=Kr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Od(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Pd,r}return s=t.child,t=s.sibling,r=wr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zh(t,e){return e=wc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function La(t,e,n,r){return r!==null&&Fh(r),Zi(e,t.child,null,n),t=Zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ru(Error(B(422))),La(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=wc({mode:"visible",children:r.children},i,0,null),s=Kr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Zi(e,t.child,null,o),e.child.memoizedState=Od(o),e.memoizedState=Pd,s);if(!(e.mode&1))return La(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(B(419)),r=Ru(s,r,void 0),La(t,e,o,r)}if(l=(o&t.childLanes)!==0,Et||l){if(r=He,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gn(t,i),an(r,t,i,-1))}return of(),r=Ru(Error(B(421))),La(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=mS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ot=mr(i.nextSibling),Dt=e,Ie=!0,tn=null,t!==null&&(Ut[Bt++]=Ln,Ut[Bt++]=Mn,Ut[Bt++]=Zr,Ln=t.id,Mn=t.overflow,Zr=e),e=Zh(e,r.children),e.flags|=4096,e)}function Wm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cd(t.return,e,n)}function Au(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function y0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wm(t,n,e);else if(t.tag===19)Wm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Dl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Au(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Dl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Au(e,!0,n,null,s);break;case"together":Au(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rS(t,e,n){switch(e.tag){case 3:m0(e),Xi();break;case 5:$v(e);break;case 1:xt(e.type)&&Rl(e);break;case 4:Hh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ye(Nl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?g0(t,e,n):(ye(ke,ke.current&1),t=qn(t,e,n),t!==null?t.sibling:null);ye(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return y0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,f0(t,e,n)}return qn(t,e,n)}var v0,Dd,w0,_0;v0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dd=function(){};w0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$r(En.current);var s=null;switch(n){case"input":i=nd(t,i),r=nd(t,r),s=[];break;case"select":i=Ae({},i,{value:void 0}),r=Ae({},r,{value:void 0}),s=[];break;case"textarea":i=sd(t,i),r=sd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cl)}ad(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ho.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ho.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&_e("scroll",t),s||l===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};_0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fs(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iS(t,e,n){var r=e.pendingProps;switch(Vh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return xt(e.type)&&kl(),at(e),null;case 3:return r=e.stateNode,es(),Ee(It),Ee(ft),qh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Da(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(zd(tn),tn=null))),Dd(t,e),at(e),null;case 5:Gh(e);var i=$r(So.current);if(n=e.type,t!==null&&e.stateNode!=null)w0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return at(e),null}if(t=$r(En.current),Da(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[vn]=e,r[Io]=s,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(i=0;i<qs.length;i++)_e(qs[i],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Zp(r,s),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_e("invalid",r);break;case"textarea":tm(r,s),_e("invalid",r)}ad(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Oa(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Oa(r.textContent,l,t),i=["children",""+l]):ho.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Ta(r),em(r,s,!0);break;case"textarea":Ta(r),nm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ky(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vn]=e,t[Io]=r,v0(t,e,!1,!1),e.stateNode=t;e:{switch(o=ld(n,r),n){case"dialog":_e("cancel",t),_e("close",t),i=r;break;case"iframe":case"object":case"embed":_e("load",t),i=r;break;case"video":case"audio":for(i=0;i<qs.length;i++)_e(qs[i],t);i=r;break;case"source":_e("error",t),i=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),i=r;break;case"details":_e("toggle",t),i=r;break;case"input":Zp(t,r),i=nd(t,r),_e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ae({},r,{value:void 0}),_e("invalid",t);break;case"textarea":tm(t,r),i=sd(t,r),_e("invalid",t);break;default:i=r}ad(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Jy(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Qy(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&fo(t,c):typeof c=="number"&&fo(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ho.hasOwnProperty(s)?c!=null&&s==="onScroll"&&_e("scroll",t):c!=null&&xh(t,s,c,o))}switch(n){case"input":Ta(t),em(t,r,!1);break;case"textarea":Ta(t),nm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Fi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Fi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)_0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=$r(So.current),$r(En.current),Da(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(s=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:Oa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Oa(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return at(e),null;case 13:if(Ee(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Ot!==null&&e.mode&1&&!(e.flags&128))Vv(),Xi(),e.flags|=98560,s=!1;else if(s=Da(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[vn]=e}else Xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),s=!1}else tn!==null&&(zd(tn),tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Ue===0&&(Ue=3):of())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return es(),Dd(t,e),t===null&&_o(e.stateNode.containerInfo),at(e),null;case 10:return zh(e.type._context),at(e),null;case 17:return xt(e.type)&&kl(),at(e),null;case 19:if(Ee(ke),s=e.memoizedState,s===null)return at(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fs(s,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Dl(t),o!==null){for(e.flags|=128,Fs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(ke,ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&Oe()>ns&&(e.flags|=128,r=!0,Fs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Dl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ie)return at(e),null}else 2*Oe()-s.renderingStartTime>ns&&n!==1073741824&&(e.flags|=128,r=!0,Fs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Oe(),e.sibling=null,n=ke.current,ye(ke,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return sf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function sS(t,e){switch(Vh(e),e.tag){case 1:return xt(e.type)&&kl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return es(),Ee(It),Ee(ft),qh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gh(e),null;case 13:if(Ee(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(ke),null;case 4:return es(),null;case 10:return zh(e.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Ma=!1,ut=!1,oS=typeof WeakSet=="function"?WeakSet:Set,H=null;function Mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function jd(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Hm=!1;function aS(t,e){if(vd=xl,t=Tv(),Lh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,w=null;t:for(;;){for(var k;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(k=m.firstChild)!==null;)w=m,m=k;for(;;){if(m===t)break t;if(w===n&&++h===i&&(l=o),w===s&&++p===r&&(c=o),(k=m.nextSibling)!==null)break;m=w,w=m.parentNode}m=k}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:t,selectionRange:n},xl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var A=N.memoizedProps,x=N.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?A:Xt(e.type,A),x);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(D){Pe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return N=Hm,Hm=!1,N}function no(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&jd(e,n,s)}i=i.next}while(i!==r)}}function yc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ld(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function E0(t){var e=t.alternate;e!==null&&(t.alternate=null,E0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[Io],delete e[Id],delete e[$x],delete e[Wx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I0(t){return t.tag===5||t.tag===3||t.tag===4}function Gm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cl));else if(r!==4&&(t=t.child,t!==null))for(Md(t,e,n),t=t.sibling;t!==null;)Md(t,e,n),t=t.sibling}function Vd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vd(t,e,n),t=t.sibling;t!==null;)Vd(t,e,n),t=t.sibling}var Qe=null,Zt=!1;function tr(t,e,n){for(n=n.child;n!==null;)x0(t,e,n),n=n.sibling}function x0(t,e,n){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(cc,n)}catch{}switch(n.tag){case 5:ut||Mi(n,e);case 6:var r=Qe,i=Zt;Qe=null,tr(t,e,n),Qe=r,Zt=i,Qe!==null&&(Zt?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Zt?(t=Qe,n=n.stateNode,t.nodeType===8?Iu(t.parentNode,n):t.nodeType===1&&Iu(t,n),yo(t)):Iu(Qe,n.stateNode));break;case 4:r=Qe,i=Zt,Qe=n.stateNode.containerInfo,Zt=!0,tr(t,e,n),Qe=r,Zt=i;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jd(n,e,o),i=i.next}while(i!==r)}tr(t,e,n);break;case 1:if(!ut&&(Mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}tr(t,e,n);break;case 21:tr(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,tr(t,e,n),ut=r):tr(t,e,n);break;default:tr(t,e,n)}}function qm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oS),e.forEach(function(r){var i=gS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qe=l.stateNode,Zt=!1;break e;case 3:Qe=l.stateNode.containerInfo,Zt=!0;break e;case 4:Qe=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(Qe===null)throw Error(B(160));x0(s,o,i),Qe=null,Zt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Pe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)S0(e,t),e=e.sibling}function S0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),gn(t),r&4){try{no(3,t,t.return),yc(3,t)}catch(A){Pe(t,t.return,A)}try{no(5,t,t.return)}catch(A){Pe(t,t.return,A)}}break;case 1:Jt(e,t),gn(t),r&512&&n!==null&&Mi(n,n.return);break;case 5:if(Jt(e,t),gn(t),r&512&&n!==null&&Mi(n,n.return),t.flags&32){var i=t.stateNode;try{fo(i,"")}catch(A){Pe(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Gy(i,s),ld(l,o);var h=ld(l,s);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?Jy(i,m):p==="dangerouslySetInnerHTML"?Qy(i,m):p==="children"?fo(i,m):xh(i,p,m,h)}switch(l){case"input":rd(i,s);break;case"textarea":qy(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var k=s.value;k!=null?Fi(i,!!s.multiple,k,!1):w!==!!s.multiple&&(s.defaultValue!=null?Fi(i,!!s.multiple,s.defaultValue,!0):Fi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Io]=s}catch(A){Pe(t,t.return,A)}}break;case 6:if(Jt(e,t),gn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){Pe(t,t.return,A)}}break;case 3:if(Jt(e,t),gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yo(e.containerInfo)}catch(A){Pe(t,t.return,A)}break;case 4:Jt(e,t),gn(t);break;case 13:Jt(e,t),gn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nf=Oe())),r&4&&qm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(h=ut)||p,Jt(e,t),ut=h):Jt(e,t),gn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(H=t,p=t.child;p!==null;){for(m=H=p;H!==null;){switch(w=H,k=w.child,w.tag){case 0:case 11:case 14:case 15:no(4,w,w.return);break;case 1:Mi(w,w.return);var N=w.stateNode;if(typeof N.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(A){Pe(r,n,A)}}break;case 5:Mi(w,w.return);break;case 22:if(w.memoizedState!==null){Qm(m);continue}}k!==null?(k.return=w,H=k):Qm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Yy("display",o))}catch(A){Pe(t,t.return,A)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(A){Pe(t,t.return,A)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Jt(e,t),gn(t),r&4&&qm(t);break;case 21:break;default:Jt(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(I0(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fo(i,""),r.flags&=-33);var s=Gm(t);Vd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Gm(t);Md(t,l,o);break;default:throw Error(B(161))}}catch(c){Pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lS(t,e,n){H=t,T0(t)}function T0(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ma;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||ut;l=Ma;var h=ut;if(Ma=o,(ut=c)&&!h)for(H=i;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?Ym(i):c!==null?(c.return=o,H=c):Ym(i);for(;s!==null;)H=s,T0(s),s=s.sibling;H=i,Ma=l,ut=h}Km(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):Km(t)}}function Km(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||yc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Pm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&yo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ut||e.flags&512&&Ld(e)}catch(w){Pe(e,e.return,w)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Qm(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Ym(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yc(4,e)}catch(c){Pe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Pe(e,i,c)}}var s=e.return;try{Ld(e)}catch(c){Pe(e,s,c)}break;case 5:var o=e.return;try{Ld(e)}catch(c){Pe(e,o,c)}}}catch(c){Pe(e,e.return,c)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var cS=Math.ceil,Ml=Yn.ReactCurrentDispatcher,ef=Yn.ReactCurrentOwner,Wt=Yn.ReactCurrentBatchConfig,oe=0,He=null,Me=null,Ze=0,Pt=0,Vi=br(0),Ue=0,Ro=null,ti=0,vc=0,tf=0,ro=null,_t=null,nf=0,ns=1/0,Pn=null,Vl=!1,Fd=null,yr=null,Va=!1,ur=null,Fl=0,io=0,Ud=null,rl=-1,il=0;function yt(){return oe&6?Oe():rl!==-1?rl:rl=Oe()}function vr(t){return t.mode&1?oe&2&&Ze!==0?Ze&-Ze:Gx.transition!==null?(il===0&&(il=cv()),il):(t=ue,t!==0||(t=window.event,t=t===void 0?16:gv(t.type)),t):1}function an(t,e,n,r){if(50<io)throw io=0,Ud=null,Error(B(185));Ho(t,n,r),(!(oe&2)||t!==He)&&(t===He&&(!(oe&2)&&(vc|=n),Ue===4&&or(t,Ze)),St(t,r),n===1&&oe===0&&!(e.mode&1)&&(ns=Oe()+500,pc&&Nr()))}function St(t,e){var n=t.callbackNode;GI(t,e);var r=Il(t,t===He?Ze:0);if(r===0)n!==null&&sm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sm(n),e===1)t.tag===0?Hx(Jm.bind(null,t)):jv(Jm.bind(null,t)),Bx(function(){!(oe&6)&&Nr()}),n=null;else{switch(uv(r)){case 1:n=Rh;break;case 4:n=av;break;case 16:n=El;break;case 536870912:n=lv;break;default:n=El}n=O0(n,C0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C0(t,e){if(rl=-1,il=0,oe&6)throw Error(B(327));var n=t.callbackNode;if(Wi()&&t.callbackNode!==n)return null;var r=Il(t,t===He?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ul(t,r);else{e=r;var i=oe;oe|=2;var s=R0();(He!==t||Ze!==e)&&(Pn=null,ns=Oe()+500,qr(t,e));do try{hS();break}catch(l){k0(t,l)}while(!0);Bh(),Ml.current=s,oe=i,Me!==null?e=0:(He=null,Ze=0,e=Ue)}if(e!==0){if(e===2&&(i=fd(t),i!==0&&(r=i,e=Bd(t,i))),e===1)throw n=Ro,qr(t,0),or(t,r),St(t,Oe()),n;if(e===6)or(t,r);else{if(i=t.current.alternate,!(r&30)&&!uS(i)&&(e=Ul(t,r),e===2&&(s=fd(t),s!==0&&(r=s,e=Bd(t,s))),e===1))throw n=Ro,qr(t,0),or(t,r),St(t,Oe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Fr(t,_t,Pn);break;case 3:if(or(t,r),(r&130023424)===r&&(e=nf+500-Oe(),10<e)){if(Il(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ed(Fr.bind(null,t,_t,Pn),e);break}Fr(t,_t,Pn);break;case 4:if(or(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-on(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cS(r/1960))-r,10<r){t.timeoutHandle=Ed(Fr.bind(null,t,_t,Pn),r);break}Fr(t,_t,Pn);break;case 5:Fr(t,_t,Pn);break;default:throw Error(B(329))}}}return St(t,Oe()),t.callbackNode===n?C0.bind(null,t):null}function Bd(t,e){var n=ro;return t.current.memoizedState.isDehydrated&&(qr(t,e).flags|=256),t=Ul(t,e),t!==2&&(e=_t,_t=n,e!==null&&zd(e)),t}function zd(t){_t===null?_t=t:_t.push.apply(_t,t)}function uS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function or(t,e){for(e&=~tf,e&=~vc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-on(e),r=1<<n;t[n]=-1,e&=~r}}function Jm(t){if(oe&6)throw Error(B(327));Wi();var e=Il(t,0);if(!(e&1))return St(t,Oe()),null;var n=Ul(t,e);if(t.tag!==0&&n===2){var r=fd(t);r!==0&&(e=r,n=Bd(t,r))}if(n===1)throw n=Ro,qr(t,0),or(t,e),St(t,Oe()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fr(t,_t,Pn),St(t,Oe()),null}function rf(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(ns=Oe()+500,pc&&Nr())}}function ni(t){ur!==null&&ur.tag===0&&!(oe&6)&&Wi();var e=oe;oe|=1;var n=Wt.transition,r=ue;try{if(Wt.transition=null,ue=1,t)return t()}finally{ue=r,Wt.transition=n,oe=e,!(oe&6)&&Nr()}}function sf(){Pt=Vi.current,Ee(Vi)}function qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ux(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Vh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kl();break;case 3:es(),Ee(It),Ee(ft),qh();break;case 5:Gh(r);break;case 4:es();break;case 13:Ee(ke);break;case 19:Ee(ke);break;case 10:zh(r.type._context);break;case 22:case 23:sf()}n=n.return}if(He=t,Me=t=wr(t.current,null),Ze=Pt=e,Ue=0,Ro=null,tf=vc=ti=0,_t=ro=null,zr!==null){for(e=0;e<zr.length;e++)if(n=zr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}zr=null}return t}function k0(t,e){do{var n=Me;try{if(Bh(),el.current=Ll,jl){for(var r=Re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jl=!1}if(ei=0,$e=Fe=Re=null,to=!1,To=0,ef.current=null,n===null||n.return===null){Ue=1,Ro=e,Me=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=Ze,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var w=p.alternate;w?(p.updateQueue=w.updateQueue,p.memoizedState=w.memoizedState,p.lanes=w.lanes):(p.updateQueue=null,p.memoizedState=null)}var k=Vm(o);if(k!==null){k.flags&=-257,Fm(k,o,l,s,e),k.mode&1&&Mm(s,h,e),e=k,c=h;var N=e.updateQueue;if(N===null){var A=new Set;A.add(c),e.updateQueue=A}else N.add(c);break e}else{if(!(e&1)){Mm(s,h,e),of();break e}c=Error(B(426))}}else if(Ie&&l.mode&1){var x=Vm(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Fm(x,o,l,s,e),Fh(ts(c,l));break e}}s=c=ts(c,l),Ue!==4&&(Ue=2),ro===null?ro=[s]:ro.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=u0(s,c,e);Nm(s,_);break e;case 1:l=c;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(yr===null||!yr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=d0(s,l,e);Nm(s,D);break e}}s=s.return}while(s!==null)}b0(n)}catch(L){e=L,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function R0(){var t=Ml.current;return Ml.current=Ll,t===null?Ll:t}function of(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),He===null||!(ti&268435455)&&!(vc&268435455)||or(He,Ze)}function Ul(t,e){var n=oe;oe|=2;var r=R0();(He!==t||Ze!==e)&&(Pn=null,qr(t,e));do try{dS();break}catch(i){k0(t,i)}while(!0);if(Bh(),oe=n,Ml.current=r,Me!==null)throw Error(B(261));return He=null,Ze=0,Ue}function dS(){for(;Me!==null;)A0(Me)}function hS(){for(;Me!==null&&!MI();)A0(Me)}function A0(t){var e=P0(t.alternate,t,Pt);t.memoizedProps=t.pendingProps,e===null?b0(t):Me=e,ef.current=null}function b0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sS(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Me=null;return}}else if(n=iS(n,e,Pt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Ue===0&&(Ue=5)}function Fr(t,e,n){var r=ue,i=Wt.transition;try{Wt.transition=null,ue=1,fS(t,e,n,r)}finally{Wt.transition=i,ue=r}return null}function fS(t,e,n,r){do Wi();while(ur!==null);if(oe&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(qI(t,s),t===He&&(Me=He=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Va||(Va=!0,O0(El,function(){return Wi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wt.transition,Wt.transition=null;var o=ue;ue=1;var l=oe;oe|=4,ef.current=null,aS(t,n),S0(n,t),Ox(wd),xl=!!vd,wd=vd=null,t.current=n,lS(n),VI(),oe=l,ue=o,Wt.transition=s}else t.current=n;if(Va&&(Va=!1,ur=t,Fl=i),s=t.pendingLanes,s===0&&(yr=null),BI(n.stateNode),St(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,t=Fd,Fd=null,t;return Fl&1&&t.tag!==0&&Wi(),s=t.pendingLanes,s&1?t===Ud?io++:(io=0,Ud=t):io=0,Nr(),null}function Wi(){if(ur!==null){var t=uv(Fl),e=Wt.transition,n=ue;try{if(Wt.transition=null,ue=16>t?16:t,ur===null)var r=!1;else{if(t=ur,ur=null,Fl=0,oe&6)throw Error(B(331));var i=oe;for(oe|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(H=h;H!==null;){var p=H;switch(p.tag){case 0:case 11:case 15:no(8,p,s)}var m=p.child;if(m!==null)m.return=p,H=m;else for(;H!==null;){p=H;var w=p.sibling,k=p.return;if(E0(p),p===h){H=null;break}if(w!==null){w.return=k,H=w;break}H=k}}}var N=s.alternate;if(N!==null){var A=N.child;if(A!==null){N.child=null;do{var x=A.sibling;A.sibling=null,A=x}while(A!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:no(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,H=_;break e}H=s.return}}var y=t.current;for(H=y;H!==null;){o=H;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,H=S;else e:for(o=y;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yc(9,l)}}catch(L){Pe(l,l.return,L)}if(l===o){H=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,H=D;break e}H=l.return}}if(oe=i,Nr(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(cc,t)}catch{}r=!0}return r}finally{ue=n,Wt.transition=e}}return!1}function Xm(t,e,n){e=ts(n,e),e=u0(t,e,1),t=gr(t,e,1),e=yt(),t!==null&&(Ho(t,1,e),St(t,e))}function Pe(t,e,n){if(t.tag===3)Xm(t,t,n);else for(;e!==null;){if(e.tag===3){Xm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yr===null||!yr.has(r))){t=ts(n,t),t=d0(e,t,1),e=gr(e,t,1),t=yt(),e!==null&&(Ho(e,1,t),St(e,t));break}}e=e.return}}function pS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Ze&n)===n&&(Ue===4||Ue===3&&(Ze&130023424)===Ze&&500>Oe()-nf?qr(t,0):tf|=n),St(t,e)}function N0(t,e){e===0&&(t.mode&1?(e=Ra,Ra<<=1,!(Ra&130023424)&&(Ra=4194304)):e=1);var n=yt();t=Gn(t,e),t!==null&&(Ho(t,e,n),St(t,n))}function mS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),N0(t,n)}function gS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),N0(t,n)}var P0;P0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,rS(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Ie&&e.flags&1048576&&Lv(e,bl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nl(t,e),t=e.pendingProps;var i=Ji(e,ft.current);$i(e,n),i=Qh(null,e,r,t,i,n);var s=Yh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(s=!0,Rl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wh(e),i.updater=gc,e.stateNode=i,i._reactInternals=e,Rd(e,r,t,n),e=Nd(null,e,r,!0,s,n)):(e.tag=0,Ie&&s&&Mh(e),gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=vS(r),t=Xt(r,t),i){case 0:e=bd(null,e,r,t,n);break e;case 1:e=zm(null,e,r,t,n);break e;case 11:e=Um(null,e,r,t,n);break e;case 14:e=Bm(null,e,r,Xt(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),bd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),zm(t,e,r,i,n);case 3:e:{if(m0(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,zv(t,e),Ol(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ts(Error(B(423)),e),e=$m(t,e,r,n,i);break e}else if(r!==i){i=ts(Error(B(424)),e),e=$m(t,e,r,n,i);break e}else for(Ot=mr(e.stateNode.containerInfo.firstChild),Dt=e,Ie=!0,tn=null,n=Uv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xi(),r===i){e=qn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return $v(e),t===null&&Td(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,_d(r,i)?o=null:s!==null&&_d(r,s)&&(e.flags|=32),p0(t,e),gt(t,e,o,n),e.child;case 6:return t===null&&Td(e),null;case 13:return g0(t,e,n);case 4:return Hh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zi(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),Um(t,e,r,i,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ye(Nl,r._currentValue),r._currentValue=o,s!==null)if(cn(s.value,o)){if(s.children===i.children&&!It.current){e=qn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Bn(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Cd(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Cd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,$i(e,n),i=Gt(i),r=r(i),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,i=Xt(r,e.pendingProps),i=Xt(r.type,i),Bm(t,e,r,i,n);case 15:return h0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),nl(t,e),e.tag=1,xt(r)?(t=!0,Rl(e)):t=!1,$i(e,n),c0(e,r,i),Rd(e,r,i,n),Nd(null,e,r,!0,t,n);case 19:return y0(t,e,n);case 22:return f0(t,e,n)}throw Error(B(156,e.tag))};function O0(t,e){return ov(t,e)}function yS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,n,r){return new yS(t,e,n,r)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vS(t){if(typeof t=="function")return af(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Th)return 11;if(t===Ch)return 14}return 2}function wr(t,e){var n=t.alternate;return n===null?(n=$t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")af(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ri:return Kr(n.children,i,s,e);case Sh:o=8,i|=8;break;case Xu:return t=$t(12,n,e,i|2),t.elementType=Xu,t.lanes=s,t;case Zu:return t=$t(13,n,e,i),t.elementType=Zu,t.lanes=s,t;case ed:return t=$t(19,n,e,i),t.elementType=ed,t.lanes=s,t;case $y:return wc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case By:o=10;break e;case zy:o=9;break e;case Th:o=11;break e;case Ch:o=14;break e;case rr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=$t(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Kr(t,e,n,r){return t=$t(7,t,r,e),t.lanes=n,t}function wc(t,e,n,r){return t=$t(22,t,r,e),t.elementType=$y,t.lanes=n,t.stateNode={isHidden:!1},t}function bu(t,e,n){return t=$t(6,t,null,e),t.lanes=n,t}function Nu(t,e,n){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=du(0),this.expirationTimes=du(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=du(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lf(t,e,n,r,i,s,o,l,c){return t=new wS(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$t(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wh(s),t}function _S(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ki,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function D0(t){if(!t)return Tr;t=t._reactInternals;e:{if(ui(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(xt(n))return Dv(t,n,e)}return e}function j0(t,e,n,r,i,s,o,l,c){return t=lf(n,r,!0,t,i,s,o,l,c),t.context=D0(null),n=t.current,r=yt(),i=vr(n),s=Bn(r,i),s.callback=e??null,gr(n,s,i),t.current.lanes=i,Ho(t,i,r),St(t,r),t}function _c(t,e,n,r){var i=e.current,s=yt(),o=vr(i);return n=D0(n),e.context===null?e.context=n:e.pendingContext=n,e=Bn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gr(i,e,o),t!==null&&(an(t,i,o,s),Za(t,i,o)),o}function Bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cf(t,e){Zm(t,e),(t=t.alternate)&&Zm(t,e)}function ES(){return null}var L0=typeof reportError=="function"?reportError:function(t){console.error(t)};function uf(t){this._internalRoot=t}Ec.prototype.render=uf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));_c(t,e,null,null)};Ec.prototype.unmount=uf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ni(function(){_c(null,t,null,null)}),e[Hn]=null}};function Ec(t){this._internalRoot=t}Ec.prototype.unstable_scheduleHydration=function(t){if(t){var e=fv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&mv(t)}};function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ic(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eg(){}function IS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Bl(o);s.call(h)}}var o=j0(e,r,t,0,null,!1,!1,"",eg);return t._reactRootContainer=o,t[Hn]=o.current,_o(t.nodeType===8?t.parentNode:t),ni(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Bl(c);l.call(h)}}var c=lf(t,0,!1,null,null,!1,!1,"",eg);return t._reactRootContainer=c,t[Hn]=c.current,_o(t.nodeType===8?t.parentNode:t),ni(function(){_c(e,c,n,r)}),c}function xc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=Bl(o);l.call(c)}}_c(e,o,t,i)}else o=IS(n,e,t,i,r);return Bl(o)}dv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gs(e.pendingLanes);n!==0&&(Ah(e,n|1),St(e,Oe()),!(oe&6)&&(ns=Oe()+500,Nr()))}break;case 13:ni(function(){var r=Gn(t,1);if(r!==null){var i=yt();an(r,t,1,i)}}),cf(t,1)}};bh=function(t){if(t.tag===13){var e=Gn(t,134217728);if(e!==null){var n=yt();an(e,t,134217728,n)}cf(t,134217728)}};hv=function(t){if(t.tag===13){var e=vr(t),n=Gn(t,e);if(n!==null){var r=yt();an(n,t,e,r)}cf(t,e)}};fv=function(){return ue};pv=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};ud=function(t,e,n){switch(e){case"input":if(rd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fc(r);if(!i)throw Error(B(90));Hy(r),rd(r,i)}}}break;case"textarea":qy(t,n);break;case"select":e=n.value,e!=null&&Fi(t,!!n.multiple,e,!1)}};ev=rf;tv=ni;var xS={usingClientEntryPoint:!1,Events:[qo,Pi,fc,Xy,Zy,rf]},Us={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SS={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iv(t),t===null?null:t.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance||ES,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fa.isDisabled&&Fa.supportsFiber)try{cc=Fa.inject(SS),_n=Fa}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xS;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(e))throw Error(B(200));return _S(t,e,null,n)};Mt.createRoot=function(t,e){if(!df(t))throw Error(B(299));var n=!1,r="",i=L0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lf(t,1,!1,null,null,n,!1,r,i),t[Hn]=e.current,_o(t.nodeType===8?t.parentNode:t),new uf(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=iv(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return ni(t)};Mt.hydrate=function(t,e,n){if(!Ic(e))throw Error(B(200));return xc(null,t,e,!0,n)};Mt.hydrateRoot=function(t,e,n){if(!df(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=L0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=j0(e,null,t,1,n??null,i,!1,s,o),t[Hn]=e.current,_o(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ec(e)};Mt.render=function(t,e,n){if(!Ic(e))throw Error(B(200));return xc(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!Ic(t))throw Error(B(40));return t._reactRootContainer?(ni(function(){xc(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Mt.unstable_batchedUpdates=rf;Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ic(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return xc(t,e,n,!1,r)};Mt.version="18.3.1-next-f1338f8080-20240426";function M0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M0)}catch(t){console.error(t)}}M0(),My.exports=Mt;var V0=My.exports;const TS=Ty(V0);var tg=V0;Yu.createRoot=tg.createRoot,Yu.hydrateRoot=tg.hydrateRoot;function CS(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[i,s]=O.useState(!1),o=O.useRef(n);o.current=n;const l=O.useRef(r);return l.current=r,O.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var h;s(!0),(h=o.current)===null||h===void 0||h.call(o)},c.onerror=()=>{var h;s(!1),(h=l.current)===null||h===void 0||h.call(l)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),i}const kS=O.createContext(null);function RS({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:i}){const s=CS({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),o=O.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return Wo.createElement(kS.Provider,{value:o},i)}var ng={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},AS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},U0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let w=(l&15)<<2|h>>6,k=h&63;c||(k=64,o||(w=64)),r.push(n[p],n[m],n[w],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(F0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new bS;const w=s<<2|l>>4;if(r.push(w),h!==64){const k=l<<4&240|h>>2;if(r.push(k),m!==64){const N=h<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NS=function(t){const e=F0(t);return U0.encodeByteArray(e,!0)},zl=function(t){return NS(t).replace(/\./g,"")},B0=function(t){try{return U0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=()=>PS().__FIREBASE_DEFAULTS__,DS=()=>{if(typeof process>"u"||typeof ng>"u")return;const t=ng.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&B0(t[1]);return e&&JSON.parse(e)},Sc=()=>{try{return OS()||DS()||jS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},z0=t=>{var e,n;return(n=(e=Sc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},LS=t=>{const e=z0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$0=()=>{var t;return(t=Sc())===null||t===void 0?void 0:t.config},W0=t=>{var e;return(e=Sc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zl(JSON.stringify(n)),zl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function US(){var t;const e=(t=Sc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function H0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $S(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function WS(){return!US()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G0(){try{return typeof indexedDB=="object"}catch{return!1}}function q0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function HS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="FirebaseError";class dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GS,Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,di.prototype.create)}}class di{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qS(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new dn(i,l,r)}}function qS(t,e){return t.replace(KS,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KS=/\{\$([^}]+)}/g;function QS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ao(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(rg(s)&&rg(o)){if(!Ao(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function YS(t,e){const n=new JS(t,e);return n.subscribe.bind(n)}class JS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XS(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Pu),i.error===void 0&&(i.error=Pu),i.complete===void 0&&(i.complete=Pu);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pu(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=1e3,eT=2,tT=4*60*60*1e3,nT=.5;function ig(t,e=ZS,n=eT){const r=e*Math.pow(n,t),i=Math.round(nT*r*(Math.random()-.5)*2);return Math.min(tT,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class un{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new MS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sT(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iT(t){return t===Ur?void 0:t}function sT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const aT={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},lT=re.INFO,cT={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},uT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=cT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tc{constructor(e){this.name=e,this._logLevel=lT,this._logHandler=uT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const dT=(t,e)=>e.some(n=>t instanceof n);let sg,og;function hT(){return sg||(sg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fT(){return og||(og=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K0=new WeakMap,$d=new WeakMap,Q0=new WeakMap,Ou=new WeakMap,hf=new WeakMap;function pT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_r(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&K0.set(n,t)}).catch(()=>{}),hf.set(e,t),e}function mT(t){if($d.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});$d.set(t,e)}let Wd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $d.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Q0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gT(t){Wd=t(Wd)}function yT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Du(this),e,...n);return Q0.set(r,e.sort?e.sort():[e]),_r(r)}:fT().includes(t)?function(...e){return t.apply(Du(this),e),_r(K0.get(this))}:function(...e){return _r(t.apply(Du(this),e))}}function vT(t){return typeof t=="function"?yT(t):(t instanceof IDBTransaction&&mT(t),dT(t,hT())?new Proxy(t,Wd):t)}function _r(t){if(t instanceof IDBRequest)return pT(t);if(Ou.has(t))return Ou.get(t);const e=vT(t);return e!==t&&(Ou.set(t,e),hf.set(e,t)),e}const Du=t=>hf.get(t);function Y0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=_r(o);return r&&o.addEventListener("upgradeneeded",c=>{r(_r(o.result),c.oldVersion,c.newVersion,_r(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const wT=["get","getKey","getAll","getAllKeys","count"],_T=["put","add","delete","clear"],ju=new Map;function ag(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ju.get(e))return ju.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=_T.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wT.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&c.done]))[0]};return ju.set(e,s),s}gT(t=>({...t,get:(e,n,r)=>ag(e,n)||t.get(e,n,r),has:(e,n)=>!!ag(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function IT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hd="@firebase/app",lg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new Tc("@firebase/app"),xT="@firebase/app-compat",ST="@firebase/analytics-compat",TT="@firebase/analytics",CT="@firebase/app-check-compat",kT="@firebase/app-check",RT="@firebase/auth",AT="@firebase/auth-compat",bT="@firebase/database",NT="@firebase/data-connect",PT="@firebase/database-compat",OT="@firebase/functions",DT="@firebase/functions-compat",jT="@firebase/installations",LT="@firebase/installations-compat",MT="@firebase/messaging",VT="@firebase/messaging-compat",FT="@firebase/performance",UT="@firebase/performance-compat",BT="@firebase/remote-config",zT="@firebase/remote-config-compat",$T="@firebase/storage",WT="@firebase/storage-compat",HT="@firebase/firestore",GT="@firebase/vertexai-preview",qT="@firebase/firestore-compat",KT="firebase",QT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="[DEFAULT]",YT={[Hd]:"fire-core",[xT]:"fire-core-compat",[TT]:"fire-analytics",[ST]:"fire-analytics-compat",[kT]:"fire-app-check",[CT]:"fire-app-check-compat",[RT]:"fire-auth",[AT]:"fire-auth-compat",[bT]:"fire-rtdb",[NT]:"fire-data-connect",[PT]:"fire-rtdb-compat",[OT]:"fire-fn",[DT]:"fire-fn-compat",[jT]:"fire-iid",[LT]:"fire-iid-compat",[MT]:"fire-fcm",[VT]:"fire-fcm-compat",[FT]:"fire-perf",[UT]:"fire-perf-compat",[BT]:"fire-rc",[zT]:"fire-rc-compat",[$T]:"fire-gcs",[WT]:"fire-gcs-compat",[HT]:"fire-fst",[qT]:"fire-fst-compat",[GT]:"fire-vertex","fire-js":"fire-js",[KT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new Map,JT=new Map,qd=new Map;function cg(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xn(t){const e=t.name;if(qd.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;qd.set(e,t);for(const n of $l.values())cg(n,t);for(const n of JT.values())cg(n,t);return!0}function hi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new di("app","Firebase",XT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=QT;function J0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Er.create("bad-app-name",{appName:String(i)});if(n||(n=$0()),!n)throw Er.create("no-options");const s=$l.get(i);if(s){if(Ao(n,s.options)&&Ao(r,s.config))return s;throw Er.create("duplicate-app",{appName:i})}const o=new oT(i);for(const c of qd.values())o.addComponent(c);const l=new ZT(n,r,o);return $l.set(i,l),l}function ff(t=Gd){const e=$l.get(t);if(!e&&t===Gd&&$0())return J0();if(!e)throw Er.create("no-app",{appName:t});return e}function Ht(t,e,n){var r;let i=(r=YT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(l.join(" "));return}xn(new un(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="firebase-heartbeat-database",tC=1,bo="firebase-heartbeat-store";let Lu=null;function X0(){return Lu||(Lu=Y0(eC,tC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),Lu}async function nC(t){try{const n=(await X0()).transaction(bo),r=await n.objectStore(bo).get(Z0(t));return await n.done,r}catch(e){if(e instanceof dn)Kn.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function ug(t,e){try{const r=(await X0()).transaction(bo,"readwrite");await r.objectStore(bo).put(e,Z0(t)),await r.done}catch(n){if(n instanceof dn)Kn.warn(n.message);else{const r=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function Z0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=1024,iC=30*24*60*60*1e3;class sC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=iC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dg(),{heartbeatsToSend:r,unsentEntries:i}=oC(this._heartbeatsCache.heartbeats),s=zl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Kn.warn(n),""}}}function dg(){return new Date().toISOString().substring(0,10)}function oC(t,e=rC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),hg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class aC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return G0()?q0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ug(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ug(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function hg(t){return zl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){xn(new un("platform-logger",e=>new ET(e),"PRIVATE")),xn(new un("heartbeat",e=>new sC(e),"PRIVATE")),Ht(Hd,lg,t),Ht(Hd,lg,"esm2017"),Ht("fire-js","")}lC("");function pf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ew(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cC=ew,tw=new di("auth","Firebase",ew());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new Tc("@firebase/auth");function uC(t,...e){Wl.logLevel<=re.WARN&&Wl.warn(`Auth (${hs}): ${t}`,...e)}function ol(t,...e){Wl.logLevel<=re.ERROR&&Wl.error(`Auth (${hs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,...e){throw gf(t,...e)}function ln(t,...e){return gf(t,...e)}function mf(t,e,n){const r=Object.assign(Object.assign({},cC()),{[e]:n});return new di("auth","Firebase",r).create(e,{appName:t.name})}function Ir(t){return mf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nw(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Sn(t,"argument-error"),mf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tw.create(t,...e)}function Y(t,e,...n){if(!t)throw gf(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ol(e),new Error(e)}function Qn(t,e){t||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dC(){return fg()==="http:"||fg()==="https:"}function fg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dC()||H0()||"connection"in navigator)?navigator.onLine:!0}function fC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=FS()||zS()}get(){return hC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Yo(3e4,6e4);function vf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fs(t,e,n,r,i={}){return iw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Qo(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},s);return BS()||(h.referrerPolicy="no-referrer"),rw.fetch()(sw(t,t.config.apiHost,n,l),h)})}async function iw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},pC),e);try{const i=new yC(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ua(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ua(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ua(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ua(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw mf(t,p,h);Sn(t,p)}}catch(i){if(i instanceof dn)throw i;Sn(t,"network-request-failed",{message:String(i)})}}async function gC(t,e,n,r,i={}){const s=await fs(t,e,n,r,i);return"mfaPendingCredential"in s&&Sn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function sw(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?yf(t.config,i):`${t.config.apiScheme}://${i}`}class yC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ln(this.auth,"network-request-failed")),mC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ua(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ln(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(t,e){return fs(t,"POST","/v1/accounts:delete",e)}async function ow(t,e){return fs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wC(t,e=!1){const n=Ct(t),r=await n.getIdToken(e),i=wf(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:so(Mu(i.auth_time)),issuedAtTime:so(Mu(i.iat)),expirationTime:so(Mu(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Mu(t){return Number(t)*1e3}function wf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ol("JWT malformed, contained fewer than 3 sections"),null;try{const i=B0(n);return i?JSON.parse(i):(ol("Failed to decode base64 JWT payload"),null)}catch(i){return ol("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function pg(t){const e=wf(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dn&&_C(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _C({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=so(this.lastLoginAt),this.creationTime=so(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(t){var e;const n=t.auth,r=await t.getIdToken(),i=await No(t,ow(n,{idToken:r}));Y(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?aw(s.providerUserInfo):[],l=xC(t.providerData,o),c=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Qd(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function IC(t){const e=Ct(t);await Hl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xC(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aw(t){return t.map(e=>{var{providerId:n}=e,r=pf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(t,e){const n=await iw(t,{},async()=>{const r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=sw(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",rw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TC(t,e){return fs(t,"POST","/v2/accounts:revokeToken",vf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=pg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await SC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Hi;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hi,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=pf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await No(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wC(this,e)}reload(){return IC(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await No(this,vC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,k=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(l=n.tenantId)!==null&&l!==void 0?l:void 0,x=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(h=n.createdAt)!==null&&h!==void 0?h:void 0,y=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:S,emailVerified:D,isAnonymous:L,providerData:F,stsTokenManager:E}=n;Y(S&&E,e,"internal-error");const g=Hi.fromJSON(this.name,E);Y(typeof S=="string",e,"internal-error"),nr(m,e.name),nr(w,e.name),Y(typeof D=="boolean",e,"internal-error"),Y(typeof L=="boolean",e,"internal-error"),nr(k,e.name),nr(N,e.name),nr(A,e.name),nr(x,e.name),nr(_,e.name),nr(y,e.name);const I=new Fn({uid:S,auth:e,email:w,emailVerified:D,displayName:m,isAnonymous:L,photoURL:N,phoneNumber:k,tenantId:A,stsTokenManager:g,createdAt:_,lastLoginAt:y});return F&&Array.isArray(F)&&(I.providerData=F.map(T=>Object.assign({},T))),x&&(I._redirectEventId=x),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new Hi;i.updateFromServerResponse(n);const s=new Fn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hl(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Y(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?aw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Hi;l.updateFromIdToken(r);const c=new Fn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Qd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=new Map;function Un(t){Qn(t instanceof Function,"Expected a class definition");let e=mg.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lw.type="NONE";const gg=lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t,e,n){return`firebase:${t}:${e}:${n}`}class Gi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=al(this.userKey,i.apiKey,s),this.fullPersistenceKey=al("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Gi(Un(gg),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Un(gg);const o=al(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Fn._fromJSON(e,p);h!==s&&(l=m),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Gi(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Gi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pw(e))return"Blackberry";if(mw(e))return"Webos";if(uw(e))return"Safari";if((e.includes("chrome/")||dw(e))&&!e.includes("edge/"))return"Chrome";if(fw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cw(t=pt()){return/firefox\//i.test(t)}function uw(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dw(t=pt()){return/crios\//i.test(t)}function hw(t=pt()){return/iemobile/i.test(t)}function fw(t=pt()){return/android/i.test(t)}function pw(t=pt()){return/blackberry/i.test(t)}function mw(t=pt()){return/webos/i.test(t)}function _f(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CC(t=pt()){var e;return _f(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kC(){return $S()&&document.documentMode===10}function gw(t=pt()){return _f(t)||fw(t)||mw(t)||pw(t)||/windows phone/i.test(t)||hw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t,e=[]){let n;switch(t){case"Browser":n=yg(pt());break;case"Worker":n=`${yg(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(t,e={}){return fs(t,"GET","/v2/passwordPolicy",vf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=6;class NC{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:bC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vg(this),this.idTokenSubscription=new vg(this),this.beforeStateQueue=new RC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Gi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ow(this,{idToken:e}),r=await Fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(Ir(this));const n=e?Ct(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AC(this),n=new NC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new di("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Gi.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&uC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ps(t){return Ct(t)}class vg{constructor(e){this.auth=e,this.observer=null,this.addObserver=YS(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OC(t){Ef=t}function DC(t){return Ef.loadJS(t)}function jC(){return Ef.gapiScript}function LC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e){const n=hi(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ao(s,e??{}))return i;Sn(i,"already-initialized")}return n.initialize({options:e})}function VC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FC(t,e,n){const r=ps(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=vw(e),{host:o,port:l}=UC(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),BC()}function vw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UC(t){const e=vw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wg(o)}}}function wg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t,e){return gC(t,"POST","/v1/accounts:signInWithIdp",vf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="http://localhost";class ri extends ww{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ri(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=pf(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ri(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qi(e,n)}buildRequest(){const e={requestUri:zC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends Cc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends Jo{constructor(){super("facebook.com")}static credential(e){return ri._fromParams({providerId:Dn.PROVIDER_ID,signInMethod:Dn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dn.credentialFromTaggedObject(e)}static credentialFromError(e){return Dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dn.credential(e.oauthAccessToken)}catch{return null}}}Dn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends Jo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ri._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return jn.credential(n,r)}catch{return null}}}jn.GOOGLE_SIGN_IN_METHOD="google.com";jn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Jo{constructor(){super("github.com")}static credential(e){return ri._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Jo{constructor(){super("twitter.com")}static credential(e,n){return ri._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Fn._fromIdTokenResponse(e,r,i),o=_g(r);return new rs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_g(r);return new rs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _g(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends dn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Gl.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Gl(e,n,r,i)}}function _w(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Gl._fromErrorAndOperation(t,s,e,r):s})}async function $C(t,e,n=!1){const r=await No(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return rs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(t,e,n=!1){const{auth:r}=t;if(wn(r.app))return Promise.reject(Ir(r));const i="reauthenticate";try{const s=await No(t,_w(r,i,e,t),n);Y(s.idToken,r,"internal-error");const o=wf(s.idToken);Y(o,r,"internal-error");const{sub:l}=o;return Y(t.uid===l,r,"user-mismatch"),rs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Sn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(t,e,n=!1){if(wn(t.app))return Promise.reject(Ir(t));const r="signIn",i=await _w(t,r,e),s=await rs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function GC(t,e,n,r){return Ct(t).onIdTokenChanged(e,n,r)}function qC(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}function KC(t,e,n,r){return Ct(t).onAuthStateChanged(e,n,r)}function QC(t){return Ct(t).signOut()}const ql="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ql,"1"),this.storage.removeItem(ql),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=1e3,JC=10;class Iw extends Ew{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);kC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,JC):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},YC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Iw.type="LOCAL";const XC=Iw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends Ew{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xw.type="SESSION";const Sw=xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new kc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(n.origin,s)),c=await ZC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const h=If("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const w=m;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(w.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function tk(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function nk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ik(){return Tw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="firebaseLocalStorageDb",sk=1,Kl="firebaseLocalStorage",kw="fbase_key";class Xo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rc(t,e){return t.transaction([Kl],e?"readwrite":"readonly").objectStore(Kl)}function ok(){const t=indexedDB.deleteDatabase(Cw);return new Xo(t).toPromise()}function Yd(){const t=indexedDB.open(Cw,sk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kl,{keyPath:kw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kl)?e(r):(r.close(),await ok(),e(await Yd()))})})}async function Eg(t,e,n){const r=Rc(t,!0).put({[kw]:e,value:n});return new Xo(r).toPromise()}async function ak(t,e){const n=Rc(t,!1).get(e),r=await new Xo(n).toPromise();return r===void 0?null:r.value}function Ig(t,e){const n=Rc(t,!0).delete(e);return new Xo(n).toPromise()}const lk=800,ck=3;class Rw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ck)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kc._getInstance(ik()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nk(),!this.activeServiceWorker)return;this.sender=new ek(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yd();return await Eg(e,ql,"1"),await Ig(e,ql),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Eg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ak(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ig(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Rc(i,!1).getAll();return new Xo(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Rw.type="LOCAL";const uk=Rw;new Yo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e){return e?Un(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends ww{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dk(t){return HC(t.auth,new Sf(t),t.bypassAuthState)}function hk(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),WC(n,new Sf(t),t.bypassAuthState)}async function fk(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),$C(n,new Sf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dk;case"linkViaPopup":case"linkViaRedirect":return fk;case"reauthViaPopup":case"reauthViaRedirect":return hk;default:Sn(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new Yo(2e3,1e4);async function mk(t,e,n){if(wn(t.app))return Promise.reject(ln(t,"operation-not-supported-in-this-environment"));const r=ps(t);nw(t,e,Cc);const i=xf(r,n);return new Wr(r,"signInViaPopup",e,i).executeNotNull()}class Wr extends Aw{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Wr.currentPopupAction&&Wr.currentPopupAction.cancel(),Wr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=If();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pk.get())};e()}}Wr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="pendingRedirect",ll=new Map;class yk extends Aw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ll.get(this.auth._key());if(!e){try{const r=await vk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ll.set(this.auth._key(),e)}return this.bypassAuthState||ll.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vk(t,e){const n=Nw(e),r=bw(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function wk(t,e){return bw(t)._set(Nw(e),"true")}function _k(t,e){ll.set(t._key(),e)}function bw(t){return Un(t._redirectPersistence)}function Nw(t){return al(gk,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t,e,n){return Ik(t,e,n)}async function Ik(t,e,n){if(wn(t.app))return Promise.reject(Ir(t));const r=ps(t);nw(t,e,Cc),await r._initializationPromise;const i=xf(r,n);return await wk(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function xk(t,e){return await ps(t)._initializationPromise,Pw(t,e,!1)}async function Pw(t,e,n=!1){if(wn(t.app))return Promise.reject(Ir(t));const r=ps(t),i=xf(r,e),o=await new yk(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=10*60*1e3;class Tk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ck(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ow(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ln(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Sk&&this.cachedEventUids.clear(),this.cachedEventUids.has(xg(e))}saveEventToCache(e){this.cachedEventUids.add(xg(e)),this.lastProcessedEventTime=Date.now()}}function xg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ow({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ck(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ow(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(t,e={}){return fs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ak=/^https?/;async function bk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kk(t);for(const n of e)try{if(Nk(n))return}catch{}Sn(t,"unauthorized-domain")}function Nk(t){const e=Kd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Ak.test(n))return!1;if(Rk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=new Yo(3e4,6e4);function Sg(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ok(t){return new Promise((e,n)=>{var r,i,s;function o(){Sg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sg(),n(ln(t,"network-request-failed"))},timeout:Pk.get()})}if(!((i=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=In().gapi)===null||s===void 0)&&s.load)o();else{const l=LC("iframefcb");return In()[l]=()=>{gapi.load?o():n(ln(t,"network-request-failed"))},DC(`${jC()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw cl=null,e})}let cl=null;function Dk(t){return cl=cl||Ok(t),cl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new Yo(5e3,15e3),Lk="__/auth/iframe",Mk="emulator/auth/iframe",Vk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uk(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yf(e,Mk):`https://${t.config.authDomain}/${Lk}`,r={apiKey:e.apiKey,appName:t.name,v:hs},i=Fk.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qo(r).slice(1)}`}async function Bk(t){const e=await Dk(t),n=In().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:Uk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vk,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ln(t,"network-request-failed"),l=In().setTimeout(()=>{s(o)},jk.get());function c(){In().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$k=500,Wk=600,Hk="_blank",Gk="http://localhost";class Tg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qk(t,e,n,r=$k,i=Wk){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},zk),{width:r.toString(),height:i.toString(),top:s,left:o}),h=pt().toLowerCase();n&&(l=dw(h)?Hk:n),cw(h)&&(e=e||Gk,c.scrollbars="yes");const p=Object.entries(c).reduce((w,[k,N])=>`${w}${k}=${N},`,"");if(CC(h)&&l!=="_self")return Kk(e||"",l),new Tg(null);const m=window.open(e||"",l,p);Y(m,t,"popup-blocked");try{m.focus()}catch{}return new Tg(m)}function Kk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="__/auth/handler",Yk="emulator/auth/handler",Jk=encodeURIComponent("fac");async function Cg(t,e,n,r,i,s){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hs,eventId:i};if(e instanceof Cc){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Jo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${Jk}=${encodeURIComponent(c)}`:"";return`${Xk(t)}?${Qo(l).slice(1)}${h}`}function Xk({config:t}){return t.emulator?yf(t,Yk):`https://${t.authDomain}/${Qk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu="webStorageSupport";class Zk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sw,this._completeRedirectFn=Pw,this._overrideRedirectResult=_k}async _openPopup(e,n,r,i){var s;Qn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Cg(e,n,r,Kd(),i);return qk(e,o,If())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Cg(e,n,r,Kd(),i);return tk(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Bk(e),r=new Tk(e);return n.register("authEvent",i=>(Y(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vu,{type:Vu},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Vu];o!==void 0&&n(!!o),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gw()||uw()||_f()}}const eR=Zk;var kg="@firebase/auth",Rg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rR(t){xn(new un("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yw(t)},h=new PC(r,i,s,c);return VC(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xn(new un("auth-internal",e=>{const n=ps(e.getProvider("auth").getImmediate());return(r=>new tR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ht(kg,Rg,nR(t)),Ht(kg,Rg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=5*60,sR=W0("authIdTokenMaxAge")||iR;let Ag=null;const oR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sR)return;const i=n==null?void 0:n.token;Ag!==i&&(Ag=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function aR(t=ff()){const e=hi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=MC(t,{popupRedirectResolver:eR,persistence:[uk,XC,Sw]}),r=W0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=oR(s.toString());qC(n,o,()=>o(n.currentUser)),GC(n,l=>o(l))}}const i=z0("auth");return i&&FC(n,`http://${i}`),n}function lR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}OC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ln("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",lR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rR("Browser");var cR="firebase",uR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht(cR,uR,"app");var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,g){function I(){}I.prototype=g.prototype,E.D=g.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(T,R,b){for(var C=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)C[qe-2]=arguments[qe];return g.prototype[R].apply(T,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,g,I){I||(I=0);var T=Array(16);if(typeof g=="string")for(var R=0;16>R;++R)T[R]=g.charCodeAt(I++)|g.charCodeAt(I++)<<8|g.charCodeAt(I++)<<16|g.charCodeAt(I++)<<24;else for(R=0;16>R;++R)T[R]=g[I++]|g[I++]<<8|g[I++]<<16|g[I++]<<24;g=E.g[0],I=E.g[1],R=E.g[2];var b=E.g[3],C=g+(b^I&(R^b))+T[0]+3614090360&4294967295;g=I+(C<<7&4294967295|C>>>25),C=b+(R^g&(I^R))+T[1]+3905402710&4294967295,b=g+(C<<12&4294967295|C>>>20),C=R+(I^b&(g^I))+T[2]+606105819&4294967295,R=b+(C<<17&4294967295|C>>>15),C=I+(g^R&(b^g))+T[3]+3250441966&4294967295,I=R+(C<<22&4294967295|C>>>10),C=g+(b^I&(R^b))+T[4]+4118548399&4294967295,g=I+(C<<7&4294967295|C>>>25),C=b+(R^g&(I^R))+T[5]+1200080426&4294967295,b=g+(C<<12&4294967295|C>>>20),C=R+(I^b&(g^I))+T[6]+2821735955&4294967295,R=b+(C<<17&4294967295|C>>>15),C=I+(g^R&(b^g))+T[7]+4249261313&4294967295,I=R+(C<<22&4294967295|C>>>10),C=g+(b^I&(R^b))+T[8]+1770035416&4294967295,g=I+(C<<7&4294967295|C>>>25),C=b+(R^g&(I^R))+T[9]+2336552879&4294967295,b=g+(C<<12&4294967295|C>>>20),C=R+(I^b&(g^I))+T[10]+4294925233&4294967295,R=b+(C<<17&4294967295|C>>>15),C=I+(g^R&(b^g))+T[11]+2304563134&4294967295,I=R+(C<<22&4294967295|C>>>10),C=g+(b^I&(R^b))+T[12]+1804603682&4294967295,g=I+(C<<7&4294967295|C>>>25),C=b+(R^g&(I^R))+T[13]+4254626195&4294967295,b=g+(C<<12&4294967295|C>>>20),C=R+(I^b&(g^I))+T[14]+2792965006&4294967295,R=b+(C<<17&4294967295|C>>>15),C=I+(g^R&(b^g))+T[15]+1236535329&4294967295,I=R+(C<<22&4294967295|C>>>10),C=g+(R^b&(I^R))+T[1]+4129170786&4294967295,g=I+(C<<5&4294967295|C>>>27),C=b+(I^R&(g^I))+T[6]+3225465664&4294967295,b=g+(C<<9&4294967295|C>>>23),C=R+(g^I&(b^g))+T[11]+643717713&4294967295,R=b+(C<<14&4294967295|C>>>18),C=I+(b^g&(R^b))+T[0]+3921069994&4294967295,I=R+(C<<20&4294967295|C>>>12),C=g+(R^b&(I^R))+T[5]+3593408605&4294967295,g=I+(C<<5&4294967295|C>>>27),C=b+(I^R&(g^I))+T[10]+38016083&4294967295,b=g+(C<<9&4294967295|C>>>23),C=R+(g^I&(b^g))+T[15]+3634488961&4294967295,R=b+(C<<14&4294967295|C>>>18),C=I+(b^g&(R^b))+T[4]+3889429448&4294967295,I=R+(C<<20&4294967295|C>>>12),C=g+(R^b&(I^R))+T[9]+568446438&4294967295,g=I+(C<<5&4294967295|C>>>27),C=b+(I^R&(g^I))+T[14]+3275163606&4294967295,b=g+(C<<9&4294967295|C>>>23),C=R+(g^I&(b^g))+T[3]+4107603335&4294967295,R=b+(C<<14&4294967295|C>>>18),C=I+(b^g&(R^b))+T[8]+1163531501&4294967295,I=R+(C<<20&4294967295|C>>>12),C=g+(R^b&(I^R))+T[13]+2850285829&4294967295,g=I+(C<<5&4294967295|C>>>27),C=b+(I^R&(g^I))+T[2]+4243563512&4294967295,b=g+(C<<9&4294967295|C>>>23),C=R+(g^I&(b^g))+T[7]+1735328473&4294967295,R=b+(C<<14&4294967295|C>>>18),C=I+(b^g&(R^b))+T[12]+2368359562&4294967295,I=R+(C<<20&4294967295|C>>>12),C=g+(I^R^b)+T[5]+4294588738&4294967295,g=I+(C<<4&4294967295|C>>>28),C=b+(g^I^R)+T[8]+2272392833&4294967295,b=g+(C<<11&4294967295|C>>>21),C=R+(b^g^I)+T[11]+1839030562&4294967295,R=b+(C<<16&4294967295|C>>>16),C=I+(R^b^g)+T[14]+4259657740&4294967295,I=R+(C<<23&4294967295|C>>>9),C=g+(I^R^b)+T[1]+2763975236&4294967295,g=I+(C<<4&4294967295|C>>>28),C=b+(g^I^R)+T[4]+1272893353&4294967295,b=g+(C<<11&4294967295|C>>>21),C=R+(b^g^I)+T[7]+4139469664&4294967295,R=b+(C<<16&4294967295|C>>>16),C=I+(R^b^g)+T[10]+3200236656&4294967295,I=R+(C<<23&4294967295|C>>>9),C=g+(I^R^b)+T[13]+681279174&4294967295,g=I+(C<<4&4294967295|C>>>28),C=b+(g^I^R)+T[0]+3936430074&4294967295,b=g+(C<<11&4294967295|C>>>21),C=R+(b^g^I)+T[3]+3572445317&4294967295,R=b+(C<<16&4294967295|C>>>16),C=I+(R^b^g)+T[6]+76029189&4294967295,I=R+(C<<23&4294967295|C>>>9),C=g+(I^R^b)+T[9]+3654602809&4294967295,g=I+(C<<4&4294967295|C>>>28),C=b+(g^I^R)+T[12]+3873151461&4294967295,b=g+(C<<11&4294967295|C>>>21),C=R+(b^g^I)+T[15]+530742520&4294967295,R=b+(C<<16&4294967295|C>>>16),C=I+(R^b^g)+T[2]+3299628645&4294967295,I=R+(C<<23&4294967295|C>>>9),C=g+(R^(I|~b))+T[0]+4096336452&4294967295,g=I+(C<<6&4294967295|C>>>26),C=b+(I^(g|~R))+T[7]+1126891415&4294967295,b=g+(C<<10&4294967295|C>>>22),C=R+(g^(b|~I))+T[14]+2878612391&4294967295,R=b+(C<<15&4294967295|C>>>17),C=I+(b^(R|~g))+T[5]+4237533241&4294967295,I=R+(C<<21&4294967295|C>>>11),C=g+(R^(I|~b))+T[12]+1700485571&4294967295,g=I+(C<<6&4294967295|C>>>26),C=b+(I^(g|~R))+T[3]+2399980690&4294967295,b=g+(C<<10&4294967295|C>>>22),C=R+(g^(b|~I))+T[10]+4293915773&4294967295,R=b+(C<<15&4294967295|C>>>17),C=I+(b^(R|~g))+T[1]+2240044497&4294967295,I=R+(C<<21&4294967295|C>>>11),C=g+(R^(I|~b))+T[8]+1873313359&4294967295,g=I+(C<<6&4294967295|C>>>26),C=b+(I^(g|~R))+T[15]+4264355552&4294967295,b=g+(C<<10&4294967295|C>>>22),C=R+(g^(b|~I))+T[6]+2734768916&4294967295,R=b+(C<<15&4294967295|C>>>17),C=I+(b^(R|~g))+T[13]+1309151649&4294967295,I=R+(C<<21&4294967295|C>>>11),C=g+(R^(I|~b))+T[4]+4149444226&4294967295,g=I+(C<<6&4294967295|C>>>26),C=b+(I^(g|~R))+T[11]+3174756917&4294967295,b=g+(C<<10&4294967295|C>>>22),C=R+(g^(b|~I))+T[2]+718787259&4294967295,R=b+(C<<15&4294967295|C>>>17),C=I+(b^(R|~g))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,g){g===void 0&&(g=E.length);for(var I=g-this.blockSize,T=this.B,R=this.h,b=0;b<g;){if(R==0)for(;b<=I;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<g;)if(T[R++]=E.charCodeAt(b++),R==this.blockSize){i(this,T),R=0;break}}else for(;b<g;)if(T[R++]=E[b++],R==this.blockSize){i(this,T),R=0;break}}this.h=R,this.o+=g},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;var I=8*this.o;for(g=E.length-8;g<E.length;++g)E[g]=I&255,I/=256;for(this.u(E),E=Array(16),g=I=0;4>g;++g)for(var T=0;32>T;T+=8)E[I++]=this.g[g]>>>T&255;return E};function s(E,g){var I=l;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=g(E)}function o(E,g){this.h=g;for(var I=[],T=!0,R=E.length-1;0<=R;R--){var b=E[R]|0;T&&b==g||(I[R]=b,T=!1)}this.g=I}var l={};function c(E){return-128<=E&&128>E?s(E,function(g){return new o([g|0],0>g?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return x(h(-E));for(var g=[],I=1,T=0;E>=I;T++)g[T]=E/I|0,I*=4294967296;return new o(g,0)}function p(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return x(p(E.substring(1),g));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(g,8)),T=m,R=0;R<E.length;R+=8){var b=Math.min(8,E.length-R),C=parseInt(E.substring(R,R+b),g);8>b?(b=h(Math.pow(g,b)),T=T.j(b).add(h(C))):(T=T.j(I),T=T.add(h(C)))}return T}var m=c(0),w=c(1),k=c(16777216);t=o.prototype,t.m=function(){if(A(this))return-x(this).m();for(var E=0,g=1,I=0;I<this.g.length;I++){var T=this.i(I);E+=(0<=T?T:4294967296+T)*g,g*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(A(this))return"-"+x(this).toString(E);for(var g=h(Math.pow(E,6)),I=this,T="";;){var R=D(I,g).g;I=_(I,R.j(g));var b=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=R,N(I))return b+T;for(;6>b.length;)b="0"+b;T=b+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(var g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function A(E){return E.h==-1}t.l=function(E){return E=_(this,E),A(E)?-1:N(E)?0:1};function x(E){for(var g=E.g.length,I=[],T=0;T<g;T++)I[T]=~E.g[T];return new o(I,~E.h).add(w)}t.abs=function(){return A(this)?x(this):this},t.add=function(E){for(var g=Math.max(this.g.length,E.g.length),I=[],T=0,R=0;R<=g;R++){var b=T+(this.i(R)&65535)+(E.i(R)&65535),C=(b>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);T=C>>>16,b&=65535,C&=65535,I[R]=C<<16|b}return new o(I,I[I.length-1]&-2147483648?-1:0)};function _(E,g){return E.add(x(g))}t.j=function(E){if(N(this)||N(E))return m;if(A(this))return A(E)?x(this).j(x(E)):x(x(this).j(E));if(A(E))return x(this.j(x(E)));if(0>this.l(k)&&0>E.l(k))return h(this.m()*E.m());for(var g=this.g.length+E.g.length,I=[],T=0;T<2*g;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var R=0;R<E.g.length;R++){var b=this.i(T)>>>16,C=this.i(T)&65535,qe=E.i(R)>>>16,Rt=E.i(R)&65535;I[2*T+2*R]+=C*Rt,y(I,2*T+2*R),I[2*T+2*R+1]+=b*Rt,y(I,2*T+2*R+1),I[2*T+2*R+1]+=C*qe,y(I,2*T+2*R+1),I[2*T+2*R+2]+=b*qe,y(I,2*T+2*R+2)}for(T=0;T<g;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=g;T<2*g;T++)I[T]=0;return new o(I,0)};function y(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function S(E,g){this.g=E,this.h=g}function D(E,g){if(N(g))throw Error("division by zero");if(N(E))return new S(m,m);if(A(E))return g=D(x(E),g),new S(x(g.g),x(g.h));if(A(g))return g=D(E,x(g)),new S(x(g.g),g.h);if(30<E.g.length){if(A(E)||A(g))throw Error("slowDivide_ only works with positive integers.");for(var I=w,T=g;0>=T.l(E);)I=L(I),T=L(T);var R=F(I,1),b=F(T,1);for(T=F(T,2),I=F(I,2);!N(T);){var C=b.add(T);0>=C.l(E)&&(R=R.add(I),b=C),T=F(T,1),I=F(I,1)}return g=_(E,R.j(g)),new S(R,g)}for(R=m;0<=E.l(g);){for(I=Math.max(1,Math.floor(E.m()/g.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),b=h(I),C=b.j(g);A(C)||0<C.l(E);)I-=T,b=h(I),C=b.j(g);N(b)&&(b=w),R=R.add(b),E=_(E,C)}return new S(R,E)}t.A=function(E){return D(this,E).h},t.and=function(E){for(var g=Math.max(this.g.length,E.g.length),I=[],T=0;T<g;T++)I[T]=this.i(T)&E.i(T);return new o(I,this.h&E.h)},t.or=function(E){for(var g=Math.max(this.g.length,E.g.length),I=[],T=0;T<g;T++)I[T]=this.i(T)|E.i(T);return new o(I,this.h|E.h)},t.xor=function(E){for(var g=Math.max(this.g.length,E.g.length),I=[],T=0;T<g;T++)I[T]=this.i(T)^E.i(T);return new o(I,this.h^E.h)};function L(E){for(var g=E.g.length+1,I=[],T=0;T<g;T++)I[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(I,E.h)}function F(E,g){var I=g>>5;g%=32;for(var T=E.g.length-I,R=[],b=0;b<T;b++)R[b]=0<g?E.i(b+I)>>>g|E.i(b+I+1)<<32-g:E.i(b+I);return new o(R,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Dw=o}).apply(typeof bg<"u"?bg:typeof self<"u"?self:typeof window<"u"?window:{});var Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jw,Ks,Lw,ul,Jd,Mw,Vw,Fw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ba=="object"&&Ba];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var P=a[v];if(!(P in f))break e;f=f[P]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,v=!1,P={next:function(){if(!v&&f<a.length){var j=f++;return{value:d(j,a[j]),done:!1}}return v=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,v),a.apply(d,P)}}return function(){return a.apply(d,arguments)}}function w(a,d,f){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,w.apply(null,arguments)}function k(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function N(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,P,j){for(var $=Array(arguments.length-2),he=2;he<arguments.length;he++)$[he-2]=arguments[he];return d.prototype[P].apply(v,$)}}function A(a){const d=a.length;if(0<d){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function x(a,d){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(c(v)){const P=a.length||0,j=v.length||0;a.length=P+j;for(let $=0;$<j;$++)a[P+$]=v[$]}else a.push(v)}}class _{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function y(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function F(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function E(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function g(a){const d={};for(const f in a)d[f]=a[f];return d}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,d){let f,v;for(let P=1;P<arguments.length;P++){v=arguments[P];for(f in v)a[f]=v[f];for(let j=0;j<I.length;j++)f=I[j],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function R(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function b(a){l.setTimeout(()=>{throw a},0)}function C(){var a=Q;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class qe{constructor(){this.h=this.g=null}add(d,f){const v=Rt.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var Rt=new _(()=>new Pr,a=>a.reset());class Pr{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,W=!1,Q=new qe,X=()=>{const a=l.Promise.resolve(void 0);tt=()=>{a.then(de)}};var de=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){b(f)}var d=Rt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}W=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var At=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function fn(a,d){if(pe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{D(d.nodeName);var P=!0;break e}catch{}P=!1}P||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Kt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&fn.aa.h.call(this)}}N(fn,pe);var Kt={2:"touch",3:"pen",4:"mouse"};fn.prototype.h=function(){fn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var bt="closure_listenable_"+(1e6*Math.random()|0),ra=0;function pi(a,d,f,v,P){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=P,this.key=++ra,this.da=this.fa=!1}function pn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Or(a){this.src=a,this.g={},this.h=0}Or.prototype.add=function(a,d,f,v,P){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var $=mn(a,d,v,P);return-1<$?(d=a[$],f||(d.fa=!1)):(d=new pi(d,this.src,j,!!v,P),d.fa=f,a.push(d)),d};function mi(a,d){var f=d.type;if(f in a.g){var v=a.g[f],P=Array.prototype.indexOf.call(v,d,void 0),j;(j=0<=P)&&Array.prototype.splice.call(v,P,1),j&&(pn(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function mn(a,d,f,v){for(var P=0;P<a.length;++P){var j=a[P];if(!j.da&&j.listener==d&&j.capture==!!f&&j.ha==v)return P}return-1}var gi="closure_lm_"+(1e6*Math.random()|0),yi={};function ia(a,d,f,v,P){if(Array.isArray(d)){for(var j=0;j<d.length;j++)ia(a,d[j],f,v,P);return null}return f=V(f),a&&a[bt]?a.K(d,f,h(v)?!!v.capture:!1,P):Hc(a,d,f,!1,v,P)}function Hc(a,d,f,v,P,j){if(!d)throw Error("Invalid event type");var $=h(P)?!!P.capture:!!P,he=Es(a);if(he||(a[gi]=he=new Or(a)),f=he.add(d,f,v,$,j),f.proxy)return f;if(v=sa(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)At||(P=$),P===void 0&&(P=!1),a.addEventListener(d.toString(),v,P);else if(a.attachEvent)a.attachEvent(aa(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function sa(){function a(f){return d.call(a.src,a.listener,f)}const d=Gc;return a}function oa(a,d,f,v,P){if(Array.isArray(d))for(var j=0;j<d.length;j++)oa(a,d[j],f,v,P);else v=h(v)?!!v.capture:!!v,f=V(f),a&&a[bt]?(a=a.i,d=String(d).toString(),d in a.g&&(j=a.g[d],f=mn(j,f,v,P),-1<f&&(pn(j[f]),Array.prototype.splice.call(j,f,1),j.length==0&&(delete a.g[d],a.h--)))):a&&(a=Es(a))&&(d=a.g[d.toString()],a=-1,d&&(a=mn(d,f,v,P)),(f=-1<a?d[a]:null)&&vi(f))}function vi(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[bt])mi(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(aa(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=Es(d))?(mi(f,a),f.h==0&&(f.src=null,d[gi]=null)):pn(a)}}}function aa(a){return a in yi?yi[a]:yi[a]="on"+a}function Gc(a,d){if(a.da)a=!0;else{d=new fn(d,this);var f=a.listener,v=a.ha||a.src;a.fa&&vi(a),a=f.call(v,d)}return a}function Es(a){return a=a[gi],a instanceof Or?a:null}var wi="__closure_events_fn_"+(1e9*Math.random()>>>0);function V(a){return typeof a=="function"?a:(a[wi]||(a[wi]=function(d){return a.handleEvent(d)}),a[wi])}function M(){ce.call(this),this.i=new Or(this),this.M=this,this.F=null}N(M,ce),M.prototype[bt]=!0,M.prototype.removeEventListener=function(a,d,f,v){oa(this,a,d,f,v)};function G(a,d){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new pe(d,a);else if(d instanceof pe)d.target=d.target||a;else{var P=d;d=new pe(v,a),T(d,P)}if(P=!0,f)for(var j=f.length-1;0<=j;j--){var $=d.g=f[j];P=K($,v,!0,d)&&P}if($=d.g=a,P=K($,v,!0,d)&&P,P=K($,v,!1,d)&&P,f)for(j=0;j<f.length;j++)$=d.g=f[j],P=K($,v,!1,d)&&P}M.prototype.N=function(){if(M.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],v=0;v<f.length;v++)pn(f[v]);delete a.g[d],a.h--}}this.F=null},M.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},M.prototype.L=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function K(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var P=!0,j=0;j<d.length;++j){var $=d[j];if($&&!$.da&&$.capture==f){var he=$.listener,Ke=$.ha||$.src;$.fa&&mi(a.i,$),P=he.call(Ke,v)!==!1&&P}}return P&&!v.defaultPrevented}function le(a,d,f){if(typeof a=="function")f&&(a=w(a,f));else if(a&&typeof a.handleEvent=="function")a=w(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function xe(a){a.g=le(()=>{a.g=null,a.i&&(a.i=!1,xe(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class be extends ce{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(a){ce.call(this),this.h=a,this.g={}}N(me,ce);var nt=[];function Se(a){F(a.g,function(d,f){this.g.hasOwnProperty(f)&&vi(d)},a),a.g={}}me.prototype.N=function(){me.aa.N.call(this),Se(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ft=l.JSON.stringify,Te=l.JSON.parse,rt=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ge(){}ge.prototype.h=null;function Qt(a){return a.h||(a.h=a.i())}function Rn(){}var Jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _i(){pe.call(this,"d")}N(_i,pe);function qc(){pe.call(this,"c")}N(qc,pe);var Dr={},ip=null;function la(){return ip=ip||new M}Dr.La="serverreachability";function sp(a){pe.call(this,Dr.La,a)}N(sp,pe);function Is(a){const d=la();G(d,new sp(d))}Dr.STAT_EVENT="statevent";function op(a,d){pe.call(this,Dr.STAT_EVENT,a),this.stat=d}N(op,pe);function mt(a){const d=la();G(d,new op(d,a))}Dr.Ma="timingevent";function ap(a,d){pe.call(this,Dr.Ma,a),this.size=d}N(ap,pe);function xs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Ss(){this.g=!0}Ss.prototype.xa=function(){this.g=!1};function AE(a,d,f,v,P,j){a.info(function(){if(a.g)if(j)for(var $="",he=j.split("&"),Ke=0;Ke<he.length;Ke++){var ae=he[Ke].split("=");if(1<ae.length){var it=ae[0];ae=ae[1];var st=it.split("_");$=2<=st.length&&st[1]=="type"?$+(it+"="+ae+"&"):$+(it+"=redacted&")}}else $=null;else $=j;return"XMLHTTP REQ ("+v+") [attempt "+P+"]: "+d+`
`+f+`
`+$})}function bE(a,d,f,v,P,j,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+P+"]: "+d+`
`+f+`
`+j+" "+$})}function Ei(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+PE(a,f)+(v?" "+v:"")})}function NE(a,d){a.info(function(){return"TIMEOUT: "+d})}Ss.prototype.info=function(){};function PE(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var P=v[1];if(Array.isArray(P)&&!(1>P.length)){var j=P[0];if(j!="noop"&&j!="stop"&&j!="close")for(var $=1;$<P.length;$++)P[$]=""}}}}return Ft(f)}catch{return d}}var ca={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kc;function ua(){}N(ua,ge),ua.prototype.g=function(){return new XMLHttpRequest},ua.prototype.i=function(){return{}},Kc=new ua;function Xn(a,d,f,v){this.j=a,this.i=d,this.l=f,this.R=v||1,this.U=new me(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cp}function cp(){this.i=null,this.g="",this.h=!1}var up={},Qc={};function Yc(a,d,f){a.L=1,a.v=pa(An(d)),a.m=f,a.P=!0,dp(a,null)}function dp(a,d){a.F=Date.now(),da(a),a.A=An(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Tp(f.i,"t",v),a.C=0,f=a.j.J,a.h=new cp,a.g=$p(a.j,f?d:null,!a.m),0<a.O&&(a.M=new be(w(a.Y,a,a.g),a.O)),d=a.U,f=a.g,v=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(nt[0]=P.toString()),P=nt);for(var j=0;j<P.length;j++){var $=ia(f,P[j],v||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Is(),AE(a.i,a.u,a.A,a.l,a.R,a.m)}Xn.prototype.ca=function(a){a=a.target;const d=this.M;d&&bn(a)==3?d.j():this.Y(a)},Xn.prototype.Y=function(a){try{if(a==this.g)e:{const st=bn(this.g);var d=this.g.Ba();const Si=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||Pp(this.g)))){this.J||st!=4||d==7||(d==8||0>=Si?Is(3):Is(2)),Jc(this);var f=this.g.Z();this.X=f;t:if(hp(this)){var v=Pp(this.g);a="";var P=v.length,j=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jr(this),Ts(this);var $="";break t}this.h.i=new l.TextDecoder}for(d=0;d<P;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(j&&d==P-1)});v.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,bE(this.i,this.u,this.A,this.l,this.R,st,f),this.o){if(this.T&&!this.K){t:{if(this.g){var he,Ke=this.g;if((he=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(he)){var ae=he;break t}}ae=null}if(f=ae)Ei(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xc(this,f);else{this.o=!1,this.s=3,mt(12),jr(this),Ts(this);break e}}if(this.P){f=!0;let Yt;for(;!this.J&&this.C<$.length;)if(Yt=OE(this,$),Yt==Qc){st==4&&(this.s=4,mt(14),f=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==up){this.s=4,mt(15),Ei(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else Ei(this.i,this.l,Yt,null),Xc(this,Yt);if(hp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||$.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)Ei(this.i,this.l,$,"[Invalid Chunked Response]"),jr(this),Ts(this);else if(0<$.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),iu(it),it.M=!0,mt(11))}}else Ei(this.i,this.l,$,null),Xc(this,$);st==4&&jr(this),this.o&&!this.J&&(st==4?Fp(this.j,this):(this.o=!1,da(this)))}else YE(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),jr(this),Ts(this)}}}catch{}finally{}};function hp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function OE(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?Qc:(f=Number(d.substring(f,v)),isNaN(f)?up:(v+=1,v+f>d.length?Qc:(d=d.slice(v,v+f),a.C=v+f,d)))}Xn.prototype.cancel=function(){this.J=!0,jr(this)};function da(a){a.S=Date.now()+a.I,fp(a,a.I)}function fp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=xs(w(a.ba,a),d)}function Jc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Xn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(NE(this.i,this.A),this.L!=2&&(Is(),mt(17)),jr(this),this.s=2,Ts(this)):fp(this,this.S-a)};function Ts(a){a.j.G==0||a.J||Fp(a.j,a)}function jr(a){Jc(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Se(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Xc(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Zc(f.h,a))){if(!a.K&&Zc(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var P=v;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)_a(f),va(f);else break e;ru(f),mt(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=xs(w(f.Za,f),6e3));if(1>=gp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Mr(f,11)}else if((a.K||f.g==a)&&_a(f),!y(d))for(P=f.Da.g.parse(d),d=0;d<P.length;d++){let ae=P[d];if(f.T=ae[0],ae=ae[1],f.G==2)if(ae[0]=="c"){f.K=ae[1],f.ia=ae[2];const it=ae[3];it!=null&&(f.la=it,f.j.info("VER="+f.la));const st=ae[4];st!=null&&(f.Aa=st,f.j.info("SVER="+f.Aa));const Si=ae[5];Si!=null&&typeof Si=="number"&&0<Si&&(v=1.5*Si,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Yt=a.g;if(Yt){const Ia=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var j=v.h;j.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(eu(j,j.h),j.h=null))}if(v.D){const su=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;su&&(v.ya=su,we(v.I,v.D,su))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var $=a;if(v.qa=zp(v,v.J?v.ia:null,v.W),$.K){yp(v.h,$);var he=$,Ke=v.L;Ke&&(he.I=Ke),he.B&&(Jc(he),da(he)),v.g=$}else Mp(v);0<f.i.length&&wa(f)}else ae[0]!="stop"&&ae[0]!="close"||Mr(f,7);else f.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Mr(f,7):nu(f):ae[0]!="noop"&&f.l&&f.l.ta(ae),f.v=0)}}Is(4)}catch{}}var DE=class{constructor(a,d){this.g=a,this.map=d}};function pp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function gp(a){return a.h?1:a.g?a.g.size:0}function Zc(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function eu(a,d){a.g?a.g.add(d):a.h=d}function yp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}pp.prototype.cancel=function(){if(this.i=vp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function vp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return A(a.i)}function jE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,v=0;v<f;v++)d.push(a[v]);return d}d=[],f=0;for(v in a)d[f++]=a[v];return d}function LE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const v in a)d[f++]=v;return d}}}function wp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=LE(a),v=jE(a),P=v.length,j=0;j<P;j++)d.call(void 0,v[j],f&&f[j],a)}var _p=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ME(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),P=null;if(0<=v){var j=a[f].substring(0,v);P=a[f].substring(v+1)}else j=a[f];d(j,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Lr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Lr){this.h=a.h,ha(this,a.j),this.o=a.o,this.g=a.g,fa(this,a.s),this.l=a.l;var d=a.i,f=new Rs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Ep(this,f),this.m=a.m}else a&&(d=String(a).match(_p))?(this.h=!1,ha(this,d[1]||"",!0),this.o=Cs(d[2]||""),this.g=Cs(d[3]||"",!0),fa(this,d[4]),this.l=Cs(d[5]||"",!0),Ep(this,d[6]||"",!0),this.m=Cs(d[7]||"")):(this.h=!1,this.i=new Rs(null,this.h))}Lr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(ks(d,Ip,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ks(d,Ip,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ks(f,f.charAt(0)=="/"?UE:FE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ks(f,zE)),a.join("")};function An(a){return new Lr(a)}function ha(a,d,f){a.j=f?Cs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function fa(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Ep(a,d,f){d instanceof Rs?(a.i=d,$E(a.i,a.h)):(f||(d=ks(d,BE)),a.i=new Rs(d,a.h))}function we(a,d,f){a.i.set(d,f)}function pa(a){return we(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Cs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ks(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,VE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function VE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ip=/[#\/\?@]/g,FE=/[#\?:]/g,UE=/[#\?]/g,BE=/[#\?@]/g,zE=/#/g;function Rs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Zn(a){a.g||(a.g=new Map,a.h=0,a.i&&ME(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Rs.prototype,t.add=function(a,d){Zn(this),this.i=null,a=Ii(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function xp(a,d){Zn(a),d=Ii(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Sp(a,d){return Zn(a),d=Ii(a,d),a.g.has(d)}t.forEach=function(a,d){Zn(this),this.g.forEach(function(f,v){f.forEach(function(P){a.call(d,P,v,this)},this)},this)},t.na=function(){Zn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){const P=a[v];for(let j=0;j<P.length;j++)f.push(d[v])}return f},t.V=function(a){Zn(this);let d=[];if(typeof a=="string")Sp(this,a)&&(d=d.concat(this.g.get(Ii(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Zn(this),this.i=null,a=Ii(this,a),Sp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Tp(a,d,f){xp(a,d),0<f.length&&(a.i=null,a.g.set(Ii(a,d),A(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];const j=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var P=j;$[v]!==""&&(P+="="+encodeURIComponent(String($[v]))),a.push(P)}}return this.i=a.join("&")};function Ii(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function $E(a,d){d&&!a.j&&(Zn(a),a.i=null,a.g.forEach(function(f,v){var P=v.toLowerCase();v!=P&&(xp(this,v),Tp(this,P,f))},a)),a.j=d}function WE(a,d){const f=new Ss;if(l.Image){const v=new Image;v.onload=k(er,f,"TestLoadImage: loaded",!0,d,v),v.onerror=k(er,f,"TestLoadImage: error",!1,d,v),v.onabort=k(er,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=k(er,f,"TestLoadImage: timeout",!1,d,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function HE(a,d){const f=new Ss,v=new AbortController,P=setTimeout(()=>{v.abort(),er(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(j=>{clearTimeout(P),j.ok?er(f,"TestPingServer: ok",!0,d):er(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(P),er(f,"TestPingServer: error",!1,d)})}function er(a,d,f,v,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),v(f)}catch{}}function GE(){this.g=new rt}function qE(a,d,f){const v=f||"";try{wp(a,function(P,j){let $=P;h(P)&&($=Ft(P)),d.push(v+j+"="+encodeURIComponent($))})}catch(P){throw d.push(v+"type="+encodeURIComponent("_badmap")),P}}function ma(a){this.l=a.Ub||null,this.j=a.eb||!1}N(ma,ge),ma.prototype.g=function(){return new ga(this.l,this.j)},ma.prototype.i=function(a){return function(){return a}}({});function ga(a,d){M.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ga,M),t=ga.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,bs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?As(this):bs(this),this.readyState==3&&Cp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,As(this))},t.Qa=function(a){this.g&&(this.response=a,As(this))},t.ga=function(){this.g&&As(this)};function As(a){a.readyState=4,a.l=null,a.j=null,a.v=null,bs(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function bs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function kp(a){let d="";return F(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function tu(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=kp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):we(a,d,f))}function Ne(a){M.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ne,M);var KE=/^https?$/i,QE=["POST","PUT"];t=Ne.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kc.g(),this.v=this.o?Qt(this.o):Qt(Kc),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(j){Rp(this,j);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var P in v)f.set(P,v[P]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())f.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),P=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(QE,d,void 0))||v||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,$]of f)this.g.setRequestHeader(j,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Np(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){Rp(this,j)}};function Rp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Ap(a),ya(a)}function Ap(a){a.A||(a.A=!0,G(a,"complete"),G(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,G(this,"complete"),G(this,"abort"),ya(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ya(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bp(this):this.bb())},t.bb=function(){bp(this)};function bp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||bn(a)!=4||a.Z()!=2)){if(a.u&&bn(a)==4)le(a.Ea,0,a);else if(G(a,"readystatechange"),bn(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=$===0){var P=String(a.D).match(_p)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),v=!KE.test(P?P.toLowerCase():"")}f=v}if(f)G(a,"complete"),G(a,"success");else{a.m=6;try{var j=2<bn(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",Ap(a)}}finally{ya(a)}}}}function ya(a,d){if(a.g){Np(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||G(a,"ready");try{f.onreadystatechange=v}catch{}}}function Np(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function bn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Te(d)}};function Pp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function YE(a){const d={};a=(a.g&&2<=bn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(y(a[v]))continue;var f=R(a[v]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=d[P]||[];d[P]=j,j.push(f)}E(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ns(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Op(a){this.Aa=0,this.i=[],this.j=new Ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ns("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ns("baseRetryDelayMs",5e3,a),this.cb=Ns("retryDelaySeedMs",1e4,a),this.Wa=Ns("forwardChannelMaxRetries",2,a),this.wa=Ns("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new pp(a&&a.concurrentRequestLimit),this.Da=new GE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Op.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,v){mt(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=zp(this,null,this.W),wa(this)};function nu(a){if(Dp(a),a.G==3){var d=a.U++,f=An(a.I);if(we(f,"SID",a.K),we(f,"RID",d),we(f,"TYPE","terminate"),Ps(a,f),d=new Xn(a,a.j,d),d.L=2,d.v=pa(An(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=$p(d.j,null),d.g.ea(d.v)),d.F=Date.now(),da(d)}Bp(a)}function va(a){a.g&&(iu(a),a.g.cancel(),a.g=null)}function Dp(a){va(a),a.u&&(l.clearTimeout(a.u),a.u=null),_a(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function wa(a){if(!mp(a.h)&&!a.s){a.s=!0;var d=a.Ga;tt||X(),W||(tt(),W=!0),Q.add(d,a),a.B=0}}function JE(a,d){return gp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=xs(w(a.Ga,a,d),Up(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new Xn(this,this.j,a);let j=this.o;if(this.S&&(j?(j=g(j),T(j,this.S)):j=this.S),this.m!==null||this.O||(P.H=j,j=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Lp(this,P,d),f=An(this.I),we(f,"RID",a),we(f,"CVER",22),this.D&&we(f,"X-HTTP-Session-Id",this.D),Ps(this,f),j&&(this.O?d="headers="+encodeURIComponent(String(kp(j)))+"&"+d:this.m&&tu(f,this.m,j)),eu(this.h,P),this.Ua&&we(f,"TYPE","init"),this.P?(we(f,"$req",d),we(f,"SID","null"),P.T=!0,Yc(P,f,null)):Yc(P,f,d),this.G=2}}else this.G==3&&(a?jp(this,a):this.i.length==0||mp(this.h)||jp(this))};function jp(a,d){var f;d?f=d.l:f=a.U++;const v=An(a.I);we(v,"SID",a.K),we(v,"RID",f),we(v,"AID",a.T),Ps(a,v),a.m&&a.o&&tu(v,a.m,a.o),f=new Xn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Lp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),eu(a.h,f),Yc(f,v,d)}function Ps(a,d){a.H&&F(a.H,function(f,v){we(d,v,f)}),a.l&&wp({},function(f,v){we(d,v,f)})}function Lp(a,d,f){f=Math.min(a.i.length,f);var v=a.l?w(a.l.Na,a.l,a):null;e:{var P=a.i;let j=-1;for(;;){const $=["count="+f];j==-1?0<f?(j=P[0].g,$.push("ofs="+j)):j=0:$.push("ofs="+j);let he=!0;for(let Ke=0;Ke<f;Ke++){let ae=P[Ke].g;const it=P[Ke].map;if(ae-=j,0>ae)j=Math.max(0,P[Ke].g-100),he=!1;else try{qE(it,$,"req"+ae+"_")}catch{v&&v(it)}}if(he){v=$.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,v}function Mp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;tt||X(),W||(tt(),W=!0),Q.add(d,a),a.v=0}}function ru(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=xs(w(a.Fa,a),Up(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Vp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=xs(w(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),va(this),Vp(this))};function iu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Vp(a){a.g=new Xn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=An(a.qa);we(d,"RID","rpc"),we(d,"SID",a.K),we(d,"AID",a.T),we(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&we(d,"TO",a.ja),we(d,"TYPE","xmlhttp"),Ps(a,d),a.m&&a.o&&tu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=pa(An(d)),f.m=null,f.P=!0,dp(f,a)}t.Za=function(){this.C!=null&&(this.C=null,va(this),ru(this),mt(19))};function _a(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Fp(a,d){var f=null;if(a.g==d){_a(a),iu(a),a.g=null;var v=2}else if(Zc(a.h,d))f=d.D,yp(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var P=a.B;v=la(),G(v,new ap(v,f)),wa(a)}else Mp(a);else if(P=d.s,P==3||P==0&&0<d.X||!(v==1&&JE(a,d)||v==2&&ru(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),P){case 1:Mr(a,5);break;case 4:Mr(a,10);break;case 3:Mr(a,6);break;default:Mr(a,2)}}}function Up(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Mr(a,d){if(a.j.info("Error code "+d),d==2){var f=w(a.fb,a),v=a.Xa;const P=!v;v=new Lr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ha(v,"https"),pa(v),P?WE(v.toString(),f):HE(v.toString(),f)}else mt(2);a.G=0,a.l&&a.l.sa(d),Bp(a),Dp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Bp(a){if(a.G=0,a.ka=[],a.l){const d=vp(a.h);(d.length!=0||a.i.length!=0)&&(x(a.ka,d),x(a.ka,a.i),a.h.i.length=0,A(a.i),a.i.length=0),a.l.ra()}}function zp(a,d,f){var v=f instanceof Lr?An(f):new Lr(f);if(v.g!="")d&&(v.g=d+"."+v.g),fa(v,v.s);else{var P=l.location;v=P.protocol,d=d?d+"."+P.hostname:P.hostname,P=+P.port;var j=new Lr(null);v&&ha(j,v),d&&(j.g=d),P&&fa(j,P),f&&(j.l=f),v=j}return f=a.D,d=a.ya,f&&d&&we(v,f,d),we(v,"VER",a.la),Ps(a,v),v}function $p(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ne(new ma({eb:f})):new Ne(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wp(){}t=Wp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ea(){}Ea.prototype.g=function(a,d){return new Nt(a,d)};function Nt(a,d){M.call(this),this.g=new Op(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!y(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!y(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new xi(this)}N(Nt,M),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){nu(this.g)},Nt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Ft(a),a=f);d.i.push(new DE(d.Ya++,a)),d.G==3&&wa(d)},Nt.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,Nt.aa.N.call(this)};function Hp(a){_i.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}N(Hp,_i);function Gp(){qc.call(this),this.status=1}N(Gp,qc);function xi(a){this.g=a}N(xi,Wp),xi.prototype.ua=function(){G(this.g,"a")},xi.prototype.ta=function(a){G(this.g,new Hp(a))},xi.prototype.sa=function(a){G(this.g,new Gp)},xi.prototype.ra=function(){G(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Fw=function(){return new Ea},Vw=function(){return la()},Mw=Dr,Jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ca.NO_ERROR=0,ca.TIMEOUT=8,ca.HTTP_ERROR=6,ul=ca,lp.COMPLETE="complete",Lw=lp,Rn.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",M.prototype.listen=M.prototype.K,Ks=Rn,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,jw=Ne}).apply(typeof Ba<"u"?Ba:typeof self<"u"?self:typeof window<"u"?window:{});const Ng="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ms="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new Tc("@firebase/firestore");function Bs(){return ii.logLevel}function q(t,...e){if(ii.logLevel<=re.DEBUG){const n=e.map(Tf);ii.debug(`Firestore (${ms}): ${t}`,...n)}}function si(t,...e){if(ii.logLevel<=re.ERROR){const n=e.map(Tf);ii.error(`Firestore (${ms}): ${t}`,...n)}}function Ql(t,...e){if(ii.logLevel<=re.WARN){const n=e.map(Tf);ii.warn(`Firestore (${ms}): ${t}`,...n)}}function Tf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${ms}) INTERNAL ASSERTION FAILED: `+t;throw si(e),new Error(e)}function De(t,e){t||ie()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class hR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fR{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new Uw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new ct(e)}}class pR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new pR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){De(this.o===void 0);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new gR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=vR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function is(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Ge(0,0))}static max(){return new Ce(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Po.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Po?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends Po{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const wR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Po{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return wR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new J(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new J(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new J(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new J(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Le.fromString(e))}static fromName(e){return new ee(Le.fromString(e).popFirst(5))}static empty(){return new ee(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Le(e.slice()))}}function _R(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new Cr(i,ee.empty(),e)}function ER(t){return new Cr(t.readTime,t.key,-1)}class Cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cr(Ce.min(),ee.empty(),-1)}static max(){return new Cr(Ce.max(),ee.empty(),-1)}}function IR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==xR)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function TR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ac(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}$w.oe=-1;function Cf(t){return t==null}function Yl(t){return t===0&&1/t==-1/0}function CR(t){return typeof t=="number"&&Number.isInteger(t)&&!Yl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ww(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.comparator=e,this.root=n||Ye.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new za(this.root,e,this.comparator,!1)}getReverseIterator(){return new za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new za(this.root,e,this.comparator,!0)}}class za{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ye.RED,this.left=i??Ye.EMPTY,this.right=s??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ye(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ye.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ye(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Og(this.data.getIterator())}getIteratorFrom(e){return new Og(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class Og{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new sn([])}unionWith(e){let n=new ht(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return is(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new kR("Invalid base64 string: "+s):s}}(e);return new Tn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const RR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(t){if(De(!!t),typeof t=="string"){let e=0;const n=RR.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oo(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hw(t){const e=t.mapValue.fields.__previous_value__;return kf(e)?Hw(e):e}function Jl(t){const e=oi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,r,i,s,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class Xl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a={mapValue:{}};function ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kf(t)?4:NR(t)?9007199254740991:bR(t)?10:11:ie()}function Cn(t,e){if(t===e)return!0;const n=ss(t);if(n!==ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jl(t).isEqual(Jl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=oi(i.timestampValue),l=oi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Oo(i.bytesValue).isEqual(Oo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Je(i.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Je(i.integerValue)===Je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Je(i.doubleValue),l=Je(s.doubleValue);return o===l?Yl(o)===Yl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return is(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Pg(o)!==Pg(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Cn(o[c],l[c])))return!1;return!0}(t,e);default:return ie()}}function Do(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function os(t,e){if(t===e)return 0;const n=ss(t),r=ss(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Je(s.integerValue||s.doubleValue),c=Je(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Dg(t.timestampValue,e.timestampValue);case 4:return Dg(Jl(t),Jl(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Oo(s),c=Oo(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=fe(l[h],c[h]);if(p!==0)return p}return fe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=fe(Je(s.latitude),Je(o.latitude));return l!==0?l:fe(Je(s.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,h,p;const m=s.fields||{},w=o.fields||{},k=(l=m.value)===null||l===void 0?void 0:l.arrayValue,N=(c=w.value)===null||c===void 0?void 0:c.arrayValue,A=fe(((h=k==null?void 0:k.values)===null||h===void 0?void 0:h.length)||0,((p=N==null?void 0:N.values)===null||p===void 0?void 0:p.length)||0);return A!==0?A:jg(k,N)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===$a.mapValue&&o===$a.mapValue)return 0;if(s===$a.mapValue)return 1;if(o===$a.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const w=fe(c[m],p[m]);if(w!==0)return w;const k=os(l[c[m]],h[p[m]]);if(k!==0)return k}return fe(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ie()}}function Dg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=oi(t),r=oi(e),i=fe(n.seconds,r.seconds);return i!==0?i:fe(n.nanos,r.nanos)}function jg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=os(n[i],r[i]);if(s)return s}return fe(n.length,r.length)}function as(t){return Xd(t)}function Xd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Oo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Xd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Xd(n.fields[o])}`;return i+"}"}(t.mapValue):ie()}function Zd(t){return!!t&&"integerValue"in t}function Rf(t){return!!t&&"arrayValue"in t}function dl(t){return!!t&&"mapValue"in t}function bR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function oo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(n)}setAll(e){let n=Xe.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=oo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());dl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];dl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Zo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rn(oo(this.value))}}function Gw(t){const e=[];return Zo(t.fields,(n,r)=>{const i=new Xe([n]);if(dl(r)){const s=Gw(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new nn(e,0,Ce.min(),Ce.min(),Ce.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new nn(e,1,n,Ce.min(),r,i,0)}static newNoDocument(e,n){return new nn(e,2,n,Ce.min(),Ce.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Ce.min(),Ce.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.position=e,this.inclusive=n}}function Lg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=os(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n="asc"){this.field=e,this.dir=n}}function PR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{}class We extends qw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new DR(e,n,r):n==="array-contains"?new MR(e,r):n==="in"?new VR(e,r):n==="not-in"?new FR(e,r):n==="array-contains-any"?new UR(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jR(e,r):new LR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(os(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(os(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends qw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new kr(e,n)}matches(e){return Kw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Kw(t){return t.op==="and"}function Qw(t){return OR(t)&&Kw(t)}function OR(t){for(const e of t.filters)if(e instanceof kr)return!1;return!0}function eh(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+as(t.value);if(Qw(t))return t.filters.map(e=>eh(e)).join(",");{const e=t.filters.map(n=>eh(n)).join(",");return`${t.op}(${e})`}}function Yw(t,e){return t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&Cn(r.value,i.value)}(t,e):t instanceof kr?function(r,i){return i instanceof kr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&Yw(o,i.filters[l]),!0):!1}(t,e):void ie()}function Jw(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${as(n.value)}`}(t):t instanceof kr?function(n){return n.op.toString()+" {"+n.getFilters().map(Jw).join(" ,")+"}"}(t):"Filter"}class DR extends We{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class jR extends We{constructor(e,n){super(e,"in",n),this.keys=Xw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LR extends We{constructor(e,n){super(e,"not-in",n),this.keys=Xw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Xw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class MR extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rf(n)&&Do(n.arrayValue,this.value)}}class VR extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Do(this.value.arrayValue,n)}}class FR extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Do(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Do(this.value.arrayValue,n)}}class UR extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Do(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Vg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new BR(t,e,n,r,i,s,o)}function Af(t){const e=ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>eh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>as(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>as(r)).join(",")),e.ue=n}return e.ue}function bf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Yw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mg(t.startAt,e.startAt)&&Mg(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zR(t,e,n,r,i,s,o,l){return new bc(t,e,n,r,i,s,o,l)}function $R(t){return new bc(t)}function Fg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WR(t){return t.collectionGroup!==null}function ao(t){const e=ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ht(Xe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ec(s,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new ec(Xe.keyField(),r))}return e.ce}function Yr(t){const e=ve(t);return e.le||(e.le=HR(e,ao(t))),e.le}function HR(t,e){if(t.limitType==="F")return Vg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ec(i.field,s)});const n=t.endAt?new Zl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zl(t.startAt.position,t.startAt.inclusive):null;return Vg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function th(t,e,n){return new bc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zw(t,e){return bf(Yr(t),Yr(e))&&t.limitType===e.limitType}function e_(t){return`${Af(Yr(t))}|lt:${t.limitType}`}function zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Jw(i)).join(", ")}]`),Cf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>as(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>as(i)).join(",")),`Target(${r})`}(Yr(t))}; limitType=${t.limitType})`}function Nf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ao(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const h=Lg(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,ao(r),i)||r.endAt&&!function(o,l,c){const h=Lg(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,ao(r),i))}(t,e)}function GR(t){return(e,n)=>{let r=!1;for(const i of ao(t)){const s=qR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function qR(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,o,l){const c=o.data.field(s),h=l.data.field(s);return c!==null&&h!==null?os(c,h):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Ww(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=new kt(ee.comparator);function tc(){return KR}const t_=new kt(ee.comparator);function Wa(...t){let e=t_;for(const n of t)e=e.insert(n.key,n);return e}function n_(t){let e=t_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return lo()}function r_(){return lo()}function lo(){return new gs(t=>t.toString(),(t,e)=>t.isEqual(e))}const QR=new kt(ee.comparator),YR=new ht(ee.comparator);function dt(...t){let e=YR;for(const n of t)e=e.add(n);return e}const JR=new ht(fe);function XR(){return JR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yl(e)?"-0":e}}function i_(t){return{integerValue:""+t}}function ZR(t,e){return CR(e)?i_(e):Pf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this._=void 0}}function eA(t,e,n){return t instanceof nc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&kf(s)&&(s=Hw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof jo?o_(t,e):t instanceof Lo?a_(t,e):function(i,s){const o=s_(i,s),l=Ug(o)+Ug(i.Pe);return Zd(o)&&Zd(i.Pe)?i_(l):Pf(i.serializer,l)}(t,e)}function tA(t,e,n){return t instanceof jo?o_(t,e):t instanceof Lo?a_(t,e):n}function s_(t,e){return t instanceof rc?function(r){return Zd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class nc extends Nc{}class jo extends Nc{constructor(e){super(),this.elements=e}}function o_(t,e){const n=l_(e);for(const r of t.elements)n.some(i=>Cn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Lo extends Nc{constructor(e){super(),this.elements=e}}function a_(t,e){let n=l_(e);for(const r of t.elements)n=n.filter(i=>!Cn(i,r));return{arrayValue:{values:n}}}class rc extends Nc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ug(t){return Je(t.integerValue||t.doubleValue)}function l_(t){return Rf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function nA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof jo&&i instanceof jo||r instanceof Lo&&i instanceof Lo?is(r.elements,i.elements,Cn):r instanceof rc&&i instanceof rc?Cn(r.Pe,i.Pe):r instanceof nc&&i instanceof nc}(t.transform,e.transform)}class rA{constructor(e,n){this.version=e,this.transformResults=n}}class zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pc{}function c_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new d_(t.key,zn.none()):new ea(t.key,t.data,zn.none());{const n=t.data,r=rn.empty();let i=new ht(Xe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fi(t.key,r,new sn(i.toArray()),zn.none())}}function iA(t,e,n){t instanceof ea?function(i,s,o){const l=i.value.clone(),c=zg(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof fi?function(i,s,o){if(!hl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=zg(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(u_(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function co(t,e,n,r){return t instanceof ea?function(s,o,l,c){if(!hl(s.precondition,o))return l;const h=s.value.clone(),p=$g(s.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof fi?function(s,o,l,c){if(!hl(s.precondition,o))return l;const h=$g(s.fieldTransforms,c,o),p=o.data;return p.setAll(u_(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return hl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function sA(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=s_(r.transform,i||null);s!=null&&(n===null&&(n=rn.empty()),n.set(r.field,s))}return n||null}function Bg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&is(r,i,(s,o)=>nA(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ea extends Pc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fi extends Pc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function u_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zg(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,tA(o,l,n[i]))}return r}function $g(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,eA(s,o,e))}return r}class d_ extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oA extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&iA(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=r_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const c=c_(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),dt())}isEqual(e){return this.batchId===e.batchId&&is(this.mutations,e.mutations,(n,r)=>Bg(n,r))&&is(this.baseMutations,e.baseMutations,(n,r)=>Bg(n,r))}}class Of{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return QR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Of(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,se;function cA(t){switch(t){default:return ie();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function uA(t){if(t===void 0)return si("GRPC error has no .code"),z.UNKNOWN;switch(t){case je.OK:return z.OK;case je.CANCELLED:return z.CANCELLED;case je.UNKNOWN:return z.UNKNOWN;case je.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case je.INTERNAL:return z.INTERNAL;case je.UNAVAILABLE:return z.UNAVAILABLE;case je.UNAUTHENTICATED:return z.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case je.NOT_FOUND:return z.NOT_FOUND;case je.ALREADY_EXISTS:return z.ALREADY_EXISTS;case je.PERMISSION_DENIED:return z.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case je.ABORTED:return z.ABORTED;case je.OUT_OF_RANGE:return z.OUT_OF_RANGE;case je.UNIMPLEMENTED:return z.UNIMPLEMENTED;case je.DATA_LOSS:return z.DATA_LOSS;default:return ie()}}(se=je||(je={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Dw([4294967295,4294967295],0);class dA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fA(t,e){return nh(t,e.toTimestamp())}function Ki(t){return De(!!t),Ce.fromTimestamp(function(n){const r=oi(n);return new Ge(r.seconds,r.nanos)}(t))}function h_(t,e){return rh(t,e).canonicalString()}function rh(t,e){const n=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pA(t){const e=Le.fromString(t);return De(IA(e)),e}function ih(t,e){return h_(t.databaseId,e.path)}function mA(t){const e=pA(t);return e.length===4?Le.emptyPath():yA(e)}function gA(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yA(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Wg(t,e,n){return{name:ih(t,e),fields:n.value.mapValue.fields}}function vA(t,e){let n;if(e instanceof ea)n={update:Wg(t,e.key,e.value)};else if(e instanceof d_)n={delete:ih(t,e.key)};else if(e instanceof fi)n={update:Wg(t,e.key,e.data),updateMask:EA(e.fieldMask)};else{if(!(e instanceof oA))return ie();n={verify:ih(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof nc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Lo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:fA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ie()}(t,e.precondition)),n}function wA(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ki(i.updateTime):Ki(s);return o.isEqual(Ce.min())&&(o=Ki(s)),new rA(o,i.transformResults||[])}(n,e))):[]}function _A(t){let e=mA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const w=f_(m);return w instanceof kr&&Qw(w)?w.getFilters():[w]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(w=>function(N){return new ec(Ci(N.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(w))}(n.orderBy));let l=null;n.limit&&(l=function(m){let w;return w=typeof m=="object"?m.value:m,Cf(w)?null:w}(n.limit));let c=null;n.startAt&&(c=function(m){const w=!!m.before,k=m.values||[];return new Zl(k,w)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const w=!m.before,k=m.values||[];return new Zl(k,w)}(n.endAt)),zR(e,i,o,s,l,"F",c,h)}function f_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ci(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ci(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ci(n.unaryFilter.field);return We.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ci(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return We.create(Ci(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kr.create(n.compositeFilter.filters.map(r=>f_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function Ci(t){return Xe.fromServerFormat(t.fieldPath)}function EA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function IA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.ct=e}}function SA(t){const e=_A({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?th(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.un=new CA}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Cr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class CA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ht(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ht(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ls(0)}static kn(){return new ls(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.changes=new gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&co(r.mutation,i,sn.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,dt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=dt()){const i=Hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Wa();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,dt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=tc();const o=lo(),l=function(){return lo()}();return n.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof fi)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),co(p.mutation,h,p.mutation.getFieldMask(),Ge.now())):o.set(h.key,sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new RA(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=lo();let i=new kt((o,l)=>o-l),s=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||sn.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(i.get(l.batchId)||dt()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=r_();p.forEach(w=>{if(!s.has(w)){const k=c_(n.get(w),r.get(w));k!==null&&m.set(w,k),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Hr());let l=-1,c=s;return o.next(h=>U.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(w=>{c=c.insert(p,w)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,dt())).next(p=>({batchId:l,changes:n_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=Wa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Wa();return this.indexManager.getCollectionParents(e,s).next(l=>U.forEach(l,c=>{const h=function(m,w){return new bc(w,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,w)=>{o=o.insert(m,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,nn.newInvalidDocument(p)))});let l=Wa();return o.forEach((c,h)=>{const p=s.get(c);p!==void 0&&co(p.mutation,h,sn.empty(),Ge.now()),Nf(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ki(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:SA(i.bundledQuery),readTime:Ki(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.overlays=new kt(ee.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Hr(),s=n.length+1,o=new ee(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new kt((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Hr(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Hr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return U.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lA(n,r));let s=this.Ir.get(n);s===void 0&&(s=dt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(){this.Tr=new ht(ze.Er),this.dr=new ht(ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new Le([])),r=new ze(n,e),i=new ze(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new Le([])),r=new ze(n,e),i=new ze(n,e+1);let s=dt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||fe(e.wr,n.wr)}static Ar(e,n){return fe(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ht(ze.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aA(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new ze(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ze(n,0),i=new ze(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(fe);return n.forEach(i=>{const s=new ze(i,0),o=new ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const o=new ze(new ee(s),0);let l=new ht(fe);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new ze(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ze(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.Mr=e,this.docs=function(){return new kt(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=tc();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nn.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=tc();const o=n.path,l=new ee(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||IR(ER(p),r)<=0||(i.has(p.key)||Nf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ie()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jA(this)}getSize(e){return U.resolve(this.size)}}class jA extends kA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.persistence=e,this.Nr=new gs(n=>Af(n),bf),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Df,this.targetCount=0,this.kr=ls.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ls(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $w(0),this.Kr=!1,this.Kr=!0,this.$r=new PA,this.referenceDelegate=e(this),this.Ur=new LA(this),this.indexManager=new TA,this.remoteDocumentCache=function(i){return new DA(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xA(n),this.Gr=new bA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new OA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new VA(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class VA extends SR{constructor(e){super(),this.currentSequenceNumber=e}}class jf{constructor(e){this.persistence=e,this.Jr=new Df,this.Yr=null}static Zr(e){return new jf(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=ee.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=dt(),i=dt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Lf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return WS()?8:TR(pt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new FA;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Bs()<=re.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Bs()<=re.DEBUG&&q("QueryEngine","Query:",zs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Bs()<=re.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(n))):U.resolve())}Yi(e,n){if(Fg(n))return U.resolve(null);let r=Yr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=th(n,null,"F"),r=Yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=dt(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,th(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,i){return Fg(n)||i.isEqual(Ce.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(Bs()<=re.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zs(n)),this.rs(e,o,n,_R(i,-1)).next(l=>l))})}ts(e,n){let r=new ht(GR(e));return n.forEach((i,s)=>{Nf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Bs()<=re.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",zs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Cr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new kt(fe),this._s=new gs(s=>Af(s),bf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function zA(t,e,n,r){return new BA(t,e,n,r)}async function p_(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=dt();for(const h of i){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function $A(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,w=m.keys();let k=U.resolve();return w.forEach(N=>{k=k.next(()=>p.getEntry(c,N)).next(A=>{const x=h.docVersions.get(N);De(x!==null),A.version.compareTo(x)<0&&(m.applyToRemoteDocument(A,h),A.isValidDocument()&&(A.setReadTime(h.commitVersion),p.addEntry(A)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=dt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function WA(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function HA(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class Hg{constructor(){this.activeTargetIds=XR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GA{constructor(){this.so=new Hg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Hg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha=null;function Fu(){return Ha===null?Ha=function(){return 268435456+Math.round(2147483648*Math.random())}():Ha++,"0x"+Ha.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class YA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Fu(),c=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,c,h,i).then(p=>(q("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Ql("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",i),p})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ms}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=KA[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Fu();return new Promise((o,l)=>{const c=new jw;c.setWithCredentials(!0),c.listenOnce(Lw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ul.NO_ERROR:const p=c.getResponseJson();q(lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case ul.TIMEOUT:q(lt,`RPC '${e}' ${s} timed out`),l(new J(z.DEADLINE_EXCEEDED,"Request time out"));break;case ul.HTTP_ERROR:const m=c.getStatus();if(q(lt,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);const k=w==null?void 0:w.error;if(k&&k.status&&k.message){const N=function(x){const _=x.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(_)>=0?_:z.UNKNOWN}(k.status);l(new J(N,k.message))}else l(new J(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new J(z.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{q(lt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);q(lt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Fu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Fw(),l=Vw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");q(lt,`Creating RPC '${e}' stream ${i}: ${p}`,c);const m=o.createWebChannel(p,c);let w=!1,k=!1;const N=new QA({Io:x=>{k?q(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(w||(q(lt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),w=!0),q(lt,`RPC '${e}' stream ${i} sending:`,x),m.send(x))},To:()=>m.close()}),A=(x,_,y)=>{x.listen(_,S=>{try{y(S)}catch(D){setTimeout(()=>{throw D},0)}})};return A(m,Ks.EventType.OPEN,()=>{k||(q(lt,`RPC '${e}' stream ${i} transport opened.`),N.yo())}),A(m,Ks.EventType.CLOSE,()=>{k||(k=!0,q(lt,`RPC '${e}' stream ${i} transport closed`),N.So())}),A(m,Ks.EventType.ERROR,x=>{k||(k=!0,Ql(lt,`RPC '${e}' stream ${i} transport errored:`,x),N.So(new J(z.UNAVAILABLE,"The operation could not be completed")))}),A(m,Ks.EventType.MESSAGE,x=>{var _;if(!k){const y=x.data[0];De(!!y);const S=y,D=S.error||((_=S[0])===null||_===void 0?void 0:_.error);if(D){q(lt,`RPC '${e}' stream ${i} received error:`,D);const L=D.status;let F=function(I){const T=je[I];if(T!==void 0)return uA(T)}(L),E=D.message;F===void 0&&(F=z.INTERNAL,E="Unknown error status: "+L+" with message "+D.message),k=!0,N.So(new J(F,E)),m.close()}else q(lt,`RPC '${e}' stream ${i} received:`,y),N.bo(y)}}),A(l,Mw.STAT_EVENT,x=>{x.stat===Jd.PROXY?q(lt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Jd.NOPROXY&&q(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Uu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){return new dA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n,r,i,s,o,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new m_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(si(n.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new J(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XA extends JA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=wA(e.writeResults,e.commitTime),r=Ki(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=gA(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new J(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,rh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,rh(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class eb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(si(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{na(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=ve(c);h.L_.add(4),await ta(h),h.q_.set("Unknown"),h.L_.delete(4),await Dc(h)}(this))})}),this.q_=new eb(r,i)}}async function Dc(t){if(na(t))for(const e of t.B_)await e(!0)}async function ta(t){for(const e of t.B_)await e(!1)}function na(t){return ve(t).L_.size===0}async function g_(t,e,n){if(!Ac(e))throw e;t.L_.add(1),await ta(t),t.q_.set("Offline"),n||(n=()=>WA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Dc(t)})}function y_(t,e){return e().catch(n=>g_(t,n,e))}async function jc(t){const e=ve(t),n=Rr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nb(e);)try{const i=await HA(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,rb(e,i)}catch(i){await g_(e,i)}v_(e)&&w_(e)}function nb(t){return na(t)&&t.O_.length<10}function rb(t,e){t.O_.push(e);const n=Rr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function v_(t){return na(t)&&!Rr(t).n_()&&t.O_.length>0}function w_(t){Rr(t).start()}async function ib(t){Rr(t).p_()}async function sb(t){const e=Rr(t);for(const n of t.O_)e.m_(n.mutations)}async function ob(t,e,n){const r=t.O_.shift(),i=Of.from(r,e,n);await y_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await jc(t)}async function ab(t,e){e&&Rr(t).V_&&await async function(r,i){if(function(o){return cA(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();Rr(r).s_(),await y_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await jc(r)}}(t,e),v_(t)&&w_(t)}async function qg(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=na(n);n.L_.add(3),await ta(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Dc(n)}async function lb(t,e){const n=ve(t);e?(n.L_.delete(2),await Dc(n)):e||(n.L_.add(2),await ta(n),n.q_.set("Unknown"))}function Rr(t){return t.U_||(t.U_=function(n,r,i){const s=ve(n);return s.w_(),new XA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ib.bind(null,t),mo:ab.bind(null,t),f_:sb.bind(null,t),g_:ob.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await jc(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Mf(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __(t,e){if(si("AsyncQueue",`${e}: ${t}`),Ac(t))return new J(z.UNAVAILABLE,`${e}: ${t}`);throw t}class cb{constructor(){this.queries=Kg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ve(n),s=i.queries;i.queries=Kg(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new J(z.ABORTED,"Firestore shutting down"))}}function Kg(){return new gs(t=>e_(t),Zw)}function ub(t){t.Y_.forEach(e=>{e.next()})}var Qg,Yg;(Yg=Qg||(Qg={})).ea="default",Yg.Cache="cache";class db{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new gs(l=>e_(l),Zw),this.Ma=new Map,this.xa=new Set,this.Oa=new kt(ee.comparator),this.Na=new Map,this.La=new Df,this.Ba={},this.ka=new Map,this.qa=ls.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function hb(t,e,n){const r=gb(t);try{const i=await function(o,l){const c=ve(o),h=Ge.now(),p=l.reduce((k,N)=>k.add(N.key),dt());let m,w;return c.persistence.runTransaction("Locally write mutations","readwrite",k=>{let N=tc(),A=dt();return c.cs.getEntries(k,p).next(x=>{N=x,N.forEach((_,y)=>{y.isValidDocument()||(A=A.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(k,N)).next(x=>{m=x;const _=[];for(const y of l){const S=sA(y,m.get(y.key).overlayedDocument);S!=null&&_.push(new fi(y.key,S,Gw(S.value.mapValue),zn.exists(!0)))}return c.mutationQueue.addMutationBatch(k,h,_,l)}).next(x=>{w=x;const _=x.applyToLocalDocumentSet(m,A);return c.documentOverlayCache.saveOverlays(k,x.batchId,_)})}).then(()=>({batchId:w.batchId,changes:n_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new kt(fe)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Lc(r,i.changes),await jc(r.remoteStore)}catch(i){const s=__(i,"Failed to persist write");n.reject(s)}}function Jg(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=ve(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const w of m.j_)w.Z_(l)&&(h=!0)}),h&&ub(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fb(t,e){const n=ve(t),r=e.batch.batchId;try{const i=await $A(n.localStore,e);I_(n,r,null),E_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lc(n,i)}catch(i){await zw(i)}}async function pb(t,e,n){const r=ve(t);try{const i=await function(o,l){const c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(De(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);I_(r,e,n),E_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Lc(r,i)}catch(i){await zw(i)}}function E_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function I_(t,e,n){const r=ve(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}async function Lc(t,e,n){const r=ve(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=void 0)===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=Lf.Wi(c.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,h){const p=ve(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(h,w=>U.forEach(w.$i,k=>p.persistence.referenceDelegate.addReference(m,w.targetId,k)).next(()=>U.forEach(w.Ui,k=>p.persistence.referenceDelegate.removeReference(m,w.targetId,k)))))}catch(m){if(!Ac(m))throw m;q("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const w=m.targetId;if(!m.fromCache){const k=p.os.get(w),N=k.snapshotVersion,A=k.withLastLimboFreeSnapshotVersion(N);p.os=p.os.insert(w,A)}}}(r.localStore,s))}async function mb(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await p_(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new J(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lc(n,r.hs)}}function gb(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pb.bind(null,e),e}class ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return zA(this.persistence,new UA,e.initialUser,this.serializer)}Ga(e){return new MA(jf.Zr,this.serializer)}Wa(e){return new GA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ic.provider={build:()=>new ic};class sh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mb.bind(null,this.syncEngine),await lb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cb}()}createDatastore(e){const n=Oc(e.databaseInfo.databaseId),r=function(s){return new YA(s)}(e.databaseInfo);return function(s,o,l,c){return new ZA(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new tb(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Jg(this.syncEngine,n,0),function(){return Gg.D()?new Gg:new qA}())}createSyncEngine(e,n){return function(i,s,o,l,c,h,p){const m=new db(i,s,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ve(i);q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ta(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sh.provider={build:()=>new sh};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=Bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=__(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bu(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await p_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vb(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>qg(e.remoteStore,i)),t._onlineComponents=e}async function vb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ql("Error using user provided cache. Falling back to memory cache: "+n),await Bu(t,new ic)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Bu(t,new ic);return t._offlineComponents}async function wb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Xg(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Xg(t,new sh))),t._onlineComponents}function _b(t){return wb(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t,e,n){if(!n)throw new J(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ib(t,e,n,r){if(e===!0&&r===!0)throw new J(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ey(t){if(!ee.isDocumentKey(t))throw new J(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Vf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function oh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vf(t);throw new J(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ib("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ty({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ty(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dR;switch(r.type){case"firstParty":return new mR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Zg.get(n);r&&(q("ComponentProvider","Removing Datastore"),Zg.delete(n),r.terminate())}(this),Promise.resolve()}}function xb(t,e,n,r={}){var i;const s=(t=oh(t,Ff))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=ct.MOCK_USER;else{l=VS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new J(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ct(h)}t._authCredentials=new hR(new Uw(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Uf(this.firestore,e,this._query)}}class $n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}}class Mo extends Uf{constructor(e,n,r){super(e,n,$R(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new ee(e))}withConverter(e){return new Mo(this.firestore,e,this._path)}}function Sb(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=Bw.newId()),Eb("doc","path",e),t instanceof Ff){const r=Le.fromString(e,...n);return ey(r),new $n(t,null,new ee(r))}{if(!(t instanceof $n||t instanceof Mo))throw new J(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return ey(r),new $n(t.firestore,t instanceof Mo?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new m_(this,"async_queue_retry"),this.Vu=()=>{const r=Uu();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Uu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Uu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Qr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ac(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw si("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Mf.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class S_ extends Ff{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ny,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ny(e),this._firestoreClient=void 0,await e}}}function Tb(t,e){const n=typeof t=="object"?t:ff(),r=typeof t=="string"?t:"(default)",i=hi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=LS("firestore");s&&xb(i,...s)}return i}function Cb(t){if(t._terminated)throw new J(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kb(t),t._firestoreClient}function kb(t){var e,n,r;const i=t._freezeSettings(),s=function(l,c,h,p){return new AR(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,x_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new yb(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(Tn.fromBase64String(e))}catch(n){throw new J(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vo(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=/^__.*__$/;class Ab{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ea(e,this.data,n,this.fieldTransforms)}}function A_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class Bf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(A_(this.Cu)&&Rb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class bb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oc(e)}Qu(e,n,r,i=!1){return new Bf({Cu:e,methodName:n,qu:r,path:Xe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nb(t){const e=t._freezeSettings(),n=Oc(t._databaseId);return new bb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Pb(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);O_("Data must be an object, but it was:",o,r);const l=N_(r,o);let c,h;if(s.merge)c=new sn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const w=Ob(e,m,n);if(!o.contains(w))throw new J(z.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Lb(p,w)||p.push(w)}c=new sn(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new Ab(new rn(l),c,h)}function b_(t,e){if(P_(t=Ct(t)))return O_("Unsupported field value:",e,t),N_(t,e);if(t instanceof C_)return function(r,i){if(!A_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=b_(l,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ge.fromDate(r);return{timestampValue:nh(i.serializer,s)}}if(r instanceof Ge){const s=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nh(i.serializer,s)}}if(r instanceof k_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vo)return{bytesValue:hA(i.serializer,r._byteString)};if(r instanceof $n){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:h_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof R_)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Pf(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Vf(r)}`)}(t,e)}function N_(t,e){const n={};return Ww(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(t,(r,i)=>{const s=b_(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function P_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof k_||t instanceof Vo||t instanceof $n||t instanceof C_||t instanceof R_)}function O_(t,e,n){if(!P_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Vf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ob(t,e,n){if((e=Ct(e))instanceof T_)return e._internalPath;if(typeof e=="string")return jb(t,e);throw sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const Db=new RegExp("[~\\*/\\[\\]]");function jb(t,e,n){if(e.search(Db)>=0)throw sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new T_(...e.split("."))._internalPath}catch{throw sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new J(z.INVALID_ARGUMENT,l+t+c)}function Lb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function Vb(t,e,n){t=oh(t,$n);const r=oh(t.firestore,S_),i=Mb(t.converter,e,n);return Fb(r,[Pb(Nb(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,zn.none())])}function Fb(t,e){return function(r,i){const s=new Qr;return r.asyncQueue.enqueueAndForget(async()=>hb(await _b(r),i,s)),s.promise}(Cb(t),e)}(function(e,n=!0){(function(i){ms=i})(hs),xn(new un("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new S_(new fR(r.getProvider("auth-internal")),new yR(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new J(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ht(Ng,"4.7.3",e),Ht(Ng,"4.7.3","esm2017")})();const D_="@firebase/installations",zf="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=1e4,L_=`w:${zf}`,M_="FIS_v2",Ub="https://firebaseinstallations.googleapis.com/v1",Bb=60*60*1e3,zb="installations",$b="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ai=new di(zb,$b,Wb);function V_(t){return t instanceof dn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_({projectId:t}){return`${Ub}/projects/${t}/installations`}function U_(t){return{token:t.token,requestStatus:2,expiresIn:Gb(t.expiresIn),creationTime:Date.now()}}async function B_(t,e){const r=(await e.json()).error;return ai.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function z_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Hb(t,{refreshToken:e}){const n=z_(t);return n.append("Authorization",qb(e)),n}async function $_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Gb(t){return Number(t.replace("s","000"))}function qb(t){return`${M_} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kb({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=F_(t),i=z_(t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:n,authVersion:M_,appId:t.appId,sdkVersion:L_},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await $_(()=>fetch(r,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:U_(h.authToken)}}else throw await B_("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=/^[cdef][\w-]{21}$/,ah="";function Jb(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Xb(t);return Yb.test(n)?n:ah}catch{return ah}}function Xb(t){return Qb(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=new Map;function G_(t,e){const n=Mc(t);q_(n,e),Zb(n,e)}function q_(t,e){const n=H_.get(t);if(n)for(const r of n)r(e)}function Zb(t,e){const n=eN();n&&n.postMessage({key:t,fid:e}),tN()}let Gr=null;function eN(){return!Gr&&"BroadcastChannel"in self&&(Gr=new BroadcastChannel("[Firebase] FID Change"),Gr.onmessage=t=>{q_(t.data.key,t.data.fid)}),Gr}function tN(){H_.size===0&&Gr&&(Gr.close(),Gr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="firebase-installations-database",rN=1,li="firebase-installations-store";let zu=null;function $f(){return zu||(zu=Y0(nN,rN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(li)}}})),zu}async function oc(t,e){const n=Mc(t),i=(await $f()).transaction(li,"readwrite"),s=i.objectStore(li),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&G_(t,e.fid),e}async function K_(t){const e=Mc(t),r=(await $f()).transaction(li,"readwrite");await r.objectStore(li).delete(e),await r.done}async function Vc(t,e){const n=Mc(t),i=(await $f()).transaction(li,"readwrite"),s=i.objectStore(li),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&G_(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wf(t){let e;const n=await Vc(t.appConfig,r=>{const i=iN(r),s=sN(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===ah?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function iN(t){const e=t||{fid:Jb(),registrationStatus:0};return Q_(e)}function sN(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ai.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=oN(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:aN(t)}:{installationEntry:e}}async function oN(t,e){try{const n=await Kb(t,e);return oc(t.appConfig,n)}catch(n){throw V_(n)&&n.customData.serverCode===409?await K_(t.appConfig):await oc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function aN(t){let e=await ry(t.appConfig);for(;e.registrationStatus===1;)await W_(100),e=await ry(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Wf(t);return r||n}return e}function ry(t){return Vc(t,e=>{if(!e)throw ai.create("installation-not-found");return Q_(e)})}function Q_(t){return lN(t)?{fid:t.fid,registrationStatus:0}:t}function lN(t){return t.registrationStatus===1&&t.registrationTime+j_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN({appConfig:t,heartbeatServiceProvider:e},n){const r=uN(t,n),i=Hb(t,n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:L_,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await $_(()=>fetch(r,l));if(c.ok){const h=await c.json();return U_(h)}else throw await B_("Generate Auth Token",c)}function uN(t,{fid:e}){return`${F_(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(t,e=!1){let n;const r=await Vc(t.appConfig,s=>{if(!Y_(s))throw ai.create("not-registered");const o=s.authToken;if(!e&&fN(o))return s;if(o.requestStatus===1)return n=dN(t,e),s;{if(!navigator.onLine)throw ai.create("app-offline");const l=mN(s);return n=hN(t,l),l}});return n?await n:r.authToken}async function dN(t,e){let n=await iy(t.appConfig);for(;n.authToken.requestStatus===1;)await W_(100),n=await iy(t.appConfig);const r=n.authToken;return r.requestStatus===0?Hf(t,e):r}function iy(t){return Vc(t,e=>{if(!Y_(e))throw ai.create("not-registered");const n=e.authToken;return gN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function hN(t,e){try{const n=await cN(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await oc(t.appConfig,r),n}catch(n){if(V_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await K_(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await oc(t.appConfig,r)}throw n}}function Y_(t){return t!==void 0&&t.registrationStatus===2}function fN(t){return t.requestStatus===2&&!pN(t)}function pN(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Bb}function mN(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function gN(t){return t.requestStatus===1&&t.requestTime+j_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t){const e=t,{installationEntry:n,registrationPromise:r}=await Wf(e);return r?r.catch(console.error):Hf(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(t,e=!1){const n=t;return await wN(n),(await Hf(n,e)).token}async function wN(t){const{registrationPromise:e}=await Wf(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){if(!t||!t.options)throw $u("App Configuration");if(!t.name)throw $u("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw $u(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function $u(t){return ai.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="installations",EN="installations-internal",IN=t=>{const e=t.getProvider("app").getImmediate(),n=_N(e),r=hi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},xN=t=>{const e=t.getProvider("app").getImmediate(),n=hi(e,J_).getImmediate();return{getId:()=>yN(n),getToken:i=>vN(n,i)}};function SN(){xn(new un(J_,IN,"PUBLIC")),xn(new un(EN,xN,"PRIVATE"))}SN();Ht(D_,zf);Ht(D_,zf,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac="analytics",TN="firebase_id",CN="origin",kN=60*1e3,RN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt=new Tc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},jt=new di("analytics","Analytics",AN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){if(!t.startsWith(Gf)){const e=jt.create("invalid-gtag-resource",{gtagURL:t});return Tt.warn(e.message),""}return t}function X_(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function NN(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function PN(t,e){const n=NN("firebase-js-sdk-policy",{createScriptURL:bN}),r=document.createElement("script"),i=`${Gf}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ON(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function DN(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await X_(n)).find(h=>h.measurementId===i);c&&await e[c.appId]}}catch(l){Tt.error(l)}t("config",i,s)}async function jN(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await X_(n);for(const c of o){const h=l.find(m=>m.measurementId===c),p=h&&e[h.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Tt.error(s)}}function LN(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,c]=o;await jN(t,e,n,l,c)}else if(s==="config"){const[l,c]=o;await DN(t,e,n,r,l,c)}else if(s==="consent"){const[l,c]=o;t("consent",l,c)}else if(s==="get"){const[l,c,h]=o;t("get",l,c,h)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Tt.error(l)}}return i}function MN(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=LN(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function VN(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Gf)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=30,UN=1e3;class BN{constructor(e={},n=UN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Z_=new BN;function zN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function $N(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:zN(r)},s=RN.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw jt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function WN(t,e=Z_,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw jt.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw jt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new qN;return setTimeout(async()=>{l.abort()},kN),eE({appId:r,apiKey:i,measurementId:s},o,l,e)}async function eE(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Z_){var s;const{appId:o,measurementId:l}=t;try{await HN(r,e)}catch(c){if(l)return Tt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await $N(t);return i.deleteThrottleMetadata(o),c}catch(c){const h=c;if(!GN(h)){if(i.deleteThrottleMetadata(o),l)return Tt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:l};throw c}const p=Number((s=h==null?void 0:h.customData)===null||s===void 0?void 0:s.httpStatus)===503?ig(n,i.intervalMillis,FN):ig(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return i.setThrottleMetadata(o,m),Tt.debug(`Calling attemptFetch again in ${p} millis`),eE(t,m,r,i)}}function HN(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(jt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function GN(t){if(!(t instanceof dn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class qN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function KN(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(){if(G0())try{await q0()}catch(t){return Tt.warn(jt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Tt.warn(jt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function YN(t,e,n,r,i,s,o){var l;const c=WN(t);c.then(k=>{n[k.measurementId]=k.appId,t.options.measurementId&&k.measurementId!==t.options.measurementId&&Tt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${k.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(k=>Tt.error(k)),e.push(c);const h=QN().then(k=>{if(k)return r.getId()}),[p,m]=await Promise.all([c,h]);VN(s)||PN(s,p.measurementId),i("js",new Date);const w=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return w[CN]="firebase",w.update=!0,m!=null&&(w[TN]=m),i("config",p.measurementId,w),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.app=e}_delete(){return delete uo[this.app.options.appId],Promise.resolve()}}let uo={},sy=[];const oy={};let Wu="dataLayer",XN="gtag",ay,tE,ly=!1;function ZN(){const t=[];if(H0()&&t.push("This is a browser extension environment."),HS()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=jt.create("invalid-analytics-context",{errorInfo:e});Tt.warn(n.message)}}function eP(t,e,n){ZN();const r=t.options.appId;if(!r)throw jt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Tt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw jt.create("no-api-key");if(uo[r]!=null)throw jt.create("already-exists",{id:r});if(!ly){ON(Wu);const{wrappedGtag:s,gtagCore:o}=MN(uo,sy,oy,Wu,XN);tE=s,ay=o,ly=!0}return uo[r]=YN(t,sy,oy,e,ay,Wu,n),new JN(t)}function tP(t=ff()){t=Ct(t);const e=hi(t,ac);return e.isInitialized()?e.getImmediate():nP(t)}function nP(t,e={}){const n=hi(t,ac);if(n.isInitialized()){const i=n.getImmediate();if(Ao(e,n.getOptions()))return i;throw jt.create("already-initialized")}return n.initialize({options:e})}function rP(t,e,n,r){t=Ct(t),KN(tE,uo[t.app.options.appId],e,n,r).catch(i=>Tt.error(i))}const cy="@firebase/analytics",uy="0.10.8";function iP(){xn(new un(ac,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return eP(r,i,n)},"PUBLIC")),xn(new un("analytics-internal",t,"PRIVATE")),Ht(cy,uy),Ht(cy,uy,"esm2017");function t(e){try{const n=e.getProvider(ac).getImmediate();return{logEvent:(r,i,s)=>rP(n,r,i,s)}}catch(n){throw jt.create("interop-component-reg-failed",{reason:n})}}}iP();const sP={apiKey:"AIzaSyCIqpOl5nT3VH149xISPqyLgkjyIiMWPb8",authDomain:"flinx-8a05e.firebaseapp.com",projectId:"flinx-8a05e",storageBucket:"flinx-8a05e.firebasestorage.app",messagingSenderId:"977393893446",appId:"1:977393893446:web:308db5f232f7c5558cca47",measurementId:"G-N0LW13KMNJ"},qf=J0(sP);let oP;if(typeof window<"u")try{oP=tP(qf)}catch{console.log("Analytics initialization skipped (local development)")}const Fo=aR(qf),aP=Tb(qf),Kf=new jn;Kf.addScope("profile");Kf.addScope("email");Kf.addScope("openid");const Uo=new Dn,nE="863917229498555";console.log(" Configuring Facebook Auth Provider:");console.log("   - App ID:",nE);console.log("   - Redirect URL:","https://flinx-8a05e.firebaseapp.com/__/auth/handler");Uo.setCustomParameters({app_id:nE,display:"popup",auth_type:"rerequest",scope:"public_profile,email"});Uo.addScope("public_profile");Uo.addScope("email");console.log(" Facebook Auth Provider initialized with:");console.log("   - Public Profile scope: ");console.log("   - Email scope: ");console.log("   - Web OAuth redirect enabled: ");const rE=async(t,e)=>{var o,l,c;console.log(` Processing ${e} login for user:`,t.email);let n=null;e==="facebook"&&((o=t.providerData[0])!=null&&o.uid)&&(n=t.providerData[0].uid);const r={uid:t.uid,email:t.email,name:t.displayName||"User",picture:t.photoURL||null,authProvider:e,googleId:e==="google"?(l=t.providerData[0])==null?void 0:l.uid:null,facebookId:e==="facebook"?n:null,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()};console.log(" User info extracted:",{email:r.email,name:r.name,authProvider:r.authProvider});try{const h=await t.getIdToken();localStorage.setItem("idToken",h),console.log(" Firebase ID token stored for Socket.IO")}catch(h){console.error(" Failed to get Firebase ID token:",h)}try{const p=await fetch("https://flinxx-backend.onrender.com/api/users/save",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({uid:t.uid,email:t.email,displayName:t.displayName||"User",photoURL:t.photoURL||null,authProvider:e})});if(!p.ok)throw new Error(`Failed to save user: ${p.status}`);const m=await p.json();console.log(" User saved to Neon PostgreSQL:",m.user),m.user&&(r.profileCompleted=m.user.profileCompleted,r.isProfileCompleted=m.user.profileCompleted,r.id=m.user.id,console.log("[FIREBASE]  Updated userInfo with profileCompleted:",m.user.profileCompleted)),localStorage.setItem("dbUserId",m.user.id)}catch(h){console.error(" Error saving user to backend database:",h)}try{await Vb(Sb(aP,"users",t.uid),{email:t.email,displayName:t.displayName,photoURL:t.photoURL,authProvider:e,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()},{merge:!0}),console.log(" User saved to Firestore")}catch(h){console.error(" Error saving user to Firestore:",h)}console.log(`
 [firebase] handleLoginSuccess storing to localStorage`),console.log(" [firebase]   - userInfo.profileCompleted =",r.profileCompleted),console.log(" [firebase]   - userInfo.isProfileCompleted =",r.isProfileCompleted);const i={id:r.id,uid:r.uid,name:t.displayName,email:t.email,picture:t.photoURL,googleId:e==="google"?(c=t.providerData[0])==null?void 0:c.uid:null,facebookId:e==="facebook"?n:null,profileCompleted:r.profileCompleted||!1,isProfileCompleted:r.profileCompleted||!1,authProvider:e};console.log(" [firebase] userToStore object:",i),localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("authProvider",e),localStorage.setItem("userInfo",JSON.stringify(r)),console.log(" [firebase]  Stored to localStorage, verifying...");const s=JSON.parse(localStorage.getItem("user"));return console.log(" [firebase]   - Verified profileCompleted:",s.profileCompleted),console.log(" [firebase]  User data stored in localStorage with profileCompleted:",r.profileCompleted||!1),r},lP=async()=>{var t;try{console.log(" Starting Facebook login via popup...");const e=await mk(Fo,Uo);console.log(" Facebook popup login successful:",e.user.email);const n=(t=e.user.providerData[0])==null?void 0:t.providerId;let r="facebook";return n==="facebook.com"&&(r="facebook"),rE(e.user,r)}catch(e){console.warn(" Facebook popup login failed, trying redirect method:",e.code);try{return console.log(" Starting Facebook login via redirect..."),await Ek(Fo,Uo),null}catch(n){throw console.error(" Facebook login failed:",n),n}}},cP=async()=>{var t;try{const e=await xk(Fo);if(e!=null&&e.user){console.log(" Redirect login successful:",e.user.email);const n=(t=e.user.providerData[0])==null?void 0:t.providerId;console.log("Provider:",n);let r="unknown";return n==="google.com"?r="google":n==="facebook.com"&&(r="facebook"),rE(e.user,r)}}catch(e){console.error("Redirect result error:",e),e.code==="auth/account-exists-with-different-credential"?console.error("Account exists with different credential"):e.code==="auth/auth-domain-config-required"&&console.error("Auth domain config required")}return null},ys=O.createContext(),uP=({children:t})=>{const[e,n]=O.useState(null),[r,i]=O.useState(!0),[s,o]=O.useState(!1),[l,c]=O.useState(!1);O.useEffect(()=>{(async()=>{try{console.log(`

 [AuthContext] `),console.log(" [AuthContext] INITIALIZATION STARTED"),console.log(" [AuthContext] ");const w=localStorage.getItem("token"),k=localStorage.getItem("user");if(console.log(" [AuthContext] STEP 1: Check localStorage"),console.log(" [AuthContext]   - token:",w?" Found":" Not found"),console.log(" [AuthContext]   - user:",k?" Found":" Not found"),w&&k)try{console.log(`
 [AuthContext] STEP 2: Parse localStorage user`);const A=JSON.parse(k);console.log(" [AuthContext]   - Parsed user email:",A.email),console.log(" [AuthContext]   - profileCompleted from localStorage:",A.profileCompleted,"(type:",typeof A.profileCompleted+")"),console.log(" [AuthContext]  Attempting to restore Google OAuth user from localStorage:",A.email),console.log(" [AuthContext] User data from localStorage:",{id:A.id,email:A.email,profileCompleted:A.profileCompleted,isProfileCompleted:A.isProfileCompleted});const x="https://flinxx-backend.onrender.com";console.log(`
 [AuthContext] STEP 3: Validate token with backend`),console.log(" [AuthContext]   - Backend URL:",x),console.log(" [AuthContext]   - Making request to /api/profile...");const _=await fetch(`${x}/api/profile`,{method:"GET",headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(console.log(" [AuthContext]   - Response status:",_.status),_.ok){const y=await _.json();if(console.log(" [AuthContext]   - Response OK, parsing data..."),console.log(" [AuthContext]   - data.success:",y.success),console.log(" [AuthContext]   - data.user available:",!!y.user),y.success&&y.user){console.log(" [AuthContext]  Token validated, user restored from backend"),console.log(" [AuthContext] Backend user data:",{id:y.user.id,email:y.user.email,profileCompleted:y.user.profileCompleted,birthday:y.user.birthday,gender:y.user.gender}),console.log(" [AuthContext] Setting user state with:",{email:y.user.email,profileCompleted:y.user.profileCompleted}),n(y.user),o(!0),i(!1),console.log(" [AuthContext]  COMPLETE - Returning from token validation path");return}else console.log(" [AuthContext]   Response OK but data.success or data.user missing")}else{console.log(" [AuthContext]  Token validation response not OK:",_.status);const y=await _.text();console.log(" [AuthContext] Error response:",y)}}catch(A){console.error(" [AuthContext]  Error validating token:",A)}else console.log(`
 [AuthContext] STEP 2: Skip token validation (missing token or user)`),console.log(" [AuthContext]   - Skipping /api/profile call");if(k)try{console.log(`
 [AuthContext] STEP 3: Restore from localStorage (no token validation)`);const A=JSON.parse(k);console.log(" [AuthContext]   - Email:",A.email),console.log(" [AuthContext]   - profileCompleted:",A.profileCompleted,"(type:",typeof A.profileCompleted+")"),console.log(" [AuthContext]  User loaded from localStorage (no token validation):",A.email),console.log(" [AuthContext] User data from localStorage:",{id:A.id,email:A.email,profileCompleted:A.profileCompleted,isProfileCompleted:A.isProfileCompleted}),console.log(" [AuthContext] Setting user state with profileCompleted:",A.profileCompleted),n(A),o(!0),i(!1),console.log(" [AuthContext]  COMPLETE - Returning from localStorage fallback path");return}catch(A){console.error("[AuthContext] Error parsing saved user:",A)}return console.log(`
 [AuthContext] STEP 3: No stored token or user, checking Firebase...`),KC(Fo,async A=>{var x,_;if(console.log(`
 [AuthContext] Firebase onAuthStateChanged fired`),console.log(" [AuthContext]   - firebaseUser:",A?A.email:"null"),A){const y=((x=A.providerData[0])==null?void 0:x.providerId)||"unknown";console.log(" [AuthContext] User authenticated via Firebase"),console.log(" [AuthContext]   - Email:",A.email),console.log(" [AuthContext]   - Provider:",y);try{console.log(" [AuthContext] Getting Firebase ID token...");const D=await A.getIdToken();console.log(" [AuthContext]  ID token obtained"),localStorage.setItem("idToken",D),console.log(" Firebase ID token stored for Socket.IO");const L="https://flinxx-backend.onrender.com";console.log(" [AuthContext] Calling /api/profile with ID token...");const F=await fetch(`${L}/api/profile`,{method:"GET",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}});if(console.log(" [AuthContext] /api/profile response status:",F.status),F.ok){const E=await F.json();if(console.log(" [AuthContext] /api/profile response OK"),console.log(" [AuthContext]   - success:",E.success),console.log(" [AuthContext]   - user.profileCompleted:",(_=E.user)==null?void 0:_.profileCompleted),E.success&&E.user){console.log(" [AuthContext]  Fetched full user profile from database:",{email:E.user.email,profileCompleted:E.user.profileCompleted}),console.log(" [AuthContext] Setting user state with profileCompleted:",E.user.profileCompleted),n(E.user),o(!0),i(!1);return}}else console.log(" [AuthContext]  /api/profile response not OK:",F.status)}catch(D){console.warn("[AuthContext]  Failed to fetch profile from database:",D)}const S={uid:A.uid,email:A.email,displayName:A.displayName,photoURL:A.photoURL,authProvider:y,profileCompleted:!1};console.log("[AuthContext] Using fallback userInfo (database fetch failed):",S.email),console.log("[AuthContext]  WARNING: profileCompleted not loaded from database, defaulting to false"),n(S),o(!0),localStorage.setItem("userInfo",JSON.stringify(S)),localStorage.setItem("authProvider",y)}else{console.log(" [AuthContext] Firebase user is null/logged out");const y=localStorage.getItem("authToken"),S=localStorage.getItem("authProvider");if(console.log(" [AuthContext]   - authToken:",y?"Found":"Not found"),console.log(" [AuthContext]   - authProvider:",S),y&&S==="guest"){const D=JSON.parse(localStorage.getItem("userInfo")||"{}");console.log(" [AuthContext] Restoring guest login"),n(D),o(!0)}else console.log(" [AuthContext]  No authentication found, user will be redirected to login"),n(null),o(!1)}console.log(" [AuthContext] "),console.log(" [AuthContext] INITIALIZATION COMPLETE - Setting isLoading=false"),console.log(` [AuthContext] 
`),i(!1)})}catch(w){console.error("[AuthContext] Error initializing auth:",w),i(!1)}})()},[]);const h=()=>{n(null),o(!1),localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),localStorage.removeItem("authProvider"),localStorage.removeItem("token"),localStorage.removeItem("user")},p=(m,w)=>{console.log("[AuthContext] Storing token and user data:",w==null?void 0:w.email),localStorage.setItem("token",m),localStorage.setItem("user",JSON.stringify(w)),localStorage.setItem("authProvider","google"),n(w),o(!0)};return u.jsx(ys.Provider,{value:{user:e,isAuthenticated:s,isLoading:r,logout:h,authPending:l,setAuthPending:c,setAuthToken:p},children:t})};class dP extends Wo.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){var e;return this.state.hasError?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-bold text-red-500 mb-4",children:"Something went wrong"}),u.jsx("p",{className:"text-gray-300 mb-8",children:(e=this.state.error)==null?void 0:e.message}),u.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg font-semibold text-white",children:"Reload Page"})]})}):this.props.children}}/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bo(){return Bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bo.apply(this,arguments)}var dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dr||(dr={}));const dy="popstate";function hP(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return lh("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:iE(i)}return pP(e,n,null,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fP(){return Math.random().toString(36).substr(2,8)}function hy(t,e){return{usr:t.state,key:t.key,idx:e}}function lh(t,e,n,r){return n===void 0&&(n=null),Bo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vs(e):e,{state:n,key:e&&e.key||r||fP()})}function iE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function vs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=dr.Pop,c=null,h=p();h==null&&(h=0,o.replaceState(Bo({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=dr.Pop;let x=p(),_=x==null?null:x-h;h=x,c&&c({action:l,location:A.location,delta:_})}function w(x,_){l=dr.Push;let y=lh(A.location,x,_);h=p()+1;let S=hy(y,h),D=A.createHref(y);try{o.pushState(S,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(D)}s&&c&&c({action:l,location:A.location,delta:1})}function k(x,_){l=dr.Replace;let y=lh(A.location,x,_);h=p();let S=hy(y,h),D=A.createHref(y);o.replaceState(S,"",D),s&&c&&c({action:l,location:A.location,delta:0})}function N(x){let _=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof x=="string"?x:iE(x);return y=y.replace(/ $/,"%20"),Be(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let A={get action(){return l},get location(){return t(i,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(dy,m),c=x,()=>{i.removeEventListener(dy,m),c=null}},createHref(x){return e(i,x)},createURL:N,encodeLocation(x){let _=N(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:w,replace:k,go(x){return o.go(x)}};return A}var fy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fy||(fy={}));function mP(t,e,n){return n===void 0&&(n="/"),gP(t,e,n)}function gP(t,e,n,r){let i=typeof e=="string"?vs(e):e,s=aE(i.pathname||"/",n);if(s==null)return null;let o=sE(t);yP(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let h=AP(s);l=CP(o[c],h)}return l}function sE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Be(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=Jr([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(Be(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),sE(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:SP(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of oE(s.path))i(s,o,c)}),e}function oE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=oE(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function yP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vP=/^:[\w-]+$/,wP=3,_P=2,EP=1,IP=10,xP=-2,py=t=>t==="*";function SP(t,e){let n=t.split("/"),r=n.length;return n.some(py)&&(r+=xP),e&&(r+=_P),n.filter(i=>!py(i)).reduce((i,s)=>i+(vP.test(s)?wP:s===""?EP:IP),r)}function TP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function CP(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=kP({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),w=c.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Jr([s,m.pathname]),pathnameBase:LP(Jr([s,m.pathnameBase])),route:w}),m.pathnameBase!=="/"&&(s=Jr([s,m.pathnameBase]))}return o}function kP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:w,isOptional:k}=p;if(w==="*"){let A=l[m]||"";o=s.slice(0,s.length-A.length).replace(/(.)\/+$/,"$1")}const N=l[m];return k&&!N?h[w]=void 0:h[w]=(N||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function RP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function AP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function aE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const bP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NP=t=>bP.test(t);function PP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?vs(t):t,s;if(n)if(NP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Qf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=my(n.substring(1),"/"):s=my(n,e)}else s=e;return{pathname:s,search:MP(r),hash:VP(i)}}function my(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function DP(t,e){let n=OP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=vs(t):(i=Bo({},t),Be(!i.pathname||!i.pathname.includes("?"),Hu("?","pathname","search",i)),Be(!i.pathname||!i.pathname.includes("#"),Hu("#","pathname","hash",i)),Be(!i.search||!i.search.includes("#"),Hu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let w=o.split("/");for(;w[0]==="..";)w.shift(),m-=1;i.pathname=w.join("/")}l=m>=0?e[m]:"/"}let c=PP(i,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const Jr=t=>t.join("/").replace(/\/\/+/g,"/"),LP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lE=["post","put","patch","delete"];new Set(lE);const UP=["get",...lE];new Set(UP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zo(){return zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zo.apply(this,arguments)}const Yf=O.createContext(null),BP=O.createContext(null),Fc=O.createContext(null),Uc=O.createContext(null),ws=O.createContext({outlet:null,matches:[],isDataRoute:!1}),cE=O.createContext(null);function Bc(){return O.useContext(Uc)!=null}function zc(){return Bc()||Be(!1),O.useContext(Uc).location}function uE(t){O.useContext(Fc).static||O.useLayoutEffect(t)}function hn(){let{isDataRoute:t}=O.useContext(ws);return t?e1():zP()}function zP(){Bc()||Be(!1);let t=O.useContext(Yf),{basename:e,future:n,navigator:r}=O.useContext(Fc),{matches:i}=O.useContext(ws),{pathname:s}=zc(),o=JSON.stringify(DP(i,n.v7_relativeSplatPath)),l=O.useRef(!1);return uE(()=>{l.current=!0}),O.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=jP(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Jr([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,s,t])}function $P(t,e){return WP(t,e)}function WP(t,e,n,r){Bc()||Be(!1);let{navigator:i}=O.useContext(Fc),{matches:s}=O.useContext(ws),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=zc(),p;if(e){var m;let x=typeof e=="string"?vs(e):e;c==="/"||(m=x.pathname)!=null&&m.startsWith(c)||Be(!1),p=x}else p=h;let w=p.pathname||"/",k=w;if(c!=="/"){let x=c.replace(/^\//,"").split("/");k="/"+w.replace(/^\//,"").split("/").slice(x.length).join("/")}let N=mP(t,{pathname:k}),A=QP(N&&N.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Jr([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Jr([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&A?O.createElement(Uc.Provider,{value:{location:zo({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:dr.Pop}},A):A}function HP(){let t=ZP(),e=FP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const GP=O.createElement(HP,null);class qP extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ws.Provider,{value:this.props.routeContext},O.createElement(cE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KP(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(Yf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ws.Provider,{value:e},r)}function QP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Be(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:w,errors:k}=n,N=m.route.loader&&w[m.route.id]===void 0&&(!k||k[m.route.id]===void 0);if(m.route.lazy||N){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,w)=>{let k,N=!1,A=null,x=null;n&&(k=l&&m.route.id?l[m.route.id]:void 0,A=m.route.errorElement||GP,c&&(h<0&&w===0?(t1("route-fallback"),N=!0,x=null):h===w&&(N=!0,x=m.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,w+1)),y=()=>{let S;return k?S=A:N?S=x:m.route.Component?S=O.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=p,O.createElement(KP,{match:m,routeContext:{outlet:p,matches:_,isDataRoute:n!=null},children:S})};return n&&(m.route.ErrorBoundary||m.route.errorElement||w===0)?O.createElement(qP,{location:n.location,revalidation:n.revalidation,component:A,error:k,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var dE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dE||{}),hE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hE||{});function YP(t){let e=O.useContext(Yf);return e||Be(!1),e}function JP(t){let e=O.useContext(BP);return e||Be(!1),e}function XP(t){let e=O.useContext(ws);return e||Be(!1),e}function fE(t){let e=XP(),n=e.matches[e.matches.length-1];return n.route.id||Be(!1),n.route.id}function ZP(){var t;let e=O.useContext(cE),n=JP(),r=fE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function e1(){let{router:t}=YP(dE.UseNavigateStable),e=fE(hE.UseNavigateStable),n=O.useRef(!1);return uE(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,zo({fromRouteId:e},s)))},[t,e])}const gy={};function t1(t,e,n){gy[t]||(gy[t]=!0)}function n1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Nn(t){Be(!1)}function r1(t){let{basename:e="/",children:n=null,location:r,navigationType:i=dr.Pop,navigator:s,static:o=!1,future:l}=t;Bc()&&Be(!1);let c=e.replace(/^\/*/,"/"),h=O.useMemo(()=>({basename:c,navigator:s,static:o,future:zo({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=vs(r));let{pathname:p="/",search:m="",hash:w="",state:k=null,key:N="default"}=r,A=O.useMemo(()=>{let x=aE(p,c);return x==null?null:{location:{pathname:x,search:m,hash:w,state:k,key:N},navigationType:i}},[c,p,m,w,k,N,i]);return A==null?null:O.createElement(Fc.Provider,{value:h},O.createElement(Uc.Provider,{children:n,value:A}))}function i1(t){let{children:e,location:n}=t;return $P(ch(e),n)}new Promise(()=>{});function ch(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,ch(r.props.children,s));return}r.type!==Nn&&Be(!1),!r.props.index||!r.props.children||Be(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ch(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function s1(t,e){let n=uh(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const o1="6";try{window.__reactRouterVersion=o1}catch{}const a1="startTransition",yy=pI[a1];function l1(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=hP({window:i,v5Compat:!0}));let o=s.current,[l,c]=O.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},p=O.useCallback(m=>{h&&yy?yy(()=>c(m)):c(m)},[c,h]);return O.useLayoutEffect(()=>o.listen(p),[o,p]),O.useEffect(()=>n1(r),[r]),O.createElement(r1,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var vy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vy||(vy={}));var wy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wy||(wy={}));function pE(t){let e=O.useRef(uh(t)),n=O.useRef(!1),r=zc(),i=O.useMemo(()=>s1(r.search,n.current?null:e.current),[r.search]),s=hn(),o=O.useCallback((l,c)=>{const h=uh(typeof l=="function"?l(i):l);n.current=!0,s("?"+h,c)},[s,i]);return[i,o]}const c1="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMjgwIDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8IS0tIFB1cnBsZSBSb3VuZGVkLVNxdWFyZSBJY29uIChleGFjdCBmcm9tIGJyYW5kaW5nKSAtLT4NCiAgPGc+DQogICAgPCEtLSBHcmFkaWVudCBkZWZpbml0aW9ucyAtLT4NCiAgICA8ZGVmcz4NCiAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icHVycGxlR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPg0KICAgICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojOUQ0RUREO3N0b3Atb3BhY2l0eToxIiAvPg0KICAgICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3MjA5Qjc7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgDQogICAgICA8bGluZWFyR3JhZGllbnQgaWQ9Imdsb3dHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+DQogICAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDA7c3RvcC1vcGFjaXR5OjAuOCIgLz4NCiAgICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZBNTAwO3N0b3Atb3BhY2l0eTowLjQiIC8+DQogICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgDQogICAgICA8ZmlsdGVyIGlkPSJwcmVtaXVtU2hhZG93Ij4NCiAgICAgICAgPGZlRHJvcFNoYWRvdyBkeD0iMCIgZHk9IjQiIHN0ZERldmlhdGlvbj0iNiIgZmxvb2Qtb3BhY2l0eT0iMC4zNSIvPg0KICAgICAgPC9maWx0ZXI+DQogICAgPC9kZWZzPg0KICAgIA0KICAgIDwhLS0gR29sZGVuIGdsb3cvaGFsbyBiZWhpbmQgaWNvbiAtLT4NCiAgICA8Y2lyY2xlIGN4PSIzNiIgY3k9IjM2IiByPSIzNCIgZmlsbD0idXJsKCNnbG93R3JhZGllbnQpIiBvcGFjaXR5PSIwLjUiLz4NCiAgICANCiAgICA8IS0tIE1haW4gcHVycGxlIHJvdW5kZWQtc3F1YXJlIGJhY2tncm91bmQgLS0+DQogICAgPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iMTYiIGZpbGw9InVybCgjcHVycGxlR3JhZGllbnQpIiBmaWx0ZXI9InVybCgjcHJlbWl1bVNoYWRvdykiLz4NCiAgICANCiAgICA8IS0tIENhbWVyYSBib2R5ICh3aGl0ZSBvdXRsaW5lIHN0eWxlKSAtLT4NCiAgICA8cmVjdCB4PSIxNiIgeT0iMjIiIHdpZHRoPSIyNCIgaGVpZ2h0PSIxOCIgcng9IjIiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMi41Ii8+DQogICAgDQogICAgPCEtLSBDYW1lcmEgbGVucyAoY2lyY3VsYXIpIC0tPg0KICAgIDxjaXJjbGUgY3g9IjQ0IiBjeT0iMzEiIHI9IjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIvPg0KICAgIDxjaXJjbGUgY3g9IjQ0IiBjeT0iMzEiIHI9IjMuNSIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuNSIvPg0KICAgIA0KICAgIDwhLS0gTGlnaHRuaW5nIGJvbHQgYWNjZW50ICh0b3AgcmlnaHQpIC0tPg0KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ2LCAxMCkiPg0KICAgICAgPCEtLSBNYWluIGxpZ2h0bmluZyBzaGFwZSAtLT4NCiAgICAgIDxwYXRoIGQ9Ik0gNiAwIEwgMiA2IEwgNiA2IEwgMCAxNCBMIDggOCBMIDQgOCBaIiBmaWxsPSIjRkZENzAwIiBzdHJva2U9IiNGRjhBMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogICAgICA8IS0tIElubmVyIGhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgICA8cGF0aCBkPSJNIDQgMSBMIDMgNCBMIDUgNCBMIDEgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRUIzQiIgc3Ryb2tlLXdpZHRoPSIwLjgiIG9wYWNpdHk9IjAuNyIvPg0KICAgIDwvZz4NCiAgICANCiAgICA8IS0tIEdvbGRlbiBzcGFya2xlIGFjY2VudHMgLS0+DQogICAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMS41IiBmaWxsPSIjRkZENzAwIiBvcGFjaXR5PSIwLjkiLz4NCiAgICA8Y2lyY2xlIGN4PSI1OCIgY3k9IjE4IiByPSIxLjUiIGZpbGw9IiNGRkQ3MDAiIG9wYWNpdHk9IjAuOCIvPg0KICAgIDxjaXJjbGUgY3g9IjE2IiBjeT0iNTYiIHI9IjEiIGZpbGw9IiNGRkIzMUEiIG9wYWNpdHk9IjAuNyIvPg0KICA8L2c+DQogIA0KICA8IS0tIEZMSU5YWCBUZXh0IC0tPg0KICA8dGV4dCB4PSI4MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSI0MiIgZm9udC13ZWlnaHQ9IjkwMCIgZmlsbD0idXJsKCN0ZXh0R3JhZGllbnQpIiBsZXR0ZXItc3BhY2luZz0iMSI+DQogICAgRkxJTlhYDQogIDwvdGV4dD4NCiAgDQogIDwhLS0gVGV4dCBHcmFkaWVudCAtLT4NCiAgPGRlZnM+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJ0ZXh0R3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDA7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQjMxQTtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGOEEwMDtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICA8L2xpbmVhckdyYWRpZW50Pg0KICA8L2RlZnM+DQo8L3N2Zz4NCg==",u1=()=>{const t=hn(),[e,n]=O.useState(!1),r=()=>{n(!0),setTimeout(()=>{t("/login")},500)};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-4 flex justify-between items-center max-w-full",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:c1,alt:"Flinxx",className:"h-12",style:{width:"auto"}}),u.jsx("span",{className:"text-sm text-white/90 ml-2",children:" 3,247 online"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:r,className:"text-white font-bold px-6 py-2 rounded-lg transition transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 20px rgba(255, 139, 0, 0.3)"},onMouseEnter:i=>i.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)",onMouseLeave:i=>i.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)",children:"Start Now"})})]})}),u.jsx("div",{className:"relative z-10 min-h-[500px] flex items-center justify-center px-4 py-12",children:u.jsxs("div",{className:"text-center max-w-3xl",children:[u.jsxs("h1",{className:"text-6xl md:text-7xl font-black text-white mb-6 leading-tight",children:["Meet New People",u.jsx("br",{}),"Around the World"]}),u.jsx("p",{className:"text-xl text-white/90 mb-10",children:"Connect instantly with strangers through video chat"}),u.jsx("button",{onClick:r,disabled:e,className:`inline-flex items-center gap-2 px-8 py-4 text-lg font-bold rounded-lg transition-all transform hover:scale-105 mb-12 ${e?"cursor-not-allowed text-gray-700":"text-white"}`,style:e?{backgroundColor:"#9CA3AF"}:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 30px rgba(255, 139, 0, 0.4)"},onMouseEnter:i=>!e&&(i.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)"),onMouseLeave:i=>!e&&(i.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)"),children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""})," Starting Chat..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Start Chatting Now"]})}),u.jsx("p",{className:"text-white/80 text-sm",children:"Fast, simple video chats  Real users, real time"})]})}),u.jsx("div",{className:"relative z-10 px-4 py-16 bg-gradient-to-b from-transparent via-purple-600/50 to-purple-700",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0 shadow-lg",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Instant Connection"}),u.jsx("p",{className:"text-white/80 text-base",children:"Connect with random strangers in seconds. No waiting, no hassle."})]})]})}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-pink-400 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Global Community"}),u.jsx("p",{className:"text-white/80 text-base",children:"Meet people from all over the world. Make international friends."})]})]})}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:u.jsxs("div",{className:"flex items-start gap-6",children:[u.jsx("div",{className:"w-16 h-16 bg-cyan-400 rounded-2xl flex items-center justify-center text-4xl flex-shrink-0",children:""}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Safe & Verified"}),u.jsx("p",{className:"text-white/80 text-base",children:"Verified users, moderated content, and privacy protection."})]})]})})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-b from-purple-700 via-purple-600 to-purple-500",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-black text-white text-center mb-16",children:"How It Works"}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-12 border border-white/20",children:u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"1"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Sign Up"}),u.jsx("p",{className:"text-white/80 text-base",children:"Create your free account in seconds"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"2"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Start Video Chat"}),u.jsx("p",{className:"text-white/80 text-base",children:"Get matched with random strangers instantly"})]}),u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-3xl font-black text-white mb-4 shadow-lg",children:"3"}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:"Make Friends"}),u.jsx("p",{className:"text-white/80 text-base",children:"Chat, connect, and meet awesome people"})]})]})})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-b from-purple-500 via-purple-600 to-purple-700",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-5xl font-black text-white text-center mb-16",children:"Smart Matching Features"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-3xl mb-6 shadow-lg",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"One-Click Connect"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Connect with strangers instantly with just one click. No complicated setup needed."}),u.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-200 px-4 py-1 rounded-full text-sm font-semibold",children:"Free"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all",children:[u.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-3xl mb-6 shadow-lg",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"Auto-Matching"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Our intelligent algorithm matches you with compatible users based on interests and preferences."}),u.jsx("div",{className:"inline-block bg-blue-600/20 text-blue-200 px-4 py-1 rounded-full text-sm font-semibold",children:"Free"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:border-white/40 transition-all md:col-span-2",children:[u.jsx("div",{className:"w-14 h-14 bg-purple-400 rounded-xl flex items-center justify-center text-3xl mb-6",children:""}),u.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:"Gender Preference Filter"}),u.jsx("p",{className:"text-white/80 text-base mb-4",children:"Fine-tune your matching experience with optional gender preferences. Available in Premium."}),u.jsx("div",{className:"inline-block bg-purple-400/30 text-purple-200 px-4 py-1 rounded-full text-sm font-semibold border border-purple-400/50",children:" Premium Feature"})]})]})]})}),u.jsx("div",{className:"relative z-10 px-4 py-20 bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:u.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[u.jsx("h2",{className:"text-5xl md:text-6xl font-black text-white mb-6",children:"Ready to Meet New People?"}),u.jsx("p",{className:"text-xl text-white/90 mb-10",children:"Join thousands of users connecting right now"}),u.jsx("button",{onClick:r,disabled:e,className:`inline-flex items-center gap-3 px-10 py-4 text-xl font-bold rounded-lg transition-all transform hover:scale-105 ${e?"cursor-not-allowed text-gray-700":"text-white"}`,style:e?{backgroundColor:"#9CA3AF"}:{background:"linear-gradient(90deg, #FFB31A, #FF8A00)",boxShadow:"0 0 30px rgba(255, 139, 0, 0.4)"},onMouseEnter:i=>!e&&(i.target.style.background="linear-gradient(90deg, #FF9900, #FF6A00)"),onMouseLeave:i=>!e&&(i.target.style.background="linear-gradient(90deg, #FFB31A, #FF8A00)"),children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""})," Starting Chat..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Get Started Free"]})})]})})]})};class d1 extends Error{}d1.prototype.name="InvalidTokenError";const Jf="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Orange%20gradient%20background%20--%3e%3crect%20width='40'%20height='40'%20rx='8'%20fill='url(%23gradient)'%20/%3e%3c!--%20Video%20camera%20icon%20--%3e%3cg%20transform='translate(8,%208)'%3e%3c!--%20Camera%20body%20--%3e%3crect%20x='1'%20y='6'%20width='16'%20height='12'%20rx='1'%20fill='white'%20stroke='white'%20stroke-width='0.5'/%3e%3c!--%20Camera%20lens%20--%3e%3ccircle%20cx='17'%20cy='12'%20r='4'%20fill='none'%20stroke='white'%20stroke-width='1'/%3e%3ccircle%20cx='17'%20cy='12'%20r='2.5'%20fill='white'%20opacity='0.8'/%3e%3c!--%20Recording%20indicator%20dot%20--%3e%3ccircle%20cx='3'%20cy='3'%20r='1.5'%20fill='%23FF4444'/%3e%3c/g%3e%3c!--%20Gradient%20definition%20--%3e%3cdefs%3e%3clinearGradient%20id='gradient'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%23FF8C42;stop-opacity:1'%20/%3e%3cstop%20offset='100%25'%20style='stop-color:%23FF6B35;stop-opacity:1'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",h1="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%3e%3cpath%20fill='%234285F4'%20d='M22.56%2012.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26%201.37-1.04%202.53-2.21%203.31v2.77h3.57c2.08-1.92%203.28-4.74%203.28-8.09z'/%3e%3cpath%20fill='%2334A853'%20d='M12%2023c2.97%200%205.46-.98%207.28-2.66l-3.57-2.77c-.98.66-2.23%201.06-3.71%201.06-2.86%200-5.29-1.93-6.16-4.53H2.18v2.84C3.99%2020.53%207.7%2023%2012%2023z'/%3e%3cpath%20fill='%23FBBC05'%20d='M5.84%2014.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43%208.55%201%2010.22%201%2012s.43%203.45%201.18%204.93l2.85-2.22.81-.62z'/%3e%3cpath%20fill='%23EA4335'%20d='M12%205.38c1.62%200%203.06.56%204.21%201.64l3.15-3.15C17.45%202.09%2014.97%201%2012%201%207.7%201%203.99%203.47%202.18%207.07l3.66%202.84c.87-2.6%203.3-4.53%206.16-4.53z'/%3e%3c/svg%3e",f1=({isSigningIn:t})=>{const e=()=>{const n="https://flinxx-backend.onrender.com";console.log(" Redirecting to Google OAuth:",`${n}/auth/google`),window.location.href=`${n}/auth/google`};return u.jsxs("button",{onClick:e,disabled:t,className:`w-full py-3 px-6 rounded-full transition-all text-lg font-bold flex items-center justify-center gap-3 ${t?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-white hover:bg-gray-50 text-black shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:[u.jsx("img",{src:h1,alt:"Google",className:"w-6 h-6"}),"Continue with Google"]})},p1=()=>{const t=hn(),[e,n]=O.useState(!1),[r,i]=O.useState(null);O.useEffect(()=>{(async()=>{try{const l=await cP();l&&(console.log(" Login successful:",l.email),t("/chat"))}catch(l){console.error(" Login check failed:",l)}})()},[t]);const s=async()=>{n(!0),i(null);try{console.log(" Starting Facebook login..."),console.log("Facebook App ID:","863917229498555"),console.log("Redirect URL:","https://flinx-8a05e.firebaseapp.com/__/auth/handler"),await lP()}catch(o){console.error(" Facebook login error:",o),i("Facebook login failed. Please try again."),n(!1)}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-black text-white mb-4",children:"Welcome to Flinxx"}),u.jsx("p",{className:"text-lg text-white/80",children:"Connect with strangers instantly"}),u.jsx("p",{className:"text-sm text-white/70 mt-2",children:"Sign up to get started"})]}),r&&u.jsx("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg",children:u.jsx("p",{className:"text-red-200 text-sm",children:r})}),u.jsxs("div",{className:"space-y-4",children:[e&&u.jsxs("button",{disabled:!0,className:"w-full bg-gray-400 cursor-not-allowed text-gray-700 font-bold py-3 px-6 rounded-full transition-all text-lg flex items-center justify-center gap-2",children:[u.jsx("span",{className:"animate-spin",children:""})," Signing in..."]}),u.jsx(f1,{isSigningIn:e}),u.jsxs("button",{onClick:s,disabled:e,className:`w-full py-3 px-6 rounded-full transition-all text-lg font-bold flex items-center justify-center gap-3 ${e?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:[u.jsx("span",{className:"text-xl",children:"f"})," Continue with Facebook"]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsxs("p",{className:"text-xs text-white/60",children:["By signing in, you agree to our"," ",u.jsx("a",{href:"#",className:"text-white/80 hover:text-white underline",children:"Terms of Service"})," ","and"," ",u.jsx("a",{href:"#",className:"text-white/80 hover:text-white underline",children:"Privacy Policy"})]})}),u.jsxs("div",{className:"mt-10 flex flex-col items-center gap-3 text-white/80 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"Instant connection with strangers"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"100% Anonymous & Safe"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"High-quality Video Chat"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:""}),u.jsx("p",{children:"Connect Worldwide"})]})]})]})})},kn=Object.create(null);kn.open="0";kn.close="1";kn.ping="2";kn.pong="3";kn.message="4";kn.upgrade="5";kn.noop="6";const fl=Object.create(null);Object.keys(kn).forEach(t=>{fl[kn[t]]=t});const dh={type:"error",data:"parser error"},mE=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",gE=typeof ArrayBuffer=="function",yE=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Xf=({type:t,data:e},n,r)=>mE&&e instanceof Blob?n?r(e):_y(e,r):gE&&(e instanceof ArrayBuffer||yE(e))?n?r(e):_y(new Blob([e]),r):r(kn[t]+(e||"")),_y=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Ey(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Gu;function m1(t,e){if(mE&&t.data instanceof Blob)return t.data.arrayBuffer().then(Ey).then(e);if(gE&&(t.data instanceof ArrayBuffer||yE(t.data)))return e(Ey(t.data));Xf(t,!1,n=>{Gu||(Gu=new TextEncoder),e(Gu.encode(n))})}const Iy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Iy.length;t++)Qs[Iy.charCodeAt(t)]=t;const g1=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),p=new Uint8Array(h);for(r=0;r<n;r+=4)s=Qs[t.charCodeAt(r)],o=Qs[t.charCodeAt(r+1)],l=Qs[t.charCodeAt(r+2)],c=Qs[t.charCodeAt(r+3)],p[i++]=s<<2|o>>4,p[i++]=(o&15)<<4|l>>2,p[i++]=(l&3)<<6|c&63;return h},y1=typeof ArrayBuffer=="function",Zf=(t,e)=>{if(typeof t!="string")return{type:"message",data:vE(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:v1(t.substring(1),e)}:fl[n]?t.length>1?{type:fl[n],data:t.substring(1)}:{type:fl[n]}:dh},v1=(t,e)=>{if(y1){const n=g1(t);return vE(n,e)}else return{base64:!0,data:t}},vE=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},wE="",w1=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{Xf(s,!1,l=>{r[o]=l,++i===n&&e(r.join(wE))})})},_1=(t,e)=>{const n=t.split(wE),r=[];for(let i=0;i<n.length;i++){const s=Zf(n[i],e);if(r.push(s),s.type==="error")break}return r};function E1(){return new TransformStream({transform(t,e){m1(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let qu;function Ga(t){return t.reduce((e,n)=>e+n.length,0)}function qa(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function I1(t,e){qu||(qu=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Ga(n)<1)break;const c=qa(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ga(n)<2)break;const c=qa(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ga(n)<8)break;const c=qa(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),p=h.getUint32(0);if(p>Math.pow(2,21)-1){l.enqueue(dh);break}i=p*Math.pow(2,32)+h.getUint32(4),r=3}else{if(Ga(n)<i)break;const c=qa(n,i);l.enqueue(Zf(s?c:qu.decode(c),e)),r=0}if(i===0||i>t){l.enqueue(dh);break}}}})}const _E=4;function Ve(t){if(t)return x1(t)}function x1(t){for(var e in Ve.prototype)t[e]=Ve.prototype[e];return t}Ve.prototype.on=Ve.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Ve.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Ve.prototype.off=Ve.prototype.removeListener=Ve.prototype.removeAllListeners=Ve.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Ve.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Ve.prototype.emitReserved=Ve.prototype.emit;Ve.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ve.prototype.hasListeners=function(t){return!!this.listeners(t).length};const $c=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),zt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),S1="arraybuffer";function EE(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const T1=zt.setTimeout,C1=zt.clearTimeout;function Wc(t,e){e.useNativeTimers?(t.setTimeoutFn=T1.bind(zt),t.clearTimeoutFn=C1.bind(zt)):(t.setTimeoutFn=zt.setTimeout.bind(zt),t.clearTimeoutFn=zt.clearTimeout.bind(zt))}const k1=1.33;function R1(t){return typeof t=="string"?A1(t):Math.ceil((t.byteLength||t.size)*k1)}function A1(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function IE(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function b1(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function N1(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class P1 extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class ep extends Ve{constructor(e){super(),this.writable=!1,Wc(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new P1(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Zf(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=b1(e);return n.length?"?"+n:""}}class O1 extends ep{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};_1(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,w1(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=IE()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let xE=!1;try{xE=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const D1=xE;function j1(){}class L1 extends O1{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Qi=class pl extends Ve{constructor(e,n,r){super(),this.createRequest=e,Wc(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=EE(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=pl.requestsCount++,pl.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=j1,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete pl.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Qi.requestsCount=0;Qi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",xy);else if(typeof addEventListener=="function"){const t="onpagehide"in zt?"pagehide":"unload";addEventListener(t,xy,!1)}}function xy(){for(let t in Qi.requests)Qi.requests.hasOwnProperty(t)&&Qi.requests[t].abort()}const M1=function(){const t=SE({xdomain:!1});return t&&t.responseType!==null}();class V1 extends L1{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=M1&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Qi(SE,this.uri(),e)}}function SE(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||D1))return new XMLHttpRequest}catch{}if(!e)try{return new zt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const TE=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class F1 extends ep{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=TE?{}:EE(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Xf(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&$c(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=IE()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Ku=zt.WebSocket||zt.MozWebSocket;class U1 extends F1{createSocket(e,n,r){return TE?new Ku(e,n,r):n?new Ku(e,n):new Ku(e)}doWrite(e,n){this.ws.send(n)}}class B1 extends ep{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=I1(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=E1();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&$c(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const z1={websocket:U1,webtransport:B1,polling:V1},$1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,W1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hh(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=$1.exec(t||""),s={},o=14;for(;o--;)s[W1[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=H1(s,s.path),s.queryKey=G1(s,s.query),s}function H1(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function G1(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const fh=typeof addEventListener=="function"&&typeof removeEventListener=="function",ml=[];fh&&addEventListener("offline",()=>{ml.forEach(t=>t())},!1);class xr extends Ve{constructor(e,n){if(super(),this.binaryType=S1,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=hh(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=hh(n.host).host);Wc(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=N1(this.opts.query)),fh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ml.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=_E,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&xr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",xr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=R1(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,$c(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(xr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),fh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=ml.indexOf(this._offlineEventListener);r!==-1&&ml.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}xr.protocol=_E;class q1 extends xr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;xr.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",m=>{if(!r)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;xr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const w=new Error("probe error");w.transport=n.name,this.emitReserved("upgradeError",w)}}))};function s(){r||(r=!0,p(),n.close(),n=null)}const o=m=>{const w=new Error("probe error: "+m);w.transport=n.name,s(),this.emitReserved("upgradeError",w)};function l(){o("transport closed")}function c(){o("socket closed")}function h(m){n&&m.name!==n.name&&s()}const p=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",h)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let K1=class extends q1{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>z1[i]).filter(i=>!!i)),super(e,r)}};function Q1(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=hh(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const Y1=typeof ArrayBuffer=="function",J1=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,CE=Object.prototype.toString,X1=typeof Blob=="function"||typeof Blob<"u"&&CE.call(Blob)==="[object BlobConstructor]",Z1=typeof File=="function"||typeof File<"u"&&CE.call(File)==="[object FileConstructor]";function tp(t){return Y1&&(t instanceof ArrayBuffer||J1(t))||X1&&t instanceof Blob||Z1&&t instanceof File}function gl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(gl(t[n]))return!0;return!1}if(tp(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return gl(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&gl(t[n]))return!0;return!1}function e2(t){const e=[],n=t.data,r=t;return r.data=ph(n,e),r.attachments=e.length,{packet:r,buffers:e}}function ph(t,e){if(!t)return t;if(tp(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=ph(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=ph(t[r],e));return n}return t}function t2(t,e){return t.data=mh(t.data,e),delete t.attachments,t}function mh(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=mh(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=mh(t[n],e));return t}const n2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],r2=5;var ne;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ne||(ne={}));class i2{constructor(e){this.replacer=e}encode(e){return(e.type===ne.EVENT||e.type===ne.ACK)&&gl(e)?this.encodeAsBinary({type:e.type===ne.EVENT?ne.BINARY_EVENT:ne.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ne.BINARY_EVENT||e.type===ne.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=e2(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Sy(t){return Object.prototype.toString.call(t)==="[object Object]"}class np extends Ve{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===ne.BINARY_EVENT;r||n.type===ne.BINARY_ACK?(n.type=r?ne.EVENT:ne.ACK,this.reconstructor=new s2(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(tp(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(ne[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ne.BINARY_EVENT||r.type===ne.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(np.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ne.CONNECT:return Sy(n);case ne.DISCONNECT:return n===void 0;case ne.CONNECT_ERROR:return typeof n=="string"||Sy(n);case ne.EVENT:case ne.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&n2.indexOf(n[0])===-1);case ne.ACK:case ne.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class s2{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=t2(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const o2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:np,Encoder:i2,get PacketType(){return ne},protocol:r2},Symbol.toStringTag,{value:"Module"}));function en(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const a2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class kE extends Ve{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[en(e,"open",this.onopen.bind(this)),en(e,"packet",this.onpacket.bind(this)),en(e,"error",this.onerror.bind(this)),en(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(a2.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:ne.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const p=this.ids++,m=n.pop();this._registerAckCallback(p,m),o.id=p}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ne.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ne.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ne.EVENT:case ne.BINARY_EVENT:this.onevent(e);break;case ne.ACK:case ne.BINARY_ACK:this.onack(e);break;case ne.DISCONNECT:this.ondisconnect();break;case ne.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:ne.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ne.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function _s(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}_s.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};_s.prototype.reset=function(){this.attempts=0};_s.prototype.setMin=function(t){this.ms=t};_s.prototype.setMax=function(t){this.max=t};_s.prototype.setJitter=function(t){this.jitter=t};class gh extends Ve{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Wc(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new _s({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||o2;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new K1(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=en(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=en(n,"error",s);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(en(e,"ping",this.onping.bind(this)),en(e,"data",this.ondata.bind(this)),en(e,"error",this.onerror.bind(this)),en(e,"close",this.onclose.bind(this)),en(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){$c(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new kE(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const $s={};function yl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Q1(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=$s[i]&&s in $s[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return l?c=new gh(r,e):($s[i]||($s[i]=new gh(r,e)),c=$s[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(yl,{Manager:gh,Socket:kE,io:yl,connect:yl});const RE="https://flinxx-backend.onrender.com";console.log(" Socket.IO connecting to:",RE);const Z=yl(RE,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:10,transports:["websocket","polling"],secure:!1,rejectUnauthorized:!1,forceNew:!1,withCredentials:!0,upgrade:!0,rememberUpgrade:!1,multiplex:!0,timeout:6e4,extraHeaders:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}});Z.on("connect",()=>{console.log(" Socket connected successfully! ID:",Z.id),console.log(" Transport method:",Z.io.engine.transport.name)});Z.on("connect_error",t=>{console.error(" Socket connection error:",t.message||t),console.error(" Error details:",t),Z.io.engine.transport.name==="polling"&&console.log(" Retrying with websocket...")});Z.on("error",t=>{console.error(" Socket error:",t)});Z.on("disconnect",t=>{console.log(" Socket disconnected. Reason:",t),console.log(" Attempting to reconnect...")});Z.on("connect_timeout",()=>{console.error(" Socket connection timeout")});const l2=()=>{console.log(`
 `),console.log(" [ICE SERVERS CONFIGURATION]"),console.log(" "),console.log(" STUN Server:"),console.log("   - stun:global.xirsys.net"),console.log("     Purpose: NAT detection, find public IP"),console.log("     Status: Should work on all networks"),console.log(" "),console.log(" TURN Servers (for relaying if P2P blocked):"),console.log("   - turn:global.xirsys.net:3478?transport=udp"),console.log("     Status: Blocked if ISP blocks UDP port 3478"),console.log("   - turn:global.xirsys.net:3478?transport=tcp"),console.log("     Status: Blocked if ISP blocks TCP port 3478"),console.log("   - turns:global.xirsys.net:5349?transport=tcp"),console.log("     Status: Blocked if ISP blocks TLS port 5349"),console.log(" "),console.log(" Credentials:"),console.log("   - Username: nkhlydv"),console.log("   - Credential: a8e244b8-cf5b-11f0-8771-0242ac140002"),console.log(" "),console.log(" If all TURN candidates fail with error 701:"),console.log("    Configuration is CORRECT"),console.log("    STUN works (can find your IP)"),console.log("    ISP/Network is blocking TURN ports"),console.log("    Try VPN or different network to test"),console.log(` 
`)},c2=()=>[{urls:["stun:global.xirsys.net"]},{urls:["turn:global.xirsys.net:3478?transport=udp","turn:global.xirsys.net:3478?transport=tcp","turns:global.xirsys.net:5349?transport=tcp"],username:"nkhlydv",credential:"a8e244b8-cf5b-11f0-8771-0242ac140002"}],u2=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}h ${n}m ${r}s`:n>0?`${n}m ${r}s`:`${r}s`},d2=({isOpen:t,onClose:e})=>{const[n,r]=O.useState("premium"),[i,s]=O.useState("lite");if(!t)return null;const o=[{id:"lite",name:"LITE",emoji:"",price:"69",duration:"1 Day",features:["Unlimited Filters","Gender Filter: 50/day","10 Match Preferences","Ads Enabled","No Boost"]},{id:"prime",name:"PRIME",emoji:"",price:"199",duration:"15 Days",features:["Unlimited Filters","Gender Filter: 150/day","Full Match Preferences","No Ads","2x Profile Boost","Priority Match Queue"]},{id:"ultra",name:"ULTRA",emoji:"",price:"399",duration:"30 Days",features:["Unlimited Filters","Unlimited Gender Filter","Full Match Preferences","No Ads","5x Profile Boost","Ultra Priority Queue","Ultra Badge","Double Visibility"]}],l=[{id:"blue-tick",name:"Blue Tick",emoji:"",price:"69",features:["Verification badge","Trust boost","Status indicator"]},{id:"chat-themes",name:"Chat Themes",emoji:"",price:"49",features:["Unlock themes","Custom colors","Personal style"]},{id:"match-boost",name:"Match Boost",emoji:"",price:"39",features:["30 min visibility boost","Increased reach","More matches"]},{id:"profile-ring",name:"Profile Ring",emoji:"",price:"79",features:["Colored profile ring","Stand out","Eye-catching design"]},{id:"profile-highlight",name:"Profile Highlight",emoji:"",price:"99",features:["24h highlight","Top search visibility","Premium placement"]}],c=o.find(h=>h.id===i);return u.jsx("div",{className:"premium-overlay",onClick:e,children:u.jsxs("div",{className:"premium-box",onClick:h=>h.stopPropagation(),children:[u.jsx("button",{className:"close-btn",onClick:e,children:""}),u.jsx("h2",{className:"premium-title",children:"Flinxx Subscriptions"}),u.jsxs("div",{className:"main-tabs-container",children:[u.jsx("button",{className:`main-tab ${n==="premium"?"active":""}`,onClick:()=>r("premium"),children:"Premium Plans"}),u.jsx("button",{className:`main-tab ${n==="flex"?"active":""}`,onClick:()=>r("flex"),children:"Flex Plans"})]}),n==="premium"&&u.jsxs("div",{className:"tab-content",children:[u.jsx("div",{className:"premium-tabs-container",children:o.map(h=>u.jsxs("button",{className:`premium-tab ${i===h.id?"active":""}`,onClick:()=>s(h.id),children:[u.jsx("span",{className:"tab-emoji",children:h.emoji}),u.jsx("span",{className:"tab-name",children:h.name}),u.jsx("span",{className:"tab-price",children:h.price})]},h.id))}),c&&u.jsxs("div",{className:"premium-card",children:[u.jsx("div",{className:"card-header",children:u.jsxs("h3",{children:[c.emoji," ",c.name]})}),u.jsxs("div",{className:"card-price",children:[u.jsx("div",{className:"price-amount",children:c.price}),u.jsxs("div",{className:"price-duration",children:["/ ",c.duration]})]}),u.jsx("ul",{className:"card-features",children:c.features.map((h,p)=>u.jsxs("li",{children:[u.jsx("span",{className:"feature-check",children:""}),u.jsx("span",{className:"feature-text",children:h})]},p))}),u.jsx("button",{className:"card-subscribe-btn",children:"Subscribe Now"})]},i)]}),n==="flex"&&u.jsxs("div",{className:"tab-content",children:[u.jsx("p",{className:"flex-subtitle",children:"Choose individual features"}),u.jsx("div",{className:"flex-section flex-wrapper",children:u.jsx("div",{className:"flex-plans-box",children:u.jsx("div",{className:"flex-plans-container",children:l.map(h=>u.jsxs("div",{className:"flex-card",children:[u.jsxs("div",{className:"flex-item-header",children:[u.jsx("span",{className:"flex-emoji",children:h.emoji}),u.jsx("h4",{children:h.name})]}),u.jsx("div",{className:"flex-item-price",children:h.price}),u.jsx("ul",{className:"flex-item-features",children:h.features.map((p,m)=>u.jsxs("li",{children:[u.jsx("span",{className:"flex-check",children:""}),u.jsx("span",{children:p})]},m))}),u.jsx("button",{className:"flex-item-btn",children:"Add Now"})]},h.id))})})})]}),u.jsx("div",{className:"premium-footer",children:u.jsx("p",{children:"Recurring billing. Cancel anytime. No hidden charges."})})]})})},h2=({isOpen:t,onClose:e,currentGender:n="both",onOpenPremium:r})=>{const[i,s]=O.useState(n);if(!t)return null;const o=()=>{console.log("Gender filter saved:",i),e()},l=()=>{console.log("Join clicked - opening premium modal"),r(),e()};return u.jsx("div",{className:"gender-filter-overlay",onClick:e,children:u.jsxs("div",{className:"gender-filter-modal",onClick:c=>c.stopPropagation(),children:[u.jsx("button",{className:"gender-close-btn",onClick:e,children:""}),u.jsxs("div",{className:"gender-premium-section",children:[u.jsx("div",{className:"premium-icon",children:""}),u.jsxs("div",{className:"premium-content",children:[u.jsx("h3",{children:"Flinxx Prime"}),u.jsx("p",{children:"Get More Gender Filters"})]}),u.jsx("button",{className:"join-btn",onClick:l,children:"Join"})]}),u.jsxs("div",{className:"gender-section",children:[u.jsx("div",{className:"gender-icon",children:""}),u.jsx("h2",{children:"Gender"}),u.jsxs("div",{className:"gender-options",children:[u.jsxs("button",{className:`gender-option ${i==="girls"?"selected":""}`,onClick:()=>s("girls"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Girls Only"})]}),u.jsxs("button",{className:`gender-option ${i==="guys"?"selected":""}`,onClick:()=>s("guys"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Guys Only"})]}),u.jsxs("button",{className:`gender-option ${i==="both"?"selected":""}`,onClick:()=>s("both"),children:[u.jsx("div",{className:"gender-emoji",children:""}),u.jsx("div",{className:"gender-label",children:"Both"})]})]})]}),u.jsxs("div",{className:"gender-footer",children:[u.jsx("button",{className:"save-btn",onClick:o,children:"Save"}),u.jsx("button",{className:"filter-btn",children:""})]})]})})},f2=({isOpen:t,onClose:e,onOpenPremium:n,onReinitializeCamera:r})=>{const i=hn(),{user:s}=O.useContext(ys)||{},[o,l]=O.useState(!1),[c,h]=O.useState({name:"",email:"",picture:"",googleId:"",location:"",gender:"",birthday:"",tokens:0,gems:0}),[p,m]=O.useState(!1),[w,k]=O.useState(null);O.useEffect(()=>{t&&s&&x()},[t,s]),O.useEffect(()=>{!w&&t&&N()},[t]);const N=async()=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async L=>{var g,I,T;const{latitude:F,longitude:E}=L.coords;try{const b=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${F}&lon=${E}`)).json(),C=((g=b.address)==null?void 0:g.city)||((I=b.address)==null?void 0:I.town)||"Unknown",qe=((T=b.address)==null?void 0:T.country)||"Unknown";k(`${C}, ${qe}`),h(Rt=>({...Rt,location:`${C}, ${qe}`}))}catch(R){console.log("Reverse geocoding error:",R)}},L=>{console.log("Geolocation error:",L),A()}):A()}catch(L){console.log("Location detection error:",L)}},A=async()=>{try{const F=await(await fetch("https://ipapi.co/json/")).json(),E=`${F.city}, ${F.country_name}`;k(E),h(g=>({...g,location:E}))}catch(L){console.log("IP API error:",L)}},x=async()=>{var L;if(s)try{h(E=>({...E,name:s.name||"User",email:s.email||"",picture:s.picture||"",googleId:s.googleId||""}));const F=localStorage.getItem("token");if(F){console.log("[ProfileModal] Fetching fresh user profile from backend");const g=await fetch("https://flinxx-backend.onrender.com/api/profile",{method:"GET",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"}});if(g.ok){const I=await g.json();console.log("[ProfileModal]  Fetched profile data from backend:",(L=I.user)==null?void 0:L.email),I.success&&I.user&&h(T=>({...T,name:I.user.name||"User",email:I.user.email||"",picture:I.user.picture||"",googleId:I.user.googleId||"",gender:I.user.gender||"Not set",birthday:I.user.birthday||"Not set"}))}else console.warn("[ProfileModal]  Failed to fetch profile from backend:",g.status)}else console.log("[ProfileModal]  No token found in localStorage")}catch(F){console.error("[ProfileModal]  Error loading user profile:",F)}},_=L=>{const{name:F,value:E}=L.target;h(g=>({...g,[F]:E}))},y=L=>{var E;const F=(E=L.target.files)==null?void 0:E[0];if(F){const g=new FileReader;g.onloadend=()=>{h(I=>({...I,picture:g.result}))},g.readAsDataURL(F)}},S=async()=>{m(!0);try{console.log("[PROFILE SAVE] Starting profile save process"),console.log("[PROFILE SAVE] Profile data:",c);const L=(s==null?void 0:s.googleId)||localStorage.getItem("userId");if(console.log("[PROFILE SAVE] User ID:",L),!L){console.error("[PROFILE SAVE] Error: No user ID found"),alert("Error: User ID not found. Please login again."),m(!1);return}const F={userId:L,birthday:c.birthday||new Date().toISOString().split("T")[0],gender:c.gender||"Not set"};console.log("[PROFILE SAVE] Request body:",JSON.stringify(F)),console.log("[PROFILE SAVE] Required fields check:"),console.log("  - userId:",!!F.userId),console.log("  - birthday:",!!F.birthday),console.log("  - gender:",!!F.gender);const E=localStorage.getItem("token");console.log("[PROFILE SAVE] Token present:",!!E),E||console.warn("[PROFILE SAVE] Warning: No auth token found");const g="https://flinxx-backend.onrender.com";console.log("[PROFILE SAVE] Backend URL:",g),console.log("[PROFILE SAVE] Making API call to /api/users/complete-profile");const I=await fetch(`${g}/api/users/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json",...E&&{Authorization:`Bearer ${E}`}},body:JSON.stringify(F)});if(console.log("[PROFILE SAVE] Response status:",I.status),!I.ok){const R=await I.json();console.error("[PROFILE SAVE] Error response:",R),alert(`Failed to save profile: ${R.error||"Unknown error"}`),m(!1);return}const T=await I.json();console.log("[PROFILE SAVE]  Profile saved successfully:",T),localStorage.setItem("userProfile",JSON.stringify(F)),l(!1),console.log("[PROFILE SAVE] Profile saved successfully"),console.log("[PROFILE SAVE] Closing ProfileModal..."),e(),alert("Profile updated successfully!"),console.log(" [ProfileModal] Scheduling camera re-init with 500ms delay to allow modal unmount"),typeof r=="function"?setTimeout(()=>{console.log(`
 [ProfileModal] 500ms delay complete, reinitializing camera now`),console.log(" [ProfileModal] Calling onReinitializeCamera()"),r().then(R=>{R?console.log(" [ProfileModal]  Camera reinitialized successfully after profile save"):console.warn(" [ProfileModal]  Camera reinitialization returned false")}).catch(R=>{console.error(" [ProfileModal]  Error calling reinitializeCamera:",R)})},500):console.warn(" [ProfileModal]  onReinitializeCamera callback not provided")}catch(L){console.error("[PROFILE SAVE] Error:",L),console.error("[PROFILE SAVE] Error message:",L.message),console.error("[PROFILE SAVE] Error stack:",L.stack),alert("Failed to save profile: "+L.message)}finally{m(!1)}},D=async()=>{try{await QC(Fo),localStorage.removeItem("userInfo"),localStorage.removeItem("userProfile"),i("/login")}catch(L){console.error("Sign out error:",L)}};return t?u.jsx("div",{className:"profile-modal-overlay",onClick:e,children:u.jsxs("div",{className:"profile-modal-container",onClick:L=>L.stopPropagation(),children:[u.jsx("button",{className:"profile-modal-close",onClick:e,children:""}),u.jsxs("div",{className:"profile-header",children:[u.jsxs("div",{className:"profile-picture-container",children:[u.jsx("img",{src:c.picture||"https://via.placeholder.com/120",alt:"Profile",className:"profile-picture"}),o&&u.jsxs("label",{className:"photo-upload-label",children:[u.jsx("input",{type:"file",accept:"image/*",onChange:y,style:{display:"none"}}),""]})]}),o?u.jsx("input",{type:"text",name:"name",value:c.name,onChange:_,className:"profile-input-name",placeholder:"Name"}):u.jsx("h2",{className:"profile-name",children:c.name}),u.jsxs("p",{className:"profile-uid",children:["ID: ",c.googleId||"N/A"]})]}),u.jsxs("div",{className:"profile-premium-section",onClick:n,style:{cursor:"pointer"},children:[u.jsx("div",{className:"premium-badge",children:" Flinxx Premium"}),u.jsx("p",{className:"premium-description",children:"Unlock premium features"})]}),u.jsxs("div",{className:"profile-details",children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Tokens"}),u.jsx("span",{className:"detail-value",children:c.tokens})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gems"}),u.jsx("span",{className:"detail-value",children:c.gems})]}),o?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Location"}),u.jsx("input",{type:"text",name:"location",value:c.location,onChange:_,className:"profile-input-small"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gender"}),u.jsxs("select",{name:"gender",value:c.gender,onChange:_,className:"profile-input-small",children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Birthday"}),u.jsx("input",{type:"date",name:"birthday",value:c.birthday?c.birthday.slice(0,10):"",onChange:_,className:"profile-input-small text-black focus:text-black !text-black [&::-webkit-datetime-edit]:text-black [&::-webkit-datetime-edit-year-field]:text-black [&::-webkit-datetime-edit-month-field]:text-black [&::-webkit-datetime-edit-day-field]:text-black"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Location"}),u.jsx("span",{className:"detail-value",children:c.location||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Gender"}),u.jsx("span",{className:"detail-value",children:c.gender||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:" Birthday"}),u.jsx("span",{className:"detail-value",children:c.birthday||"Not set"})]})]})]}),u.jsx("div",{className:"profile-actions",children:o?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-save",onClick:S,disabled:p,children:p?"Saving...":"Save Changes"}),u.jsx("button",{className:"btn-cancel",onClick:()=>{l(!1),x()},children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-edit",onClick:()=>l(!0),children:" Edit Profile"}),u.jsx("button",{className:"btn-more",children:" More"})]})}),u.jsx("button",{className:"btn-sign-out",onClick:D,children:"Sign Out"})]})}):null},p2=({isOpen:t,onClose:e})=>{const[n,r]=O.useState([{id:1,username:"Up ke ",name:"Up ke",location:"National Capital Territory of Delhi",duration:"00:05",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:2,username:"Loup ",name:"Loup",location:"Algeria",duration:"00:06",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:3,username:"Nish ",name:"Nish",location:"Maharashtra",duration:"00:04",date:"11/27/2025",time:"9:24PM",avatar:"",liked:!1},{id:4,username:"Priya ",name:"Priya",location:"Gujarat",duration:"00:02",date:"11/27/2025",time:"9:23PM",avatar:"M",liked:!1},{id:5,username:"pagbigyamnmako ",name:"pagbigyamnmako",location:"Philippines",duration:"00:08",date:"11/27/2025",time:"9:23PM",avatar:"",liked:!1}]),i=o=>{r(n.map(l=>l.id===o?{...l,liked:!l.liked}:l))},s=o=>{r(n.filter(l=>l.id!==o))};return t?u.jsx("div",{className:"match-history-overlay",onClick:e,children:u.jsxs("div",{className:"match-history-container",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"match-history-header",children:[u.jsx("h2",{children:"Match History"}),u.jsx("button",{className:"match-history-close",onClick:e,children:""})]}),u.jsx("div",{className:"match-history-list",children:n.length===0?u.jsxs("div",{className:"match-history-empty",children:[u.jsx("p",{children:"No match history yet"}),u.jsx("p",{className:"match-history-empty-sub",children:"Start video chatting to build your history!"})]}):n.map(o=>u.jsxs("div",{className:"match-card",children:[u.jsxs("div",{className:"match-card-date",children:[u.jsxs("div",{className:"match-card-datetime",children:[u.jsx("span",{className:"match-date",children:o.date}),u.jsx("span",{className:"match-time",children:o.time})]}),u.jsxs("div",{className:"match-duration",children:[" ",o.duration]})]}),u.jsxs("div",{className:"match-card-user",children:[u.jsx("div",{className:"match-card-avatar",children:o.avatar==="M"?u.jsx("div",{className:"avatar-initial",children:"M"}):u.jsx("span",{children:o.avatar})}),u.jsxs("div",{className:"match-card-info",children:[u.jsx("p",{className:"match-card-name",children:o.name}),u.jsxs("p",{className:"match-card-location",children:[" ",o.location]})]})]}),u.jsxs("div",{className:"match-card-actions",children:[u.jsx("button",{className:`action-btn like-btn ${o.liked?"liked":""}`,onClick:()=>i(o.id),title:"Like this match",children:""}),u.jsx("button",{className:"action-btn delete-btn",onClick:()=>s(o.id),title:"Delete from history",children:""})]})]},o.id))})]})}):null},Qu=({currentUser:t,onProfileClick:e,onPremiumClick:n,onMatchHistoryClick:r,isFixedPosition:i=!1})=>{const s=i?{position:"fixed",top:"12px",right:"24px",zIndex:999999}:{},o=i?"flex items-center gap-4":"top-right-icons";return u.jsxs("div",{className:o,style:s,children:[u.jsx("div",{className:"icon-circle",title:"Profile",onClick:e,style:{cursor:"pointer"},children:t!=null&&t.picture?u.jsx("img",{src:t.picture,alt:"Profile"}):""}),u.jsx("div",{className:"icon-circle",title:"Search",onClick:()=>console.log("Search clicked"),children:""}),u.jsx("div",{className:"icon-circle",title:"Messages",onClick:()=>console.log("Messages clicked"),children:""}),u.jsx("div",{className:"icon-circle",title:"Flinx Premium",onClick:n,children:""}),u.jsx("div",{className:"icon-circle",title:"Match History",onClick:r,children:""})]})};console.log(" CHAT BUILD: 2025-12-08T16:00:00Z - Fresh clean bundle - TDZ error FIXED");const m2=()=>{var wi;console.log(" CHAT COMPONENT LOADED - BUILD: 895cedd (temporal deadzone fix - useRef(null))");const t=hn(),e=zc(),{user:n}=O.useContext(ys)||{},[r,i]=O.useState(null),[s,o]=O.useState(!1);O.useEffect(()=>{const M=new URLSearchParams(e.search).get("view");i(M),o(M==="home"),console.log("[Chat] Location search params:",e.search),console.log("[Chat] view parameter:",M),console.log("[Chat] shouldStartAsIntro:",M==="home")},[e.search]);const l=O.useRef(null),c=O.useRef(null),h=O.useRef(null),p=O.useRef(null),[m,w]=O.useState(null);O.useEffect(()=>{const V=n||{googleId:"guest_"+Math.random().toString(36).substring(2,9),name:"Guest User",email:"guest@flinxx.local",picture:null};w(V),p.current||(p.current=V.googleId||V.id,console.log(" USER ID INITIALIZED (ONE TIME):",p.current)),h.current||(h.current=V)},[n]);const k=O.useRef(null),[N,A]=O.useState(!1);O.useEffect(()=>()=>{k.current&&clearInterval(k.current)},[]);const x=O.useRef(null),_=O.useRef(null),y=O.useRef(null),S=O.useRef(null);O.useEffect(()=>{var V;console.log(" Refs initialized:"),console.log("   localVideoRef.current exists:",!!x.current),console.log("   localVideoRef.current in DOM:",(V=x.current)!=null&&V.parentElement?"YES":"NO"),console.log("   remoteVideoRef.current exists:",!!_.current),console.log("   localStreamRef.current exists:",!!y.current)},[]),O.useEffect(()=>{const V=setInterval(()=>{x.current&&_.current&&(console.log(" VIDEO REF STATUS CHECK:"),console.log("   Local video ref:",{exists:!!x.current,inDOM:!!x.current.parentElement,hasStream:!!x.current.srcObject,paused:x.current.paused,playing:!x.current.paused,readyState:x.current.readyState}),console.log("   Remote video ref:",{exists:!!_.current,inDOM:!!_.current.parentElement,hasStream:!!_.current.srcObject,paused:_.current.paused,playing:!_.current.paused,readyState:_.current.readyState}))},5e3);return()=>clearInterval(V)},[]);const[D,L]=O.useState(!1),[F,E]=O.useState(!1),[g,I]=O.useState(!1),[T,R]=O.useState(!1),[b,C]=O.useState(null),[qe,Rt]=O.useState(0),[Pr,tt]=O.useState(!1),[W,Q]=O.useState(!1),[X,de]=O.useState(!1),[ce,pe]=O.useState(!1),[At,fn]=O.useState("both"),[Kt,bt]=O.useState(!1),[ra,pi]=O.useState([]),[pn,Or]=O.useState(""),[mi,mn]=O.useState(!1);O.useEffect(()=>{var V,M,G;console.log(`

 ===== FORCE ATTACH EFFECT TRIGGERED =====`),console.log(" hasPartner:",g),console.log(" localVideoRef.current:",(V=x.current)==null?void 0:V.tagName,x.current?" EXISTS":" NULL"),console.log(" localStreamRef.current:",y.current?" EXISTS":" NULL"),g&&x.current&&y.current?(console.log(`
 ===== FORCE ATTACH LOCAL STREAM ON PARTNER FOUND =====`),console.log(" ALL CONDITIONS MET - Attaching local stream to video element"),console.log(" localVideoRef.current:",{element:x.current.tagName,id:x.current.id,muted:x.current.muted,currentSrcObject:!!x.current.srcObject,paused:x.current.paused}),console.log(" localStreamRef.current:",{active:y.current.active,tracks:y.current.getTracks().length,trackDetails:y.current.getTracks().map(K=>({kind:K.kind,enabled:K.enabled,readyState:K.readyState,id:K.id}))}),console.log(" STEP 1: Setting srcObject..."),x.current.srcObject=y.current,x.current.muted=!0,console.log(" STEP 2:  Local stream attached to video element"),console.log(" STEP 2 VERIFICATION:",{srcObjectSet:!!x.current.srcObject,srcObjectActive:(M=x.current.srcObject)==null?void 0:M.active,tracksAttached:(G=x.current.srcObject)==null?void 0:G.getTracks().length}),console.log(" STEP 3: Attempting to play video..."),setTimeout(async()=>{var K;if(console.log(" STEP 3: Play timeout fired"),x.current&&x.current.srcObject)try{console.log(" STEP 3a: Calling video.play()..."),await x.current.play(),console.log("  STEP 3b: Local video playing successfully"),console.log(" Video element state after play:",{paused:x.current.paused,readyState:x.current.readyState,networkState:x.current.networkState,currentTime:x.current.currentTime,duration:x.current.duration})}catch(le){console.error("  STEP 3c: Play error:",le.message),console.error(" Error details:",{name:le.name,code:le.code})}else console.error("  STEP 3: srcObject not available for play"),console.error("   localVideoRef.current:",!!x.current),console.error("   localVideoRef.current.srcObject:",!!((K=x.current)!=null&&K.srcObject))},50)):(console.log("  CONDITIONS NOT MET for force attach:"),console.log("   hasPartner:",g),console.log("   localVideoRef.current exists:",!!x.current),console.log("   localStreamRef.current exists:",!!y.current))},[g]),O.useEffect(()=>{console.log(" hasPartner state changed:",g),g?(console.log("    Partner connected!"),console.log("   Force attach effect should have run above")):console.log("    Partner disconnected")},[g]);const gi=Wo.useCallback(async()=>{console.log(`

 ===== CAMERA RE-INITIALIZATION STARTED =====`),console.log(" [REINIT] Camera re-initialization requested"),console.log(" [REINIT] Current state:"),console.log("  - localStreamRef.current exists:",!!y.current),console.log("  - localVideoRef.current exists:",!!x.current),console.log("  - cameraStarted:",D);try{if(!x.current)return console.error(" [REINIT]  CRITICAL: localVideoRef.current is null/undefined - video element not in DOM"),!1;if(!x.current.parentElement)return console.error(" [REINIT]  CRITICAL: Video element is not attached to DOM"),!1;if(console.log(" [REINIT]  Video element exists in DOM"),y.current){console.log(" [REINIT] Stream exists, checking if tracks are active...");const M=y.current.getTracks();if(console.log(" [REINIT] Stream has",M.length,"tracks"),M.forEach((G,K)=>{console.log(`  Track ${K}:`,{kind:G.kind,enabled:G.enabled,readyState:G.readyState})}),M.length===0)console.warn(" [REINIT]  Stream exists but has no active tracks - will request new stream"),y.current=null;else{console.log(" [REINIT]  Stream has active tracks, reattaching to video element"),x.current.srcObject=y.current,x.current.muted=!0,console.log(" [REINIT] srcObject set, waiting for play()...");try{const G=x.current.play();return G!==void 0&&await G,console.log(" [REINIT]  Camera preview reattached and playing"),console.log(` ===== CAMERA RE-INITIALIZATION SUCCESSFUL =====

`),!0}catch(G){return console.error(" [REINIT]  Error playing video:",G),console.error(" [REINIT] Error name:",G.name),console.error(" [REINIT] Error message:",G.message),!1}}}console.log(" [REINIT] No existing stream or tracks inactive, requesting new preview stream");const V=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});y.current=V,console.log(" [REINIT]  New camera stream obtained:",V),console.log(" [REINIT] New stream tracks:",V.getTracks().map(M=>({kind:M.kind,id:M.id}))),x.current.srcObject=V,x.current.muted=!0,console.log(" [REINIT] srcObject set to new stream, calling play()...");try{const M=x.current.play();return M!==void 0&&await M,console.log(" [REINIT]  New camera preview playing successfully"),L(!0),console.log(` ===== CAMERA RE-INITIALIZATION SUCCESSFUL =====

`),!0}catch(M){return console.error(" [REINIT]  Error playing new video:",M),!1}}catch(V){return console.error(" [REINIT]  Error reinitializing camera:",V),console.error(" [REINIT] Error name:",V.name),console.error(" [REINIT] Error message:",V.message),console.error(` ===== CAMERA RE-INITIALIZATION FAILED =====

`),!1}},[D]);O.useEffect(()=>{l.current={reinitializeCamera:gi}},[gi]),O.useEffect(()=>{if(!T)return;const V=setInterval(()=>{Rt(M=>M+1)},1e3);return()=>clearInterval(V)},[T]),O.useEffect(()=>{g&&D&&console.log(" [PARTNER FOUND] Transitioning to video chat screen")},[g,D]),O.useEffect(()=>{var V,M,G,K,le,xe;console.log(" [VIDEO MOUNT DETECTOR] Checking video element mount status"),console.log("   localVideoRef.current exists:",!!x.current),console.log("   localStreamRef.current exists:",!!y.current),console.log("   cameraStarted:",D),x.current&&y.current&&D?(console.log(" [VIDEO MOUNT DETECTOR]  Video element is mounted on DOM"),console.log(" [VIDEO MOUNT DETECTOR] Attaching stream to video element:",y.current),console.log(" [VIDEO MOUNT DETECTOR] Video element dimensions:",{width:x.current.clientWidth,height:x.current.clientHeight,offsetWidth:x.current.offsetWidth,offsetHeight:x.current.offsetHeight,displayStyle:x.current.style.display,computedDisplay:window.getComputedStyle(x.current).display}),console.log(" [VIDEO MOUNT DETECTOR] About to attach stream to localVideoRef"),console.log("   localVideoRef:",{exists:!!x.current,inDOM:!!x.current.parentElement,element:(V=x.current)==null?void 0:V.tagName,id:(M=x.current)==null?void 0:M.id}),console.log("   localStreamRef:",{exists:!!y.current,trackCount:(G=y.current)==null?void 0:G.getTracks().length,active:(K=y.current)==null?void 0:K.active}),x.current.srcObject=y.current,x.current.muted=!0,console.log(" [VIDEO MOUNT DETECTOR]  Stream attached to localVideoRef"),console.log(" [VIDEO MOUNT DETECTOR] Verifying attachment:",{srcObject:!!x.current.srcObject,srcObjectActive:(le=x.current.srcObject)==null?void 0:le.active,trackCount:(xe=x.current.srcObject)==null?void 0:xe.getTracks().length}),console.log(" [VIDEO MOUNT DETECTOR] Stream attached, srcObject set"),console.log(" [VIDEO MOUNT DETECTOR] Attempting to play video..."),setTimeout(async()=>{if(x.current&&x.current.srcObject)try{console.log(" [VIDEO MOUNT DETECTOR] Calling video.play()"),await x.current.play(),console.log(" [VIDEO MOUNT DETECTOR]  Video playing successfully"),console.log(" [VIDEO MOUNT DETECTOR] Video readyState:",x.current.readyState),console.log(" [VIDEO MOUNT DETECTOR] Video paused:",x.current.paused)}catch(be){console.error(" [VIDEO MOUNT DETECTOR]  Play error:",be),console.error(" [VIDEO MOUNT DETECTOR] Error name:",be.name),console.error(" [VIDEO MOUNT DETECTOR] Error message:",be.message)}},100)):(console.warn(" [VIDEO MOUNT DETECTOR]  Cannot attach stream - missing:"),x.current||console.warn("   - localVideoRef.current (DOM element)"),y.current||console.warn("   - localStreamRef.current (media stream)"),D||console.warn("   - cameraStarted flag is false"))},[x,y,D]),O.useEffect(()=>{D&&y.current&&x.current&&(console.log(" [CAMERA START] Attaching stream to video element:",y.current),console.log(" [CAMERA START] Video element dimensions:",{width:x.current.clientWidth,height:x.current.clientHeight,offsetWidth:x.current.offsetWidth,offsetHeight:x.current.offsetHeight}),x.current.srcObject=y.current,x.current.muted=!0,setTimeout(async()=>{if(x.current&&x.current.srcObject)try{await x.current.play(),console.log(" Video playing successfully")}catch(V){console.error(" Play error:",V)}},100))},[D]),O.useEffect(()=>{if(s){console.log("[Camera]  Skipping auto camera init - user just completed profile (view=home)"),console.log('[Camera] Camera will start when user clicks "Start Video Chat" button');return}async function V(){try{if(console.log(" Starting camera preview..."),console.log(" [INIT] Chat component mounted, attempting to initialize camera"),!x.current){console.error(" [INIT]  Video element not in DOM yet, cannot initialize camera");return}console.log(" [INIT]  Video element found in DOM, requesting camera permissions");const G=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(y.current=G,console.log("[Camera]  Camera stream obtained"),console.log("[Camera] Stream tracks:",G.getTracks().map(K=>({kind:K.kind,id:K.id}))),x.current){x.current.srcObject=G,x.current.muted=!0;try{await x.current.play(),console.log(" Camera preview playing successfully"),L(!0)}catch(K){console.error(" Preview play error:",K)}}}catch(G){console.log(" Camera preview error (this is OK, user may deny permission):",G.message),console.log(" Error name:",G.name),console.log(" Error code:",G.code)}}console.log("[Camera] Chat component useEffect triggered, scheduling camera init with delay");const M=setTimeout(()=>{console.log("[Camera] Delay complete, now calling startPreview()"),V()},100);return()=>{console.log("[Camera] Chat component unmounting, clearing camera init timer"),clearTimeout(M)}},[s]),O.useEffect(()=>{g&&setTimeout(()=>{var G;const V=document.getElementById("remote-video-wrapper"),M=document.getElementById("remote-video");if(V&&M){const K=V.getBoundingClientRect(),le=M.getBoundingClientRect(),xe=window.getComputedStyle(V),be=window.getComputedStyle(M);console.log(`

 ===== WRAPPER & VIDEO DEBUG (AFTER PARTNER FOUND) =====`),console.log(" Remote video wrapper dimensions:",{width:K.width,height:K.height,top:K.top,left:K.left,display:xe.display,position:xe.position,zIndex:xe.zIndex,overflow:xe.overflow,backgroundColor:xe.backgroundColor}),console.log(" Video element dimensions:",{width:le.width,height:le.height,top:le.top,left:le.left,display:be.display,position:be.position,zIndex:be.zIndex,objectFit:be.objectFit}),console.log(" Video element properties:",{srcObject:!!M.srcObject,srcObjectTracks:(G=M.srcObject)==null?void 0:G.getTracks().length,readyState:M.readyState,networkState:M.networkState,currentTime:M.currentTime,duration:M.duration,paused:M.paused,volume:M.volume}),console.log(" Wrapper visible in viewport:",K.height>0&&K.width>0),console.log(" Video visible in viewport:",le.height>0&&le.width>0)}},500)},[g]);const yi=async()=>{console.log(" createPeerConnection called"),console.log("   Current localStreamRef:",y.current),l2();const V=await ia();if(peerConnection=new RTCPeerConnection({iceServers:V}),console.log(" RTCPeerConnection created"),peerConnection.onicecandidate=M=>{M.candidate?(console.log(" ICE candidate generated:",{candidate:M.candidate.candidate,protocol:M.candidate.protocol,port:M.candidate.port,address:M.candidate.address,type:M.candidate.type,priority:M.candidate.priority,sdpMLineIndex:M.candidate.sdpMLineIndex,sdpMId:M.candidate.sdpMid}),M.candidate.type==="relay"?(console.log(" RELAY (TURN) candidate generated - TURN server is reachable"),console.log("   Protocol:",M.candidate.protocol,"Port:",M.candidate.port)):M.candidate.type==="srflx"?(console.log(" SRFLX (server reflexive) candidate - STUN working"),console.log("   Found public address via STUN")):M.candidate.type==="host"&&console.log(" HOST candidate - direct LAN connection possible"),console.log(" Sending ICE candidate to partner socket:",S.current),Z.emit("ice-candidate",{candidate:M.candidate,to:S.current}),console.log(" ICE candidate sent to peer")):(console.log(" ICE gathering complete (null candidate received)"),console.log(" ICE gathering summary:"),console.log("   Connection State:",peerConnection.connectionState),console.log("   ICE Connection State:",peerConnection.iceConnectionState),console.log("   ICE Gathering State:",peerConnection.iceGatheringState))},peerConnection.oniceconnectionstatechange=()=>{const M=peerConnection.iceConnectionState;switch(console.log(`
 ===== ICE CONNECTION STATE CHANGED =====`),console.log(" New ICE Connection State:",M),M){case"new":console.log(" State: NEW - Gathering ICE candidates");break;case"checking":console.log(" State: CHECKING - Testing ICE candidate pairs"),console.log(" Connection in progress - waiting for connectivity");break;case"connected":console.log(" State: CONNECTED - Found working ICE candidate pair"),console.log(" Peer-to-peer communication established");break;case"completed":console.log(" State: COMPLETED - ICE checks completed, ready for media"),console.log(" All connectivity checks passed");break;case"failed":console.error(" State: FAILED - All ICE candidate pairs failed"),console.error(" Could not establish peer-to-peer connection"),console.error(" TURN server may be unreachable or blocked by ISP"),console.error(" Troubleshooting:"),console.error("   - Check console for TURN error details"),console.error("   - TURN error 701 = Network/ISP blocking ports 3478, 5349"),console.error("   - Solutions: Try VPN, different WiFi, or mobile hotspot");break;case"disconnected":console.warn(" State: DISCONNECTED - Lost connection to peer"),console.warn(" Will attempt to reconnect");break;case"closed":console.log(" State: CLOSED - Connection closed");break}console.log(" Full connection states:"),console.log("   Signaling State:",peerConnection.signalingState),console.log("   Connection State:",peerConnection.connectionState),console.log("   ICE Gathering State:",peerConnection.iceGatheringState)},peerConnection.ontrack=M=>{var K,le,xe,be,me,nt,Se,Ft,Te;if(console.log(`

 ===== REMOTE TRACK RECEIVED =====`),console.log(" TIMESTAMP:",new Date().toISOString()),console.log(" Remote track received:",{kind:M.track.kind,id:M.track.id,enabled:M.track.enabled,readyState:M.track.readyState,muted:M.track.muted}),console.log(" Event streams:",M.streams.map(rt=>({id:rt.id,active:rt.active,trackCount:rt.getTracks().length,tracks:rt.getTracks().map(ge=>({kind:ge.kind,id:ge.id,enabled:ge.enabled,muted:ge.muted}))}))),console.log(`
 ===== CRITICAL VIDEO REF CHECK =====`),console.log(" localVideoRef.current:",{exists:!!x.current,element:(K=x.current)==null?void 0:K.tagName,id:(le=x.current)==null?void 0:le.id,srcObject:!!((xe=x.current)!=null&&xe.srcObject),object:x.current}),console.log(" remoteVideoRef.current:",{exists:!!_.current,element:(be=_.current)==null?void 0:be.tagName,id:(me=_.current)==null?void 0:me.id,srcObject:!!((nt=_.current)!=null&&nt.srcObject),object:_.current}),console.log(" SAME REF?:",x.current===_.current),!_.current){console.error(" CRITICAL ERROR: remoteVideoRef.current is NULL!"),console.error("   Cannot attach remote track - video element not available");return}if(x.current===_.current){console.error(" CRITICAL ERROR: localVideoRef and remoteVideoRef are the SAME OBJECT!"),console.error("   This will OVERWRITE local video with remote track!"),console.error("   Check JSX ref assignments - they should be different video elements"),console.error("   localVideoRef should be in RIGHT panel"),console.error("   remoteVideoRef should be in LEFT panel");return}if(console.log(" CRITICAL CHECK PASSED - refs are DIFFERENT and valid"),console.log(" Proceeding to attach remote stream..."),!M.streams||!M.streams[0]){console.error(" No streams available in event");return}console.log(" STEP 1: Setting srcObject...");const G=M.streams[0];_.current.srcObject=G,console.log(" STEP 2:  srcObject assigned"),console.log(" STEP 3: Verifying attachment:",{srcObjectExists:!!_.current.srcObject,srcObjectSame:_.current.srcObject===G,srcObjectActive:(Se=_.current.srcObject)==null?void 0:Se.active,srcObjectTracks:(Ft=_.current.srcObject)==null?void 0:Ft.getTracks().length,trackDetails:(Te=_.current.srcObject)==null?void 0:Te.getTracks().map(rt=>({kind:rt.kind,enabled:rt.enabled,muted:rt.muted})),videoReadyState:_.current.readyState,videoNetworkState:_.current.networkState,videoPaused:_.current.paused}),_.current.style.display="block",_.current.style.width="100%",_.current.style.height="100%",_.current.style.objectFit="cover",console.log(" STEP 4:  CSS styles applied"),console.log(" Remote video srcObject set successfully"),console.log(` ===== REMOTE TRACK SETUP COMPLETE =====

`)},peerConnection.onconnectionstatechange=()=>{console.log(" Connection State Changed:",peerConnection.connectionState),console.log("   ICE Connection State:",peerConnection.iceConnectionState),console.log("   ICE Gathering State:",peerConnection.iceGatheringState),console.log("   Signaling State:",peerConnection.signalingState),peerConnection.connectionState==="connected"?(R(!0),console.log(" WebRTC connection ESTABLISHED")):peerConnection.connectionState==="disconnected"?(R(!1),console.log(" WebRTC connection DISCONNECTED")):peerConnection.connectionState==="failed"?(R(!1),console.log(" WebRTC connection FAILED")):peerConnection.connectionState==="closed"&&(R(!1),console.log(" WebRTC connection CLOSED"))},!y.current)throw console.error(" CRITICAL ERROR: localStreamRef.current is null/undefined in createPeerConnection!"),new Error("Local stream lost before createPeerConnection");return peerConnection};O.useEffect(()=>(console.log(`

 ===== SOCKET LISTENERS SETUP (COMPONENT MOUNT) =====`),console.log(" Setting up socket listeners - runs ONCE on component load"),console.log(" Socket ID:",Z.id),console.log(" Socket connected:",Z.connected),console.log("  Using userIdRef.current for ALL ID comparisons:",p.current),Z.off("partner_found"),Z.off("webrtc_offer"),Z.off("webrtc_answer"),Z.off("ice-candidate"),Z.off("receive_message"),Z.off("partner_disconnected"),Z.off("disconnect"),console.log(" Removed old listeners (if any existed)"),Z.on("partner_found",async V=>{var me,nt;console.log(`

 ===== PARTNER FOUND EVENT RECEIVED =====`),console.log(" RAW DATA from server:",JSON.stringify(V,null,2)),console.log(" My socket ID:",Z.id),console.log(" currentUser object:",JSON.stringify(m,null,2)),console.log(" userIdRef.current (SHOULD USE THIS):",p.current),console.log(" currentUser.googleId:",m==null?void 0:m.googleId),console.log(" currentUser.id:",m==null?void 0:m.id),console.log(" data.socketId:",V.socketId),console.log(" data.partnerId:",V.partnerId),console.log(" data.userName:",V.userName),console.log(`
 SELF-MATCH CHECK - START`);const M=p.current,G=V.partnerId;if(console.log(" COMPARISON VALUES:"),console.log("   myUserId type:",typeof M,"value:",M),console.log("   partnerUserId type:",typeof G,"value:",G),console.log("   Are they EQUAL?",M===G),console.log("   String comparison:",String(M)===String(G)),M===G){console.error(`
 CRITICAL ERROR: SELF-MATCH DETECTED! `),console.error("   My user ID:",M,"type:",typeof M),console.error("   Partner user ID:",G,"type:",typeof G),console.error("   Match IDs:",M===G),console.error("   These should be DIFFERENT!"),mn(!0),console.error("   Emitting skip_user..."),Z.emit("skip_user",{partnerSocketId:V.socketId}),console.error("   Emitting find_partner..."),Z.emit("find_partner",{userId:p.current,userName:m.name||"Anonymous",userAge:m.age||18,userLocation:m.location||"Unknown"}),console.error("   Returning - match REJECTED");return}console.log(" SELF-MATCH CHECK PASSED - partner is different user"),console.log("   Accepting match and proceeding with WebRTC setup"),console.log(` SELF-MATCH CHECK - END
`),S.current=V.socketId,console.log(" CRITICAL: Stored partner socket ID:",S.current),console.log(" CRITICAL: Verification - partnerSocketIdRef.current is now:",S.current),console.log(" ABOUT TO CALL setHasPartner(true)"),I(!0),console.log("  setHasPartner(true) CALLED - force attach effect should trigger");const K={...V,picture:V.userPicture||V.picture||null,userName:V.userName||V.name||"Anonymous",userLocation:V.userLocation||V.location||"Unknown",userAge:V.userAge||V.age||18};C(K),console.log("  setPartnerInfo CALLED with data:",K);const le=Z.id,xe=V.socketId,be=le<xe;if(console.log(" SOCKET ID COMPARISON:"),console.log("   My socket ID:",le),console.log("   Partner socket ID:",xe),console.log("   Am I offerer? (myID < partnerID):",be),!be){console.log(" I am the ANSWERER - waiting for offer from offerer");return}console.log(" I am the OFFERER - creating peer connection and sending offer");try{console.log(`
 OFFERER: Creating peer connection`);let Se;try{Se=await yi()}catch(Te){console.error(" OFFERER: Error creating peer connection:",Te);return}if(c.current=Se,console.log(" OFFERER: Peer connection created"),console.log(" OFFERER Stream status after peer connection creation:",{exists:!!y.current,trackCount:(me=y.current)==null?void 0:me.getTracks().length,tracks:(nt=y.current)==null?void 0:nt.getTracks().map(Te=>({kind:Te.kind,enabled:Te.enabled,state:Te.readyState}))}),y.current){console.log(`
 OFFERER localStream:`,y.current);const Te=y.current.getTracks();console.log(" OFFERER: All available tracks:",Te),console.log(" OFFERER tracks detail:",Te.map(ge=>({kind:ge.kind,id:ge.id,enabled:ge.enabled,state:ge.readyState}))),console.log(`
 OFFERER: Adding ${Te.length} local tracks to peer connection`),Te.forEach((ge,Qt)=>{console.log(`  [${Qt}] Adding ${ge.kind} track (id: ${ge.id}, enabled: ${ge.enabled})`);try{const Rn=Se.addTrack(ge,y.current);console.log(`  [${Qt}]  addTrack succeeded, sender:`,Rn)}catch(Rn){console.error(`  [${Qt}]  addTrack failed:`,Rn)}}),console.log(`
 OFFERER: All tracks added to peer connection`);const rt=Se.getSenders();console.log(" OFFERER senders count:",rt.length),console.log(" OFFERER senders after addTrack:",rt.map((ge,Qt)=>{var Rn,Jn,_i;return{index:Qt,kind:(Rn=ge.track)==null?void 0:Rn.kind,id:(Jn=ge.track)==null?void 0:Jn.id,trackExists:!!ge.track,trackEnabled:(_i=ge.track)==null?void 0:_i.enabled}})),console.log(" OFFERER: Ready to send offer with",Te.length,`tracks
`)}else console.error(" OFFERER: No local stream available - TRACKS WILL NOT BE SENT!"),console.error(" OFFERER: localStreamRef.current is:",y.current);console.log(`
 ===== OFFERER CREATING AND SENDING OFFER =====`),console.log(" OFFERER: Creating WebRTC offer");const Ft=await Se.createOffer();console.log(" OFFERER: Offer created:",Ft),console.log(" OFFERER: Setting local description (offer)"),await Se.setLocalDescription(Ft),console.log(" OFFERER: Local description set"),console.log(`
 OFFERER: Sending offer with tracks:`,Se.getSenders().map(Te=>{var rt,ge,Qt;return{kind:(rt=Te.track)==null?void 0:rt.kind,id:(ge=Te.track)==null?void 0:ge.id,enabled:(Qt=Te.track)==null?void 0:Qt.enabled}})),console.log(" OFFERER: Partner socket ID from data:",V.socketId),console.log(" OFFERER: partnerSocketIdRef.current value:",S.current),console.log(" CRITICAL: About to emit webrtc_offer with to:",V.socketId),console.log(" CRITICAL: Is to value empty/null/undefined?",!V.socketId),Z.emit("webrtc_offer",{offer:c.current.localDescription,to:V.socketId}),console.log(" OFFERER: webrtc_offer emitted successfully"),console.log(" OFFERER: webrtc_offer sent to socket ID:",V.socketId),console.log(" OFFERER: webrtc_offer contains",c.current.getSenders().length,"senders"),console.log(" OFFERER: Sent to socket:",V.socketId)}catch(Se){console.error(" OFFERER: Error in partner_found handler:",Se),console.error(" OFFERER: Stack trace:",Se.stack)}}),Z.on("webrtc_offer",async V=>{console.log(`

`),console.log("  ANSWERER HANDLER FIRED  "),console.log(""),console.log(" ===== ANSWERER RECEIVED OFFER ====="),console.log(" ANSWERER: WEBRTC_OFFER EVENT FIRED - OFFER WAS RECEIVED"),console.log(" ANSWERER: Received WebRTC offer from offerer"),console.log(" ANSWERER: My socket ID:",Z.id),console.log(" ANSWERER: Offer from:",V.from),console.log(" ANSWERER: Full data:",V),console.log(" ANSWERER: data.from (offerer socket ID):",V.from),S.current=V.from,console.log(" CRITICAL: Stored offerer socket ID:",S.current);try{if(c.current)console.log(" ANSWERER: WARNING - peerConnectionRef already exists (should be null for answerer)");else{console.log(" ANSWERER: Creating new peer connection for the first time");let K;try{K=await yi()}catch(le){console.error(" ANSWERER: Error creating peer connection:",le);return}c.current=K,console.log(" ANSWERER: Peer connection created")}if(console.log(`
 ANSWERER: ALWAYS executing track addition logic`),console.log(" ANSWERER: Checking localStreamRef.current..."),console.log(" ANSWERER localStreamRef.current:",y.current),console.log(" ANSWERER localStreamRef.current === null?",y.current===null),console.log(" ANSWERER localStreamRef.current === undefined?",y.current===void 0),y.current){console.log(`
 ANSWERER: localStream EXISTS - will add tracks`),console.log(" ANSWERER localStream object:",y.current);const K=y.current.getTracks();console.log(" ANSWERER: getAllTracks() returned:",K),console.log(" ANSWERER: Track array length:",K.length),K.length>0?console.log(" ANSWERER: Tracks detail:",K.map(me=>({kind:me.kind,id:me.id,enabled:me.enabled,readyState:me.readyState}))):console.warn(" ANSWERER: WARNING - localStream exists but getTracks() returned empty array!"),console.log(`
 ANSWERER: Attempting to add ${K.length} local tracks to peer connection`);let le=0,xe=0;K.forEach((me,nt)=>{console.log(`  [${nt}] About to add ${me.kind} track (id: ${me.id}, enabled: ${me.enabled})`);try{const Se=c.current.addTrack(me,y.current);console.log(`  [${nt}]  addTrack SUCCEEDED`),console.log(`  [${nt}] Sender:`,Se),le++}catch(Se){console.error(`  [${nt}]  addTrack FAILED`),console.error(`  [${nt}] Error:`,Se.message),xe++}}),console.log(`
 ANSWERER: Track addition complete (${le} succeeded, ${xe} failed)`);const be=c.current.getSenders();console.log(" ANSWERER: Final senders count:",be.length),console.log(" ANSWERER: Senders:",be.map((me,nt)=>{var Se,Ft,Te;return{index:nt,kind:(Se=me.track)==null?void 0:Se.kind,id:(Ft=me.track)==null?void 0:Ft.id,trackExists:!!me.track,trackEnabled:(Te=me.track)==null?void 0:Te.enabled}}))}else throw console.error(`
 ANSWERER: CRITICAL ERROR - localStreamRef.current is NULL!`),console.error(" ANSWERER: Cannot add tracks - stream does not exist"),new Error("ANSWERER: No local stream - cannot add tracks");console.log(`
 ANSWERER: Setting remote description (offer from offerer)`),await c.current.setRemoteDescription(new RTCSessionDescription(V.offer)),console.log(" ANSWERER: Remote description set successfully"),console.log(" ANSWERER: Creating answer");const M=await c.current.createAnswer();console.log(" ANSWERER: Answer created"),console.log(" ANSWERER: Setting local description (answer)"),await c.current.setLocalDescription(M),console.log(" ANSWERER: Local description set successfully"),console.log(`
 ===== ANSWERER SENDING ANSWER =====`);const G=c.current.getSenders();console.log(" ANSWERER: Final senders count:",G.length),console.log(" ANSWERER: Sending answer with tracks:",G.map(K=>{var le,xe,be;return{kind:(le=K.track)==null?void 0:le.kind,id:(xe=K.track)==null?void 0:xe.id,enabled:(be=K.track)==null?void 0:be.enabled}})),console.log(" CRITICAL: Offerer socket ID from offer:",V.from),console.log(" SERVER sending ANSWER to:",V.from),Z.emit("webrtc_answer",{answer:c.current.localDescription,to:V.from}),console.log(" ANSWERER: Answer emitted to offerer via socket:",V.from),console.log(` ===== ANSWERER ANSWER SENT =====

`)}catch(M){console.error(`
 ANSWERER: ERROR in webrtc_offer handler:`,M),console.error(" ANSWERER: Error message:",M.message),console.error(" ANSWERER: Stack trace:",M.stack)}}),Z.on("webrtc_answer",async V=>{console.log(`

 ===== OFFERER RECEIVED ANSWER =====`),console.log(" OFFERER: Received WebRTC answer from answerer"),console.log(" OFFERER: data.from (answerer socket ID):",V.from),console.log(" OFFERER: Answer SDP:",V.answer),S.current=V.from,console.log(" CRITICAL: Stored answerer socket ID:",S.current);try{if(!c.current){console.error(" OFFERER: No peer connection available to handle answer");return}console.log(`
 OFFERER: Setting remote description (answer from answerer)`),console.log(" OFFERER: Current connection state before answer:",{connectionState:c.current.connectionState,iceConnectionState:c.current.iceConnectionState,signalingState:c.current.signalingState}),await c.current.setRemoteDescription(new RTCSessionDescription(V.answer)),console.log(" OFFERER: Remote description (answer) set successfully"),console.log(" OFFERER: Connection state after answer:",{connectionState:c.current.connectionState,iceConnectionState:c.current.iceConnectionState,signalingState:c.current.signalingState}),console.log(` ===== OFFERER ANSWER RECEIVED AND SET =====

`)}catch(M){console.error(" OFFERER: Error handling answer:",M),console.error(" OFFERER: Stack trace:",M.stack)}}),Z.on("ice-candidate",async V=>{console.log(`
 ICE candidate received from peer:`,{candidate:V.candidate,sdpMLineIndex:V.sdpMLineIndex,sdpMid:V.sdpMid});try{c.current?(console.log(" Adding ICE candidate to peer connection"),await c.current.addIceCandidate(new RTCIceCandidate(V)),console.log(` ICE candidate added successfully
`)):console.warn(" No peer connection available for ICE candidate")}catch(M){console.error(" Error adding ICE candidate:",M)}}),Z.on("receive_message",V=>{pi(M=>[...M,{id:Date.now(),sender:"partner",text:V.message,timestamp:new Date}])}),Z.on("partner_disconnected",()=>{console.log("Partner disconnected"),oa()}),Z.on("disconnect",()=>{console.log("Socket disconnected"),vi()}),console.log(" ===== ALL SOCKET LISTENERS REGISTERED ====="),console.log(" Listeners registered for: partner_found, webrtc_offer, webrtc_answer, ice-candidate, receive_message, partner_disconnected, disconnect"),console.log(` Ready to receive WebRTC signaling messages

`),()=>{console.log(" Removing socket listeners on component unmount"),Z.off("partner_found"),Z.off("webrtc_offer"),Z.off("webrtc_answer"),Z.off("ice-candidate"),Z.off("receive_message"),Z.off("partner_disconnected"),Z.off("disconnect")}),[]),O.useEffect(()=>()=>{console.log(" Chat component unmounting - cleaning up peer connection only"),c.current&&(c.current.close(),c.current=null)},[]);const ia=async()=>{var V;try{const G=await(await fetch("https://flinxx-backend.onrender.com/api/turn")).json();if((V=G==null?void 0:G.v)!=null&&V.iceServers)return console.log(" TURN servers fetched from backend API"),G.v.iceServers;throw console.warn(" Invalid XirSys TURN response from backend, using fallback"),new Error("Invalid XirSys TURN response")}catch(M){return console.error(" Error fetching TURN servers from backend:",M.message),console.log(" Using fallback TURN configuration from getIceServers()"),c2()}},Hc=async()=>{if(D)D&&!F&&(console.log(' [MATCHING] User clicked "Start Video Chat" again - starting matching'),console.log(" [MATCHING]  NOT reinitializing camera - stream already active"),console.log(" [MATCHING] Emitting find_partner event to server"),E(!0),mn(!0),Z.emit("find_partner",{userId:p.current,userName:m.name||"Anonymous",userAge:m.age||18,userLocation:m.location||"Unknown",userPicture:m.picture||null}),console.log(" [MATCHING]  find_partner event emitted - now waiting for a partner"));else{if(console.log(' [START] User clicked "Allow Camera & Continue" - requesting camera permission'),Kt){console.warn(" Camera request already in progress");return}try{bt(!0),mn(!0),console.log(" [INIT] Requesting camera permission from browser...");const V=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}},audio:!0});if(y.current=V,console.log("[Camera]  Camera stream obtained"),console.log("[Camera] Stream tracks:",V.getTracks().map(M=>({kind:M.kind,id:M.id}))),x.current){x.current.srcObject=V,x.current.muted=!0;try{await x.current.play(),console.log(" Camera preview playing successfully")}catch(M){console.error(" Play error:",M)}}console.log(" [START] Setting cameraStarted = true (camera preview now showing)"),L(!0),bt(!1),mn(!1),console.log(" [START]  Camera initialized - user is still on home screen, matching NOT started yet")}catch(V){console.error(" Error initializing camera:",V),bt(!1),mn(!1),V.name==="NotAllowedError"?console.warn(" Camera permission denied by user"):V.name==="NotFoundError"?console.warn(" No camera device found"):V.name==="NotReadableError"&&console.warn(" Camera device is already in use by another application")}}},sa=()=>{if(pn.trim()===""||!g)return;const V={id:Date.now(),sender:"user",text:pn,timestamp:new Date};pi(M=>[...M,V]),Z.emit("send_message",{message:pn}),Or("")},oa=()=>{I(!1),R(!1),C(null),pi([]),Rt(0),c.current&&(c.current.close(),c.current=null),Z.emit("find_partner",{userId:p.current,userName:m.name||"Anonymous",userAge:m.age||18,userLocation:m.location||"Unknown"})},vi=()=>{console.log(" Cleaning up chat session"),c.current&&(c.current.close(),c.current=null),L(!1),I(!1),R(!1),pi([]),Rt(0)},aa=()=>u.jsxs("div",{className:"intro-screen-container flex flex-row w-full max-w-[1500px] mx-auto gap-12 px-10 mt-20 items-start overflow-visible",style:{minHeight:"100vh",height:"auto",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx(Qu,{currentUser:m,onProfileClick:()=>de(!0),onPremiumClick:()=>tt(!0),onMatchHistoryClick:()=>pe(!0),isFixedPosition:!0}),u.jsx("div",{className:"video-box flex-1 rounded-3xl shadow-xl flex items-center justify-center",style:{height:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f"},children:u.jsxs("div",{className:"w-full h-full bg-black rounded-3xl flex items-center justify-center shadow-2xl overflow-hidden relative",style:{border:"1px solid #d9b85f"},children:[u.jsx("video",{ref:x,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{backgroundColor:"#000000",transform:"none",zoom:1,display:"block"}}),u.jsx("div",{className:"absolute bottom-4 left-4 px-4 py-2 rounded-xl z-10",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",border:"1px solid #d9b85f"},children:u.jsx("p",{className:"font-semibold text-sm",style:{color:"#d9b85f"},children:"You"})})]})}),u.jsx("div",{className:"right-panel flex-1 rounded-3xl shadow-xl p-12 pb-16 space-y-6 flex items-center justify-center",style:{height:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f"},children:u.jsxs("div",{className:"w-full h-full rounded-3xl p-8 shadow-2xl flex flex-col items-center justify-between text-center",children:[u.jsxs("div",{className:"flex gap-3 justify-center",children:[u.jsx("button",{className:"text-white font-bold py-2 px-6 rounded-lg transition-all text-sm shadow-md hover:shadow-lg",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"SOLO"}),u.jsx("button",{className:"text-white font-bold py-2 px-6 rounded-lg transition-all text-sm",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"DUO"})]}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("img",{src:Jf,alt:"Flinxx",className:"w-16 h-16"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black mb-2",style:{color:"#d9b85f"},children:"Flinxx"}),u.jsx("p",{className:"text-sm",style:{color:"#d9b85f"},children:"Meet new people in real time."})]}),u.jsx("button",{onClick:()=>Q(!0),className:"rounded-full px-4 py-1 transition-all cursor-pointer text-xs",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:u.jsxs("span",{className:"font-semibold",children:[" ",At==="girls"?"Girls Only":At==="guys"?"Guys Only":"Both"]})})]}),u.jsx("button",{onClick:Hc,disabled:mi,className:"w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 text-sm shadow-lg",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:mi?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin inline-block mr-2",children:""})," ",D?"Starting Match...":"Requesting Access..."]}):D?"Start Video Chat":"Allow Camera & Continue"})]})})]}),Gc=()=>u.jsxs("div",{className:"flex flex-row w-full max-w-[1500px] mx-auto gap-12 px-10 mt-20 items-start overflow-visible",style:{minHeight:"100vh",height:"auto",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsx(Qu,{currentUser:m,onProfileClick:()=>de(!0),onPremiumClick:()=>tt(!0),onMatchHistoryClick:()=>pe(!0),isFixedPosition:!0}),u.jsx("div",{className:"video-box flex-1 rounded-3xl shadow-xl flex items-center justify-center",style:{height:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f"},children:u.jsxs("div",{className:"w-full h-full bg-black rounded-3xl flex items-center justify-center shadow-2xl overflow-hidden relative",style:{border:"1px solid #d9b85f"},children:[u.jsx("video",{ref:x,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{backgroundColor:"#000000",transform:"none",zoom:1,display:"block"}}),u.jsx("div",{className:"absolute bottom-4 left-4 px-4 py-2 rounded-xl z-10",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",border:"1px solid #d9b85f"},children:u.jsx("p",{className:"font-semibold text-sm",style:{color:"#d9b85f"},children:"You"})})]})}),u.jsx("div",{className:"right-panel flex-1 rounded-3xl shadow-xl flex flex-col",style:{height:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f",padding:0,overflow:"visible"},children:u.jsxs("div",{className:"flex flex-col items-center justify-center text-center gap-8 py-20",children:[u.jsx("div",{className:"animate-pulse text-6xl",children:""}),u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("h2",{className:"text-2xl font-bold",style:{color:"#d9b85f"},children:"Looking for a partner..."}),u.jsx("p",{className:"text-sm",style:{color:"#d9b85f"},children:"Matching you with someone nearby"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0.2s"}}),u.jsx("div",{className:"w-2 h-2 rounded-full animate-bounce",style:{backgroundColor:"#d9b85f",animationDelay:"0.4s"}})]}),u.jsx("button",{onClick:()=>{console.log(" Cancel matching"),E(!1),mn(!1)},className:"w-full font-bold py-3 px-6 rounded-xl transition-all duration-200 text-sm shadow-lg mt-4",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:"Cancel Search"})]})})]}),Es=()=>(console.log(" VideoChatScreen rendering - partnerInfo:",{exists:!!b,userName:b==null?void 0:b.userName,userLocation:b==null?void 0:b.userLocation,picture:!!(b!=null&&b.picture),fullObject:b}),console.log(" currentUser for comparison:",{name:m==null?void 0:m.name,location:m==null?void 0:m.location,picture:!!(m!=null&&m.picture)}),u.jsxs("div",{className:"video-chat-container flex flex-col md:flex-row w-full h-full gap-6 items-start overflow-visible",style:{minHeight:"100vh",backgroundColor:"#0f0f0f",overflow:"visible"},children:[u.jsxs("div",{className:"right-panel flex-1 rounded-3xl shadow-xl flex flex-col",style:{height:"520px",backgroundColor:"#131313",border:"1px solid #d9b85f",padding:0,overflow:"visible"},children:[u.jsxs("div",{className:"w-full h-full bg-black rounded-3xl shadow-2xl flex flex-col overflow-visible",style:{backgroundColor:"#131313",overflow:"visible"},children:[u.jsxs("div",{className:"px-4 flex items-center justify-between backdrop-blur-sm flex-shrink-0",style:{height:"56px",paddingTop:"8px",paddingBottom:"8px",backgroundColor:"rgba(19, 19, 19, 0.8)",borderBottom:"1px solid #d9b85f"},children:[u.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg flex-shrink-0 overflow-hidden",children:g&&b&&b.picture?u.jsx("img",{src:b.picture,alt:"Partner",className:"w-full h-full object-cover"}):""}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-semibold text-sm leading-tight truncate",style:{color:"#d9b85f"},children:g&&b?b.userName:"Waiting..."}),u.jsx("p",{className:"text-xs truncate",style:{color:"#d9b85f"},children:g&&b?b.userLocation:"for a partner"})]})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[u.jsx("button",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""}),u.jsx("button",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""})]})]}),u.jsxs("div",{id:"main-container",className:"overflow-visible flex flex-col w-full flex-1",style:{zIndex:1,backgroundColor:"transparent",padding:0,overflow:"visible"},children:[u.jsxs("div",{id:"remote-video-wrapper",style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:g?99999:1,overflow:"visible",backgroundColor:g?"black":"transparent",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:[g&&u.jsx("video",{id:"remote-video",ref:_,autoPlay:!0,playsInline:!0,muted:!1,style:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"black",position:"absolute",top:0,left:0,zIndex:9999,display:"block",opacity:1,visibility:"visible"}}),T&&g&&u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 text-xs font-semibold z-50 shadow-lg px-2 py-1 rounded-full",style:{backgroundColor:"rgba(217, 184, 95, 0.9)",color:"#0f0f0f"},children:[u.jsx("span",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:"#0f0f0f"}}),u2(qe)]})]}),!g&&u.jsx("div",{className:"flex-1 w-full flex items-center justify-center flex-col bg-black rounded-2xl",style:{zIndex:1},children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin mb-4 text-5xl inline-block",children:""}),u.jsx("p",{className:"font-semibold text-base",style:{color:"#d9b85f"},children:"Looking for a partner..."}),u.jsx("p",{className:"text-xs mt-2",style:{color:"#d9b85f"},children:"This won't take long"})]})}),ra.length>0&&g&&u.jsx("div",{className:"space-y-2 mt-3 px-4",style:{zIndex:10},children:ra.map(V=>u.jsx("div",{className:`flex ${V.sender==="user"?"justify-end":"justify-start"}`,children:u.jsx("div",{className:`max-w-xs px-3 py-2 rounded-2xl text-xs ${V.sender==="user","text-white"}`,style:{backgroundColor:V.sender==="user"?"#d9b85f":"rgba(217, 184, 95, 0.6)",color:V.sender==="user"?"#0f0f0f":"#d9b85f"},children:V.text})},V.id))})]})]}),u.jsxs("div",{className:"px-4 flex items-center justify-between backdrop-blur-sm flex-shrink-0",style:{height:"56px",paddingTop:"8px",paddingBottom:"8px",backgroundColor:"rgba(19, 19, 19, 0.8)",borderTop:"1px solid #d9b85f"},children:[u.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"M"})}),u.jsxs("div",{className:"flex items-center gap-2 flex-1 ml-2 flex-shrink-0",children:[u.jsx("input",{type:"text",value:pn,onChange:V=>Or(V.target.value),onKeyPress:V=>V.key==="Enter"&&sa(),placeholder:"Send Message",disabled:!g,className:"flex-1 px-3 py-2 rounded-lg focus:outline-none disabled:bg-gray-500/20 text-xs font-medium",style:{backgroundColor:"rgba(217, 184, 95, 0.1)",borderColor:"#d9b85f",border:"1px solid #d9b85f",color:"#d9b85f"}}),u.jsx("button",{onClick:sa,disabled:!g||pn.trim()==="",className:"w-8 h-8 font-bold rounded-lg transition-all disabled:cursor-not-allowed flex items-center justify-center text-sm shadow-md flex-shrink-0",style:{backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f"},children:""})]})]})]}),u.jsx("div",{className:"video-box flex-1 rounded-3xl shadow-xl flex items-center justify-center",style:{height:"520px",backgroundColor:"transparent",border:"1px solid #d9b85f"},children:u.jsxs("div",{className:"w-full h-full bg-black rounded-3xl flex items-center justify-center shadow-2xl overflow-hidden relative",style:{border:"1px solid #d9b85f"},children:[u.jsx("video",{ref:x,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{backgroundColor:"#000000",transform:"none",zoom:1,display:"block",width:"100%",height:"100%"}}),u.jsx("div",{className:"absolute bottom-4 left-4 px-4 py-2 rounded-xl z-10",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",border:"1px solid #d9b85f"},children:u.jsx("p",{className:"font-semibold text-sm",style:{color:"#d9b85f"},children:"You"})})]})})]}));return u.jsxs("div",{className:"flex flex-col h-screen w-screen overflow-visible min-h-0",style:{backgroundColor:"#0f0f0f",overflow:"visible"},children:[g?u.jsx(Es,{}):F?u.jsx(Gc,{}):u.jsx(aa,{}),g&&TS.createPortal(u.jsxs(u.Fragment,{children:[u.jsx(Qu,{currentUser:m,onProfileClick:()=>de(!0),onPremiumClick:()=>tt(!0),onMatchHistoryClick:()=>pe(!0),isFixedPosition:!0}),u.jsx("button",{onClick:()=>{vi(),L(!1),t("/chat")},className:"font-bold rounded-full transition-all duration-200 shadow-lg flex items-center justify-center",style:{position:"fixed",top:"68px",right:"24px",width:"45px",height:"45px",fontSize:"24px",backgroundColor:"transparent",border:"1px solid #d9b85f",color:"#d9b85f",zIndex:999998},title:"End Chat",children:""})]}),document.body),u.jsx(d2,{isOpen:Pr,onClose:()=>tt(!1)}),u.jsx(f2,{isOpen:X,onClose:()=>de(!1),onOpenPremium:()=>tt(!0),onReinitializeCamera:(wi=l.current)==null?void 0:wi.reinitializeCamera}),u.jsx(p2,{isOpen:ce,onClose:()=>pe(!1)}),u.jsx(h2,{isOpen:W,onClose:()=>Q(!1),currentGender:At,onOpenPremium:()=>tt(!0)}),N&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-indigo-600 rounded-2xl p-8 max-w-md w-full border border-white/20 shadow-2xl",children:[u.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-center",children:" Time's Up!"}),u.jsx("p",{className:"text-white/90 text-center mb-4",children:"Your 2-minute guest preview has ended. Redirecting to login..."}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsx("div",{className:"animate-spin text-4xl",children:""})})]})})]})},g2=()=>{const t=hn(),[e,n]=O.useState(5),[r,i]=O.useState(!0),[s,o]=O.useState([{id:1,username:"Alex_24",name:"Alex",age:24,country:"USA",avatar:"",status:"Online"},{id:2,username:"Jordan_22",name:"Jordan",age:22,country:"UK",avatar:"",status:"Online"},{id:3,username:"Casey_25",name:"Casey",age:25,country:"Canada",avatar:"",status:"Online"},{id:4,username:"Morgan_23",name:"Morgan",age:23,country:"Australia",avatar:"",status:"Online"},{id:5,username:"Taylor_26",name:"Taylor",age:26,country:"Germany",avatar:"",status:"Online"},{id:6,username:"Alex_27",name:"Alex",age:27,country:"France",avatar:"",status:"Online"},{id:7,username:"Sam_21",name:"Sam",age:21,country:"Canada",avatar:"",status:"Online"},{id:8,username:"Chris_28",name:"Chris",age:28,country:"Japan",avatar:"",status:"Online"}]),[l,c]=O.useState(0),h=O.useRef(null);O.useEffect(()=>(r&&e>0?h.current=setTimeout(()=>{n(A=>A-1)},1e3):r&&e===0&&(p(),n(5)),()=>clearTimeout(h.current)),[e,r]);const p=()=>{l<s.length-1?(c(A=>A+1),n(5),i(!0)):(c(0),n(5),i(!0))},m=()=>{p()},w=()=>{Z.emit("connect_user",{targetUserId:s[l].id}),t("/chat")},k=s[l],N=s[(l+1)%s.length];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex flex-col",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-6 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:Jf,alt:"Flinxx",className:"w-8 h-8"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:()=>t("/"),className:"text-white font-semibold hover:text-white/80 transition",children:" Back"})})]})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-8",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"relative h-[600px] mb-8",children:[u.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-md rounded-3xl border border-white/20 p-8 transform scale-95 translate-y-4 opacity-50",children:u.jsxs("div",{className:"h-full flex flex-col justify-between",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-white font-bold text-xl mb-2",children:[N.name,", ",N.age]}),u.jsxs("p",{className:"text-white/70 text-sm mb-6",children:[" ",N.country]})]}),u.jsx("div",{className:"text-center opacity-50",children:u.jsx("p",{className:"text-white/50 text-sm",children:"Next up..."})})]})}),u.jsxs("div",{className:"absolute inset-0 bg-gradient-to-b from-white/20 to-white/5 backdrop-blur-md rounded-3xl border-2 border-white/30 p-8 flex flex-col justify-between shadow-2xl hover:border-white/50 transition-all duration-300",children:[u.jsx("div",{className:"flex justify-center mb-6",children:u.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-5xl shadow-lg shadow-blue-600/50 border-4 border-white/40 text-white",children:k.avatar})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-white font-black text-3xl mb-1",children:k.name}),u.jsx("p",{className:"text-white/90 text-2xl font-bold mb-2",children:k.age}),u.jsxs("p",{className:"text-white/80 text-base mb-2",children:[" ",k.country]}),u.jsxs("p",{className:"text-white/70 text-sm mb-6",children:["@",k.username]}),u.jsx("div",{className:"space-y-3",children:u.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20",children:[u.jsx("p",{className:"text-white/70 text-xs",children:"Status"}),u.jsxs("p",{className:"text-white font-bold text-sm",children:[" ",k.status]})]})})]}),u.jsx("div",{className:"flex items-center justify-center",children:u.jsxs("div",{className:"relative w-20 h-20",children:[u.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[u.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"white",strokeWidth:"2",opacity:"0.2"}),u.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"url(#gradient)",strokeWidth:"2",strokeDasharray:`${(5-e)/5*226.2} 226.2`,className:"transition-all duration-1000"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:"#fbbf24"}),u.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})]})})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-black text-2xl",children:e})})]})}),r&&u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-blue-400 text-sm font-semibold animate-pulse",children:[" Auto-next in ",e,"s"]})})]})]}),u.jsxs("div",{className:"flex gap-4 justify-center",children:[u.jsx("button",{onClick:m,className:"flex-1 px-6 py-4 bg-white/20 hover:bg-white/30 border-2 border-white/40 hover:border-white/60 rounded-full font-bold text-white transition-all transform hover:scale-105 backdrop-blur",children:" Skip"}),u.jsx("button",{onClick:w,className:"flex-1 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-2xl shadow-blue-600/30 transition-all transform hover:scale-105",children:" Connect"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx("button",{onClick:()=>i(!r),className:`px-6 py-2 rounded-full font-semibold text-sm transition-all ${r?"bg-blue-600/30 text-blue-200 border border-blue-400/50":"bg-white/10 text-white/70 border border-white/20"}`,children:r?" Auto-Next ON":" Auto-Next OFF"})}),u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("p",{className:"text-white/70 text-sm",children:["Showing ",l+1," of ",s.length," profiles"]})})]})})]})},y2=()=>{const t=hn(),{user:e}=O.useContext(ys)||{},r=(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null)||e||{name:"Guest User",email:"guest@flinxx.local",picture:null,googleId:"N/A"};console.log(" Profile Component - Loaded User:",r);const[i,s]=O.useState({username:(r==null?void 0:r.name)||"User",age:(r==null?void 0:r.age)||24,country:(r==null?void 0:r.location)||"Unknown",bio:"Welcome to my profile",avatar:"",gender:"Not specified",status:"Looking to chat",email:(r==null?void 0:r.email)||"",displayName:(r==null?void 0:r.name)||"",photoURL:(r==null?void 0:r.picture)||"",googleId:(r==null?void 0:r.googleId)||"N/A"}),[o,l]=O.useState(!0);O.useEffect(()=>{(async()=>{try{if(!(r!=null&&r.email)){console.log(" No user email found, using localStorage data only"),console.log(" Profile from localStorage:",{name:r==null?void 0:r.name,email:r==null?void 0:r.email,picture:r==null?void 0:r.picture,googleId:r==null?void 0:r.googleId}),l(!1);return}const x="https://flinxx-backend.onrender.com";console.log(` Profile Component - Fetching from: ${x}/api/user/profile?email=${r.email}`);const _=await fetch(`${x}/api/user/profile?email=${encodeURIComponent(r.email)}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!_.ok)throw new Error(`Failed to fetch profile: ${_.status}`);const y=await _.json();console.log(" Profile data fetched from backend:",y.profile),y.profile?s(S=>({...S,email:y.profile.email||r.email||S.email,displayName:y.profile.name||r.name||S.displayName,photoURL:y.profile.picture||r.picture||S.photoURL,googleId:r.googleId||y.profile.id||S.googleId})):s(S=>({...S,email:r.email||S.email,displayName:r.name||S.displayName,photoURL:r.picture||S.photoURL,googleId:r.googleId||S.googleId}))}catch(x){console.error(" Error fetching profile:",x),s(_=>({..._,email:r.email||_.email,displayName:r.name||_.displayName,photoURL:r.picture||_.photoURL,googleId:r.googleId||_.googleId}))}finally{l(!1)}})()},[r==null?void 0:r.email]);const[c,h]=O.useState(!1),[p,m]=O.useState(i),w=A=>{const{name:x,value:_}=A.target;m(y=>({...y,[x]:x==="age"?parseInt(_):_}))},k=()=>{s(p),h(!1),console.log("Profile saved:",p)},N=["","","","","","","","",""];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600",children:[u.jsx("div",{className:"relative z-20 w-full bg-gradient-to-r from-purple-700 via-purple-600 to-indigo-700 shadow-lg",children:u.jsxs("div",{className:"px-6 py-6 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:Jf,alt:"Flinxx",className:"w-8 h-8"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Flinxx"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("button",{onClick:()=>t("/"),className:"text-white font-semibold hover:text-white/80 transition",children:" Back"})})]})}),u.jsx("div",{className:"flex-1 px-4 py-12",children:u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 mb-8",children:[u.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.photoURL&&!c?u.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center shadow-2xl shadow-yellow-400/50 mb-6 border-4 border-white/30 overflow-hidden",children:u.jsx("img",{src:i.photoURL,alt:"Profile",className:"w-full h-full object-cover"})}):u.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center text-7xl shadow-2xl shadow-blue-600/50 mb-6 border-4 border-white/30",children:c?u.jsx("div",{className:"grid grid-cols-3 gap-2 p-4",children:N.map(A=>u.jsx("button",{onClick:()=>m(x=>({...x,avatar:A})),className:`text-3xl p-2 rounded-lg transition-all ${p.avatar===A?"bg-white/30 border-2 border-white scale-110":"bg-white/10 hover:bg-white/20"}`,children:A},A))}):i.avatar}),!c&&u.jsx("p",{className:"text-white/70 text-sm",children:"Click Edit to change avatar"})]}),c?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Full Name"}),u.jsx("input",{type:"text",name:"displayName",value:p.displayName,onChange:w,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60",placeholder:"Enter your full name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:p.email,onChange:w,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60",placeholder:"Enter your email"})]}),p.googleId&&p.googleId!=="N/A"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Google ID (Read-only)"}),u.jsx("input",{type:"text",value:p.googleId,disabled:!0,className:"w-full mt-2 bg-white/5 border border-white/20 rounded-xl px-4 py-3 text-white/60 cursor-not-allowed"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Username"}),u.jsx("input",{type:"text",name:"username",value:p.username,onChange:w,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Age"}),u.jsx("input",{type:"number",name:"age",value:p.age,onChange:w,min:"18",max:"100",className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Country"}),u.jsx("input",{type:"text",name:"country",value:p.country,onChange:w,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Gender"}),u.jsxs("select",{name:"gender",value:p.gender,onChange:w,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/60",children:[u.jsx("option",{value:"Male",children:"Male"}),u.jsx("option",{value:"Female",children:"Female"}),u.jsx("option",{value:"Other",children:"Other"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Bio"}),u.jsx("textarea",{name:"bio",value:p.bio,onChange:w,rows:"4",className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:border-white/60 resize-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Status"}),u.jsxs("select",{name:"status",value:p.status,onChange:w,className:"w-full mt-2 bg-white/10 border border-white/30 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/60",children:[u.jsx("option",{value:"Looking to chat",children:"Looking to chat"}),u.jsx("option",{value:"Making friends",children:"Making friends"}),u.jsx("option",{value:"Just browsing",children:"Just browsing"})]})]}),u.jsxs("div",{className:"flex gap-4 pt-6",children:[u.jsx("button",{onClick:()=>{h(!1),m(i)},className:"flex-1 bg-white/20 hover:bg-white/30 text-white font-bold py-3 rounded-xl transition-all",children:"Cancel"}),u.jsx("button",{onClick:k,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105",children:"Save Profile"})]})]}):u.jsxs("div",{className:"space-y-6",children:[i.displayName&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Full Name"}),u.jsx("p",{className:"text-white font-bold text-2xl mt-2",children:i.displayName})]}),i.email&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Email"}),u.jsx("p",{className:"text-white font-normal text-base mt-2",children:i.email})]}),i.googleId&&i.googleId!=="N/A"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Google ID"}),u.jsx("p",{className:"text-white font-mono text-sm mt-2 break-all",children:i.googleId})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Username"}),u.jsx("p",{className:"text-white font-bold text-2xl mt-2",children:i.username})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Age"}),u.jsxs("p",{className:"text-white font-bold text-xl mt-2",children:[i.age," years old"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Country"}),u.jsxs("p",{className:"text-white font-bold text-xl mt-2",children:[" ",i.country]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Gender"}),u.jsx("p",{className:"text-white font-bold text-lg mt-2",children:i.gender})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Bio"}),u.jsx("p",{className:"text-white/90 text-base mt-2",children:i.bio})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-semibold",children:"Status"}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),u.jsx("p",{className:"text-white font-semibold",children:i.status})]})]}),u.jsx("button",{onClick:()=>h(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105",children:" Edit Profile"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Matches"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"24"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Chats"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"8"})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20 text-center",children:[u.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Time Online"}),u.jsx("p",{className:"text-white font-black text-3xl",children:"42h"})]})]})]})})]})},v2=({value:t,onChange:e,maxDate:n})=>{const r=n?`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`:null;return u.jsx("input",{type:"date",value:t||"",onChange:i=>e(i.target.value),max:r,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white text-gray-900",placeholder:"",required:!0})},rp=({user:t,onProfileComplete:e,isOpen:n})=>{const[r,i]=O.useState(""),[s,o]=O.useState(""),[l,c]=O.useState(null),[h,p]=O.useState(null),[m,w]=O.useState(!1),k=hn();O.useEffect(()=>{if(r){const[x,_,y]=r.split("-").map(Number),S=new Date(x,_-1,y),D=new Date;let L=D.getFullYear()-S.getFullYear();const F=D.getMonth()-S.getMonth();(F<0||F===0&&D.getDate()<S.getDate())&&L--,c(L)}else c(null)},[r]);const N=!r||!s||m,A=async x=>{if(x.preventDefault(),!r||!s){p("Please fill in all required fields");return}if(l&&l<18){p("You must be 18+ to use this app");return}w(!0),p(null);try{const _="https://flinxx-backend.onrender.com",y=t.id||t.uid||t.googleId;if(!y)throw new Error("Unable to determine user ID");const S=await fetch(`${_}/api/users/complete-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:y,birthday:r||null,gender:s})}),D=await S.json();if(!S.ok){if(D.code==="UNDERAGE_USER"){p("You must be 18+ to use this app");return}p(D.error||"Failed to save profile");return}console.log(" Profile saved successfully:",D);const L={...t,id:D.user.id,birthday:D.user.birthday,gender:D.user.gender,age:D.user.age,profileCompleted:D.user.profileCompleted,isProfileCompleted:!0};localStorage.setItem("user",JSON.stringify(L)),e&&e(L),setTimeout(()=>{k("/chat?view=home")},500)}catch(_){console.error(" Error saving profile:",_),p(_.message||"Network error. Please try again.")}finally{w(!1)}};return!n||!t?null:u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:u.jsx("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 my-8",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Complete Your Profile"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Just a few more details to get started"})]}),u.jsx("div",{className:"flex justify-center mb-6",children:t.picture||t.photoURL?u.jsx("img",{src:t.picture||t.photoURL,alt:t.name||t.displayName,className:"w-20 h-20 rounded-full object-cover border-4 border-blue-500"}):u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center border-4 border-blue-500",children:u.jsx("span",{className:"text-gray-600 text-2xl",children:""})})}),h&&u.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:u.jsx("p",{className:"text-red-700 text-sm font-medium",children:h})}),u.jsxs("form",{onSubmit:A,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),u.jsx("input",{type:"text",value:t.name||t.displayName||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Birthday ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx(v2,{value:r,onChange:i,maxDate:new Date}),l!==null&&u.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Age: ",u.jsxs("span",{className:l<18?"text-red-600 font-bold":"text-green-600 font-bold",children:[l," years old"]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Gender ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{value:s,onChange:x=>o(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition bg-white text-gray-900 appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},required:!0,children:[u.jsx("option",{value:"",disabled:!0,children:"Select gender"}),u.jsx("option",{value:"male",children:"Male"}),u.jsx("option",{value:"female",children:"Female"}),u.jsx("option",{value:"other",children:"Other"}),u.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),u.jsx("button",{type:"submit",disabled:N,className:`w-full py-3 px-4 rounded-lg font-medium transition mt-6 ${N?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,children:m?u.jsxs("span",{className:"flex items-center justify-center",children:[u.jsx("span",{className:"inline-block animate-spin mr-2",children:""}),"Saving..."]}):"Save Profile"})]}),u.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Your birthday and gender cannot be changed after saving."})]})})})};function w2(){const t=hn(),[e]=pE(),[n,r]=O.useState(!1),[i,s]=O.useState(null);O.useEffect(()=>{try{const l=e.get("token"),c=e.get("user"),h=e.get("error");if(console.log(" Callback - Token:",l),console.log(" Callback - User:",c),h){console.error(" OAuth Error:",h),t("/login?error="+encodeURIComponent(h));return}if(l&&c)try{const p=JSON.parse(c);localStorage.setItem("token",l),localStorage.setItem("authToken",l),localStorage.setItem("user",JSON.stringify(p)),localStorage.setItem("authProvider","google"),localStorage.setItem("userInfo",JSON.stringify(p)),console.log(" User data saved:",p),p.isProfileCompleted?(console.log(" Profile completed, redirecting to chat..."),setTimeout(()=>{t("/chat")},500)):(console.log(" Profile not completed, showing setup modal"),s(p),r(!0))}catch(p){console.error(" Error parsing user data:",p),t("/login?error=invalid_user_data")}else console.error(" Missing token or user data"),t("/login?error=missing_data")}catch(l){console.error(" Callback error:",l),t("/login?error="+encodeURIComponent(l.message))}},[e,t]);const o=l=>{console.log(" Profile completed, redirecting to chat"),r(!1),setTimeout(()=>{t("/chat")},500)};return n&&i?u.jsx(rp,{user:i,onProfileComplete:o,isOpen:!0}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Completing your login..."}),u.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Please wait while we set up your session"})]})})}function _2(){const t=hn(),{setAuthToken:e}=O.useContext(ys)||{},[n]=pE(),[r,i]=O.useState(!1),[s,o]=O.useState(null),[l,c]=O.useState(!0),[h,p]=O.useState(null);O.useEffect(()=>{(async()=>{try{const k=n.get("token");if(!k){p("No authentication token received"),c(!1);return}console.log(" Auth Success - Token received:",k.substring(0,10)+"...");const A=await fetch(`https://flinxx-backend.onrender.com/auth-success?token=${k}`);if(!A.ok)throw new Error(`Failed to fetch user data: ${A.statusText}`);const x=await A.json();if(console.log(" User data received:",x.user.email),x.success&&x.user){const _=x.user;e?(console.log("[AuthSuccess] Storing token and user via AuthContext"),e(k,_)):(console.log("[AuthSuccess] AuthContext not available, saving to localStorage directly"),localStorage.setItem("token",k),localStorage.setItem("authToken",k),localStorage.setItem("user",JSON.stringify(_)),localStorage.setItem("authProvider","google"),localStorage.setItem("userInfo",JSON.stringify(_))),console.log(" User data saved to localStorage"),_.profileCompleted?(console.log(" Profile completed, redirecting to chat"),setTimeout(()=>{t("/chat")},500)):(console.log(" Profile not completed, showing setup modal"),o(_),i(!0))}else p(x.error||"Failed to authenticate")}catch(k){console.error(" Auth Success Error:",k),p(k.message||"An error occurred during authentication")}finally{c(!1)}})()},[n,t,e]);const m=w=>{console.log(" Profile completed, redirecting to chat"),i(!1),setTimeout(()=>{t("/chat")},500)};return h?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white text-2xl font-bold mb-4",children:" Authentication Error"}),u.jsx("p",{className:"text-white/70 text-lg mb-6",children:h}),u.jsx("button",{onClick:()=>t("/login"),className:"px-6 py-2 bg-white text-purple-600 font-bold rounded-lg hover:bg-gray-100",children:"Back to Login"})]})}):r&&s?u.jsx(rp,{user:s,onProfileComplete:m,isOpen:!0}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center px-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Completing your login..."}),u.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Please wait while we set up your session"})]})})}const E2=({children:t})=>{const e=hn(),n=O.useContext(ys),r=n==null?void 0:n.user,i=n==null?void 0:n.isLoading,[s,o]=O.useState(!1),[l,c]=O.useState(null),[h,p]=O.useState(!0);console.log(`
[ProtectedChatRoute]  RENDER CALLED`),console.log("[ProtectedChatRoute]   - isLoading:",h),console.log("[ProtectedChatRoute]   - showProfileSetup:",s),console.log("[ProtectedChatRoute]   - authLoading:",i),console.log("[ProtectedChatRoute]   - authUser:",r?r.email:"null"),O.useEffect(()=>{console.log(`

 [ProtectedChatRoute] `),console.log(" [ProtectedChatRoute] EFFECT RUNNING - PROFILE CHECK"),console.log(" [ProtectedChatRoute] "),console.log(" [ProtectedChatRoute] Effect dependencies changed:"),console.log(" [ProtectedChatRoute]   - authLoading:",i),console.log(" [ProtectedChatRoute]   - authUser:",r?r.email:"null");try{if(i===!0){console.log(" [ProtectedChatRoute]  WAITING - AuthContext is still initializing (isLoading=true)"),p(!0);return}if(i===void 0){console.log(" [ProtectedChatRoute]  WAITING - AuthContext loading state is undefined"),p(!0);return}if(console.log(" [ProtectedChatRoute]  AuthContext finished loading (isLoading=false)"),!r){console.log(" [ProtectedChatRoute]  AuthContext finished loading but NO USER found"),console.log(" [ProtectedChatRoute] Redirecting to /login"),p(!1),e("/login",{replace:!0});return}console.log(" [ProtectedChatRoute]  AuthContext loaded with user:",r.email),console.log(" [ProtectedChatRoute] authUser object:",{id:r.id,email:r.email,profileCompleted:r.profileCompleted,birthday:r.birthday,gender:r.gender}),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted type:",typeof r.profileCompleted),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted value:",r.profileCompleted),console.log(" [ProtectedChatRoute]   - authUser.profileCompleted === true?",r.profileCompleted===!0);const w=localStorage.getItem("user");if(console.log(" [ProtectedChatRoute] Checking localStorage:"),console.log(" [ProtectedChatRoute]   - user key exists:",!!w),w)try{const x=JSON.parse(w);console.log(" [ProtectedChatRoute] localStorage user:",{id:x.id,email:x.email,profileCompleted:x.profileCompleted}),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted type:",typeof x.profileCompleted),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted value:",x.profileCompleted),console.log(" [ProtectedChatRoute]   - localStorage.profileCompleted === true?",x.profileCompleted===!0)}catch(x){console.error("[ProtectedChatRoute] Failed to parse localStorage user:",x)}else console.log("[ProtectedChatRoute]  No user in localStorage");c(r),console.log(`
 [ProtectedChatRoute] PROFILE COMPLETION CHECK:`);const k=r==null?void 0:r.profileCompleted;console.log(" [ProtectedChatRoute]   Source 1 (AuthContext):"),console.log(" [ProtectedChatRoute]     authUser.profileCompleted =",k),console.log(" [ProtectedChatRoute]     typeof =",typeof k),console.log(" [ProtectedChatRoute]     === true?",k===!0);let N=null;w?(N=JSON.parse(w).profileCompleted,console.log(" [ProtectedChatRoute]   Source 2 (localStorage):"),console.log(" [ProtectedChatRoute]     localStorage.profileCompleted =",N),console.log(" [ProtectedChatRoute]     typeof =",typeof N),console.log(" [ProtectedChatRoute]     === true?",N===!0)):console.log(" [ProtectedChatRoute]   Source 2 (localStorage): not available");const A=k===!0||N===!0;console.log(`
 [ProtectedChatRoute] FINAL DECISION:`),console.log(" [ProtectedChatRoute]   profileCompletedAuth === true?",k===!0),console.log(" [ProtectedChatRoute]   profileCompletedStorage === true?",N===!0),console.log(" [ProtectedChatRoute]   isProfileComplete (final):",A),A?(console.log(`
 [ProtectedChatRoute]  DECISION: Profile IS completed`),console.log(` [ProtectedChatRoute]  SHOWING Chat page
`)):(console.log(`
 [ProtectedChatRoute]  DECISION: Profile NOT completed`),console.log(` [ProtectedChatRoute]  SHOWING ProfileSetupModal
`),o(!0)),p(!1)}catch(w){console.error("[ProtectedChatRoute]  ERROR in profile check:",w),console.error("[ProtectedChatRoute] Stack:",w.stack),p(!1),e("/login",{replace:!0})}},[e,r,i]);const m=w=>{console.log("Profile completed:",w),o(!1),c(w)};return h?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-indigo-600 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}),u.jsx("p",{className:"mt-4 text-white text-lg font-semibold",children:"Loading..."})]})}):u.jsxs(u.Fragment,{children:[s&&l&&u.jsx(rp,{user:l,onProfileComplete:m,isOpen:!0}),!s&&t]})};function I2(){return u.jsx(dP,{children:u.jsx(l1,{children:u.jsx("div",{style:{width:"100%",minHeight:"100vh",display:"flex",flexDirection:"column"},children:u.jsxs(i1,{children:[u.jsx(Nn,{path:"/",element:u.jsx(u1,{})}),u.jsx(Nn,{path:"/login",element:u.jsx(p1,{})}),u.jsx(Nn,{path:"/callback",element:u.jsx(w2,{})}),u.jsx(Nn,{path:"/auth-success",element:u.jsx(_2,{})}),u.jsx(Nn,{path:"/chat",element:u.jsx(E2,{children:u.jsx(m2,{})})}),u.jsx(Nn,{path:"/matching",element:u.jsx(g2,{})}),u.jsx(Nn,{path:"/profile",element:u.jsx(y2,{})}),u.jsx(Nn,{path:"*",element:u.jsx(x2,{})})]})})})})}const x2=()=>u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-5xl font-bold text-indigo-400 mb-4",children:"404"}),u.jsx("p",{className:"text-gray-300 mb-8",children:"Page not found"}),u.jsx("a",{href:"/",className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white font-semibold",children:"Go Home"})]})});function S2(){return u.jsx("div",{style:{width:"100%",height:"100vh"},children:u.jsx(I2,{})})}Yu.createRoot(document.getElementById("root")).render(u.jsx(Wo.StrictMode,{children:u.jsx(RS,{clientId:"373922547944-gm8fgpgjebnraruomkpajoa7s3nqups0.apps.googleusercontent.com",onScriptProps:{async:!0,defer:!0,nonce:"YOUR_NONCE_VALUE"},children:u.jsx(uP,{children:u.jsx(S2,{})})})}));
//# sourceMappingURL=index-Ggh_78OD.js.map
